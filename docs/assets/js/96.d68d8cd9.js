(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{298:function(t,e,n){"use strict";n.r(e);var a=n(0),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"_1-virtualbox-network-mode"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-virtualbox-network-mode"}},[t._v("#")]),t._v(" 1.Virtualbox network mode")]),t._v(" "),n("p",[t._v("https://www.virtualbox.org/manual/ch06.html")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("Mode")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("VM->Host")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("VM<-Host")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("VM1<->VM2")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("VM->Net/LAN")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("VM<-Net/LAN")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("Host-only")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("+")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("+")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("+")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")])]),t._v(" "),n("tr",[n("td",[t._v("Internal")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("+")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")])]),t._v(" "),n("tr",[n("td",[t._v("Bridged")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("+")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("+")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("+")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("+")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("+")])]),t._v(" "),n("tr",[n("td",[t._v("NAT")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("+")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("PortForward")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("+")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("PortForward")])]),t._v(" "),n("tr",[n("td",[t._v("NATservice")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("+")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("PortForward")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("+")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("+")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("PortForward")])])])]),t._v(" "),n("h3",{attrs:{id:"_1-1-nat-network"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-nat-network"}},[t._v("#")]),t._v(" 1.1 NAT Network.")]),t._v(" "),n("p",[t._v("A NAT network is a type of internal network that allows outbound connections. See Section 6.4, “Network Address Translation Service”.")]),t._v(" "),n("p",[t._v("有虚拟路由，所以guest可以直接通过10.0.2.2:"),n("PORT",[t._v("访问host的服务,b包括vpn服务等\nPort forwarding for NAT:\nhttps://www.virtualbox.org/manual/ch06.html#natforward")])],1),t._v(" "),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/linux/vm_network01.png",alt:""}})]),t._v(" "),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/linux/vm_network02.png",alt:""}}),t._v(" "),n("img",{attrs:{src:"/docs/docs_image/software/linux/vm_network03.png",alt:""}})]),t._v(" "),n("p",[t._v("netstat -aon | findstr 'PORT'\ntasklist | findstr 'PID'\ntasklist /fi \"pid eq 4444\"")]),t._v(" "),n("p",[t._v('"c:\\Program Files\\Oracle\\VirtualBox\\VBoxManage" modifyvm Test_centos7 --natpf1 "guestssh,tcp,,2222,,22"\nBut failed on the second rule??? "c:\\Program Files\\Oracle\\VirtualBox\\VBoxManage" modifyvm Test_centos7 --natpf2 "guestkafka,tcp,,9092,,9092", work around: add in VB Network settings\n'),n("img",{attrs:{src:"/docs/docs_image/software/linux/vm_network04.png",alt:""}})]),t._v(" "),n("p",[t._v("?#No network access for NAT, change dns settings, for centos:")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("vim /etc/sysconfig/network-scripts/ifcfg-enp0s3\n\tDNS1=8.8.8.8\n\tONBOOT=yes\n")])])]),n("h3",{attrs:{id:"_1-2-bridged-networking"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-bridged-networking"}},[t._v("#")]),t._v(" 1.2 Bridged networking.")]),t._v(" "),n("p",[t._v("This is for more advanced networking needs, such as network simulations and running servers in a guest. When enabled, Oracle VM VirtualBox connects to one of your installed network cards and exchanges network packets directly, circumventing your host operating system's network stack.\n"),n("img",{attrs:{src:"/docs/docs_image/software/linux/vm_network05.png",alt:""}})]),t._v(" "),n("h3",{attrs:{id:"_1-3-internal-networking"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-internal-networking"}},[t._v("#")]),t._v(" 1.3 Internal networking.")]),t._v(" "),n("p",[t._v("This can be used to create a different kind of software-based network which is visible to selected virtual machines, but not to applications running on the host or to the outside world.\n"),n("img",{attrs:{src:"/docs/docs_image/software/linux/vm_network06.png",alt:""}})]),t._v(" "),n("h3",{attrs:{id:"_1-4-host-only-networking"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-host-only-networking"}},[t._v("#")]),t._v(" 1.4 Host-only networking.")]),t._v(" "),n("p",[t._v("This can be used to create a network containing the host and a set of virtual machines, without the need for the host's physical network interface. Instead, a virtual network interface, similar to a loopback interface, is created on the host, providing connectivity among virtual machines and the host.")]),t._v(" "),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/linux/vm_network07.png",alt:""}})]),t._v(" "),n("p",[t._v("?#host-only模式下客户机vm无法访问位于host宿主机上面的web服务，比如192.168.207.1:8080\n原因：不像在NAT和bridge模式下有virtual route虚拟路由，host only是直接连接的，所以宿主机访问主机如同访问外网(没有经过虚拟路由)，所以会受到宿主机上面的一些权限限制，比如\n可以看到下图，10.0.2.2就是NAT模式的虚拟路由，所以可以直接通过这个路由访问宿主机host的服务\n"),n("img",{attrs:{src:"/docs/docs_image/software/linux/vm_network08.png",alt:""}})]),t._v(" "),n("p",[t._v("Ping不通：如果宿主机是win10，文件与打印机共享开启")]),t._v(" "),n("p",[t._v("Port telnet不通:如果宿主机是win10，Turn Windows Defender Firewall off")]),t._v(" "),n("p",[t._v("Video::NAT, Bridged and Internal Networking\nhttps://www.youtube.com/watch?v=iEj42l4otNY\nhttps://www.youtube.com/watch?v=cDF4X7RmV4Q\nhttps://www.youtube.com/watch?v=VWKZqa2RjpA")]),t._v(" "),n("h2",{attrs:{id:"_2-build-local-lab-network"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-build-local-lab-network"}},[t._v("#")]),t._v(" 2 Build local Lab network")]),t._v(" "),n("h3",{attrs:{id:"_2-1-linux-configuration"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-linux-configuration"}},[t._v("#")]),t._v(" 2.1 Linux configuration")]),t._v(" "),n("p",[t._v("Golden trace rule:\nhttps://forums.kali.org/showthread.php?20846-Troubleshooting-Internet-Network-Access")]),t._v(" "),n("p",[t._v("Networkmanager configuration\nhttps://wiki.debian.org/NetworkConfiguration\nKali network configuration\nThe default network configuration relies on DHCP to obtain an IP address, DNS server, and gateway\nhttps://kali.training/topic/configuring-the-network/\nhttp://www.solutionsatexperts.com/ip-address-configuration-in-kali-linux/")]),t._v(" "),n("p",[t._v("How to configure Network Adapter in Kali Linux using Command Line Interface https://www.youtube.com/watch?v=JL2_fnzCZbE\nAllow-hotplug ?")]),t._v(" "),n("p",[t._v("Restart network after change config\nhttps://www.cyberciti.biz/faq/linux-restart-network-interface/\nreload /etc/resolv.conf\nhttps://askubuntu.com/questions/224966/how-do-i-get-resolvconf-to-regenerate-resolv-conf-after-i-change-etc-network-in")]),t._v(" "),n("p",[t._v("常用命令：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('Ifconfig\nIp route show\nip a show eth0\nRoute -n\nIp addr\nIp route\n\ncat /etc/network/interfaces\n\necho "iface eth0 inet dhcp" >> /etc/network/interfaces\n/etc/init.d/networking restart\n\nifdown eth0\nifup eth0\ndhclient eth0\nOr manually::\nIfconfig eth0 192.168.1.1 netmask 255.255.255.0 up\n\troute add default gw 192.168.0.1 eth0\n\tip route add default via 192.168.0.1 dev eth0\n\nsudo service network-manager restart \n\n')])])]),n("h3",{attrs:{id:"_2-2-基于network类型构建复杂的环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-基于network类型构建复杂的环境"}},[t._v("#")]),t._v(" 2.2 基于network类型构建复杂的环境")]),t._v(" "),n("p",[t._v("https://www.youtube.com/watch?v=AiWRmMzwwJM\nhttps://sandilands.info/sgordon/building-internal-network-virtualbox\nhttps://blog.pythian.com/test-lab-using-virtualbox-nat-networking/\nhttps://vorkbaard.nl/set-up-a-testlab-in-virtualbox-with-a-virtual-lan/\n'Bridged' and 'Host Only' network settings in Virtualbox https://superuser.com/questions/1352678/bridged-and-host-only-network-settings-in-virtualbox-advice-please")]),t._v(" "),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/linux/vm_network09.png",alt:""}})]),t._v(" "),n("p",[t._v("https://askubuntu.com/questions/113604/how-to-run-virtualbox-on-bridged-and-host-only-networks\nhttp://christophermaier.name/2010/09/01/host-only-networking-with-virtualbox/")]),t._v(" "),n("p",[t._v("VirtualBox: two network interfaces (NAT and host-only ones) https://unix.stackexchange.com/questions/37122/virtualbox-two-network-interfaces-nat-and-host-only-ones-in-a-debian-guest-on\nImages\nhttps://developer.microsoft.com/en-us/microsoft-edge/tools/vms")]),t._v(" "),n("h2",{attrs:{id:"_3-troubleshooting"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-troubleshooting"}},[t._v("#")]),t._v(" 3 troubleshooting")]),t._v(" "),n("p",[t._v("#bridged mode not assign ip address and route\nTried: dhclient eth0\nhttps://unix.stackexchange.com/questions/174573/dhcp-kali-linux\nHavne’t try this manual method::ip route add default via ip-of-router-on-local-network dev enp0s3 https://superuser.com/questions/1075988/virtualbox-bridged-network-is-unreachable")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("less /var/logs/messages \nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0124] device (eth0): carrier: link connected\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0127] device (eth1): carrier: link connected\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0129] device (eth0): state change: unavailable -> disconnected (reason 'carrier-changed', sys-iface-state: 'managed')\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0147] device (eth1): state change: unavailable -> disconnected (reason 'carrier-changed', sys-iface-state: 'managed')\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0167] modem-manager: ModemManager available\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0171] policy: auto-activating connection 'Wired connection 1' (36cfa611-f6b6-4a31-9c9e-468d2df788be)\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0174] policy: auto-activating connection 'Wired connection 1' (36cfa611-f6b6-4a31-9c9e-468d2df788be)\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0178] device (eth0): Activation: starting connection 'Wired connection 1' (36cfa611-f6b6-4a31-9c9e-468d2df788be)\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0178] device (eth0): state change: disconnected -> deactivating (reason 'new-activation', sys-iface-state: 'managed')\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0180] manager: NetworkManager state is now DISCONNECTING\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0182] device (eth1): Activation: starting connection 'Wired connection 1' (36cfa611-f6b6-4a31-9c9e-468d2df788be)\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0184] device (eth1): state change: disconnected -> prepare (reason 'none', sys-iface-state: 'managed')\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0185] manager: NetworkManager state is now CONNECTING\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0187] device (eth0): state change: deactivating -> disconnected (reason 'new-activation', sys-iface-state: 'managed')\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0210] device (eth1): state change: prepare -> config (reason 'none', sys-iface-state: 'managed')\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0229] device (eth1): state change: config -> ip-config (reason 'none', sys-iface-state: 'managed')\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.0440] dhcp4 (eth1): activation: beginning transaction (timeout in 45 seconds)\nApr  1 03:05:04 kali NetworkManager[431]: <info>  [1554102304.1160] dhcp4 (eth1): dhclient started with pid 515\nApr  1 03:05:05 kali NetworkManager[431]: <info>  [1554102305.3910] dhcp4 (eth1):   address 192.168.99.100\nApr  1 03:05:05 kali NetworkManager[431]: <info>  [1554102305.3911] dhcp4 (eth1):   plen 24 (255.255.255.0)\nApr  1 03:05:05 kali NetworkManager[431]: <info>  [1554102305.3911] dhcp4 (eth1):   lease time 1200\nApr  1 03:05:05 kali NetworkManager[431]: <info>  [1554102305.3911] dhcp4 (eth1): state changed unknown -> bound\nApr  1 03:05:05 kali NetworkManager[431]: <info>  [1554102305.3927] device (eth1): state change: ip-config -> ip-check (reason 'none', sys-iface-state: 'managed')\nApr  1 03:05:05 kali NetworkManager[431]: <info>  [1554102305.3937] device (eth1): state change: ip-check -> secondaries (reason 'none', sys-iface-state: 'managed')\nApr  1 03:05:05 kali NetworkManager[431]: <info>  [1554102305.3941] device (eth1): state change: secondaries -> activated (reason 'none', sys-iface-state: 'managed')\nApr  1 03:05:05 kali NetworkManager[431]: <info>  [1554102305.3947] manager: NetworkManager state is now CONNECTED_LOCAL\nApr  1 03:05:05 kali NetworkManager[431]: <info>  [1554102305.4044] device (eth1): Activation: successful, device activated.\nApr  1 03:05:05 kali NetworkManager[431]: <info>  [1554102305.4072] manager: startup complete\n")])])]),n("p",[t._v("dhclient eth0")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("Apr  1 03:09:49 kali NetworkManager[431]: <info>  [1554102589.2543] keyfile: add connection /run/NetworkManager/system-connections/eth0.nmconnection (effc3b34-06a5-49dd-886b-d21223855eac,\"eth0\")\nApr  1 03:09:49 kali NetworkManager[431]: <info>  [1554102589.2623] device (eth0): Activation: starting connection 'eth0' (effc3b34-06a5-49dd-886b-d21223855eac)\nApr  1 03:09:49 kali NetworkManager[431]: <info>  [1554102589.2904] device (eth0): state change: disconnected -> prepare (reason 'none', sys-iface-state: 'external')\nApr  1 03:09:49 kali NetworkManager[431]: <info>  [1554102589.2911] device (eth0): state change: prepare -> config (reason 'none', sys-iface-state: 'external')\nApr  1 03:09:49 kali NetworkManager[431]: <info>  [1554102589.2913] device (eth0): state change: config -> ip-config (reason 'none', sys-iface-state: 'external')\nApr  1 03:09:49 kali NetworkManager[431]: <info>  [1554102589.2915] device (eth0): state change: ip-config -> ip-check (reason 'none', sys-iface-state: 'external')\nApr  1 03:09:49 kali NetworkManager[431]: <info>  [1554102589.2920] device (eth0): state change: ip-check -> secondaries (reason 'none', sys-iface-state: 'external')\nApr  1 03:09:49 kali NetworkManager[431]: <info>  [1554102589.2922] device (eth0): state change: secondaries -> activated (reason 'none', sys-iface-state: 'external')\nApr  1 03:09:49 kali NetworkManager[431]: <info>  [1554102589.3028] device (eth0): Activation: successful, device activated.\nApr  1 03:09:49 kali NetworkManager[431]: <info>  [1554102589.3036] manager: NetworkManager state is now CONNECTED_GLOBAL\n")])])]),n("p",[t._v("?#Can access internet but cannot ping\nFirewall setting\nOutbound port\nhttps://askubuntu.com/questions/608194/have-internet-connection-but-cant-ping-external-sites\nhttps://networkengineering.stackexchange.com/questions/37896/ping-port-number")]),t._v(" "),n("p",[t._v("?#eth0 not found or not configured simply restart vm\nhttps://askubuntu.com/questions/1060980/eth0-not-configured-but-it-was-working-earlier")]),t._v(" "),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/linux/vm_network03.png",alt:""}})])])}),[],!1,null,null,null);e.default=r.exports}}]);
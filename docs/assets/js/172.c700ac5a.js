(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{622:function(e,a,s){"use strict";s.r(a);var t=s(65),r=Object(t.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h2",{attrs:{id:"basic"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#basic"}},[e._v("#")]),e._v(" Basic")]),e._v(" "),s("p",[e._v("查看命令类型:\ttype 'cmd'")]),e._v(" "),s("p",[e._v("查看系统：\tcat /etc/os-release")]),e._v(" "),s("p",[e._v("man")]),e._v(" "),s("p",[e._v("tldr:\thttps://tldr.sh/")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm install -g tldr \n或者\npip install tldr\n\ncd /usr/bin\nsudo ln -s /home/lyhistory/.local/bin/tldr tldr (/usr/bin/tldr)\n或者修改.bashrc\nexport PATH=$PATH:$HOME/.local/bin\n")])])]),s("h2",{attrs:{id:"user-and-groups"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-and-groups"}},[e._v("#")]),e._v(" user and groups")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("查看用户：\nid username\nW\nWhoami\ngroups\nvim /etc/passwd\ncut -d: -f1 /etc/passwd\n\n用户组：\ngroups username\nless /etc/group\ngroupadd groupname\ngroupdel groupname\nsu username #切换用户 \n添加新用户： \nuseradd username\npasswd username\nusermod -g groupname username -d /home/test\nuseradd -g groupname username -d /home/test\nuserdel username\ngpasswd -d groupname username\n\n/etc/sudoers\nvisudo\n\n---------------------------------------------------------------------------------------\n--- ubuntu\n---------------------------------------------------------------------------------------\nEnable SUDO:\n\tBy default sudo is not installed on Debian, but you can install it. First enable su-mode:\n\tYou can use sudo -i which will ask for your password. You need to be in the sudoers group for that or have an entry in the /etc/sudoers file.\n\tAnother way is the command su - which will ask for the password of root, but accomplish the same.\n\tsu -\n\tapt-get install sudo -y\n\t\n    usermod -aG sudo yourusername\n    Make sure your sudoers file have sudo group added. Run:\n    visudo to modify sudoers file and add following line into it (if it is missing):\n\n    # Allow members of group sudo to execute any command\n    %sudo   ALL=(ALL:ALL) ALL\n    OR\n    chmod u+w /etc/sudoers\n    username ALL=(ALL) ALL\n    chmod u-w /etc/sudoers\n\nadduser username \nsudo passwd USERNAME\nsudo usermod -aG sudo username\nsu - username\nexit;\nsudo useradd xiaofeng -s /bin/bash -m\nusermod -aG docker peter\n\n\n---------------------------------------------------------------------------------------\n--- centos\n---------------------------------------------------------------------------------------\nEnable SUDO:\n    By default, on CentOS, members of the wheel group have sudo privileges.\n    https://support.hostway.com/hc/en-us/articles/115001509750-How-To-Install-and-Configure-Sudo\n\nuseradd -s /bin/bash -m -G wheel username\nsudo usermod -aG wheel username\nWheel group https://www.centos.org/forums/viewtopic.php?t=63386\n\n\nssh-keygen \nor\nssh-keygen -t rsa\n\nchmod 400 id_rsa\n\nssh-copy-id username@serveripOrhostname\nor \nssh-copy-id -i ~/.ssh/id_rsa.pub username@serveripOrhostname\n\nscp ~/.ssh/id_rsa grs@adp116:~/.ssh\n\nssh-keygen -R ip/hostname\n\n")])])]),s("h2",{attrs:{id:"string-operation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#string-operation"}},[e._v("#")]),e._v(" String Operation")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("多行变成一行，逗号隔开（去掉最后一个逗号）\ntr '\\n' ',' < input.txt | sed 's/,$/\\n/'\n")])])]),s("h2",{attrs:{id:"file-operation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#file-operation"}},[e._v("#")]),e._v(" File Operation")]),e._v(" "),s("h3",{attrs:{id:"vim"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vim"}},[e._v("#")]),e._v(" vim")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("\n\n")])])]),s("h3",{attrs:{id:"transfer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transfer"}},[e._v("#")]),e._v(" transfer")]),e._v(" "),s("p",[e._v("include hidden file: add the dot in the ending")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("scp -rp src/. user@server:dest/\n")])])]),s("h3",{attrs:{id:"files-directory"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#files-directory"}},[e._v("#")]),e._v(" files&directory")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("创建文件夹\ninstall -d /path/to/targetfolder\n")])])]),s("h3",{attrs:{id:"find"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#find"}},[e._v("#")]),e._v(" FIND")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('find . -size +1G -ls | sort -k7n\n\nfind / -type f -name "mysql-connector-java-5.1.24.jar" -print\n\nfind / -type f -name "Locations.xml" -print\n\n//kafka/logs下面有很多日志，格式为：[server|controller].log.YYYY-MM-DD-0X，如果想大概知道有哪几类文件，可以：\nfind . -type f -maxdepth 1 -exec basename "{}" \\; | cut -d\'.\' -f1 | sort -u\n\nfind zookeeper/ -group root\n\nfind ./* -type f -follow -name \\*.log -daystart -mtime +1 -print0 | xargs -0 rm\n\nfind and delete::\nhttps://unix.stackexchange.com/questions/167823/finds-exec-rm-vs-delete\nfind / -name ".DS_Store" -exec rm {} \\;\nfind / -name .DS_Store -delete\nA common method for avoiding the overhead of spawning an external process for each matched file is:\nfind / -name .DS_Store -print0 | xargs -0 rm\nDO NOT do this: find / -delete -name .DS_Store\n\n')])])]),s("h3",{attrs:{id:"grep-zgrep"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#grep-zgrep"}},[e._v("#")]),e._v(" GREP/zgrep")]),e._v(" "),s("p",[e._v("https://www.cyberciti.biz/faq/howto-use-grep-command-in-linux-unix/")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('grep/zgrep "pattern" file/file.gz\n\ngrep -r -l "eth[0-9]" /var/log/ #file name only\ngrep -r -H "eth[0-9]" /var/log/ #print each match and filename\n\ngrep -H -r "syscript" ~ | cut -d: -f1 | sort -u\n\ngrep -H -r "create_db.sh" ~ | cut -d: -f1 | sort -u\n\ngrep -H -r "/apps/lib" ~ | cut -d: -f1 | sort -u\n\n\n')])])]),s("h4",{attrs:{id:"batch-replace-string-in-folder"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#batch-replace-string-in-folder"}},[e._v("#")]),e._v(" batch replace string in folder")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("grep -rl oldtext . | xargs sed -i 's/oldtext/newtext/g'\n")])])]),s("h3",{attrs:{id:"split"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#split"}},[e._v("#")]),e._v(" split")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("split -a 4 -d -l 20000 2021-02-15_test.log ./test/test_\n")])])]),s("h2",{attrs:{id:"du-df"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#du-df"}},[e._v("#")]),e._v(" du/df")]),e._v(" "),s("p",[e._v("由一次磁盘告警引发的血案 | 你知道 du 和 ls 区别吗？")]),e._v(" "),s("p",[e._v("https://mp.weixin.qq.com/s/BMeSEcQbhC4dcH-oYEtE-g")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("df -h\ndu -sh ./*\n")])])]),s("h2",{attrs:{id:"crontab"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#crontab"}},[e._v("#")]),e._v(" crontab")]),e._v(" "),s("p",[s("code",[e._v("/etc/crontab")]),e._v("是系统级别的crontab，系统的设置\n"),s("code",[e._v("crontab -e")]),e._v("是用户级的crontab\nlinux下实际保存在"),s("code",[e._v("/var/spool/cron/username")]),e._v("中")]),e._v(" "),s("p",[e._v("crontab是分用户的，默认为当前用户，可以通过-u指定用户")]),e._v(" "),s("p",[e._v("日志")]),e._v(" "),s("p",[e._v("https://unix.stackexchange.com/questions/207/where-are-cron-errors-logged")]),e._v(" "),s("p",[e._v("/var/log/cron")]),e._v(" "),s("p",[e._v("/var/spool/mail/root")]),e._v(" "),s("p",[e._v("邮件：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('MAILTO=my.offsite.email@example.org\n00 15 * * *  echo "Just testing if crond sends email"\n')])])]),s("p",[e._v("You (trade) are not allowed to access to (crontab) because of pam configuration.")]),e._v(" "),s("p",[e._v("问题排查思路：")]),e._v(" "),s("p",[e._v("检查crond权限。\n1、cat /etc/corn.deny，文件是空的。\n2、ll /usr/bin/crontab，具备S权限位，正常。")]),e._v(" "),s("p",[e._v("检查PAM模块。\ncat /etc/pam.d/crond")]),e._v(" "),s("p",[e._v("查看系统日志\ncat /var/log/secure")]),e._v(" "),s("p",[e._v("Jan 24 19:20:01 sghc1-prod-mdapi-v01 crond[19391]: pam_unix(crond:account): expired password for user test (password aged)\n设置永不过期")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# chage -l test\n# chage -M 99999 test\n")])])]),s("h2",{attrs:{id:"history"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#history"}},[e._v("#")]),e._v(" history")]),e._v(" "),s("p",[e._v("history with datetime")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('~/.bashrc:\nexport HISTTIMEFORMAT="%d/%m/%y %H:%M "\n')])])]),s("p",[e._v("Delete your Linux history without leaving a trace!")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("for i in {1..N}; do history -d START_NUM; done\n\n#Delete your Linux history without leaving a trace!\nhistory -d $((HISTCMD-1)) && history -d [line entry number]\n\n\n")])])]),s("h2",{attrs:{id:"remote"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#remote"}},[e._v("#")]),e._v(" remote")]),e._v(" "),s("p",[e._v("ssh rsh")]),e._v(" "),s("p",[e._v("https://blog.csdn.net/jiangyu1013/article/details/79721053")])])}),[],!1,null,null,null);a.default=r.exports}}]);
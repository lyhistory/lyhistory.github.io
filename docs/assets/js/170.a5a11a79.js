(window.webpackJsonp=window.webpackJsonp||[]).push([[170],{622:function(s,e,t){"use strict";t.r(e);var a=t(65),o=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"dist-system-log"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dist-system-log"}},[s._v("#")]),s._v(" dist system log")]),s._v(" "),t("p",[s._v("https://unix.stackexchange.com/questions/88744/what-is-the-centos-equivalent-of-var-log-syslog-on-ubuntu")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("ubuntu")]),s._v(" "),t("p",[s._v("/var/log/syslog")]),s._v(" "),t("p",[s._v("/var/log/auth.log")]),s._v(" "),t("p",[s._v("dmesg and /var/log/kern.log")]),s._v(" "),t("p",[s._v("https://stackoverflow.com/questions/11412950/difference-between-dmesg-and-var-log-kern-log")])]),s._v(" "),t("li",[t("p",[s._v("centos")]),s._v(" "),t("p",[s._v("/var/log/messages")]),s._v(" "),t("p",[s._v("/var/log/secure")])])]),s._v(" "),t("p",[s._v("/var/log/messsages-20210415 可能包含几天前比如0401的内容，因为会archive")]),s._v(" "),t("h2",{attrs:{id:"common-system-log"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#common-system-log"}},[s._v("#")]),s._v(" common system log")]),s._v(" "),t("p",[s._v("dmesg -T")]),s._v(" "),t("p",[s._v("journalctl -f")]),s._v(" "),t("p",[s._v("https://unix.stackexchange.com/questions/314985/combining-tail-journalctl")]),s._v(" "),t("h2",{attrs:{id:"查看-thread-dump"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看-thread-dump"}},[s._v("#")]),s._v(" 查看 thread dump")]),s._v(" "),t("p",[s._v("https://blog.csdn.net/liwenxia626/article/details/80791704")]),s._v(" "),t("p",[s._v("通过top -Hp "),t("PID",[s._v("可以查看该进程下各个线程的cpu使用情况；")])],1),s._v(" "),t("p",[s._v("对于JAVA程序可以：")]),s._v(" "),t("p",[s._v("jstack -F <PID/Thread ID>")]),s._v(" "),t("h2",{attrs:{id:"案例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#案例"}},[s._v("#")]),s._v(" 案例")]),s._v(" "),t("h3",{attrs:{id:"java程序莫名其妙-自动关闭-who-killed-java-process"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#java程序莫名其妙-自动关闭-who-killed-java-process"}},[s._v("#")]),s._v(" java程序莫名其妙“自动关闭” who killed java process?")]),s._v(" "),t("p",[s._v("https://qzy.im/blog/2020/07/oom-killer-killed-java-process-in-linux/")]),s._v(" "),t("p",[s._v("https://askubuntu.com/questions/709336/how-to-find-out-why-process-was-killed-on-server")]),s._v(" "),t("p",[s._v("没有找到 hs_err_pidXXX 文件")]),s._v(" "),t("p",[t("code",[s._v("dmesg -T | grep java")]),s._v(" 也没有任何信息")]),s._v(" "),t("p",[s._v("https://stackoverflow.com/questions/726690/what-killed-my-process-and-why")]),s._v(" "),t("p",[s._v("https://superuser.com/questions/606448/how-to-discover-what-is-killing-a-process")]),s._v(" "),t("p",[s._v("free -h")]),s._v(" "),t("p",[s._v("看起来内存和swap都很不够")]),s._v(" "),t("p",[s._v("未尝试：")]),s._v(" "),t("p",[s._v("debug crashed application")]),s._v(" "),t("p",[s._v("https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/developer_guide/debugging-crashed-application")]),s._v(" "),t("p",[s._v("最后仍然是根据/var/log/messages的错误信息关掉了crontab，从而解决")]),s._v(" "),t("p",[s._v('++ 又一次遇到，这次日志里面是：\nJun 13 19:15:12 sgsg3-clear-v01 kernel: type=1701 audit(1655118912.145:16370687): auid=1000 uid=1000 gid=500 ses=2267378 subj=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023 pid=30986 comm="java" reason="memory violation" sig=6\nmemory violation，不是程序本身有问题就是jvm有问题或者其他os问题，'),t("s",[s._v("只能对java程序加debug参数进行记录")]),s._v(" 发现java crash之后会在程序路径下生产一个core.XXX文件")]),s._v(" "),t("h3",{attrs:{id:"linux-system-time-temporally-jumps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-system-time-temporally-jumps"}},[s._v("#")]),s._v(" Linux system time temporally jumps")]),s._v(" "),t("p",[s._v("某交易系统时间瞬间（几百毫秒）加了16个小时，造成某条交易信息时间变成盘后，然后触发系统自动闭盘，然后又迅速恢复正常\ntemporally jump / sudden leap / time sudden shift\nhttps://unix.stackexchange.com/questions/460983/linux-system-time-temporally-jumps")]),s._v(" "),t("h3",{attrs:{id:"web-server-nginx-not-responding"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#web-server-nginx-not-responding"}},[s._v("#")]),s._v(" web server nginx not responding?")]),s._v(" "),t("p",[s._v("可以ping，可以telnet 80端口，但是网站无法访问，之前遇到过一次，是因为路由器或交换机等设备的网络防火墙设置问题，")]),s._v(" "),t("p",[s._v("但是这次是直接在该服务器本机上进行 curl http://127.0.0.1 都没有反应（nginx是监听的0.0.0.0:80），/var/log/messages里面有报错信息，跟一个crontab调用的python有关，猜测是因为crontab由于错误消耗了内存或cpu，导致nginx资源被占用而死掉，重启nginx恢复")])])}),[],!1,null,null,null);e.default=o.exports}}]);
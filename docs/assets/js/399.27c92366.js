(window.webpackJsonp=window.webpackJsonp||[]).push([[399],{829:function(t,a,n){"use strict";n.r(a);var s=n(65),e=Object(s.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[n("a",{attrs:{href:"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-documentation",target:"_blank",rel:"noopener noreferrer"}},[t._v("official documents"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("自动配置、起步依赖、Actuator、命令行界面(CLI) 是Spring Boot最重要的4大核心特性")]),t._v(" "),n("p",[t._v("Servlet->EJB->Struts->SpringMVC->SpringBoot")]),t._v(" "),n("p",[t._v("New->Factory->容器")]),t._v(" "),n("h2",{attrs:{id:"_1-知识点overview"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-知识点overview"}},[t._v("#")]),t._v(" 1.知识点Overview")]),t._v(" "),n("h3",{attrs:{id:"_1-1-spring-ioc容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-spring-ioc容器"}},[t._v("#")]),t._v(" 1.1 Spring IoC容器")]),t._v(" "),n("h4",{attrs:{id:"bean-是什么-spring-bean"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bean-是什么-spring-bean"}},[t._v("#")]),t._v(" Bean 是什么？(Spring bean)")]),t._v(" "),n("blockquote",[n("p",[t._v("The objects that form the backbone of your application and that are managed by the Spring IoC container are called beans. A bean is an object that is instantiated, assembled, and otherwise managed by a Spring IoC container.\nhttps://www.tutorialspoint.com/spring/spring_bean_definition.htm")])]),t._v(" "),n("p",[n("strong",[t._v("Spring Bean VS Java Bean:")])]),t._v(" "),n("p",[t._v("Java Beans are simple Java classes that encapsulate objects, while Spring Beans are managed by the Spring Framework and are used for dependency injection and lifecycle management.")]),t._v(" "),n("p",[t._v("IoC容器想要管理各个业务对象以及它们之间的依赖关系，需要通过某种途径来记录和管理这些信息。\nBeanDefinition对象就承担了这个责任：容器中的每一个bean都会有一个对应的BeanDefinition实例，该实例负责保存bean对象的所有必要信息，包括bean对象的class类型、是否是抽象类、构造方法和参数、其它属性等等。\n当客户端向容器请求相应对象时，容器就会通过这些信息为客户端返回一个完整可用的bean实例；\n默认是单例模式；")]),t._v(" "),n("p",[t._v("事先这些bean需要向大管家注册，BeanDefinitionRegistry抽象出bean的注册逻辑，BeanFactory则抽象出了bean的管理逻辑，而各个BeanFactory的实现类就具体承担了bean的注册以及管理工作\n然后大管家生成bean也是通过这个工厂模式；\nDefaultListableBeanFactory作为一个比较通用的BeanFactory实现，它同时也实现了BeanDefinitionRegistry接口，因此它就承担了Bean的注册管理工作，\n具体的beanFactory实现类就是实现了DefaultListableBeanFactory这个接口；")]),t._v(" "),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/java/spring/java_spring_bean01.png",alt:"spring揭秘"}})]),t._v(" "),n("h4",{attrs:{id:"ioc容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ioc容器"}},[t._v("#")]),t._v(" IoC容器")]),t._v(" "),n("p",[t._v("IoC容器是大管家，你只需要告诉它需要某个bean，它就把对应的实例（instance）扔给你，至于这个bean是否依赖其他组件，怎样完成它的初始化，根本就不需要你关心。")]),t._v(" "),n("p",[t._v("Spring提供了两种容器类型：BeanFactory和ApplicationContext：")]),t._v(" "),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/java/spring/java_spring_bean02.png",alt:"spring揭秘"}})]),t._v(" "),n("p",[t._v("BeanFactory只是Spring IoC容器的一种实现，如果没有特殊指定，它采用采用延迟初始化策略：只有当访问容器中的某个对象时，才对该对象进行初始化和依赖注入操作。\n对于资源有限，并且功能要求不是很严格的场景，BeanFactory是比较合适的IoC容器选择。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("而在实际场景下，我们更多的使用另外一种类型的容器： ApplicationContext，它构建在BeanFactory之上，属于更高级的容器，除了具有BeanFactory的所有能力之外，还提供对事件监听机制以及国际化的支持等。它管理的bean，在容器启动时全部完成初始化和依赖注入操作。\nApplicationContext所管理的对象，在该类型容器启动之后，默认全部初始化并绑定完成。所以，相对于BeanFactory来说，ApplicationContext要求更多的系统资源，同时，因为在启动时就完成所有初始化，容器启动时间较之BeanFactory也会长一些。\n在那些系统资源充足，并且要求更多功能的场景中，ApplicationContext类型的容器是比较合适的选择。\n")])])]),n("p",[n("strong",[t._v("Spring IoC容器的整个工作流程大致可以分为两个阶段：")])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("容器启动阶段")]),t._v(" "),n("p",[t._v("容器启动时，会通过某种途径加载 ConfigurationMetaData，\nConfigurationMetaData可能定义在代码中，比如注解方式，也可能在在外部配置文件(XML/Properties)中，\n，容器需要依赖某些工具类如BeanDefinitionReader，BeanDefinitionReader会对加载的 ConfigurationMetaData进行解析和分析，并将分析后的信息组装为相应的BeanDefinition，\n最后把这些保存了bean定义的BeanDefinition，注册到相应的BeanDefinitionRegistry，\n这样容器的启动工作就完成了。")])]),t._v(" "),n("li",[n("p",[t._v("Bean的实例化阶段")]),t._v(" "),n("p",[t._v("这个阶段触发是:当某个请求通过容器的getBean方法请求某个对象，或者因为依赖关系容器需要隐式的调用getBean时（如bean的注解@DependsOn 或者Autowired）;\n容器会首先检查所请求的对象之前是否已经实例化完成。如果没有，则会根据注册的BeanDefinition所提供的信息实例化被请求对象，并为其注入依赖。当该对象装配完毕后，容器会立即将其返回给请求方法使用。")]),t._v(" "),n("p",[n("strong",[t._v("Notes:Autowire vs getbean:")])]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://www.logicbig.com/tutorials/spring-framework/spring-core/injecting-singleton-with-prototype-bean.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Injecting a Prototype Bean into a Singleton Bean Problem"),n("OutboundLink")],1)])]),t._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("You can then use getBean to retrieve instances of your beans. The ApplicationContext interface has a few other methods for retrieving beans, but, ideally, your application code should never use them. Indeed, your application code should have no calls to the getBean() method at all and thus have no dependency on Spring APIs at all."),n("OutboundLink")],1)])])])]),t._v(" "),n("h4",{attrs:{id:"bean生命周期接口"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bean生命周期接口"}},[t._v("#")]),t._v(" bean生命周期接口")]),t._v(" "),n("p",[t._v("Bean的生命周期：从配置到实例化:")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("建立Bean定义注册表：Spring容器（如ClassPathXmlApplicationContext）启动时，会读取配置信息（XML、注解等），解析每个"),n("code",[t._v("<bean>")]),t._v("或@Component注解，在内存中创建一个BeanDefinition对象来存储所有配置信息。这就是配置阶段。")])]),t._v(" "),n("li",[n("p",[t._v("实例化Bean：当应用程序向容器请求一个Bean（或容器初始化所有单例Bean）时，容器会根据BeanDefinition的信息，通过Java反射机制调用构造方法来创建对象。这就是new一个对象的过程。")])]),t._v(" "),n("li",[n("p",[t._v("Bean注入（依赖注入）：对象被创建后，它里面的属性可能还是null。此时，Spring容器会根据配置（如"),n("code",[t._v("<property>")]),t._v("标签或@Autowired注解），将这个Bean所依赖的其他Bean注入（设置）到相应的属性中。这就是“注入”发生的关键步骤！")])])]),t._v(" "),n("p",[t._v("IoC容器负责管理容器中所有bean的生命周期，而在bean生命周期的不同阶段，Spring提供了不同的扩展点来改变bean的命运，例如EnvironmentPostProcessor、BeanFactoryPostProcessor等（具体参照：第2节 SpringApplication启动流程）:")]),t._v(" "),n("p",[n("strong",[t._v("单例模式")])]),t._v(" "),n("p",[t._v("spring boot默认bean是单例的，spring mvc默认的servlet也是单例的，当然bean @Controller也是单例的，多线程体现在httpservletrequest本身是线程间互相隔离的，\n一般都是通过ThreadLocal实现，\n之所以默认单例是因为，springboot本身就是ioc容器，启动过程很长，启动时会实例化加载bean（当然也有lazy模式），bean的实例化通常需要读取配置文件或者有很多其他bean的依赖，\n所以每次都重建销毁性能很差，而且浪费内存；\nhttps://stackoverflow.com/questions/10096483/is-threadlocal-preferable-to-httpservletrequest-setattributekey-value")]),t._v(" "),n("p",[t._v("单例就是为了共享从而减少内存开销，多线程就是为了区别每个线程的上下文或者working thread context，所以线程上下文一定不能被共享，\n比如ThreadLocal不能跟ExecutorService共用，就是因为ExecutorService破坏了线程间的隔离\nDo Not Use ThreadLocal With ExecutorService\nhttps://www.baeldung.com/java-threadlocal\nhttps://www.cnblogs.com/MrSaver/p/11191028.html")]),t._v(" "),n("p",[t._v("单例模式 工厂模式 建造者模式")]),t._v(" "),n("blockquote",[n("p",[t._v("Spring单例Bean与单例模式的区别在于它们关联的环境不一样，单例模式是指在一个JVM进程中仅有一个实例，而Spring单例是指一个Spring Bean容器(ApplicationContext)中仅有一个实例。\n首先看单例模式，在一个JVM进程中（理论上，一个运行的JAVA程序就必定有自己一个独立的JVM）仅有一个实例，于是无论在程序中的何处获取实例，始终都返回同一个对象，以Java内置的Runtime为例（现在枚举是单例模式的最佳实践），无论何时何处获取，下面的判断始终为真：\nRuntime.getRuntime() == Runtime.getRuntime()\n与此相比，Spring的单例Bean是与其容器（ApplicationContext）密切相关的，所以在一个JVM进程中，如果有多个Spring容器，即使是单例bean，也一定会创建多个实例，代码示例如下：")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('//  第一个Spring Bean容器\nApplicationContext context_1 = new FileSystemXmlApplicationContext("classpath:/ApplicationContext.xml");\nPerson yiifaa_1 = context_1.getBean("yiifaa", Person.class);\n//  第二个Spring Bean容器\nApplicationContext context_2 = new FileSystemXmlApplicationContext("classpath:/ApplicationContext.xml");\nPerson yiifaa_2 = context_2.getBean("yiifaa", Person.class);\n//  这里绝对不会相等，因为创建了多个实例\nSystem.out.println(yiifaa_1 == yiifaa_2);\n\n\x3c!-- 即使声明了为单例，只要有多个容器，也一定会创建多个实例 --\x3e\n<bean id="yiifaa" class="com.stixu.anno.Person" scope="singleton">\n    <constructor-arg name="username">\n        <value>yiifaa</value>\n    </constructor-arg>\n</bean>\n')])])]),n("h4",{attrs:{id:"bean定义-spring装配bean的三种方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bean定义-spring装配bean的三种方法"}},[t._v("#")]),t._v(" bean定义 - Spring装配bean的三种方法")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/beans.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("The interface "),n("code",[t._v("org.springframework.context.ApplicationContext")]),t._v(" represents the Spring IoC container and is responsible for instantiating, configuring, and assembling the aforementioned beans. The container gets its instructions on what objects to instantiate, configure, and assemble by reading configuration metadata. The configuration metadata is represented in："),n("OutboundLink")],1)]),t._v(" "),n("ul",[n("li",[n("p",[t._v("XML")])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/beans.html#beans-annotation-config",target:"_blank",rel:"noopener noreferrer"}},[t._v("Java annotations"),n("OutboundLink")],1),t._v(": 在业务类上使用注解（如@Component, @Autowired）")])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/beans.html#beans-java",target:"_blank",rel:"noopener noreferrer"}},[t._v("Java code / JavaConfig"),n("OutboundLink")],1),t._v(": 在专门的配置类中使用Java代码+注解（如@Configuration+@Bean）")]),t._v(" "),n("p",[n("strong",[t._v("混合使用三种装配")])]),t._v(" "),n("ol",[n("li",[t._v("在类上可以使用 @import(bbsConfig.class)组合其他java注解")]),t._v(" "),n("li",[t._v('在类上使用 @importResource("classpath:spring-dao.xml")组合其他xml注解')]),t._v(" "),n("li",[t._v("在类上可以使用@ContenxtConfiguration包含class或者xml")]),t._v(" "),n("li",[t._v("在xml中可以用引入xml注解，也可以使用引入java注解")])])])]),t._v(" "),n("h5",{attrs:{id:"基于xml配置bean"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基于xml配置bean"}},[t._v("#")]),t._v(" 基于xml配置Bean")]),t._v(" "),n("p",[t._v("Configuration metadata is traditionally supplied in a simple and intuitive XML format")]),t._v(" "),n("p",[t._v("https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/beans.html")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//XML装配bean的缺点")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1.当Spring发现这个<bean>元素时,它将会调用SgtPeppers的默认构造器来创建bean.在XML配置中,bean的创建显得更加被动")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2.不如JavaConfig强大,在JavaConfig配置中,可以通过任何想象到的方法来创建bean实例(构造器,set方法等)")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//3.在简单的<bean>声明中,将bean的类型以字符串的形式设置在了class属性中,不能保证设置给class属性的值是真正的类")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//4.重命名了类,也会引起麻烦")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("基本\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("xml version"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0"')]),t._v(" encoding"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UTF-8"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("beans xmlns"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://........"')]),t._v("\n             xmlns"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("xsi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v('"http'),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("''"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("  configuration details go here "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundsystem.SgtPeppers"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//这里声明一个很简单的bean,因为没有明确给定ID,所以这个bean将会根据全限定类名来进行命名,")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//这里的bean的ID将会是"soundsystem.SgtPeppers#0".其中,"#0"是一个计数的形式,来区分相同类型的bean.')]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//更好的方法是借助id属性")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"compactDisc"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundsystem.SgtPeppers"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n\t\n \t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//当Spring遇到<bean>这个元素时,它会创建一个CDPlayer实例.<constructor-arg>元素会告知Spring要将")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//一个ID为compactDisc的bean引用传递到CDPlayer的构造器中.")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cdPlayer"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundsystem.CDPlayer"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg ref"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"compactDisc"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        \n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("beans"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n作为替代方案"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("也可以使用"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Spring")]),t._v("的c"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("命名空间（"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Spring3")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),t._v("所引入的c"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("命名空间）\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("xml version"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0"')]),t._v(" encoding"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UTF-8"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("beans xmlns"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://........"')]),t._v("\n            xmlns"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("c"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.springframework.org/schema/c"')]),t._v("\n             xmlns"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("xsi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v('"http'),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("''"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("  configuration details go here "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cdPlayer"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundsystem.CDPlayer"')]),t._v("\n   \tc"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("cd"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ref"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"compactDisc"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"c:" 命名空间的前缀')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"cd" 构造器参数名')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"-ref"注入bean引用')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"compactDisc" 要注入bean 的ID')]),t._v("\n\t\n    如果在优化构建的过程"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("将调试标志移除掉"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("那么这种方式可能无法正常执行"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("代替方案：\n\t"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cdPlayer"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundsystem.CDPlayer"')]),t._v("\n   c"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("_0"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ref"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"compactDisc"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//把参数名换成"0",也就是参数的索引,但XML中不允许数字作为属性的第一个字符,因此添加下划线"_"')]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("beans"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 字面量string注入\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlankDisc")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" artist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlandDisc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" artist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("artist "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" artist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("paly")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Playing"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"by"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("artist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"compactDisc"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundysytem.BlankDisc"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Sgt.Peper\'s Lonely Hearts"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The beatles"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n等价\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"compactDisc"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundsystem.BlanDisc"')]),t._v("\n    c"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("_title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Sgt.Peper\'s Lonely Hearts"')]),t._v("\n    c"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("_artist"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The beatles"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n或\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"compactDisc"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundsystem.BlanDisc"')]),t._v("\n    c"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("_0"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Sgt.Peper\'s Lonely Hearts"')]),t._v("\n    c"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("_1"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The beatles"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 集合注入\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlankDisc")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" artist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" tracks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTitel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setArtist")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" artist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("artist"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" artist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTracks")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" tracks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tracks"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tracks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("play")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"compactDisc"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundsystem.BlankDisc"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Sgt.Peper\'s Lonely Hearts"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The beatles"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("list"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Sgt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" Pepper")]),t._v("'s "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Lonely")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Heats")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("With")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Little")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Help")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Lucy")]),t._v(" in the "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Sky")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Getting")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Better")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Fixing")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Hole")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("list"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n等价于p命名空间\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"compactDisc"')]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundsystem.BlankDisc"')]),t._v("\n      p"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Sgt.peper\'s loney hearts club"')]),t._v("\n      p"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("artist"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The Beatles"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tracks"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("list"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Sgt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("peper's loney hearts club"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("loney hearts club"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("hearts club"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("club hearts"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("list"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("property"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n注意list不能直接使用p空间，可以借用util"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("命名空间\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("util"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("list id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"trackList"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Sgt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("peper's loney hearts club"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("loney hearts club"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("hearts club"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("club hearts"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("util"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("lsit"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"compactDisc"')]),t._v("\n           "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundsystem.BlankDisc"')]),t._v("\n           p"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Sgt.pepers lonely hearts"')]),t._v("\n           p"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("artist"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The Beatles"')]),t._v("\n           p"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("tracks"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ref"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"trackList"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("     \n\n复杂类型的list：\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Discography")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" artist"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" cds"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"beatlesDiscography"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundsystem.Discography"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The Beatles"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("list"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ref bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sgtPeppers"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ref bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"whiteAlbum"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("lsit"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 属性注入\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("    \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("soundsystem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("soundsystem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MediaPlayer")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CDPlayer")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MediaPlayer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),t._v(" compactDisc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCompactDisc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),t._v(" compactDisc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("compactDisc "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" compactDisc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("paly")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    compactDisc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("play")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cdPlayer"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundsystem.CDPlayer"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"compactDisc"')]),t._v(" ref"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"compactDisc"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//通过ref引用了ID为compactDisc的bean,将其注入到compactDisc属性中(通过setCompactDisc()方法)")]),t._v("\n\n等价于通过p命名空间\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("xml version"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0"')]),t._v(" encoding"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UTF-8"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("beans xmlns"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://........"')]),t._v("\n       xmlns"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("p"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.springframework.org/schema/p"')]),t._v("\n       xmlns"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("xsi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v('"http'),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("''"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("  configuration details go here "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cdPlayer"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundsystem.CDPlayer"')]),t._v("\n    p"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("compactDisc"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ref"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"compactDisc"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"p:" :前缀')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//前面的compactDisc: 属性名")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//-ref:  注入bean引用")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//后面的compactDisc: 所注入bean的ID")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("beans"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n \n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("xml version"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0"')]),t._v(" encoding"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UTF-8"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("beans xmlns"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.springframework.org/schema/beans"')]),t._v("\n       xmlns"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("xsi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.w3.org/2001/XMLSchema-instance"')]),t._v("\n       xsi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("schemaLocation"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v('"http'),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("schema"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("beans\n            http"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("schema"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("beans"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("spring"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("beans"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xsd\n            http"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("schema"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v('context"'),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("resource")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"spring/spring-dao.xml"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"postservice"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.bbs.service.impl.PostserviceImpl"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg ref"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"postdao"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg ref"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userdao"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("beans"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n配置postservice的bean时需要引入两个bean，postdao和userdao，放到constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg的标签中，ref指的是依赖的bean的ID。如果是在javaConfig中配置的，就写"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("的内容。如果是"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("就写"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Qualifier")]),t._v("的内容。这里是引入的是动态实现的dao接口的bean，是在spring"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("dao"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xml中配置的，引入这个配置文件就可以自动获得beanID。\n")])])]),n("h5",{attrs:{id:"annotation-based-configuration-使用注解annotation定义bean"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#annotation-based-configuration-使用注解annotation定义bean"}},[t._v("#")]),t._v(" "),n("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/beans.html#beans-annotation-config",target:"_blank",rel:"noopener noreferrer"}},[t._v("Annotation-based configuration"),n("OutboundLink")],1),t._v(" 使用注解Annotation定义Bean")]),t._v(" "),n("p",[t._v("Spring 2.5 introduced support for annotation-based configuration metadata.")]),t._v(" "),n("p",[t._v("spring从两个角度实现自动化装配：组件扫描和自动装配")]),t._v(" "),n("ol",[n("li",[t._v("创建可被发现的bean")])]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n这个简单的注解表明该类会作为组件类"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("并告知"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Spring")]),t._v("要为这个类创建bean\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 命名 bean id\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" \n如果没有个bean设置ID"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Spring")]),t._v("会根据类名为其指定一个ID"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("默认名字就是把类名的第一个字母变为小写"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lonelyHeartsClub"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置期望的ID")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SgtPeppers")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n另外还一种为bean命名的方式"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("使用"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Java")]),t._v("依赖注入规范中所提供的"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Named")]),t._v("注解来为bean设置ID\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Named")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lonelyHeartsClub"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SgtPeppers")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 设置组件扫描的基础包\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("\n当对一个类标注"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("注解时，表明该类会作为组件类，spring将为这个类创建bean。当在应用文中引用这个bean，spring会自动扫描事先指定的包查找这个  bean。但spring默认是不启用组件扫描的，可以在XML中配置加上。还有一种方法：在新建一个配置类，类中可以什么不用写，在配置类上加上"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ComponentScan")]),t._v("注解，spring会自动扫描改配置类所在的包。\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//直接在value属性中指明包的名称")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ComponentScan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundsystem"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CDPlayerConfig")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//通过basePackages属性配置")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ComponentScan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("basePackages"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundsystem"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CDPlayerConfig")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置多个基础包,用数组表示")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ComponentScan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("basePackages"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"soundsystem"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"video"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CDPlayerConfig")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//基础包以String类型表示是不安全的,如果重构代码的话,指定的基础包可能会出现错误,用指定为包中所包含的类或接口的方法")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ComponentScan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("basePackageClasses"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CDPlayer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DVDPlayer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CDPlayerConfig")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" 添加注解自动装配"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Autowired")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("可以换成"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Inject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Inject")]),t._v("注解来源于"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Java")]),t._v("依赖注入规范"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("该规范同时还为我们定义了"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Named")]),t._v("注解"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n尽管"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Inject")]),t._v("和"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowierd")]),t._v("有细微的差别"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("但大多数场景下"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("它们都可以互换"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("注解构造器：\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CDPlayer")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MediaPlayer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),t._v(" cd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//这表明当Spring创建CDPlayer bean的时候,会通过这个构造器来进行实例化并且会传入一个可设置给CompactDisc类型的bean.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CDPlayer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),t._v(" cd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//构造器")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cd "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("paly")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    cd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("paly")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("注解属性的"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Setter")]),t._v("方法：\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCompactDisc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),t._v(" cd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cd "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n如果没有匹配的bean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("那么在应用上下文创建的时候"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Spring")]),t._v("会抛出一个异常"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("为了避免异常的出现"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("你可以将"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("的requied属性设置为"),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("required"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCompactDisc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),t._v(" cd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cd "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n如果有多个bean都能满足依赖关系的话"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Spring")]),t._v("将会抛出一个异常"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("表明没有明确指定要选择哪个bean进行自动装配"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 一般在组件类上添加注解"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Qualifier")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("括号写这个bean的id，在注入时也加上"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Qualifier")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("写上bean的id\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Qualifier")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"postdao"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Postdao")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Qualifier")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userdao"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Userdao")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Qualifier")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"usedao"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUserdao")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Userdao")]),t._v(" userdao"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Qualifier")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"postdao"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUserdao")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Postdao")]),t._v(" postdao"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h5",{attrs:{id:"java-based-configuration-基于java类提供bean定义信息"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#java-based-configuration-基于java类提供bean定义信息"}},[t._v("#")]),t._v(" "),n("a",{attrs:{href:"https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/beans.html#beans-java",target:"_blank",rel:"noopener noreferrer"}},[t._v("Java-based configuration"),n("OutboundLink")],1),t._v(" 基于java类提供Bean定义信息")]),t._v(" "),n("p",[t._v("所谓java based 我的理解是这里是说不需要依赖于spring，普通的java项目也可以用")]),t._v(" "),n("p",[t._v("Starting with Spring 3.0, many features provided by the "),n("a",{attrs:{href:"http://www.springsource.org/javaconfig",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring JavaConfig project"),n("OutboundLink")],1),t._v(" became part of the core Spring Framework. Thus you can define beans external to your application classes by using Java rather than XML files. To use these new features, see the "),n("code",[t._v("@Configuration")]),t._v(", "),n("code",[t._v("@Bean, @Import")]),t._v(" and "),n("code",[t._v("@DependsOn")]),t._v(" annotations.")]),t._v(" "),n("p",[t._v("有些情况下,比如说,要将第三方库的组件装配到你的应用中,就不能使用前面的自动化装配方法 到第三方库中去给类加@Component和@Autowired注解,\n在这种情况下,就需要采用显示装配的方式.在进行显示配置有Java和XML两种方案显示装配bean.")]),t._v(" "),n("p",[t._v("使用java代码，先新建一个配置类JavaConfig，里面都是配置所需的bean，不应该有业务逻辑代码，所以单独建一个类。")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppConfig")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("myService")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyServiceImpl")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApplicationContext")]),t._v(" ctx "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AnnotationConfigApplicationContext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppConfig")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),t._v(" myService "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  myService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("doStuff")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AnnotationConfigApplicationContext")]),t._v(" ctx "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AnnotationConfigApplicationContext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppConfig")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OtherConfig")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AdditionalConfig")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("refresh")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),t._v(" myService "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  myService"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("doStuff")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建JavaConfig类的关键在于为其添加@Configruation注解,表明这是一个配置类")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CDPlayerConfig")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sgtPeppers")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SgtPeppers")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//@Bean注解会告诉Spring这个方法将会返回一个对象,该对象要注册为Spring应用上下文的bean,默认情况下,")]),t._v("\n    bean的ID于带有"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("注解的方法名一样"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("也可以重命名\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lonelyHeartsClubBand"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sgtPeppers")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SgtPeppers")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\n    声明"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),t._v(" bean是非常简单"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("它自身没有其他依赖"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("但现在"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("我们需要声明"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CDPlayer")]),t._v(" bean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("它依赖于"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("在"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JavaConfig")]),t._v("中"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("如何将他们装配在一起呢"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CDPlayer")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cdPlayer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CDPlayer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sgtPeppers")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//因为sgtPeppers()方法上添加了@Bean注解,Spring将会拦截所有对它的调用,")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//并确保直接返回该方法创建的bean,而不是每次都对其进行实际的调用.")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    等价于下面这种方式\n        \n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CDPlayer")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cdPlayer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),t._v(" compactDisc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在这里,cdPlayer()方法请求一个CompactDisc作为参数,当Springs调用cdPlayer()创建CDPlayer bean的时候,")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//它会自动装配一个CompactDisc到配置方法之中,然后方法体按照合适的方法来使用它.")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CDPlayer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compactDisc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lonelyHeartsClubBandPlayer"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CDPlayer")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cdPlayer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompactDisc")]),t._v(" lonelyHeartsClubBand"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CDPlayer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compactDisc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("More")]),t._v(" example：\n\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ContextConfiguration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("locations "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"classpath:spring/spring-dao.xml"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"classpath:scan.xml"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("）\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" bbsConfig"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n　　"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Postdao")]),t._v(" postdao"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n　　"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Userdao")]),t._v(" userdao"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n　　"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"postservice"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PostService")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPost")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n　　"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n　　"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PostserviceImpl")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("postdao"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("userdao"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n　　"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n在对"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PostService")]),t._v("的bean注入时，同时又依赖了两个bean，postdao和userdao。直接引用beanID就可以，spring会自动地从容器中获取这些bean，只要他们的配置是正确的就行。这个例子中userdao、postdao是"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mybatis")]),t._v("配置自动扫描将dao接口生成代理注入到spring的，其实也算是xml装配bean\n这里如果再声明一个bean，返回的仍是postserviceImpl对象，和之前的那个bean完全一样，是同一个实例。一般spring "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@bean")]),t._v("如果是同一个beanID，默认返回的是一个单例bean，注入的是同一个实例。如果修改其中一个会都改变的。\n不过在这里要注意进行测试时，由于spring的单元测试和springIoc容器是完全独立的，postdao和userdao注入检测时是使用locations加载xml文件，而postservice使用classes加载config类的，但是两个不能同时混用在"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ContextConfiguration")]),t._v("中。所以非要都测试的话，就分开测试吧。\n")])])]),n("p",[t._v("@SpringBootApplication 等同于 @EnableAutoConfiguration + @ComponentScan + @Configuration, 后面启动原理部分有详解")]),t._v(" "),n("p",[t._v("All of your application components (@Component, @Service, @Repository, @Controller etc.) are automatically registered as Spring Beans.")]),t._v(" "),n("p",[t._v("Components(@Component @Service @Controller @Repository) VS Beans (@Beans):\nall component types are treated in the same way. The subtypes are mere markers, think code readability rather than features.\nhttps://www.tomaszezula.com/2014/02/09/spring-series-part-5-component-vs-bean/")]),t._v(" "),n("p",[t._v("** @ComponentScan**")]),t._v(" "),n("p",[t._v("** @Import**")]),t._v(" "),n("p",[t._v("在4.2之前， @Import注解只支持导入配置类，但是在4.2之后，它支持导入普通类")]),t._v(" "),n("p",[n("strong",[t._v("@Conditional @ConditionalOn*")])]),t._v(" "),n("p",[t._v("表示在满足某种条件后才初始化一个bean或者启用某些配置。它一般用在由 @Component、 @Service、 @Configuration等注解标识的类上面，或者由 @Bean标记的方法上。如果一个 @Configuration类标记了 @Conditional，则该类中所有标识了 @Bean的方法和 @Import注解导入的相关类将遵从这些条件。")]),t._v(" "),n("p",[n("strong",[t._v("@ConfigurationProperties与@EnableConfigurationProperties")])]),t._v(" "),n("p",[t._v("当某些属性的值需要配置的时候，我们一般会在 application.properties文件中新建配置项，然后在bean中使用 @Value注解来获取配置的值;")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@Configuration\npublic class MyBatisConfiguration { \n\t@Value("${spring.datasource.driverClassName}")\n    private String jdbcDriverClassName;\n\t@Value("${spring.datasource.url}")\n    private String jdbcUrl;\n    @Value("${spring.datasource.username}")\n    private String jdbcUsername;\n    @Value("${spring.datasource.password}")\n    private String jdbcPassword;\n    \n\t@Bean(name = "dataSource",destroyMethod = "close")\n    public DataSource dataSource() {\n    \tDruidDataSource datasource = new DruidDataSource();\n    \tdatasource.setDriverClassName(jdbcDriverClassName);\n    \tdatasource.setUrl(jdbcUrl);\n    \tdatasource.setUsername(jdbcUsername);\n    \tdatasource.setPassword(jdbcPassword);\n        return datasource;\n    }\n\t\n\t@Bean(name = {"sqlSessionFactory"})\n\t@ConditionalOnMissingBean(name = {"sqlSessionFactory"})\n\tpublic SqlSessionFactory sqlSessionFactory(DataSource dataSource) throws Exception {\n\t....\n')])])]),n("p",[t._v("但是如果同一个配置在多个地方使用，也存在不方便维护的问题，对于更为复杂的配置，Spring Boot提供了更优雅的实现方式，那就是 @ConfigurationProperties注解\n而@EnableConfigurationProperties的作用是将其注册为bean，否则项目不会将其scan为bean，具体：")]),t._v(" "),n("blockquote",[n("p",[t._v("In order to use a configuration class in our project, we need to register it as a regular Spring bean.")])]),t._v(" "),n("blockquote",[n("p",[t._v("First of all, we can annotate such a class with @Component. Alternatively, we can use a @Bean factory method.")])]),t._v(" "),n("blockquote",[n("p",[t._v("However, "),n("strong",[t._v("in certain situations, we may prefer to keep a @ConfigurationProperties class as a simple POJO")]),t._v(". This is when @EnableConfigurationProperties comes in handy. We can specify all configuration beans directly on this annotation.")])]),t._v(" "),n("blockquote",[n("p",[t._v("This is a convenient way to quickly register @ConfigurationProperties annotated beans.")])]),t._v(" "),n("p",[t._v("通过上面等表述，我们大概知道，如果用@component就会将其变成增强类，而不是plain old java object了，而是多了很多冗余的功能；")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@ConfigurationProperties(prefix = "additional")\npublic class AdditionalProperties {\n \n    private String unit;\n    private int max;\n \n    // standard getters and setters\n}\n@Configuration\n@EnableConfigurationProperties(AdditionalProperties.class)\npublic class AdditionalConfiguration {\n     \n    @Autowired\n    private AdditionalProperties additionalProperties;\n     \n    // make use of the bound properties\n}\n')])])]),n("h4",{attrs:{id:"bean注入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bean注入"}},[t._v("#")]),t._v(" bean注入")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('Spring依赖注入技术演进：\n┌────────────────────────────────────────────────────────┐\n│                  配置方式演进                           │\n├────────────────────────────────────────────────────────┤\n│ 1. XML显式配置 (Spring 1.x)                            │\n│    ├── <property name="..." ref="..."/>               │\n│    ├── <constructor-arg ref="..."/>                  │\n│    └── 工厂方法注入                                   │\n│                                                        │\n│ 2. XML自动装配 (Spring 2.0)                            │\n│    ├── autowire="byName"                              │\n│    ├── autowire="byType"                              │\n│    ├── autowire="constructor"                         │\n│    ├── autowire="default"                             │\n│    └── autowire="no"                                  │\n│                                                        │\n│ 3. 注解驱动 (Spring 2.5)                                │\n│    ├── @Autowired (字段/构造器/方法注入)               │\n│    ├── @Resource (JSR-250)                            │\n│    ├── @Inject (JSR-330)                              │\n│    └── @Required                                      │\n│                                                        │\n│ 4. Java配置 (Spring 3.0)                               │\n│    ├── @Configuration + @Bean                         │\n│    └── 方法参数自动注入                               │\n└────────────────────────────────────────────────────────┘\n')])])]),n("h5",{attrs:{id:"早期基于xml显式配置三种注入方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#早期基于xml显式配置三种注入方式"}},[t._v("#")]),t._v(" 早期基于XML显式配置三种注入方式")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("属性注入")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("entity")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" age"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//调用默认的构造方法")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAge")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" age"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAge")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" age"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" age"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n      "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"People{"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id="')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" id "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('", name=\'"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token char"}},[t._v("'\\''")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('", age="')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" age "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token char"}},[t._v("'}'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("xml version"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0"')]),t._v(" encoding"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UTF-8"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("beans xmlns"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.springframework.org/schema/beans"')]),t._v("\n    xmlns"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("xsi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.w3.org/2001/XMLSchema-instance"')]),t._v("\n    xsi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("schemaLocation"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v('"http'),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("schema"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("beans\n        http"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("schema"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("beans"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("spring"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("beans"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v('xsd"'),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"people"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.java.entity.People"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//属性注入")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"people2"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.java.entity.People"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("property"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"age"')]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"18"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("property"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"张三"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("property"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("beans"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Test2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//加载beans.xml文件，调用Spring接口")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApplicationContext")]),t._v(" ac"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassPathXmlApplicationContext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"beans.xml"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//通过id获取bean，返回一个对象")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),t._v(" people"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("ac"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"people"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//调用方法")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("people"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//属性注入")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),t._v(" people2"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("ac"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"people2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("people2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("构造函数注入")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" age"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" age"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("类型注入"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"people3"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.java.entity.People"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"int"')]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"String"')]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"李四"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"int"')]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"19"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("索引注入"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"people4"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.java.entity.People"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg index"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg index"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"王五"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg index"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("联合使用"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"people5"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.java.entity.People"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"int"')]),t._v(" index"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"4"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"String"')]),t._v(" index"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"赵六"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"int"')]),t._v(" index"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"21"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("arg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//类型注入")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),t._v(" people3"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("ac"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"people3"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("people3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//类型注入")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),t._v(" people4"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("ac"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"people4"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("people4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//联合使用")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),t._v(" people5"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("ac"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"people5"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("people5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("工厂方法注入，分为静态工厂和非静态工厂； 一般用得多的都是静态工厂；")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("factory")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("entity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PeopleFactory")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//非静态工厂")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createPeople")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),t._v(" p"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"阿七"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAge")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//静态工厂")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createPeople1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),t._v(" p"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"阿八"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAge")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" p"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("工厂模式的非静态方法"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peopleFactory"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.java.factory.PeopleFactory"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"people6"')]),t._v(" factory"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peopleFactory"')]),t._v(" factory"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("method"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"createPeople"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("工厂模式的静态方法"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bean id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"people7"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.java.factory.PeopleFactory"')]),t._v(" factory"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("method"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"createPeople1"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bean"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        \n "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//工厂方式注入，非静态")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),t._v(" people6"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("ac"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"people6"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("people6"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//工厂方式注入，静态")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),t._v(" people7"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("ac"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"people7"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("people7"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),n("h5",{attrs:{id:"中期基于xml-autowire-no-byname-bytype-constructor-default"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#中期基于xml-autowire-no-byname-bytype-constructor-default"}},[t._v("#")]),t._v(' 中期基于XML autowire="no|byName|byType|constructor|default"')]),t._v(" "),n("h5",{attrs:{id:"现代基于autowired-的三种注入方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#现代基于autowired-的三种注入方式"}},[t._v("#")]),t._v(" 现代基于Autowired 的三种注入方式")]),t._v(" "),n("p",[t._v("如果你使用的是构造器注入\n恭喜你，当你有十几个甚至更多对象需要注入时，你的构造函数的参数个数可能会长到无法想像。")]),t._v(" "),n("p",[t._v("如果你使用的是field反射注入\n如果不使用Spring框架，这个属性只能通过反射注入，太麻烦了！这根本不符合JavaBean规范。\n还有，当你不是用过Spring创建的对象时，还可能引起NullPointerException。\n并且，你不能用final修饰这个属性。")]),t._v(" "),n("p",[t._v("如果你使用的是setter方法注入\n那么你将不能将属性设置为final。\n两者取其轻")]),t._v(" "),n("p",[t._v("Spring3.0官方文档建议使用setter注入覆盖构造器注入。\nSpring4.0官方文档建议使用构造器注入。\n结论")]),t._v(" "),n("p",[t._v("如果注入的属性是必选的属性，则通过构造器注入。\n如果注入的属性是可选的属性，则通过setter方法注入。\n至于field注入，不建议使用。")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("通过field反射注入, field injection (不推荐)")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DI")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dependency")]),t._v(" dependency"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n     \n")])])])]),t._v(" "),n("li",[n("p",[t._v("通过构造器注入")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("public class DI(){\n\t//通过构造器注入\n\tprivate DependencyA a;\n\t@Autowired\n\tpublic DI(DependencyA a){\n\t\tthis.a = a;\n\t}\n   \n}\n")])])])]),t._v(" "),n("li",[n("p",[t._v("通过setter方法注入")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("public class DI(){\n\t//通过setter方法注入\n\tprivate DependencyB b;\n\t@Autowired\n\tpublic void setDependencyB(DependencyB b){\n\t\tthis.b = b;\n\t}\n    \n}\n     \n")])])])])]),t._v(" "),n("h3",{attrs:{id:"配置属性加载顺序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置属性加载顺序"}},[t._v("#")]),t._v(" 配置属性加载顺序**")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('1、开发者工具 `Devtools` 全局配置参数；\n\n2、单元测试上的 `@TestPropertySource` 注解指定的参数；\n\n3、单元测试上的 `@SpringBootTest` 注解指定的参数；\n\n4、命令行指定的参数，如 `java -jar springboot.jar --name="Java技术栈"`；\n\n5、命令行中的 `SPRING_APPLICATION_JSONJSON` 指定参数, 如 `java -Dspring.application.json=\'{"name":"Java技术栈"}\' -jar springboot.jar`\n\n6、`ServletConfig` 初始化参数；\n\n7、`ServletContext` 初始化参数；\n\n8、JNDI参数（如 `java:comp/env/spring.application.json`）；\n\n9、Java系统参数（来源：`System.getProperties()`）；\n\n10、操作系统环境变量参数；\n\n11、`RandomValuePropertySource` 随机数，仅匹配：`ramdom.*`；\n\n12、JAR包外面的配置文件参数（`application-{profile}.properties（YAML）`）\n\n13、JAR包里面的配置文件参数（`application-{profile}.properties（YAML）`）\n\n14、JAR包外面的配置文件参数（`application.properties（YAML）`）\n\n15、JAR包里面的配置文件参数（`application.properties（YAML）`）\n\n16、`@Configuration`配置文件上 `@PropertySource` 注解加载的参数；\n\n17、默认参数（通过 `SpringApplication.setDefaultProperties` 指定）；\n')])])]),n("h3",{attrs:{id:"_1-3-启动加载器-springfactoriesloader"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-启动加载器-springfactoriesloader"}},[t._v("#")]),t._v(" 1.3. 启动加载器 SpringFactoriesLoader")]),t._v(" "),n("p",[t._v("JVM提供了3种类加载器： BootstrapClassLoader、 ExtClassLoader、 AppClassLoader分别加载Java核心类库、扩展类库以及应用的类路径( CLASSPATH)下的类库。JVM通过双亲委派模型进行类的加载，我们也可以通过继承 java.lang.classloader实现自己的类加载器。")]),t._v(" "),n("p",[t._v("何为双亲委派模型？当一个类加载器收到类加载任务时，会先交给自己的父加载器去完成，因此最终加载任务都会传递到最顶层的BootstrapClassLoader，只有当父加载器无法完成加载任务时，才会尝试自己来加载。")]),t._v(" "),n("p",[t._v("采用双亲委派模型的一个好处是保证使用不同类加载器最终得到的都是同一个对象，这样就可以保证Java 核心库的类型安全，比如，加载位于rt.jar包中的 java.lang.Object类，不管是哪个加载器加载这个类，最终都是委托给顶层的BootstrapClassLoader来加载的，这样就可以保证任何的类加载器最终得到的都是同样一个Object对象。")]),t._v(" "),n("p",[t._v("SpringFactoriesLoader，它本质上属于Spring框架私有的一种扩展方案，类似于SPI，Spring Boot在Spring基础上的很多核心功能都是基于此")]),t._v(" "),n("h3",{attrs:{id:"_1-4-spring容器的事件监听机制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-spring容器的事件监听机制"}},[t._v("#")]),t._v(" 1.4. Spring容器的事件监听机制")]),t._v(" "),n("p",[t._v("Java提供了实现事件监听机制的两个基础类：自定义事件类型扩展自 java.util.EventObject、事件的监听器扩展自 java.util.EventListener")]),t._v(" "),n("p",[t._v("Spring的ApplicationContext容器内部中的所有事件类型均继承自 org.springframework.context.AppliationEvent，容器中的所有监听器都实现 org.springframework.context.ApplicationListener接口，并且以bean的形式注册在容器中。一旦在容器内发布ApplicationEvent及其子类型的事件，注册到容器的ApplicationListener就会对这些事件进行处理。")]),t._v(" "),n("p",[t._v("ApplicationEvent继承自EventObject，Spring提供了一些默认的实现，比如： ContextClosedEvent表示容器在即将关闭时发布的事件类型， ContextRefreshedEvent表示容器在初始化或者刷新的时候发布的事件类型......")]),t._v(" "),n("p",[t._v("容器内部使用ApplicationListener作为事件监听器接口定义，它继承自EventListener。ApplicationContext容器在启动时，会自动识别并加载EventListener类型的bean，一旦容器内有事件发布，将通知这些注册到容器的EventListener。")]),t._v(" "),n("p",[t._v("ApplicationContext接口继承了ApplicationEventPublisher接口，该接口提供了 voidpublishEvent(ApplicationEventevent)方法定义，不难看出，ApplicationContext容器担当的就是事件发布者的角色。如果有兴趣可以查看 AbstractApplicationContext.publishEvent(ApplicationEventevent)方法的源码：ApplicationContext将事件的发布以及监听器的管理工作委托给 ApplicationEventMulticaster接口的实现类。在容器启动时，会检查容器内是否存在名为applicationEventMulticaster的ApplicationEventMulticaster对象实例。如果有就使用其提供的实现，没有就默认初始化一个SimpleApplicationEventMulticaster作为实现。")]),t._v(" "),n("p",[t._v("最后，如果我们业务需要在容器内部发布事件，只需要为其注入ApplicationEventPublisher依赖即可：实现ApplicationEventPublisherAware接口或者ApplicationContextAware接口")]),t._v(" "),n("h3",{attrs:{id:"_1-5-自动配置原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-自动配置原理"}},[t._v("#")]),t._v(" 1.5. 自动配置原理")]),t._v(" "),n("p",[t._v("@SpringBootApplication开启"),n("strong",[t._v("组件扫描和自动配置")]),t._v("，\n而 SpringApplication.run则负责"),n("strong",[t._v("启动引导应用程序")]),t._v("。 @SpringBootApplication是一个复合 Annotation，它将三个注解组合在一起：")]),t._v(" "),n("ul",[n("li",[n("p",[n("strong",[t._v("@SpringBootConfiguration")]),t._v("就是 @Configuration，它是Spring框架的注解，标明该类是一个 JavaConfig配置类; allow to register extra beans in the context or import additional configuration classes;")])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("@ComponentScan")]),t._v("启用组件扫描;enable @Component scan on the package where the application is located;")])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("@EnableAutoConfiguration")]),t._v("注解：\n表示开启Spring Boot自动配置功能，Spring Boot会根据应用的依赖、自定义的bean、classpath下有没有某个类 等等因素来猜测你需要的bean，然后注册到IOC容器中;\nenable "),n("a",{attrs:{href:"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-auto-configuration",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring Boot’s auto-configuration mechanism"),n("OutboundLink")],1)])])]),t._v(" "),n("p",[n("em",[t._v("Notes:")])]),t._v(" "),n("blockquote",[n("p",[t._v("You should only ever add one @SpringBootApplication or @EnableAutoConfiguration annotation. We generally recommend that you add one or the other to your primary @Configuration class only.\nhttps://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-auto-configuration")])]),t._v(" "),n("p",[t._v("开始讲解原理，先看EnableAutoConfiguration：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("@Target(value=TYPE)\n @Retention(value=RUNTIME)\n @Documented\n @Inherited\n @AutoConfigurationPackage\n @Import(value=AutoConfigurationImportSelector.class)\npublic @interface EnableAutoConfiguration\n")])])]),n("p",[t._v("重点是@Import(EnableAutoConfigurationImportSelector.class)，这里它将把 EnableAutoConfigurationImportSelector作为bean注入到容器中，")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("@Override\n\tpublic String[] selectImports(AnnotationMetadata metadata) {\n\t\ttry {\n\t\t\tAnnotationAttributes attributes = getAttributes(metadata);\n\t\t\tList<String> configurations = getCandidateConfigurations(metadata,\n\t\t\t\t\tattributes);\n\t\t\tconfigurations = removeDuplicates(configurations);\n\t\t\tSet<String> exclusions = getExclusions(metadata, attributes);\n\t\t\tconfigurations.removeAll(exclusions);\n\t\t\tconfigurations = sort(configurations);\n\t\t\trecordWithConditionEvaluationReport(configurations, exclusions);\n\t\t\treturn configurations.toArray(new String[configurations.size()]);\n\t\t}\n\t\tcatch (IOException ex) {\n\t\t\tthrow new IllegalStateException(ex);\n\t\t}\n\t}\n")])])]),n("p",[t._v("EnableAutoConfigurationImportSelector.selectImports()是何时执行的？其实这个方法会在容器启动过程中执行： AbstractApplicationContext.refresh(),\n这个EnableAutoConfigurationImportSelector类会扫描所有的jar包，将所有符合条件的@Configuration配置类注入的容器中，何为符合条件，看看 META-INF/spring.factories的文件内容：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/resources/META-INF/spring.factories\n.....\norg.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\\\n.....\n")])])]),n("p",[t._v("然后举例看 DataSourceAutoConfiguration：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration.java\n@Configuration(proxyBeanMethods = false)\n@ConditionalOnClass({ DataSource.class, EmbeddedDatabaseType.class })\n@ConditionalOnMissingBean(type = "io.r2dbc.spi.ConnectionFactory")\n@EnableConfigurationProperties(DataSourceProperties.class)\n@Import({ DataSourcePoolMetadataProvidersConfiguration.class, DataSourceInitializationConfiguration.class })\npublic class DataSourceAutoConfiguration {\n')])])]),n("p",[t._v("@ConditionalOnClass({DataSource.class,EmbeddedDatabaseType.class})：当Classpath中存在DataSource或者EmbeddedDatabaseType类时才启用这个配置，否则这个配置将被忽略。\n注意上面的DataSourceProperties，\n@EnableConfigurationProperties(DataSourceProperties.class)：将DataSource的默认配置类注入到IOC容器中，DataSourceproperties定义为：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@ConfigurationProperties(prefix = "spring.datasource")\npublic class DataSourceProperties implements BeanClassLoaderAware, InitializingBean {\n\tprivate ClassLoader classLoader;\n\t/**\n\t * Name of the datasource. Default to "testdb" when using an embedded database.\n\t */\n\tprivate String name;\n\t/**\n\t * Whether to generate a random datasource name.\n\t */\n\tprivate boolean generateUniqueName = true;\n\t/**\n\t * Fully qualified name of the connection pool implementation to use. By default, it\n\t * is auto-detected from the classpath.\n\t */\n\tprivate Class<? extends DataSource> type;\n\n\t/**\n\t * Fully qualified name of the JDBC driver. Auto-detected based on the URL by default.\n\t */\n\tprivate String driverClassName;\n\n\t/**\n\t * JDBC URL of the database.\n\t */\n\tprivate String url;\n\n\t/**\n\t * Login username of the database.\n\t */\n\tprivate String username;\n\n\t/**\n\t * Login password of the database.\n\t */\n\tprivate String password;\n\t\n')])])]),n("p",[t._v("很清晰对应配置spring.datasource，然后是连接池配置：")]),t._v(" "),n("p",[t._v("@Import({ Registrar.class, DataSourcePoolMetadataProvidersConfiguration.class })：导入其他额外的配置，就以DataSourcePoolMetadataProvidersConfiguration为例吧,\nDataSourcePoolMetadataProvidersConfiguration是数据库连接池提供者的一个配置类，即Classpath中存在 org.apache.tomcat.jdbc.pool.DataSource.class，则使用tomcat-jdbc连接池，如果Classpath中存在 HikariDataSource.class则使用Hikari连接池。")]),t._v(" "),n("h2",{attrs:{id:"_2-springapplication启动流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-springapplication启动流程"}},[t._v("#")]),t._v(" 2. SpringApplication启动流程")]),t._v(" "),n("p",[t._v("Spring Boot应用启动流程：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("┌─────────────────────────────────────────────────┐\n│               1. JVM启动阶段                    │\n├─────────────────────────────────────────────────┤\n│ 加载JVM → 类加载器初始化 → 字节码验证            │\n└───────────────────────┬─────────────────────────┘\n                        ↓\n┌─────────────────────────────────────────────────┐\n│          2. SpringApplication.run()             │\n├─────────────────────────────────────────────────┤\n│ 设置无头模式 → 启动监听器 → 发布启动事件          │\n└───────────────────────┬─────────────────────────┘\n                        ↓\n┌─────────────────────────────────────────────────┐\n│          3. 环境准备阶段                        │\n├─────────────────────────────────────────────────┤\n│ 创建应用参数 → 准备环境 → 加载配置 → 打印Banner  │\n└───────────────────────┬─────────────────────────┘\n                        ↓\n┌─────────────────────────────────────────────────┐\n│          4. 应用上下文创建                      │\n├─────────────────────────────────────────────────┤\n│ 创建空容器实例 → 初始化异常报告器                 │\n└───────────────────────┬─────────────────────────┘\n                        ↓\n┌─────────────────────────────────────────────────┐\n│          5. 上下文预处理                        │\n├─────────────────────────────────────────────────┤\n│ 设置环境 → 执行ApplicationContextInitializer     │\n│ → 加载Bean定义源                                │\n└───────────────────────┬─────────────────────────┘\n                        ↓\n┌─────────────────────────────────────────────────┐\n│          6. ApplicationContext.refresh()        │\n├─────────────────────────────────────────────────┤\n│ 这是Spring容器的核心启动方法，包含所有子阶段       │\n└───────────────────────┬─────────────────────────┘\n                        ↓\n┌─────────────────────────────────────────────────┐\n│          7. 嵌套子阶段（按顺序执行）             │\n├─────────────────────────────────────────────────┤\n│ 7.1 prepareRefresh()                            │\n│ 7.2 obtainFreshBeanFactory()                    │\n│ 7.3 prepareBeanFactory()                        │\n│ 7.4 postProcessBeanFactory()                    │\n│ 7.5 invokeBeanFactoryPostProcessors() ← 重要！  │\n│     ├── 扫描@Component注解类                    │\n│     ├── 创建BeanDefinition                     │\n│     ├── 注册到BeanFactory                      │\n│     └── 处理@AutoConfiguration                 │\n│ 7.6 registerBeanPostProcessors()                │\n│ 7.7 initMessageSource()                         │\n│ 7.8 initApplicationEventMulticaster()           │\n│ 7.9 onRefresh() ← 启动内嵌服务器！              │\n│ 7.10 registerListeners()                        │\n│ 7.11 finishBeanFactoryInitialization() ← 重要！ │\n│     ├── 实例化所有非懒加载单例Bean               │\n│     ├── 注入依赖                               │\n│     └── 调用生命周期回调                        │\n│ 7.12 finishRefresh()                            │\n└───────────────────────┬─────────────────────────┘\n                        ↓\n┌─────────────────────────────────────────────────┐\n│          8. 启动收尾阶段                        │\n├─────────────────────────────────────────────────┤\n│ 后处理 → 发布启动事件 → 执行Runner → 发布就绪事件│\n└─────────────────────────────────────────────────┘\n")])])]),n("h3",{attrs:{id:"jvm启动和类加载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jvm启动和类加载"}},[t._v("#")]),t._v(" JVM启动和类加载")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 阶段1：JVM层面的准备工作\npublic class JVMStartupPhase {\n    public void execute() {\n        // 1. 加载JVM核心库\n        loadJVMCoreLibraries();          // rt.jar, charsets.jar等\n        \n        // 2. 初始化类加载器层次结构\n        initializeClassLoaders();        // Bootstrap → Extension → Application\n        \n        // 3. 加载SpringApplication主类\n        Class<?> mainClass = Class.forName("com.example.MyApplication");\n        \n        // 4. 验证字节码安全性\n        verifyBytecode(mainClass);       // 检查魔数、版本、指令合法性\n        \n        // 5. 准备静态变量和常量池\n        prepareStaticFields();          // 初始化静态常量\n        \n        // 6. 调用main方法入口\n        Method mainMethod = mainClass.getMethod("main", String[].class);\n        mainMethod.invoke(null, (Object) args);\n    }\n}\n\n// SpringBootApplication.java\n@SpringBootApplication\npublic class MyApplication {\n    public static void main(String[] args) {\n        // 阶段1: JVM启动\n        SpringApplication.run(MyApplication.class, args);\n    }\n}\n\n1. 加载SpringApplication类到方法区\n2. 加载@SpringBootApplication注解元数据\n3. 验证字节码，准备静态变量\n4. 初始化Spring核心类（BeanFactory、ApplicationContext等）\n')])])]),n("h3",{attrs:{id:"初始化springapplication对象"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#初始化springapplication对象"}},[t._v("#")]),t._v(" 初始化SpringApplication对象")]),t._v(" "),n("p",[t._v("SpringBoot整个启动流程分为两个步骤：初始化一个SpringApplication对象、执行该对象的run方法。看下SpringApplication的初始化流程，SpringApplication的构造方法：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('public SpringApplication(ResourceLoader resourceLoader, Class<?>... primarySources) {\n\tthis.resourceLoader = resourceLoader;\n\tAssert.notNull(primarySources, "PrimarySources must not be null");\n\tthis.primarySources = new LinkedHashSet<>(Arrays.asList(primarySources));\n\tthis.webApplicationType = WebApplicationType.deduceFromClasspath();\n\tsetInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class));\n\tsetListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));\n\tthis.mainApplicationClass = deduceMainApplicationClass();\n}\n')])])]),n("p",[t._v("初始化流程中最重要的就是通过 SpringFactoriesLoader 找到 spring.factories 文件中配置的 ApplicationContextInitializer 和 ApplicationListener 两个接口的实现类名称，以便后期构造相应的实例。 ApplicationContextInitializer 的主要目的是在 ConfigurableApplicationContext 做 refresh之前，对ConfigurableApplicationContext实例做进一步的设置或处理。ConfigurableApplicationContext继承自 ApplicationContext ，其主要提供了对 ApplicationContext 进行设置的能力。")]),t._v(" "),n("p",[t._v("Spring Boot提供两种方式来添加"),n("strong",[t._v("自定义监听器")]),t._v("：")]),t._v(" "),n("p",[t._v("通过 SpringApplication.addListeners()或者 SpringApplication.setListeners()两个方法来添加一个或者多个自定义监听器")]),t._v(" "),n("p",[t._v("既然SpringApplication的初始化流程中已经从 spring.factories中获取到 ApplicationListener的实现类，那么我们直接在自己的jar包的 META-INF/spring.factories文件中新增配置即可：")]),t._v(" "),n("h3",{attrs:{id:"执行该对象的run方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#执行该对象的run方法"}},[t._v("#")]),t._v(" 执行该对象的run方法")]),t._v(" "),n("p",[t._v("Spring Boot应用的整个启动流程都封装在 SpringApplication.run 方法中，其整个流程真的是太长太长了，但本质上就是在Spring容器启动的基础上做了大量的扩展，按照这个思路来看看源码")]),t._v(" "),n("p",[t._v("Spring Boot启动调用栈（层次化视图）：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("┌─────────────────────────────────────────────────┐\n│           SpringApplication.run()               │\n├─────────────────────────────────────────────────┤\n│ 1. 启动准备                                      │\n│    ├── configureHeadlessProperty()              │\n│    ├── getRunListeners()                        │\n│    └── listeners.starting() ← 发布启动事件       │\n│                                                │\n│ 2. 环境准备                                      │\n│    ├── new DefaultApplicationArguments(args)    │\n│    ├── prepareEnvironment() ← 核心！            │\n│    │   └── 加载所有配置源                        │\n│    │       ├── application.properties          │\n│    │       ├── application.yml                 │\n│    │       ├── 环境变量                         │\n│    │       └── 命令行参数                       │\n│    ├── configureIgnoreBeanInfo()               │\n│    └── printBanner()                           │\n│                                                │\n│ 3. 应用上下文创建                                │\n│    └── createApplicationContext()               │\n│        ├── Web应用: AnnotationConfigServletWebServerApplicationContext│\n│        └── 普通应用: AnnotationConfigApplicationContext│\n│                                                │\n│ 4. 异常报告器初始化                              │\n│    └── getSpringFactoriesInstances()            │\n│                                                │\n│ 5. 上下文预处理                                  │\n│    └── prepareContext()                         │\n│        ├── 设置环境environment                 │\n│        ├── 执行ApplicationContextInitializer    │\n│        ├── 发布ApplicationPreparedEvent        │\n│        └── 加载Bean定义源                      │\n│                                                │\n│ 6. 容器刷新 ← 真正核心！                        │\n│    └── refreshContext() → context.refresh()     │\n│        ├── 6.1 prepareRefresh()                │\n│        ├── 6.2 obtainFreshBeanFactory()        │\n│        ├── 6.3 prepareBeanFactory()            │\n│        ├── 6.4 postProcessBeanFactory()        │\n│        ├── 6.5 invokeBeanFactoryPostProcessors() ← 重要！│\n│        │   ├── 处理@Configuration类            │\n│        │   ├── 扫描@Component注解类            │\n│        │   ├── 解析@PropertySource            │\n│        │   └── 加载@AutoConfiguration         │\n│        ├── 6.6 registerBeanPostProcessors()     │\n│        ├── 6.7 initMessageSource()             │\n│        ├── 6.8 initApplicationEventMulticaster()│\n│        ├── 6.9 onRefresh() ← 重要！            │\n│        │   └── 创建并启动内嵌服务器             │\n│        ├── 6.10 registerListeners()            │\n│        ├── 6.11 finishBeanFactoryInitialization() ← 重要！│\n│        │   └── 实例化所有非懒加载单例Bean        │\n│        │       ├── 创建Bean实例               │\n│        │       ├── 依赖注入                   │\n│        │       └── 初始化回调                 │\n│        └── 6.12 finishRefresh()                │\n│                                                │\n│ 7. 启动收尾                                      │\n│    ├── afterRefresh()                          │\n│    ├── listeners.started() ← 发布启动完成事件    │\n│    ├── callRunners() ← 执行ApplicationRunner   │\n│    └── listeners.running() ← 发布应用就绪事件    │\n└─────────────────────────────────────────────────┘\n")])])]),n("p",[t._v("核心代码")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("/**\n\t * Run the Spring application, creating and refreshing a new\n\t * {@link ApplicationContext}.\n\t * @param args the application arguments (usually passed from a Java main method)\n\t * @return a running {@link ApplicationContext}\n\t */\n\tpublic ConfigurableApplicationContext run(String... args) {\n\t\t// ============ 阶段0: 启动准备 ============\n\t\tStopWatch stopWatch = new StopWatch();\n\t\tstopWatch.start();\n\t\tConfigurableApplicationContext context = null;\n\t\tCollection<SpringBootExceptionReporter> exceptionReporters = new ArrayList<>();\n\t\t// 1. 设置无头模式（确保在服务器环境运行）\n\t\tconfigureHeadlessProperty();\n\t\t// 2. 获取并启动所有SpringApplicationRunListener\n\t\tSpringApplicationRunListeners listeners = getRunListeners(args);\n\t\tlisteners.starting(); // 发布ApplicationStartingEvent\n\t\ttry {\n\t\t\t// ============ 阶段1: 环境准备 ============\n\t\t\t// 3. 创建应用参数封装\n\t\t\tApplicationArguments applicationArguments = new DefaultApplicationArguments(args);\n\t\t\t// 4. 准备环境（⚠️ 这是真正的第一步核心操作！）\n\t\t\tConfigurableEnvironment environment = prepareEnvironment(listeners, applicationArguments);\n\t\t\t// ✅ 这里加载所有配置：application.properties → application.yml → 环境变量 → 命令行参数\n        \n\t\t\t// 5. 配置忽略的Bean信息（AOP相关）\n\t\t\tconfigureIgnoreBeanInfo(environment);\n\t\t\t// 6. 打印Banner（应用启动logo）\n\t\t\tBanner printedBanner = printBanner(environment);\n\t\t\t\n\t\t\t// ============ 阶段2: 上下文创建 ============\n\t\t\t// 7. 创建应用上下文（根据应用类型）\n\t\t\tcontext = createApplicationContext(); \n\t\t\t// Web应用: AnnotationConfigServletWebServerApplicationContext\n\t\t\t// 普通应用: AnnotationConfigApplicationContext\n\t\t\t\n\t\t\t// 8. 初始化异常报告器\n\t\t\texceptionReporters = getSpringFactoriesInstances(SpringBootExceptionReporter.class,\n\t\t\t\t\tnew Class[] { ConfigurableApplicationContext.class }, context);\n\t\t\t\n\t\t\t// ============ 阶段3: 上下文预处理 ============\n\t\t\t// 9. 准备上下文（⚠️ 关键预处理）\n\t\t\tprepareContext(context, environment, listeners, applicationArguments, printedBanner);\n\t\t\t// ✅ 这里包含：设置环境、执行ApplicationContextInitializer、加载Bean定义等\n\t\t\t\n\t\t\t// ============ 阶段4: 容器刷新 ============\n\t\t\t// 10. 刷新上下文（⚠️ 最核心的阶段！）\n\t\t\trefreshContext(context);\n\t\t\t// ✅ 这里执行完整的ApplicationContext.refresh()，包含：\n\t\t\t//    - BeanFactory准备\n\t\t\t//    - 执行BeanFactoryPostProcessor（包括组件扫描）\n\t\t\t//    - 注册BeanPostProcessor\n\t\t\t//    - 初始化MessageSource\n\t\t\t//    - 初始化事件广播器\n\t\t\t//    - onRefresh() → 创建内嵌Web服务器\n\t\t\t//    - 注册监听器\n\t\t\t//    - 实例化所有非懒加载单例Bean\n\t\t\t//    - 完成刷新\n\t\t\t\n\t\t\t// 11. 后刷新处理（空方法，可扩展）\n\t\t\tafterRefresh(context, applicationArguments);\n\t\t\t\n\t\t\t// ============ 阶段5: 启动完成 ============\n\t\t\tstopWatch.stop();\n\t\t\tif (this.logStartupInfo) {\n\t\t\t\tnew StartupInfoLogger(this.mainApplicationClass).logStarted(getApplicationLog(), stopWatch);\n\t\t\t}\n\t\t\t\n\t\t\t// 12. 发布应用启动完成事件\n\t\t\tlisteners.started(context); // 发布ApplicationStartedEvent\n\t\t\t\n\t\t\t// 13. 执行所有Runner（ApplicationRunner/CommandLineRunner）\n\t\t\tcallRunners(context, applicationArguments);\n\t\t}\n\t\tcatch (Throwable ex) {\n\t\t\thandleRunFailure(context, ex, exceptionReporters, listeners);\n\t\t\tthrow new IllegalStateException(ex);\n\t\t}\n\n\t\ttry {\n\t\t\t// 14. 发布应用就绪事件\n\t\t\tlisteners.running(context);\n\t\t}\n\t\tcatch (Throwable ex) {\n\t\t\thandleRunFailure(context, ex, exceptionReporters, null);\n\t\t\tthrow new IllegalStateException(ex);\n\t\t}\n\t\treturn context;\n\t}\n")])])]),n("h4",{attrs:{id:"获取并启动所有springapplicationrunlistener"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#获取并启动所有springapplicationrunlistener"}},[t._v("#")]),t._v(" 获取并启动所有SpringApplicationRunListener")]),t._v(" "),n("p",[t._v("通过 SpringFactoriesLoader 查找并加载所有的 SpringApplicationRunListeners，通过调用starting()方法通知所有的SpringApplicationRunListener：应用开始启动了。SpringApplicationRunListener 其本质上就是一个事件发布者，它在SpringBoot应用启动的不同时间点发布不同应用事件类型(ApplicationEvent)，如果有哪些事件监听者(ApplicationListener)对这些事件感兴趣，则可以接收并且处理。前面的初始化流程中，SpringApplication 加载了一系列 ApplicationListener。发布事件的代码已经在SpringApplicationRunListeners中实现了。\nSpringApplicationRunListener只有一个实现类： EventPublishingRunListener。此处的代码只会返回一个 SpringApplicationRunListeners ，注意后面多了一个s字母，看下源码就会发现该类就是包含了一个SpringApplicationRunListener的List。操作SpringApplicationRunListeners ，在内部会遍历每一个SpringApplicationRunListener，调用每一个SpringApplicationRunListener的实现类的starting方法")]),t._v(" "),n("h4",{attrs:{id:"准备环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#准备环境"}},[t._v("#")]),t._v(" 准备环境")]),t._v(" "),n("p",[t._v("创建并配置当前应用将要使用的 Environment，Environment用于描述应用程序当前的运行环境，其抽象了两个方面的内容：配置文件(profile)和属性(properties)，开发经验丰富的同学对这两个东西一定不会陌生：不同的环境(eg：生产环境、预发布环境)可以使用不同的配置文件，而属性则可以从配置文件、环境变量、命令行参数等来源获取。因此，当Environment准备好后，在整个应用的任何时候，都可以从Environment中获取资源。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("总结起来，主要完成以下几件事：\n\n- 判断Environment是否存在，不存在就创建（如果是web项目就创建 StandardServletEnvironment，否则创建 StandardEnvironment）\n\n- 配置Environment：配置profile以及properties\n\n- 调用SpringApplicationRunListener的 environmentPrepared()方法，通知事件监听者：应用的Environment已经准备好\n")])])]),n("h4",{attrs:{id:"打印banner图案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#打印banner图案"}},[t._v("#")]),t._v(" 打印Banner图案")]),t._v(" "),n("h4",{attrs:{id:"创建应用上下文"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建应用上下文"}},[t._v("#")]),t._v(" 创建应用上下文")]),t._v(" "),n("p",[t._v("根据不同的ApplicationType创建不同的Context，具体的类型回顾初始化中App类型的介绍")]),t._v(" "),n("h4",{attrs:{id:"准备上下文"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#准备上下文"}},[t._v("#")]),t._v(" 准备上下文")]),t._v(" "),n("p",[t._v("初始化ApplicationContext，主要完成以下工作：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("- 将准备好的Environment设置给ApplicationContext\n\n- 遍历调用所有的ApplicationContextInitializer的 initialize()方法来对已经创建好的ApplicationContext进行进一步的处理\n\n- 调用SpringApplicationRunListener的 contextPrepared()方法，通知所有的监听者：ApplicationContext已经准备完毕\n\n- 将所有的bean加载到容器中\n\n- 调用SpringApplicationRunListener的 contextLoaded()方法，通知所有的监听者：ApplicationContext已经装载完毕\n")])])]),n("h4",{attrs:{id:"容器刷新"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#容器刷新"}},[t._v("#")]),t._v(" 容器刷新")]),t._v(" "),n("p",[t._v("refresh完成配置类的解析、各种BeanFactoryPostProcessor和BeanPostProcessor的注册、国际化配置的初始化、web内置容器的构造等等。")]),t._v(" "),n("p",[t._v("以上就是Spring Boot的整个启动流程，其核心就是在Spring容器初始化并启动的基础上加入各种扩展点，这些扩展点包括：")]),t._v(" "),n("ul",[n("li",[t._v("ApplicationContextInitializer")]),t._v(" "),n("li",[t._v("ApplicationListener")]),t._v(" "),n("li",[t._v("自动配置自定义\norg.springframework.boot.env.EnvironmentPostProcessor:\nAllows for customization of the application's {@link Environment} prior to the application context being refreshed.")]),t._v(" "),n("li",[t._v("各种BeanFactoryPostProcessor等等\norg.springframework.beans.factory.config.BeanFactoryPostProcessor：\n允许我们在容器实例化相应对象之前，对注册到容器的BeanDefinition所保存的信息做一些额外的操作，比如修改bean定义的某些属性或者增加其他信息等。")])]),t._v(" "),n("h3",{attrs:{id:"实例分析启动流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实例分析启动流程"}},[t._v("#")]),t._v(" 实例分析启动流程")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 1. 主启动类\n@SpringBootApplication\npublic class SimpleApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(SimpleApplication.class, args);\n    }\n}\n\n// 2. 一个简单的RestController\n@RestController\npublic class HelloController {\n    @GetMapping("/hello")\n    public String hello() {\n        return "Hello World!";\n    }\n}\n\n// 3. 配置文件application.properties\nserver.port=8080\nspring.application.name=simple-demo\n')])])]),n("h4",{attrs:{id:"阶段1-jvm启动-底层准备"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#阶段1-jvm启动-底层准备"}},[t._v("#")]),t._v(" 阶段1: JVM启动（底层准备）")]),t._v(" "),n("p",[n("code",[t._v("java -jar simple-app.jar")])]),t._v(" "),n("p",[t._v("加载JVM核心库")]),t._v(" "),n("p",[t._v("初始化类加载器层次结构")]),t._v(" "),n("p",[t._v("加载SimpleApplication.class到内存")]),t._v(" "),n("p",[t._v("验证字节码安全性")]),t._v(" "),n("p",[t._v("调用main方法入口")]),t._v(" "),n("h4",{attrs:{id:"阶段2-springapplication-run-初始化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#阶段2-springapplication-run-初始化"}},[t._v("#")]),t._v(" 阶段2: SpringApplication.run() 初始化")]),t._v(" "),n("p",[n("code",[t._v("SpringApplication.run(SimpleApplication.class, args);")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// 内部创建SpringApplication实例\nSpringApplication app = new SpringApplication(SimpleApplication.class);\napp.run(args);\n\n// 2.1 配置无头模式（确保在服务器环境运行）\nconfigureHeadlessProperty(); // java.awt.headless=true\n\n// 2.2 获取并启动监听器\nSpringApplicationRunListeners listeners = getRunListeners(args);\nlisteners.starting(); // 发布ApplicationStartingEvent\n\n// 2.3 创建应用参数封装\nApplicationArguments appArgs = new DefaultApplicationArguments(args);\n// 解析命令行参数：--server.port=9090 等\n")])])]),n("h5",{attrs:{id:"发布启动事件-⭐扩展点1-启动事件监听"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#发布启动事件-⭐扩展点1-启动事件监听"}},[t._v("#")]),t._v(" 发布启动事件 ⭐扩展点1: 启动事件监听")]),t._v(" "),n("p",[n("code",[t._v("listeners.starting(); // 发布ApplicationStartingEvent")])]),t._v(" "),n("p",[t._v("开发者扩展方式：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 方式1: 实现ApplicationListener\n@Component\npublic class MyStartingListener implements ApplicationListener<ApplicationStartingEvent> {\n    @Override\n    public void onApplicationEvent(ApplicationStartingEvent event) {\n        System.out.println("应用开始启动...");\n        // 场景：记录启动日志、初始化监控指标\n    }\n}\n\n// 方式2: 使用@EventListener注解\n@Component\npublic class EventListenerService {\n    @EventListener\n    public void handleStartingEvent(ApplicationStartingEvent event) {\n        // 场景：验证环境配置、检查依赖服务\n        checkRequiredProperties();\n    }\n    \n    private void checkRequiredProperties() {\n        // 检查必需配置是否存在\n        if (System.getProperty("required.config") == null) {\n            throw new IllegalStateException("缺少必需配置");\n        }\n    }\n}\n')])])]),n("p",[t._v("常见场景：")]),t._v(" "),n("p",[t._v("启动日志记录：记录应用启动时间和参数")]),t._v(" "),n("p",[t._v("环境验证：检查必需的环境变量和配置")]),t._v(" "),n("p",[t._v("资源预加载：提前加载常用资源")]),t._v(" "),n("p",[t._v("监控指标初始化：设置应用监控")]),t._v(" "),n("p",[n("strong",[t._v("完整事件顺序：")])]),t._v(" "),n("p",[t._v("ApplicationStartingEvent- 最早，环境还未准备")]),t._v(" "),n("p",[t._v("ApplicationEnvironmentPreparedEvent- 环境已准备，上下文未创建")]),t._v(" "),n("p",[t._v("ApplicationContextInitializedEvent- 上下文已创建，Initializer已执行")]),t._v(" "),n("p",[t._v("ApplicationPreparedEvent- 上下文已准备，refresh()未调用")]),t._v(" "),n("p",[t._v("ApplicationStartedEvent- refresh()已完成，Runner未执行")]),t._v(" "),n("p",[t._v("ApplicationReadyEvent- 完全就绪，Runner已执行")]),t._v(" "),n("h4",{attrs:{id:"阶段3-环境准备-加载配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#阶段3-环境准备-加载配置"}},[t._v("#")]),t._v(" 阶段3: 环境准备（加载配置）")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// 3.1 加载所有配置源（按优先级）\nConfigurableEnvironment environment = prepareEnvironment(listeners, appArgs);\n// 1.  application.properties → server.port=8080\n// 2.  application.yml (不存在)\n// 3.  环境变量 (SPRING_APPLICATION_JSON等)  \n// 4.  命令行参数 (--server.port=9090)\n// 5.  默认属性\n\n")])])]),n("p",[t._v("=>")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// SpringApplication.java\nprivate ConfigurableEnvironment prepareEnvironment(...) {\n    // 1. 创建环境对象（根据应用类型）\n    ConfigurableEnvironment environment = createEnvironment(); \n    // Web应用: StandardServletEnvironment\n    // 普通应用: StandardEnvironment\n    \n    // 2. 配置PropertySource（配置源加载在这里发生！）\n    configurePropertySources(environment, args);\n    \n    // 3. 配置Profile\n    configureProfiles(environment, args);\n    \n    return environment;\n}\n\n// configurePropertySources内部的加载顺序：\npublic void configurePropertySources(ConfigurableEnvironment environment, String[] args) {\n    // 配置源优先级（从高到低）：\n    // 1. 命令行参数 (--server.port=8080)\n    environment.getPropertySources().addFirst(new SimpleCommandLinePropertySource(args));\n    \n    // 2. ServletConfig参数 (Web应用)\n    // 3. ServletContext参数 (Web应用) \n    // 4. JNDI属性\n    // 5. 系统环境变量\n    // 6. 系统属性\n    // 7. 随机值属性\n    // 8. 应用配置文件 ← 主要配置来源！\n    //    - application.properties\n    //    - application.yml  \n    //    - application-{profile}.properties\n    // 9. 默认属性\n}\n")])])]),n("h5",{attrs:{id:"加载配置源-⭐扩展点2-自定义propertysource"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#加载配置源-⭐扩展点2-自定义propertysource"}},[t._v("#")]),t._v(" 加载配置源 ⭐扩展点2: 自定义PropertySource")]),t._v(" "),n("p",[t._v("开发者扩展方式：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('\n@Component\npublic class CustomPropertySourceConfig {\n    @PostConstruct\n    public void addCustomPropertySource() {\n        // 添加自定义配置源\n        MapPropertySource customSource = new MapPropertySource("custom", \n            Collections.singletonMap("custom.property", "value"));\n        environment.getPropertySources().addFirst(customSource);\n    }\n}\n\n// 或者实现EnvironmentPostProcessor\npublic class CustomEnvironmentPostProcessor implements EnvironmentPostProcessor {\n    @Override\n    public void postProcessEnvironment(ConfigurableEnvironment env, \n                                     SpringApplication application) {\n        // 修改或添加配置源\n        env.getPropertySources().addFirst(...);\n\n        // 开发者在这里操作PropertySources\n        MutablePropertySources propertySources = environment.getPropertySources();\n        // 添加自定义配置源或修改现有配置\n        Map<String, Object> customProperties = new HashMap<>();\n        customProperties.put("custom.property", "value");\n        propertySources.addFirst(new MapPropertySource("custom", customProperties));\n    }\n}\n')])])]),n("p",[t._v("常见场景：")]),t._v(" "),n("p",[t._v("数据库配置加密：解密加密的数据库密码")]),t._v(" "),n("p",[t._v("外部配置集成：从外部配置中心加载配置")]),t._v(" "),n("p",[t._v("环境特定配置：根据运行环境动态调整配置")]),t._v(" "),n("h5",{attrs:{id:"printbanner"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#printbanner"}},[t._v("#")]),t._v(" printBanner")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// 3.2 配置忽略的Bean信息（AOP相关）\nconfigureIgnoreBeanInfo(environment);\n\n// 3.3 打印Banner\n// 控制台输出Spring logo和版本信息\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n")])])]),n("p",[t._v("=>")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// configureIgnoreBeanInfo的实际作用：\nprotected void configureIgnoreBeanInfo(ConfigurableEnvironment environment) {\n    // 设置系统属性，告诉Spring跳过某些Bean的元数据解析\n    // 这可以显著提高启动性能，特别是当有大量Bean时\n    \n    String ignore = environment.getProperty("spring.aop.ignore", "true");\n    if ("true".equals(ignore)) {\n        // 设置系统属性，优化AOP处理\n        System.setProperty("spring.aop.auto", "false");\n        \n        // 对于某些已知的基础设施Bean，跳过AOP代理创建\n        // 比如：BeanFactoryPostProcessor, BeanPostProcessor等\n        // 这些Bean不需要AOP代理，跳过检查可以提高性能\n    }\n}\n')])])]),n("p",[t._v("开发者扩展方式：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 自定义Banner\npublic class CustomBanner implements Banner {\n    @Override\n    public void printBanner(Environment environment, \n                           Class<?> sourceClass, PrintStream out) {\n        out.println("=== 我的应用 ===");\n        out.println("版本: " + environment.getProperty("app.version"));\n    }\n}\n\n// 在application.properties中指定\nspring.banner.location=classpath:my-banner.txt\n')])])]),n("h4",{attrs:{id:"阶段4-应用上下文创建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#阶段4-应用上下文创建"}},[t._v("#")]),t._v(" 阶段4: 应用上下文创建")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("context = createApplicationContext();\n// 对于AnnotationConfigApplicationContext：\n// 在构造器中就创建了DefaultListableBeanFactory\n// 但此时是空的，只有基础设施\n")])])]),n("p",[t._v("=>")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// 检测到有spring-web依赖，创建Web容器\nreturn new AnnotationConfigServletWebServerApplicationContext();\n\n// 此时还是空容器，没有任何Bean\n")])])]),n("h4",{attrs:{id:"阶段5-上下文预处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#阶段5-上下文预处理"}},[t._v("#")]),t._v(" 阶段5: 上下文预处理")]),t._v(" "),n("p",[n("code",[t._v("prepareContext(context, environment, listeners, appArgs, printedBanner);")]),t._v("\n=>")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 5.1 设置环境到上下文\ncontext.setEnvironment(environment);\n\n// 5.2 执行ApplicationContextInitializer（如果有）\napplyInitializers(context);\n\n// 发布ApplicationContextInitializedEvent\nlisteners.contextInitialized(context);\n\n// 注册特定的单例Bean\nConfigurableListableBeanFactory beanFactory = context.getBeanFactory();\n// 这里注册的是已经实例化的对象，不是BeanDefinition\nbeanFactory.registerSingleton("springApplicationArguments", applicationArguments);\nif (printedBanner != null) {\n    beanFactory.registerSingleton("springBootBanner", printedBanner);\n}\n\nif (beanFactory instanceof DefaultListableBeanFactory) {\n    ((DefaultListableBeanFactory) beanFactory)\n        .setAllowBeanDefinitionOverriding(this.allowBeanDefinitionOverriding);\n}\n\n// 设置懒初始化（Spring Boot 2.2+）\nif (this.lazyInitialization) {\n    context.addBeanFactoryPostProcessor(new LazyInitializationBeanFactoryPostProcessor());\n}\n\n// 加载源（不是register(SimpleApplication.class)）\n// 将SimpleApplication.class转换为BeanDefinition存入BeanFactory\n// 但此时只是蓝图，还没有实例化\nSet<Object> sources = getAllSources(); // 获取所有配置源，包括主类SimpleApplication\n// load方法会处理配置类\nload(context, sources.toArray(new Object[0]));\n// BeanDefinitionLoader.load() 方法会：\n// 1. 如果source是Class且有@Configuration注解，注册为配置类\n// 2. 处理@ComponentScan，扫描指定包下的@Component类\n// 3. 处理@Import、@ImportResource等注解\n// 4. 为SimpleApplication创建BeanDefinition并注册到BeanFactory\n\n// 简单说：load()将SimpleApplication.class转换为BeanDefinition并注册\n// SimpleApplication.class → 作为配置类注册 → 解析注解 → 扫描包 → 注册其他Bean\n// 所以不是注册SimpleApplication本身，而是：\n// 注册SimpleApplication为配置类（BeanDefinition）\n// 解析其上的注解（@ComponentScan, @EnableAutoConfiguration）\n// 执行组件扫描找到其他Bean\n// 处理自动配置加载spring.factories中的配置\n\n// 5.4 发布ApplicationPreparedEvent\nlisteners.contextPrepared(context);\n')])])]),n("h5",{attrs:{id:"执行applicationcontextinitializer-⭐扩展点3-上下文初始化器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#执行applicationcontextinitializer-⭐扩展点3-上下文初始化器"}},[t._v("#")]),t._v(" 执行ApplicationContextInitializer ⭐扩展点3: 上下文初始化器")]),t._v(" "),n("p",[n("code",[t._v("applyInitializers(context);")]),t._v("\n=>")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// 执行所有ApplicationContextInitializer\nfor (ApplicationContextInitializer initializer : initializers) {\n    initializer.initialize(context);\n}\n")])])]),n("p",[t._v("开发者扩展方式：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 方式1: 实现ApplicationContextInitializer\npublic class MyContextInitializer implements ApplicationContextInitializer<ConfigurableApplicationContext> {\n    @Override\n    public void initialize(ConfigurableApplicationContext context) {\n        // 场景1: 早期Bean注册,实际用例：需要在其他组件的配置阶段就提供服务的基础设施Bean。\n        context.getBeanFactory().registerSingleton("earlyService", new EarlyService());\n        // 这个Bean现在可以在任何BeanFactoryPostProcessor中使用\n        // 比如在自定义的BeanFactoryPostProcessor中：\n        // ConfigService config = beanFactory.getBean("configService");\n\n        // 场景2: 环境验证\n        Environment env = context.getEnvironment();\n        if (!env.containsProperty("db.url")) {\n            throw new IllegalStateException("数据库配置缺失");\n        }\n        \n        // 场景3: 动态配置\n        if (env.acceptsProfiles("cloud")) {\n            System.setProperty("server.port", "8081");\n        }\n    }\n}\n\n// 注册方式1: spring.factories\n// META-INF/spring.factories:\norg.springframework.context.ApplicationContextInitializer=com.example.MyContextInitializer\n\n// 注册方式2: 启动类设置\nnew SpringApplicationBuilder(MyApp.class)\n    .initializers(new MyContextInitializer())\n    .run(args);\n')])])]),n("p",[t._v("常见场景：")]),t._v(" "),n("p",[t._v("早期Bean注册：在容器刷新前注册单例Bean")]),t._v(" "),n("p",[t._v("环境验证：检查必需配置是否就绪")]),t._v(" "),n("p",[t._v("动态配置：根据环境动态修改配置")]),t._v(" "),n("p",[t._v("自定义BeanFactory设置：修改BeanFactory配置")]),t._v(" "),n("h5",{attrs:{id:"beanfactory-registersingleton"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#beanfactory-registersingleton"}},[t._v("#")]),t._v(" beanFactory.registerSingleton")]),t._v(" "),n("p",[t._v('注意: beanFactory.registerSingleton("springApplicationArguments", applicationArguments);')]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('# 启动Spring Boot应用时传入命令行参数\njava -jar myapp.jar --debug --server.port=9090 --spring.profiles.active=dev inputfile.txt\n\n在Spring Boot中，这些参数被封装为：\nApplicationArguments applicationArguments = new DefaultApplicationArguments(args);\n\n选项参数（Option Arguments）：以--开头\n\n--debug→ 选项名："debug"，值：空列表\n\n--server.port=9090→ 选项名："server.port"，值：["9090"]\n\n--spring.profiles.active=dev→ 选项名："spring.profiles.active"，值：["dev"]\n\n非选项参数（Non-option Arguments）：不以--开头\n\ninputfile.txt→ 非选项参数\n\n\n// 方式1：注入使用\n@Component\npublic class MyComponent {\n    @Autowired\n    private ApplicationArguments args;\n    \n    public void checkArgs() {\n        // 检查是否有debug选项\n        if (args.containsOption("debug")) {\n            System.out.println("Debug模式已启用");\n        }\n        \n        // 获取server.port的值\n        List<String> portValues = args.getOptionValues("server.port");\n        if (!portValues.isEmpty()) {\n            String port = portValues.get(0);\n            System.out.println("端口号: " + port);\n        }\n        \n        // 获取非选项参数\n        List<String> nonOptionArgs = args.getNonOptionArgs();\n        System.out.println("非选项参数: " + nonOptionArgs);\n    }\n}\n\n// 方式2：在BeanFactoryPostProcessor中使用\n@Component\npublic class MyBeanFactoryPostProcessor implements BeanFactoryPostProcessor {\n    @Override\n    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {\n        ApplicationArguments args = beanFactory.getBean("springApplicationArguments", ApplicationArguments.class);\n        \n        if (args.containsOption("dev")) {\n            // 开发环境特殊配置\n            enableDevelopmentFeatures();\n        }\n    }\n}\n')])])]),n("h5",{attrs:{id:"为什么需要类型判断-beanfactory-instanceof-defaultlistablebeanfactory"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#为什么需要类型判断-beanfactory-instanceof-defaultlistablebeanfactory"}},[t._v("#")]),t._v(" 为什么需要类型判断 beanFactory instanceof DefaultListableBeanFactory")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// 在prepareContext方法中：\nif (beanFactory instanceof DefaultListableBeanFactory) {\n    // 只有DefaultListableBeanFactory才有这个方法\n    ((DefaultListableBeanFactory) beanFactory)\n        .setAllowBeanDefinitionOverriding(this.allowBeanDefinitionOverriding);\n        // true：允许同名Bean定义覆盖（后注册的覆盖先注册的）\n        // false：不允许覆盖，遇到同名Bean定义时抛出异常\n}\n")])])]),n("p",[t._v("核心原因：Spring的设计支持多种BeanFactory实现, 虽然Spring Boot默认使用DefaultListableBeanFactory，但框架设计上支持多种实现：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// Spring支持的不同BeanFactory实现：\npublic interface ConfigurableListableBeanFactory \n    extends ListableBeanFactory, ConfigurableBeanFactory, AutowireCapableBeanFactory {\n    // 基础接口\n}\n\n// 主要实现类：\npublic class DefaultListableBeanFactory extends AbstractAutowireCapableBeanFactory\n    implements ConfigurableListableBeanFactory, BeanDefinitionRegistry, Serializable {\n    // Spring默认使用的实现\n}\n\n// 其他可能的实现（理论上）：\npublic class CustomBeanFactory implements ConfigurableListableBeanFactory {\n    // 用户自定义的BeanFactory实现\n}\n")])])]),n("p",[t._v("实际应用场景：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 场景1：Spring Boot测试中可能使用不同的BeanFactory\n@SpringBootTest\n@TestPropertySource(properties = "spring.main.allow-bean-definition-overriding=true")\npublic class MyTest {\n    // 测试环境可能使用特殊的BeanFactory配置\n}\n\n// 场景2：自定义BeanFactory（虽然少见，但框架设计上支持）\n@Configuration\npublic class CustomBeanFactoryConfig {\n    @Bean\n    public ConfigurableListableBeanFactory customBeanFactory() {\n        return new CustomBeanFactoryImplementation(); // 用户自定义实现\n    }\n}\n')])])]),n("h5",{attrs:{id:"发布准备事件-⭐扩展点4-准备事件监听"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#发布准备事件-⭐扩展点4-准备事件监听"}},[t._v("#")]),t._v(" 发布准备事件 ⭐扩展点4: 准备事件监听")]),t._v(" "),n("p",[n("code",[t._v("listeners.contextPrepared(context); // ApplicationPreparedEvent")]),t._v("\n开发者扩展方式：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@Component\npublic class PreparedEventListener implements ApplicationListener<ApplicationPreparedEvent> {\n    @Override\n    public void onApplicationEvent(ApplicationPreparedEvent event) {\n        ConfigurableApplicationContext context = event.getApplicationContext();\n        ConfigurableListableBeanFactory beanFactory = context.getBeanFactory();\n        \n        // 场景1: Bean定义分析（在实例化前）\n        String[] beanNames = beanFactory.getBeanDefinitionNames();\n        log.info("已注册Bean定义数量: {}", beanNames.length);\n        \n        // 场景2: 条件配置验证\n        if (!beanFactory.containsBeanDefinition("requiredBean")) {\n            throw new IllegalStateException("必需Bean未配置");\n        }\n        \n        // 场景3: 动态注册配置（基于现有Bean定义）\n        if (beanFactory.containsBeanDefinition("dataSource")) {\n            // 根据现有配置决定是否注册额外组件\n            registerAdditionalComponents(beanFactory);\n        }\n        \n        // 场景4: 性能监控设置\n        setupPerformanceMonitoring(beanFactory);\n        \n        // 预加载缓存\n        preloadCacheData();\n    }\n}\n')])])]),n("h4",{attrs:{id:"阶段6-容器刷新-核心"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#阶段6-容器刷新-核心"}},[t._v("#")]),t._v(" 阶段6: 容器刷新（核心！）")]),t._v(" "),n("p",[n("code",[t._v("refreshContext(context); // → 调用context.refresh()")]),t._v("\n=>")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("AbstractApplicationContext:\n\npublic void refresh() {\n    // 7.1 prepareRefresh() - 设置上下文激活状态、初始化属性源等\n    prepareRefresh();\n    \n    // 7.2 obtainFreshBeanFactory() - 获取或刷新BeanFactory\n    // 对于AnnotationConfigApplicationContext，这里会创建DefaultListableBeanFactory\n    // 但此时是空的，还没有Bean定义\n    ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();\n    \n    // 7.3 prepareBeanFactory() - 配置BeanFactory的基础设施\n    // 设置类加载器、表达式解析器、属性编辑器\n    // 注册环境Bean等基础配置：environment、systemProperties、systemEnvironment\n    prepareBeanFactory(beanFactory);\n    // 此时BeanFactory中已有：\n    // - 几个registerSingleton的单例Bean\n    // - 一些BeanDefinition（来自load()）\n    // 但基础设施（如环境Bean、解析器等）还需要配置\n    \n    \n    // 7.4 postProcessBeanFactory() - 空方法，子类可重写\n    postProcessBeanFactory(beanFactory);\n    // Web应用在这里注册Servlet相关的Scope\n}\n")])])]),n("h5",{attrs:{id:"_6-1-6-4-准备阶段"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-6-4-准备阶段"}},[t._v("#")]),t._v(" 6.1-6.4: 准备阶段")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("prepareRefresh();\nobtainFreshBeanFactory();\nprepareBeanFactory(beanFactory);\npostProcessBeanFactory(beanFactory);\n")])])]),n("h5",{attrs:{id:"_6-5-执行beanfactorypostprocessor-⭐扩展点5-bean工厂后处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-执行beanfactorypostprocessor-⭐扩展点5-bean工厂后处理"}},[t._v("#")]),t._v(" 6.5: 执行BeanFactoryPostProcessor ⭐扩展点5: Bean工厂后处理")]),t._v(" "),n("p",[n("code",[t._v("invokeBeanFactoryPostProcessors();")]),t._v("\n=>")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 6.5.1 处理@SpringBootApplication\n// → 包含@ComponentScan，扫描com.example包\n\n// 6.5.2 找到HelloController（有@RestController注解）\n// @RestController包含@Component，所以被扫描到\n\n// 6.5.3 创建BeanDefinition（Bean蓝图）\nBeanDefinition controllerDef = new RootBeanDefinition(HelloController.class);\ncontrollerDef.setScope(SCOPE_SINGLETON);\n\n// 6.5.4 注册到BeanFactory\nbeanFactory.registerBeanDefinition("helloController", controllerDef);\n\n// 6.5.5 处理自动配置（@EnableAutoConfiguration）\n// 自动配置内嵌服务器、JSON转换器等\n')])])]),n("p",[t._v("为什么需要 BeanFactoryPostProcessor（后处理）")]),t._v(" "),n("p",[t._v("核心答案：动态性和条件化。有些配置无法在编写代码时确定，需要在运行时根据环境决定.")]),t._v(" "),n("p",[t._v("处理对象:BeanDefinition（Bean蓝图）")]),t._v(" "),n("p",[t._v("开发者扩展方式：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 方式1: 实现BeanFactoryPostProcessor\n@Component\npublic class MyBeanFactoryPostProcessor implements BeanFactoryPostProcessor {\n    @Override\n    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {\n        Environment env = beanFactory.getBean(Environment.class);\n        \n        // 场景1: 根据环境动态修改配置\n        if (env.acceptsProfiles("cloud")) {\n            BeanDefinition dbDef = beanFactory.getBeanDefinition("dataSource");\n            // 云环境使用连接池配置\n            dbDef.getPropertyValues().add("url", env.getProperty("CLOUD_DB_URL"));\n        }\n        \n        // 场景2: 条件注册Bean\n        if (isFeatureEnabled(env)) {\n            GenericBeanDefinition featureBean = new GenericBeanDefinition();\n            featureBean.setBeanClass(FeatureService.class);\n            ((DefaultListableBeanFactory) beanFactory)\n                .registerBeanDefinition("featureService", featureBean);\n        }\n        \n        // 场景3: 属性解密\n        BeanDefinition[] beanDefs = beanFactory.getBeanDefinitions();\n        for (BeanDefinition beanDef : beanDefs) {\n            decryptPropertyValues(beanDef); // 解密加密的属性值\n        }\n    }\n}\n')])])]),n("p",[t._v("常见场景：")]),t._v(" "),n("p",[t._v("Bean定义修改：改变作用域、懒加载设置等")]),t._v(" "),n("p",[t._v("条件注册：根据条件动态注册Bean")]),t._v(" "),n("p",[t._v("AOP代理设置：为特定Bean设置代理")]),t._v(" "),n("p",[t._v("属性加密解密：处理加密的配置属性")]),t._v(" "),n("h5",{attrs:{id:"_6-6-注册beanpostprocessor-⭐扩展点6-bean后处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-6-注册beanpostprocessor-⭐扩展点6-bean后处理"}},[t._v("#")]),t._v(" 6.6: 注册BeanPostProcessor ⭐扩展点6: Bean后处理")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// 注册AutowiredAnnotationBeanPostProcessor\n// 用于后续处理@Autowired注入\nregisterBeanPostProcessors(beanFactory);\n")])])]),n("p",[t._v("处理对象:Bean实例（实际对象）")]),t._v(" "),n("p",[t._v("开发者扩展方式：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("@Component\npublic class MyBeanPostProcessor implements BeanPostProcessor {\n    \n    // Bean初始化前调用\n    @Override\n    public Object postProcessBeforeInitialization(Object bean, String beanName) {\n        // 场景1: 监控统计\n        if (bean instanceof RestController) {\n            monitorBeanCreation(beanName, bean.getClass());\n        }\n        \n        // 场景2: 自定义注解处理\n        if (bean.getClass().isAnnotationPresent(MyAnnotation.class)) {\n            processCustomAnnotation(bean);\n        }\n        \n        return bean;\n    }\n    \n    // Bean初始化后调用\n    @Override\n    public Object postProcessAfterInitialization(Object bean, String beanName) {\n        // 场景1: AOP代理创建 这个不是正常的场景而是springboot源码spring-boot-starter-aop的实现,纯粹是举例\n        if (bean instanceof MyService) {\n            return createProxy(bean); // 返回代理对象\n        }\n        \n        // 场景2: 缓存包装\n        if (bean instanceof Repository) {\n            return new CachingRepositoryWrapper((Repository) bean);\n        }\n        \n        return bean;\n    }\n}\n")])])]),n("p",[t._v("常见场景：")]),t._v(" "),n("p",[t._v("AOP代理：为Bean创建动态代理")]),t._v(" "),n("p",[t._v("监控统计：记录Bean创建和调用统计")]),t._v(" "),n("p",[t._v("缓存包装：为数据访问层添加缓存")]),t._v(" "),n("p",[t._v("自定义注解处理：处理业务自定义注解")]),t._v(" "),n("h5",{attrs:{id:"_6-7-6-8-消息源和事件广播器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-7-6-8-消息源和事件广播器"}},[t._v("#")]),t._v(" 6.7-6.8: 消息源和事件广播器")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("initMessageSource();\ninitApplicationEventMulticaster();\n")])])]),n("h5",{attrs:{id:"_6-9-子类特定刷新-⭐扩展点7-内嵌服务器自定义"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-9-子类特定刷新-⭐扩展点7-内嵌服务器自定义"}},[t._v("#")]),t._v(" 6.9: 子类特定刷新 ⭐扩展点7: 内嵌服务器自定义")]),t._v(" "),n("p",[n("code",[t._v("onRefresh(); // ServletWebServerApplicationContext.onRefresh()")]),t._v("\n=>")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 6.9.1 创建内嵌Tomcat服务器\nTomcat tomcat = new Tomcat();\ntomcat.setPort(8080); // 从配置读取\n\n// 6.9.2 创建DispatcherServlet（Spring MVC核心）\nDispatcherServlet dispatcherServlet = new DispatcherServlet(context);\n\n// 6.9.3 注册Servlet映射\ncontext.addServlet("dispatcher", dispatcherServlet).addMapping("/");\n\n// 6.9.4 启动Tomcat（但还没开始监听端口）\ntomcat.start();\n')])])]),n("p",[t._v("开发者扩展方式：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 自定义内嵌服务器配置\n@Configuration\npublic class ServerConfig {\n    \n    @Bean\n    public ServletWebServerFactory servletContainer() {\n        TomcatServletWebServerFactory tomcat = new TomcatServletWebServerFactory();\n        tomcat.setPort(8080);\n        tomcat.addConnectorCustomizers(connector -> {\n            // 自定义连接器配置\n            connector.setProperty("maxThreads", "200");\n        });\n        return tomcat;\n    }\n    \n    @Bean\n    public DispatcherServlet dispatcherServlet() {\n        return new DispatcherServlet();\n    }\n}\n')])])]),n("h5",{attrs:{id:"_6-10-注册监听器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-10-注册监听器"}},[t._v("#")]),t._v(" 6.10: 注册监听器")]),t._v(" "),n("p",[n("code",[t._v("registerListeners();")])]),t._v(" "),n("h5",{attrs:{id:"_6-11-完成beanfactory初始化-⭐扩展点8-bean生命周期回调"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-11-完成beanfactory初始化-⭐扩展点8-bean生命周期回调"}},[t._v("#")]),t._v(" 6.11: 完成BeanFactory初始化 ⭐扩展点8: Bean生命周期回调")]),t._v(" "),n("p",[n("code",[t._v("finishBeanFactoryInitialization();")]),t._v("\n=>")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 6.11.1 实例化HelloController\nHelloController controller = new HelloController(); // 调用构造方法\n\n// 6.11.2 依赖注入（本例没有依赖，跳过）\n\n// 6.11.3 初始化回调\n// 调用@PostConstruct方法（本例没有）\n\n// 6.11.4 注册到单例池\nsingletonObjects.put("helloController", controller);\n')])])]),n("p",[t._v("开发者扩展方式：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("@Component\npublic class MyService implements InitializingBean, DisposableBean {\n    \n    // InitializingBean - 初始化回调\n    @Override\n    public void afterPropertiesSet() throws Exception {\n        // 场景：资源初始化\n        initializeResources();\n        loadReferenceData();\n    }\n    \n    // DisposableBean - 销毁回调  \n    @Override\n    public void destroy() throws Exception {\n        // 场景：资源清理\n        cleanupResources();\n        closeConnections();\n    }\n    \n    // 或使用注解方式\n    @PostConstruct\n    public void init() {\n        // 初始化逻辑\n    }\n    \n    @PreDestroy\n    public void cleanup() {\n        // 清理逻辑\n    }\n}\n")])])]),n("h5",{attrs:{id:"_6-12-完成刷新-⭐扩展点9-上下文刷新事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-12-完成刷新-⭐扩展点9-上下文刷新事件"}},[t._v("#")]),t._v(" 6.12: 完成刷新 ⭐扩展点9: 上下文刷新事件")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// 发布ContextRefreshedEvent事件\n// 完成容器初始化\nfinishRefresh();\n")])])]),n("p",[t._v("开发者扩展方式：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("@Component\npublic class ContextRefreshedListener implements ApplicationListener<ContextRefreshedEvent> {\n    @Override\n    public void onApplicationEvent(ContextRefreshedEvent event) {\n        // 场景：容器刷新完成后执行初始化\n        ApplicationContext context = event.getApplicationContext();\n        \n        // 验证所有必需Bean是否就绪\n        validateRequiredBeans(context);\n        \n        // 启动后台任务\n        startBackgroundJobs();\n    }\n}\n")])])]),n("h4",{attrs:{id:"阶段7-启动收尾"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#阶段7-启动收尾"}},[t._v("#")]),t._v(" 阶段7: 启动收尾")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// 7.1 后处理（空方法，可扩展）\nafterRefresh(context, applicationArguments);\n\n// 7.2 发布启动完成事件 ⭐扩展点10: 启动完成事件\nlisteners.started(context); // ApplicationStartedEvent\n\n// 7.3 执行Runner（如果有ApplicationRunner/CommandLineRunner）⭐扩展点11: 启动Runner\ncallRunners(context, appArgs);\n\n// 7.4 发布应用就绪事件 ⭐扩展点12: 应用就绪事件 \nlisteners.running(context); // ApplicationReadyEvent\n\n// 7.5 Tomcat开始监听端口（真正接受请求）\n// 控制台输出: Tomcat started on port(s): 8080 (http)\n")])])]),n("p",[t._v("Runner扩展方式：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@Component\npublic class MyApplicationRunner implements ApplicationRunner {\n    @Override\n    public void run(ApplicationArguments args) throws Exception {\n        // 场景1: 数据初始化\n        if (args.containsOption("init-data")) {\n            initializeSampleData();\n        }\n        \n        // 场景2: 连接检查\n        checkExternalServices();\n        \n        // 场景3: 缓存预热\n        warmUpCaches();\n    }\n}\n\n@Component  \npublic class MyCommandLineRunner implements CommandLineRunner {\n    @Override\n    public void run(String... args) throws Exception {\n        // 处理命令行参数\n        for (String arg : args) {\n            if (arg.equals("--debug")) {\n                enableDebugMode();\n            }\n        }\n    }\n}\n')])])]),n("h4",{attrs:{id:"最终状态-应用就绪"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#最终状态-应用就绪"}},[t._v("#")]),t._v(" 最终状态：应用就绪")]),t._v(" "),n("p",[t._v("时间点 T0: 创建BeanFactory（空）")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// 刚创建时的BeanFactory内容：\nBeanFactory状态：\n├── singletonObjects: {}                    // 空单例池\n├── beanDefinitionMap: {}                  // 空Bean定义映射\n├── embeddedValueResolvers: []              // 空值解析器\n└── 基本基础设施: \n    ├── 类加载器\n    ├── 类型转换服务\n    └── 基本属性编辑器\n")])])]),n("p",[t._v('时间点 T1: registerSingleton("springApplicationArguments") → 添加具体对象')]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 添加具体对象后的状态：\nBeanFactory状态：\n├── singletonObjects: \n│   └── "springApplicationArguments" → ApplicationArguments实例\n├── beanDefinitionMap: {}                  // 仍然无Bean定义\n├── embeddedValueResolvers: []\n└── 基本基础设施\n')])])]),n("p",[t._v("时间点 T2: load() → 注册BeanDefinition（蓝图）")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// load()处理SimpleApplication.class后的状态：\nBeanFactory状态：\n├── singletonObjects: \n│   └── "springApplicationArguments" → ApplicationArguments实例\n├── beanDefinitionMap: \n│   ├── "simpleApplication" → BeanDefinition(SimpleApplication.class)\n│   ├── "helloController" → BeanDefinition(HelloController.class)   // 扫描到的\n│   ├── "userService" → BeanDefinition(UserService.class)           // 扫描到的\n│   └── 其他自动配置的BeanDefinition...\n├── embeddedValueResolvers: []\n└── 基本基础设施\n')])])]),n("p",[t._v("时间点 T3: prepareBeanFactory() → 配置BeanFactory基础设施")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 配置基础设施后的状态：\nBeanFactory状态：\n├── singletonObjects: \n│   ├── "springApplicationArguments" → ApplicationArguments实例\n│   └── "environment" → Environment实例              // 新添加的环境Bean\n├── beanDefinitionMap: \n│   ├── "simpleApplication" → BeanDefinition\n│   ├── "helloController" → BeanDefinition\n│   └── ...\n├── embeddedValueResolvers: [默认值解析器]           // 新增\n└── 增强的基础设施:\n    ├── 完整的属性编辑器\n    ├── 表达式解析器\n    ├── 作用域管理器\n    └── 类型转换服务\n')])])]),n("p",[t._v("时间点 T4: invokeBeanFactoryPostProcessors() → 处理所有BeanDefinition")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 处理后处理器后的状态（可能的变化）：\nBeanFactory状态：\n├── singletonObjects: \n│   ├── "springApplicationArguments" → ApplicationArguments实例\n│   └── "environment" → Environment实例\n├── beanDefinitionMap: \n│   ├── "simpleApplication" → BeanDefinition（可能被修改）\n│   ├── "helloController" → BeanDefinition（可能被修改）\n│   ├── "userService" → BeanDefinition（可能被修改）\n│   ├── "newDynamicBean" → BeanDefinition（可能新增） // 动态注册的\n│   └── ...\n├── embeddedValueResolvers: [默认值解析器]\n└── 基础设施\n')])])]),n("p",[t._v("时间点 T5: finishBeanFactoryInitialization() → 实例化所有单例Bean")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 实例化所有单例Bean后的状态：\nBeanFactory状态：\n├── singletonObjects: \n│   ├── "springApplicationArguments" → ApplicationArguments实例\n│   ├── "environment" → Environment实例\n│   ├── "simpleApplication" → SimpleApplication实例（已实例化）\n│   ├── "helloController" → HelloController实例（已实例化+依赖注入）\n│   ├── "userService" → UserService实例（已实例化+依赖注入）\n│   └── 所有其他单例Bean...\n├── beanDefinitionMap: \n│   ├── "simpleApplication" → BeanDefinition\n│   ├── "helloController" → BeanDefinition\n│   └── ...（定义仍然保留）\n├── embeddedValueResolvers: [默认值解析器]\n└── 基础设施\n')])])]),n("p",[t._v("应用启动完成后的状态：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('├── BeanFactory中有：\n│   └── helloController : HelloController实例\n├── Web服务器：\n│   └── Tomcat运行在8080端口\n├── URL映射：\n│   └── /hello → HelloController.hello()方法\n└── 可以处理请求：\n    GET http://localhost:8080/hello → "Hello World!"\n')])])]),n("h4",{attrs:{id:"具体业务场景1-加密配置解密服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#具体业务场景1-加密配置解密服务"}},[t._v("#")]),t._v(" 具体业务场景1：加密配置解密服务")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 在ApplicationContextInitializer中早期注册解密服务\npublic class DecryptionInitializer implements ApplicationContextInitializer {\n    @Override\n    public void initialize(ConfigurableApplicationContext context) {\n        // 早期注册解密服务\n        context.getBeanFactory().registerSingleton("configDecryptor", new ConfigDecryptor());\n        \n        // 现在其他BeanFactoryPostProcessor可以使用这个解密服务\n        // 例如：解密数据库密码、API密钥等敏感配置\n    }\n}\n\n// 在BeanFactoryPostProcessor中使用早期注册的Bean\n@Component\npublic class DecryptionPostProcessor implements BeanFactoryPostProcessor {\n    @Override\n    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {\n        // 获取早期注册的解密服务\n        ConfigDecryptor decryptor = beanFactory.getBean("configDecryptor", ConfigDecryptor.class);\n        \n        // 解密所有加密属性\n        BeanDefinition definition = beanFactory.getBeanDefinition("dataSource");\n        String encryptedPassword = (String) definition.getPropertyValues().get("password");\n        String decryptedPassword = decryptor.decrypt(encryptedPassword);\n        definition.getPropertyValues().add("password", decryptedPassword);\n    }\n}\n')])])]),n("h4",{attrs:{id:"具体业务场景2-环境检测服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#具体业务场景2-环境检测服务"}},[t._v("#")]),t._v(" 具体业务场景2：环境检测服务")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 早期注册环境检测服务\npublic class EnvironmentDetectorInitializer implements ApplicationContextInitializer {\n    @Override\n    public void initialize(ConfigurableApplicationContext context) {\n        EnvironmentDetector detector = new EnvironmentDetector();\n        context.getBeanFactory().registerSingleton("envDetector", detector);\n        \n        // 根据环境动态设置配置\n        if (detector.isCloudEnvironment()) {\n            System.setProperty("server.port", "8081");\n            System.setProperty("spring.profiles.active", "cloud");\n        }\n    }\n}\n')])])]),n("h4",{attrs:{id:"具体业务场景3-功能开关服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#具体业务场景3-功能开关服务"}},[t._v("#")]),t._v(" 具体业务场景3：功能开关服务")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 早期注册功能开关服务，用于控制后续Bean的注册\npublic class FeatureToggleInitializer implements ApplicationContextInitializer {\n    @Override\n    public void initialize(ConfigurableApplicationContext context) {\n        FeatureToggle toggle = new FeatureToggle();\n        context.getBeanFactory().registerSingleton("featureToggle", toggle);\n        \n        // 其他BeanFactoryPostProcessor可以查询功能开关状态\n        // 决定是否注册某些Bean\n    }\n}\n')])])]),n("h2",{attrs:{id:"_3-spring-boot应用监控与调优方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-spring-boot应用监控与调优方案"}},[t._v("#")]),t._v(" 3. Spring Boot应用监控与调优方案")]),t._v(" "),n("p",[t._v("生产环境监控：使用APM工具（如SkyWalking、Pinpoint）")]),t._v(" "),n("p",[t._v("开发阶段：集成Spring Boot DevTools进行热加载监控")]),t._v(" "),n("p",[t._v("整体监控架构")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐\n│   应用层监控      │    │   JVM层监控      │    │   系统层监控      │\n│                 │    │                 │    │                 │\n│ • 启动时间监控    │    │ • 内存使用       │    │ • CPU使用率      │\n│ • Bean加载监控   │    │ • GC统计        │    │ • 磁盘IO         │\n│ • 请求响应监控    │    │ • 线程状态       │    │ • 网络流量       │\n└─────────┬───────┘    └─────────┬───────┘    └─────────┬───────┘\n          │                      │                      │\n          └──────────────────────┼──────────────────────┘\n                                 │\n                    ┌─────────────▼─────────────┐\n                    │     监控数据收集层          │\n                    │                           │\n                    │ • Micrometer              │\n                    │ • Spring Boot Actuator    │\n                    │ • 自定义监控组件           │\n                    └─────────────┬─────────────┘\n                                 │\n                    ┌─────────────▼─────────────┐\n                    │     数据存储与可视化        │\n                    │                           │\n                    │ • Prometheus + Grafana    │\n                    │ • ELK Stack               │\n                    │ • 时序数据库              │\n                    └───────────────────────────┘\n")])])]),n("h3",{attrs:{id:"依赖配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#依赖配置"}},[t._v("#")]),t._v(" 依赖配置")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("\x3c!-- Spring Boot Actuator --\x3e\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-actuator</artifactId>\n</dependency>\n\n\x3c!-- Micrometer Prometheus --\x3e\n<dependency>\n    <groupId>io.micrometer</groupId>\n    <artifactId>micrometer-registry-prometheus</artifactId>\n</dependency>\n\n\x3c!-- 性能监控 --\x3e\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-aop</artifactId>\n</dependency>\n\n\x3c!-- 日志监控 --\x3e\n<dependency>\n    <groupId>net.logstash.logback</groupId>\n    <artifactId>logstash-logback-encoder</artifactId>\n    <version>7.2</version>\n</dependency>\n")])])]),n("h3",{attrs:{id:"启动过程专项监控"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动过程专项监控"}},[t._v("#")]),t._v(" 启动过程专项监控")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@Component\npublic class StartupMonitor {\n    private static final Logger logger = LoggerFactory.getLogger(StartupMonitor.class);\n    \n    private long appStartTime;\n    private Map<String, Long> phaseTimestamps = new ConcurrentHashMap<>();\n    \n    @EventListener\n    public void handleApplicationStarting(ApplicationStartingEvent event) {\n        appStartTime = System.currentTimeMillis();\n        phaseTimestamps.put("starting", appStartTime);\n        logger.info("应用开始启动: {}", appStartTime);\n    }\n    \n    @EventListener\n    public void handleEnvironmentPrepared(ApplicationEnvironmentPreparedEvent event) {\n        long time = System.currentTimeMillis();\n        phaseTimestamps.put("environmentPrepared", time);\n        logger.info("环境准备完成, 耗时: {}ms", time - appStartTime);\n        \n        // 记录环境配置信息\n        Environment env = event.getEnvironment();\n        logger.info("Active Profiles: {}", Arrays.toString(env.getActiveProfiles()));\n        logger.info("Config Locations: {}", env.getProperty("spring.config.location", "default"));\n    }\n    \n    @EventListener\n    public void handleContextPrepared(ApplicationPreparedEvent event) {\n        long time = System.currentTimeMillis();\n        phaseTimestamps.put("contextPrepared", time);\n        logger.info("上下文准备完成, 总耗时: {}ms", time - appStartTime);\n        \n        // 记录Bean定义数量\n        ConfigurableListableBeanFactory beanFactory = event.getApplicationContext().getBeanFactory();\n        int beanDefinitionCount = beanFactory.getBeanDefinitionCount();\n        logger.info("Bean定义数量: {}", beanDefinitionCount);\n    }\n    \n    @EventListener\n    public void handleContextRefreshed(ContextRefreshedEvent event) {\n        long time = System.currentTimeMillis();\n        phaseTimestamps.put("contextRefreshed", time);\n        \n        ApplicationContext context = event.getApplicationContext();\n        String[] beanNames = context.getBeanDefinitionNames();\n        \n        logger.info("容器刷新完成, Bean实例化数量: {}, 总耗时: {}ms", \n                   beanNames.length, time - appStartTime);\n        \n        // 分析Bean依赖关系\n        analyzeBeanDependencies(context, beanNames);\n        \n        // 识别慢加载Bean\n        identifySlowLoadingBeans();\n\n        // 记录启动性能指标\n        recordStartupMetrics();\n    }\n    \n    @EventListener\n    public void handleApplicationReady(ApplicationReadyEvent event) {\n        long totalTime = System.currentTimeMillis() - appStartTime;\n        logger.info("应用启动完成, 总耗时: {}ms", totalTime);\n        \n        // 发布启动性能报告\n        publishStartupReport(totalTime);\n    }\n    \n    private void analyzeBeanDependencies(ApplicationContext context, String[] beanNames) {\n        logger.info("=== Bean依赖分析 ===");\n        \n        for (String beanName : beanNames) {\n            if (beanName.contains("Service") || beanName.contains("Controller")) {\n                BeanDefinition bd = ((DefaultListableBeanFactory) \n                    context.getAutowireCapableBeanFactory()).getBeanDefinition(beanName);\n                \n                if (bd.hasAttribute("dependsOn")) {\n                    String[] dependsOn = (String[]) bd.getAttribute("dependsOn");\n                    logger.info("Bean {} 依赖: {}", beanName, Arrays.toString(dependsOn));\n                }\n            }\n        }\n    }\n    \n    private void identifySlowLoadingBeans() {\n        logger.info("=== 慢加载Bean识别 ===");\n        \n        phaseTimestamps.entrySet().stream()\n            .filter(entry -> entry.getValue().getMaxTime() > 500) // 超过500ms\n            .sorted((e1, e2) -> Long.compare(e2.getValue().getMaxTime(), \n                    e1.getValue().getMaxTime()))\n            .forEach(entry -> {\n                logger.warn("慢加载Bean: {}, 最大耗时: {}ms", \n                    entry.getKey(), entry.getValue().getMaxTime());\n            });\n    }\n\n    private void recordStartupMetrics() {\n        // 记录到Micrometer指标\n        Metrics.gauge("application.startup.duration", \n            System.currentTimeMillis() - appStartTime);\n        Metrics.gauge("application.beans.count", \n            phaseTimestamps.size());\n    }\n    \n    private void publishStartupReport(long totalTime) {\n        logger.info("=== Spring Boot启动性能报告 ===");\n        logger.info("总启动时间: {}ms", totalTime);\n        \n        phaseTimestamps.entrySet().stream()\n            .sorted(Map.Entry.comparingByValue())\n            .forEach(entry -> {\n                logger.info("阶段 {}: {}ms", entry.getKey(), entry.getValue() - appStartTime);\n            });\n    }\n}\n')])])]),n("h3",{attrs:{id:"bean加载性能监控"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bean加载性能监控"}},[t._v("#")]),t._v(" Bean加载性能监控")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@Component\npublic class BeanLoadingMonitor implements BeanPostProcessor {\n    private final Map<String, Long> beanCreationStartTimes = new ConcurrentHashMap<>();\n    private final Map<String, BeanMetrics> beanMetrics = new ConcurrentHashMap<>();\n    \n    @Override\n    public Object postProcessBeforeInitialization(Object bean, String beanName) {\n        beanCreationStartTimes.put(beanName, System.currentTimeMillis());\n        return bean;\n    }\n    \n    @Override\n    public Object postProcessAfterInitialization(Object bean, String beanName) {\n        Long startTime = beanCreationStartTimes.remove(beanName);\n        if (startTime != null) {\n            long duration = System.currentTimeMillis() - startTime;\n            BeanMetrics metrics = beanMetrics.computeIfAbsent(beanName, \n                k -> new BeanMetrics(bean.getClass().getSimpleName()));\n            metrics.recordCreation(duration);\n            \n            if (duration > 100) { // 超过100ms记录警告\n                logger.warn("Bean [{}] 初始化耗时较长: {}ms", beanName, duration);\n            }\n        }\n        return bean;\n    }\n    \n    @EventListener\n    public void handleApplicationReady(ApplicationReadyEvent event) {\n        // 启动完成后输出Bean加载性能报告\n        logger.info("=== Bean加载性能报告 ===");\n        beanMetrics.entrySet().stream()\n            .sorted((e1, e2) -> Long.compare(e2.getValue().getMaxTime(), e1.getValue().getMaxTime()))\n            .limit(10) // 只显示最慢的10个Bean\n            .forEach(entry -> {\n                BeanMetrics metrics = entry.getValue();\n                logger.info("Bean [{}]: 最大耗时={}ms, 平均耗时={}ms", \n                    entry.getKey(), metrics.getMaxTime(), metrics.getAverageTime());\n            });\n    }\n    \n    static class BeanMetrics {\n        private final String className;\n        private long totalTime;\n        private long maxTime;\n        private int count;\n        \n        BeanMetrics(String className) {\n            this.className = className;\n        }\n        \n        void recordCreation(long duration) {\n            totalTime += duration;\n            maxTime = Math.max(maxTime, duration);\n            count++;\n        }\n        \n        long getAverageTime() {\n            return count > 0 ? totalTime / count : 0;\n        }\n        \n        long getMaxTime() {\n            return maxTime;\n        }\n    }\n}\n')])])]),n("h3",{attrs:{id:"配置类加载监控"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置类加载监控"}},[t._v("#")]),t._v(" 配置类加载监控")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@Component\npublic class ConfigurationLoadMonitor implements BeanFactoryPostProcessor {\n    \n    @Override\n    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {\n        if (beanFactory instanceof DefaultListableBeanFactory) {\n            DefaultListableBeanFactory dlbf = (DefaultListableBeanFactory) beanFactory;\n            \n            // 监控配置类解析\n            dlbf.addBeanPostProcessor(new BeanPostProcessor() {\n                @Override\n                public Object postProcessBeforeInitialization(Object bean, String beanName) {\n                    if (beanName != null && beanName.endsWith("Configuration")) {\n                        logger.debug("配置类加载: {}", beanName);\n                    }\n                    return bean;\n                }\n            });\n        }\n    }\n}\n')])])]),n("h3",{attrs:{id:"jvm级别监控配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jvm级别监控配置"}},[t._v("#")]),t._v(" JVM级别监控配置")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("# application-monitor.yml\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: health,info,metrics,prometheus,startup\n  endpoint:\n    metrics:\n      enabled: true\n    prometheus:\n      enabled: true\n  metrics:\n    export:\n      prometheus:\n        enabled: true\n    enable:\n      jvm: true\n      system: true\n      logback: true\n  tracing:\n    sampling:\n      probability: 1.0\n\n# JVM监控配置\nserver:\n  port: 8080\nspring:\n  application:\n    name: my-monitored-app\n")])])]),n("h3",{attrs:{id:"自定义健康检查与指标"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义健康检查与指标"}},[t._v("#")]),t._v(" 自定义健康检查与指标")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@Component\npublic class ApplicationHealthIndicator implements HealthIndicator {\n    \n    @Override\n    public Health health() {\n        // 检查应用健康状态\n        boolean isHealthy = checkApplicationHealth();\n        \n        if (isHealthy) {\n            return Health.up()\n                .withDetail("启动时间", ManagementFactory.getRuntimeMXBean().getUptime() + "ms")\n                .withDetail("内存使用", getMemoryUsage())\n                .build();\n        } else {\n            return Health.down()\n                .withDetail("错误原因", "应用运行异常")\n                .build();\n        }\n    }\n    \n    private String getMemoryUsage() {\n        Runtime runtime = Runtime.getRuntime();\n        long usedMemory = runtime.totalMemory() - runtime.freeMemory();\n        long maxMemory = runtime.maxMemory();\n        return String.format("%.2fMB/%.2fMB", \n            usedMemory / 1024.0 / 1024.0, maxMemory / 1024.0 / 1024.0);\n    }\n}\n\n@Component\npublic class CustomMetrics {\n    private final MeterRegistry meterRegistry;\n    private final Counter beanCreationCounter;\n    private final Timer startupTimer;\n    \n    public CustomMetrics(MeterRegistry meterRegistry) {\n        this.meterRegistry = meterRegistry;\n        this.beanCreationCounter = Counter.builder("application.beans.created")\n            .description("应用创建的Bean数量")\n            .register(meterRegistry);\n            \n        this.startupTimer = Timer.builder("application.startup.time")\n            .description("应用启动时间")\n            .register(meterRegistry);\n    }\n    \n    public void recordBeanCreation() {\n        beanCreationCounter.increment();\n    }\n    \n    public void recordStartupTime(long duration) {\n        startupTimer.record(duration, TimeUnit.MILLISECONDS);\n    }\n}\n')])])]),n("h3",{attrs:{id:"日志监控配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#日志监控配置"}},[t._v("#")]),t._v(" 日志监控配置")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('\x3c!-- logback-spring.xml --\x3e\n<configuration>\n    <appender name="JSON" class="ch.qos.logback.core.ConsoleAppender">\n        <encoder class="net.logstash.logback.encoder.LogstashEncoder">\n            <customFields>{"application":"${spring.application.name}"}</customFields>\n        </encoder>\n    </appender>\n    \n    <appender name="METRICS" class="ch.qos.logback.core.rolling.RollingFileAppender">\n        <file>logs/metrics.log</file>\n        <encoder>\n            <pattern>%d{yyyy-MM-dd HH:mm:ss} - %msg%n</pattern>\n        </encoder>\n        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">\n            <fileNamePattern>logs/metrics.%d{yyyy-MM-dd}.log</fileNamePattern>\n        </rollingPolicy>\n    </appender>\n    \n    <logger name="com.example.monitor" level="DEBUG" additivity="false">\n        <appender-ref ref="METRICS" />\n        <appender-ref ref="JSON" />\n    </logger>\n    \n    <root level="INFO">\n        <appender-ref ref="JSON" />\n    </root>\n</configuration>\n')])])]),n("h3",{attrs:{id:"grafana监控面板配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#grafana监控面板配置"}},[t._v("#")]),t._v(" Grafana监控面板配置")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('{\n  "title": "Spring Boot应用监控",\n  "panels": [\n    {\n      "title": "启动时间监控",\n      "targets": [\n        {\n          "expr": "application_startup_time_seconds",\n          "legendFormat": "启动耗时"\n        }\n      ],\n      "type": "stat"\n    },\n    {\n      "title": "Bean加载性能",\n      "targets": [\n        {\n          "expr": "rate(application_beans_created_total[5m])",\n          "legendFormat": "Bean创建速率"\n        }\n      ],\n      "type": "graph"\n    },\n    {\n      "title": "JVM内存使用",\n      "targets": [\n        {\n          "expr": "jvm_memory_used_bytes{area=\\"heap\\"}",\n          "legendFormat": "堆内存"\n        }\n      ],\n      "type": "graph"\n    }\n  ]\n}\n')])])]),n("h2",{attrs:{id:"_4-使用springboot开发应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-使用springboot开发应用"}},[t._v("#")]),t._v(" 4. 使用springboot开发应用")]),t._v(" "),n("h3",{attrs:{id:"_4-0-项目技巧"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-0-项目技巧"}},[t._v("#")]),t._v(" 4.0 项目技巧")]),t._v(" "),n("h4",{attrs:{id:"include"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#include"}},[t._v("#")]),t._v(" include")]),t._v(" "),n("p",[t._v("application.yml")]),t._v(" "),n("p",[t._v("application-datasource.yml")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("spring:\n  profiles:\n    #split into multiple profile files\n    include: datasource\n")])])]),n("h4",{attrs:{id:"multiple-env-dev-prod"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#multiple-env-dev-prod"}},[t._v("#")]),t._v(" multiple env: dev prod")]),t._v(" "),n("p",[t._v("application.properties")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("spring.profiles.active:@spring.profiles.active@\n")])])]),n("p",[t._v("application-dev.yml")]),t._v(" "),n("p",[t._v("application-prod.yml")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("mvn spring-boot:run -Dspring.profiles.active=dev\nmvn clean install -Dspring.profiles.active=dev\n")])])]),n("p",[t._v("~pom.xml(不需要）~")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("<profiles>\n        <profile>\n            <id>dev</id>\n            <properties>\n                <myActiveProfile>dev</myActiveProfile>\n            </properties>\n        </profile>\n        <profile>\n            <id>prod</id>\n            <properties>\n                <myActiveProfile>prod</myActiveProfile>\n            </properties>\n        </profile>\n    </profiles>\n")])])]),n("h3",{attrs:{id:"_4-1-业务开发"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-业务开发"}},[t._v("#")]),t._v(" 4.1 业务开发")]),t._v(" "),n("h4",{attrs:{id:"_4-1-1-使用starter"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-1-使用starter"}},[t._v("#")]),t._v(" 4.1.1 使用starter")]),t._v(" "),n("h5",{attrs:{id:"pom-depenedency"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pom-depenedency"}},[t._v("#")]),t._v(" POM depenedency")]),t._v(" "),n("p",[t._v("spring boot官方提供了很多现成的starter，可以直接引用其depdendency使用比如\n"),n("a",{attrs:{href:"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-starter",target:"_blank",rel:"noopener noreferrer"}},[t._v("starters"),n("OutboundLink")],1)]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[n("code",[t._v("spring-boot-starter")])]),t._v(" "),n("th",[t._v("Core starter, including auto-configuration support, logging and YAML")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("spring-boot-starter-web")]),t._v(" "),n("td",[t._v("Starter for building web, including RESTful, applications using Spring MVC. Uses Tomcat as the default embedded container")])]),t._v(" "),n("tr",[n("td",[t._v("spring-boot-starter-jdbc")]),t._v(" "),n("td",[t._v("Starter for using JDBC with the HikariCP connection pool")])])])]),t._v(" "),n("p",[t._v("但是问题是引用时需要加版本号，很多starter之间以及跟其他的dependency之间可能有版本依赖冲突，\n所以官方推荐使用parent方式或者import方式引入某个版本的spring-boot-starter-parent，因为这个parent里面已经定义好了各个版本号，\n所以在引用比如spring-boot-starter-web的时候就不需要添加版本号了")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("\x3c!-- Inherit defaults from Spring Boot --\x3e\n<parent>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-parent</artifactId>\n    <version>2.2.6.RELEASE</version>\n</parent>\n\n<dependencyManagement>\n\t<dependencies>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-web</artifactId>\n\t\t</dependency>\n\t</dependencies>\n</dependencyManagement>\n\n\x3c!--The spring-boot-starter-parent POM includes <executions> configuration to bind the repackage goal.--\x3e\n<build>\n    <plugins>\n        <plugin>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-maven-plugin</artifactId>\n        </plugin>\n    </plugins>\n</build>\n\n\x3c!-- Dependence Override \nfull list: https://github.com/spring-projects/spring-boot/blob/v2.2.6.RELEASE/spring-boot-project/spring-boot-dependencies/pom.xml\n--\x3e\n<properties>\n    <spring-data-releasetrain.version>Fowler-SR2</spring-data-releasetrain.version>\n</properties>\n\n")])])]),n("h5",{attrs:{id:"configuration"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[t._v("#")]),t._v(" Configuration")]),t._v(" "),n("p",[t._v("默认是 application.properties，也可以使用yaml")]),t._v(" "),n("p",[t._v("都在这里：")]),t._v(" "),n("p",[t._v("https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html")]),t._v(" "),n("p",[t._v("另外一种稍微硬核的通过查阅代码获取的方式：")]),t._v(" "),n("p",[t._v("所有的配置都可以在 spring-boot-autoconfigure里面找到，比如")]),t._v(" "),n("p",[t._v("org.springframework.boot.autoconfigure.data.redis/RedisProperties")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConfigurationProperties")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prefix "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"spring.redis"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisProperties")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t * Database index used by the connection factory.\n\t */")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" database "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t * Connection URL. Overrides host, port, and password. User is ignored. Example:\n\t * redis://user:password@example.com:6379\n\t */")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t * Redis server host.\n\t */")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" host "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t * Login password of the redis server.\n\t */")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" password"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t * Redis server port.\n\t */")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" port "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6379")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t * Whether to enable SSL support.\n\t */")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" ssl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t * Connection timeout.\n\t */")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),t._v(" timeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Sentinel")]),t._v(" sentinel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cluster")]),t._v(" cluster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jedis")]),t._v(" jedis "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jedis")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Lettuce")]),t._v(" lettuce "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Lettuce")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDatabase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("database"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDatabase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" database"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("database "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" database"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUrl")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUrl")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHost")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("host"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHost")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" host"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("host "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" host"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPassword")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("password"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPassword")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" password"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("password "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" password"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("port"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" port"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("port "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" port"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isSsl")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ssl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSsl")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" ssl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ssl "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ssl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),t._v(" timeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timeout "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" timeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Sentinel")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSentinel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sentinel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSentinel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Sentinel")]),t._v(" sentinel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sentinel "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sentinel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cluster")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCluster")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cluster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCluster")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cluster")]),t._v(" cluster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cluster "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cluster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jedis")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getJedis")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jedis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Lettuce")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLettuce")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lettuce"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t * Pool properties.\n\t */")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Pool")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n\t\t * Maximum number of "idle" connections in the pool. Use a negative value to\n\t\t * indicate an unlimited number of idle connections.\n\t\t */')]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" maxIdle "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t\t * Target for the minimum number of idle connections to maintain in the pool. This\n\t\t * setting only has an effect if it is positive.\n\t\t */")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" minIdle "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t\t * Maximum number of connections that can be allocated by the pool at a given\n\t\t * time. Use a negative value for no limit.\n\t\t */")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" maxActive "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t\t * Maximum amount of time a connection allocation should block before throwing an\n\t\t * exception when the pool is exhausted. Use a negative value to block\n\t\t * indefinitely.\n\t\t */")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),t._v(" maxWait "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ofMillis")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMaxIdle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxIdle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMaxIdle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" maxIdle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxIdle "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" maxIdle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMinIdle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("minIdle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMinIdle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" minIdle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("minIdle "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" minIdle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMaxActive")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxActive"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMaxActive")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" maxActive"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxActive "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" maxActive"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMaxWait")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxWait"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMaxWait")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),t._v(" maxWait"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxWait "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" maxWait"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t * Cluster properties.\n\t */")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cluster")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n\t\t * Comma-separated list of "host:port" pairs to bootstrap from. This represents an\n\t\t * "initial" list of cluster nodes and is required to have at least one entry.\n\t\t */')]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" nodes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t\t * Maximum number of redirects to follow when executing commands across the\n\t\t * cluster.\n\t\t */")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" maxRedirects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getNodes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nodes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNodes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" nodes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nodes "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nodes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMaxRedirects")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxRedirects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMaxRedirects")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" maxRedirects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxRedirects "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" maxRedirects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t * Lettuce client properties.\n\t */")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Lettuce")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t\t * Shutdown timeout.\n\t\t */")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),t._v(" shutdownTimeout "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ofMillis")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t\t * Lettuce pool configuration.\n\t\t */")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Pool")]),t._v(" pool"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getShutdownTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("shutdownTimeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setShutdownTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),t._v(" shutdownTimeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("shutdownTimeout "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" shutdownTimeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Pool")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPool")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pool"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPool")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Pool")]),t._v(" pool"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pool "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pool"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("可以看到前缀是 spring.redis ，具体配置举例：")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("其中最简单的string类型")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("spring.redis.host=x.x.x.48\nspring.redis.port=6379\n")])])])]),t._v(" "),n("li",[n("p",[t._v("复杂类型如private Cluster cluster，很简单，进去看Cluster的成员即可，只是注意maxRedirects在application.properties写作：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("spring.redis.cluster.nodes=x.x.x.48:6379,x.x.x.48:6380,x.x.x.48:6381,x.x.x.49:6379,x.x.x.49:6380,x.x.x.49:6381,x.x.x.50:6379,x.x.x.50:6380,x.x.x.50:6381\nspring.redis.cluster.max-redirects=3\n")])])])]),t._v(" "),n("li",[n("p",[t._v("使用yaml")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("spring:\n  #Redis缓存配置(RedisProperties)\n  redis:\n#    database: 0\n#    host: localhost\n#    port: 6380\n#    password:\n    #timeout: 6000\n    #redis cluster\n    cluster:\n      nodes: 1.1.1.1:6379,1.1.1.1:6380,1.1.1.1:6381\n      maxRedirects: 3\n    lettuce:\n      pool:\n        max-active: 200\n        max-wait: 3000\n        max-idle: -1\n        min-idle: 10\n")])])])])]),t._v(" "),n("h6",{attrs:{id:"案例分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#案例分析"}},[t._v("#")]),t._v(" 案例分析：")]),t._v(" "),n("p",[t._v("某次项目使用 spring-boot-starter版本为2.0.5")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.0.5.RELEASE</version>\n        <relativePath />\n    </parent>\n")])])]),n("p",[t._v("使用其 spring-boot-starter-data-redis 遇到RedisExcpetion 后来没能重现，不过也能重现出类似的WARN级别信息：")]),t._v(" "),n("p",[t._v("l.c.c.t.ClusterTopologyRefresh^[[m : Unable to connect to xxxx:6379")]),t._v(" "),n("p",[t._v("java.util.concurrent.CompletionException: io.netty.channel.ConnectTimeoutException: connection timed out: /xxxx:6379")]),t._v(" "),n("p",[t._v("经过查阅，client端的RedisConnectionFactory需要增加 ClusterTopologyRefreshOptions  这个option，")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisProperties")]),t._v(" redisProperties"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${redis.maxRedirects:3}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" maxRedirects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${redis.refreshTime:5}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" refreshTime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LettuceConnectionFactory")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("redisConnectionFactory")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n \n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisClusterConfiguration")]),t._v(" redisClusterConfiguration "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisClusterConfiguration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("redisProperties"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCluster")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getNodes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n        redisClusterConfiguration"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMaxRedirects")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("maxRedirects"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Support")]),t._v(" adaptive cluster topology refresh and "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" refresh source\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClusterTopologyRefreshOptions")]),t._v(" clusterTopologyRefreshOptions "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClusterTopologyRefreshOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("enablePeriodicRefresh")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("enableAllAdaptiveRefreshTriggers")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("refreshPeriod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ofSeconds")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("refreshTime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClusterClientOptions")]),t._v(" clusterClientOptions "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClusterClientOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("topologyRefreshOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("clusterTopologyRefreshOptions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n                 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("From")]),t._v(" the priority"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" read and write separation"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" read from the possible inconsistency"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" the "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" consistency CP\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LettuceClientConfiguration")]),t._v(" lettuceClientConfiguration "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LettuceClientConfiguration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFrom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReadFrom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SLAVE_PREFERRED"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("clientOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("clusterClientOptions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LettuceConnectionFactory")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("redisClusterConfiguration"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lettuceClientConfiguration"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("而实际上为什么这个不提供配置呢，查阅了前面说的官方配置：")]),t._v(" "),n("p",[t._v("https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html")]),t._v(" "),n("p",[t._v("发现实际有这个选项")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("spring.redis.lettuce.cluster.refresh.dynamic-refresh-sources\nspring.redis.lettuce.cluster.refresh.period\n")])])]),n("p",[t._v("而进一步看到第一个config是在spring boot 2.4.0引入的")]),t._v(" "),n("p",[t._v("https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.4.0-Configuration-Changelog")]),t._v(" "),n("p",[t._v("而第二个period是2.3.0")]),t._v(" "),n("p",[t._v("https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.3.0-Configuration-Changelog")]),t._v(" "),n("p",[t._v("直接搜源码 ClusterTopologyRefreshOptions 确认下：")]),t._v(" "),n("p",[t._v("https://github.com/spring-projects/spring-boot/blob/47516b50c39bd6ea924a1f6720ce6d4a71088651/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/data/redis/LettuceConnectionConfiguration.java")]),t._v(" "),n("p",[t._v("点击blame，找到这行")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("\t\t\tif (refreshProperties.getPeriod() != null) {\n\t\t\t\trefreshBuilder.enablePeriodicRefresh(refreshProperties.getPeriod());\n\t\t\t}\n")])])]),n("p",[t._v("点击左侧对应的提交：")]),t._v(" "),n("p",[t._v("https://github.com/spring-projects/spring-boot/commit/dfac3a282b98bd480c5acf778dbfbce994051dad")]),t._v(" "),n("p",[t._v("可以看到这次提交的comment：Add configuration to enable Redis Cluster topology refresh")]),t._v(" "),n("p",[t._v("然后从左上角可以看到是从 "),n("a",{attrs:{href:"https://github.com/spring-projects/spring-boot/releases/tag/v2.3.0.M4",target:"_blank",rel:"noopener noreferrer"}},[t._v("v2.3.0.M4"),n("OutboundLink")],1),t._v(" 最开始引入的，之后是 v2.3.0.RC1，v2.3.0.RELEASE，直到最新的v2.5.0-RC1")]),t._v(" "),n("hr"),t._v(" "),n("p",[t._v("REFERENCE:")]),t._v(" "),n("p",[t._v("https://github.com/javastacks/spring-boot-best-practice\nhttps://github.com/YunaiV/SpringBoot-Labs")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://mp.weixin.qq.com/s/1yxsCD3IxopIWYceA54Ayw",target:"_blank",rel:"noopener noreferrer"}},[t._v("给你一份超详细 Spring Boot 知识清单"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-starter",target:"_blank",rel:"noopener noreferrer"}},[t._v("一站式starter"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-auto-configuration",target:"_blank",rel:"noopener noreferrer"}},[t._v("About AutoConfig"),n("OutboundLink")],1),t._v("\nGradually Replacing Auto-configuration\nDisabling Specific Auto-configuration Classes\n(exclude={DataSourceAutoConfiguration.class})")]),t._v(" "),n("p",[t._v("spring boot 中的 Parent POM 和 Starter 的作用什么\nhttps://cloud.tencent.com/developer/article/1362790")]),t._v(" "),n("p",[t._v("EnvironmentPostProcessor\nBeanPostProcessor")]),t._v(" "),n("h4",{attrs:{id:"_4-1-2-springboot-mvc"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-springboot-mvc"}},[t._v("#")]),t._v(" 4.1.2 springboot mvc")]),t._v(" "),n("p",[t._v("so by default, tomcat will create some temp folder under /tmp and use it later on")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#spring.servlet.multipart.location",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("spring.servlet.multipart.location")]),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("https://stackoverflow.com/questions/50523407/the-temporary-upload-location-tmp-tomcat-4296537502689403143-5000-work-tomcat/50523578")]),t._v(" "),n("h3",{attrs:{id:"_4-2-框架开发-starter"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-框架开发-starter"}},[t._v("#")]),t._v(" 4.2 框架开发（starter）")]),t._v(" "),n("p",[t._v("ConfigurationProperties和EnableConfigurationProperties是一对，\n前者定义对应配置文件的属性，后者是激活读取；\n同样，\nConfiguration或AutoConfiguration跟EnableAutoConfiguration是一对，\n前者相当于component就是定义为bean，而后者是激活这个自动配置/装配（具体参考springboot源码分析一文），")]),t._v(" "),n("p",[t._v("https://docs.spring.io/spring-boot/docs/1.3.8.RELEASE/reference/html/using-boot-auto-configuration.html")]),t._v(" "),n("p",[t._v("Create a Custom Auto-Configuration with Spring Boot")]),t._v(" "),n("p",[t._v("https://www.baeldung.com/spring-boot-custom-auto-configuration")]),t._v(" "),n("p",[t._v("创建一个starter\nhello-spring-boot-starter")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('写一个服务类\npublic class HelloService {\n\n  private String msg;\n\n  public String sayHello() {\n    return "hello " + msg;\n  }\n\n  public String getMsg() {\n    return msg;\n  }\n\n  public void setMsg(String msg) {\n    this.msg = msg;\n  }\n}\n@ConfigurationProperties(prefix = "hello") //获取属性值\npublic class HelloProperties {\n\n  private static final String MSG = "world";\n\n  private String msg = MSG ;\n\n  public String getMsg() {\n    return msg;\n  }\n\n  public void setMsg(String msg) {\n    this.msg = msg;\n  }\n\n}\n@Configuration\n//为带有@ConfigurationProperties注解的Bean提供有效的支持。\n// 这个注解可以提供一种方便的方式来将带有@ConfigurationProperties注解的类注入为Spring容器的Bean。\n@EnableConfigurationProperties(HelloProperties.class)//开启属性注入,通过@autowired注入\n@ConditionalOnClass(Hello.class)//判断这个类是否在classpath中存在，如果存在，才会实例化一个Bean\n// The Hello bean will be created if the hello.enable property exists and has a value other than false\n// or the property doesn\'t exist at all.\n@ConditionalOnProperty(prefix="hello", value="enabled", matchIfMissing = true)\npublic class HelloAutoConfiguration {\n\n  @Autowired\n  private HelloProperties helloProperties;\n\n  @Bean\n  @ConditionalOnMissingBean(Hello.class)//容器中如果没有Hello这个类,那么自动配置这个Hello\n  public HelloService hello() {\n    HelloService hello = new HelloService();\n    hello.setMsg(helloProperties.getMsg());\n    return hello;\n  }\n\n}\n\napplication.properties\n\\#可以不配置\nhello.enabled=true\n\nhello.msg=charmingfst\n\n\\#以debug模式运行\ndebug=true\n\n\\src\\main\\resources\\META-INF\\spring.factories\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\ncom.chm.test.HelloAutoConfiguration\n\nhttps://blog.csdn.net/zxc123e/article/details/80222967\n')])])]),n("h3",{attrs:{id:"_4-3-aop切面编程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-aop切面编程"}},[t._v("#")]),t._v(" 4.3 AOP切面编程")]),t._v(" "),n("p",[t._v("Aspect（切面）横切关注点的模块化 @Aspect注解的类")]),t._v(" "),n("p",[t._v("Join Point（连接点）程序执行过程中的点 方法调用、异常抛出")]),t._v(" "),n("p",[t._v("Pointcut（切点）匹配连接点的表达式 execution(* UserService.*(..))")]),t._v(" "),n("p",[t._v("Advice（通知）在连接点执行的动作 @Before, @After, @Around")]),t._v(" "),n("p",[t._v("Target（目标）被代理的对象 UserService实例")]),t._v(" "),n("p",[t._v("Proxy（代理）AOP创建的包装对象 CGLIB或JDK动态代理")]),t._v(" "),n("p",[t._v("Weaving（织入）将切面应用到目标对象的过程 编译期、类加载期、运行期")]),t._v(" "),n("h4",{attrs:{id:"什么是aop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#什么是aop"}},[t._v("#")]),t._v(" 什么是AOP")]),t._v(" "),n("p",[t._v("传统OOP的问题：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 业务类中混杂着横切关注点\npublic class UserService {\n    public void createUser(User user) {\n        // 事务开始\n        Transaction tx = beginTransaction();\n        try {\n            // 权限检查\n            checkPermission();\n            \n            // 日志记录\n            log.info("创建用户: {}", user.getName());\n            \n            // 业务逻辑\n            userDao.save(user);\n            \n            // 事务提交\n            tx.commit();\n        } catch (Exception e) {\n            // 事务回滚\n            tx.rollback();\n            // 错误日志\n            log.error("创建用户失败", e);\n            throw e;\n        }\n    }\n}\n')])])]),n("p",[t._v("AOP解决方案：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 纯净的业务逻辑\npublic class UserService {\n    public void createUser(User user) {\n        userDao.save(user); // 只关注业务逻辑\n    }\n}\n\n// 横切关注点通过AOP处理\n@Aspect\n@Component\npublic class TransactionAspect {\n    @Around("execution(* UserService.*(..))")\n    public Object manageTransaction(ProceedingJoinPoint pjp) {\n        // 事务管理逻辑在这里统一处理\n    }\n}\n')])])]),n("h4",{attrs:{id:"spring-aop实现机制-spring-boot-starter-aop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#spring-aop实现机制-spring-boot-starter-aop"}},[t._v("#")]),t._v(" Spring AOP实现机制-spring-boot-starter-aop")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-aop</artifactId>\n</dependency>\n\n// 对于每个Bean：\n1. Bean正常实例化、依赖注入、初始化\n2. AnnotationAwareAspectJAutoProxyCreator.postProcessAfterInitialization()被调用\n3. 检查Bean是否需要AOP代理\n4. 如果需要，创建JDK动态代理或CGLIB代理\n5. 返回代理对象（替代原始Bean）\n\n// Spring框架真实的AOP代理创建类结构：\nObject\n└── BeanPostProcessor (接口)\n    └── InstantiationAwareBeanPostProcessor (接口)  \n        └── SmartInstantiationAwareBeanPostProcessor (接口)\n            └── AbstractAutoProxyCreator (抽象类) ← 核心实现\n                └── AspectJAwareAdvisorAutoProxyCreator (抽象类)\n                    └── AnnotationAwareAspectJAutoProxyCreator (具体类) ← 实际工作的类！\n")])])]),n("p",[t._v("这是Spring AOP的核心引擎")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// 真实的Spring源码（简化版）\npublic abstract class AbstractAutoProxyCreator extends ProxyProcessorSupport\n    implements SmartInstantiationAwareBeanPostProcessor {\n    \n    // 核心方法：在Bean初始化后创建代理\n    @Override\n    public Object postProcessAfterInitialization(@Nullable Object bean, String beanName) {\n        if (bean != null) {\n            Object cacheKey = getCacheKey(bean.getClass(), beanName);\n            \n            // 检查是否已经处理过（避免循环）\n            if (!this.earlyProxyReferences.contains(cacheKey)) {\n                // 包装Bean（如果需要代理）\n                return wrapIfNecessary(bean, beanName, cacheKey);\n            }\n        }\n        return bean;\n    }\n    \n    // 核心方法：决定是否创建代理\n    protected Object wrapIfNecessary(Object bean, String beanName, Object cacheKey) {\n        // 1. 检查是否应该跳过代理\n        if (isInfrastructureClass(bean.getClass()) || shouldSkip(bean, beanName)) {\n            return bean;\n        }\n        \n        // 2. 获取适用的Advisors（切面逻辑）\n        Object[] specificInterceptors = getAdvicesAndAdvisorsForBean(bean.getClass(), beanName, null);\n        \n        // 3. 如果需要代理，创建代理对象\n        if (specificInterceptors != DO_NOT_PROXY) {\n            this.advisedBeans.put(cacheKey, Boolean.TRUE);\n            return createProxy(bean.getClass(), beanName, specificInterceptors, new SingletonTargetSource(bean));\n        }\n        \n        return bean;\n    }\n}\n")])])]),n("p",[t._v("这是Spring Boot默认使用的具体实现")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// 真实的Spring Boot AOP处理器\npublic class AnnotationAwareAspectJAutoProxyCreator extends AspectJAwareAdvisorAutoProxyCreator {\n    \n    // 重写方法：支持@AspectJ注解风格的切面\n    @Override\n    protected List<Advisor> findCandidateAdvisors() {\n        // 调用父类方法查找基于配置的Advisor\n        List<Advisor> advisors = super.findCandidateAdvisors();\n        \n        // 添加基于@Aspect注解的Advisor\n        if (this.aspectJAdvisorsBuilder != null) {\n            advisors.addAll(this.aspectJAdvisorsBuilder.buildAspectJAdvisors());\n        }\n        return advisors;\n    }\n    \n    // 重写方法：支持JDK动态代理和CGLIB代理\n    @Override\n    protected boolean shouldProxyTargetClass(ConfigurableListableBeanFactory beanFactory, String beanName) {\n        // 检查@EnableAspectJAutoProxy配置\n        return (this.beanFactory != null && \n                this.beanFactory.getBeanDefinition(beanName).isProxyTargetClass());\n    }\n}\n")])])]),n("h4",{attrs:{id:"示例1-性能监控aop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#示例1-性能监控aop"}},[t._v("#")]),t._v(" 示例1：性能监控AOP")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@Aspect\n@Component\npublic class PerformanceMonitoringAspect {\n    private static final Logger logger = LoggerFactory.getLogger(PerformanceMonitoringAspect.class);\n    \n    // 监控Service层方法性能\n    @Around("execution(* com.example.service.*.*(..))")\n    public Object monitorPerformance(ProceedingJoinPoint joinPoint) throws Throwable {\n        String methodName = joinPoint.getSignature().getName();\n        String className = joinPoint.getTarget().getClass().getSimpleName();\n        \n        long startTime = System.currentTimeMillis();\n        try {\n            // 执行原始方法\n            Object result = joinPoint.proceed();\n            long executionTime = System.currentTimeMillis() - startTime;\n            \n            // 记录性能指标\n            if (executionTime > 100) { // 超过100ms记录警告\n                logger.warn("方法执行缓慢: {}.{}, 耗时: {}ms", \n                    className, methodName, executionTime);\n            }\n            \n            // 记录到监控系统\n            Metrics.timer("service.method.duration")\n                .tag("class", className)\n                .tag("method", methodName)\n                .record(executionTime, TimeUnit.MILLISECONDS);\n            \n            return result;\n            \n        } catch (Exception e) {\n            long executionTime = System.currentTimeMillis() - startTime;\n            logger.error("方法执行异常: {}.{}, 耗时: {}ms", \n                className, methodName, executionTime, e);\n            throw e;\n        }\n    }\n}\n')])])]),n("h4",{attrs:{id:"示例2-事务管理aop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#示例2-事务管理aop"}},[t._v("#")]),t._v(" 示例2：事务管理AOP")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@Aspect\n@Component\npublic class TransactionAspect {\n    \n    @Autowired\n    private PlatformTransactionManager transactionManager;\n    \n    // 为所有@Transactional方法添加事务管理\n    @Around("@annotation(transactional)")\n    public Object manageTransaction(ProceedingJoinPoint joinPoint, \n                                   Transactional transactional) throws Throwable {\n        \n        TransactionDefinition definition = new DefaultTransactionDefinition();\n        TransactionStatus status = transactionManager.getTransaction(definition);\n        \n        try {\n            logger.debug("开始事务: {}", joinPoint.getSignature());\n            \n            // 执行业务方法\n            Object result = joinPoint.proceed();\n            \n            // 提交事务\n            transactionManager.commit(status);\n            logger.debug("提交事务: {}", joinPoint.getSignature());\n            \n            return result;\n            \n        } catch (Exception e) {\n            // 回滚事务\n            transactionManager.rollback(status);\n            logger.debug("回滚事务: {}, 原因: {}", joinPoint.getSignature(), e.getMessage());\n            throw e;\n        }\n    }\n    \n    // 使用示例\n    @Service\n    public class UserService {\n        @Transactional\n        public void createUser(User user) {\n            // 业务逻辑，自动享有事务管理\n            userRepository.save(user);\n            userAuditRepository.logCreation(user);\n        }\n    }\n}\n')])])]),n("h4",{attrs:{id:"示例3-缓存aop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#示例3-缓存aop"}},[t._v("#")]),t._v(" 示例3：缓存AOP")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@Aspect\n@Component\npublic class CacheAspect {\n    \n    @Autowired\n    private CacheManager cacheManager;\n    \n    // 方法缓存\n    @Around("@annotation(cacheable)")\n    public Object handleCacheable(ProceedingJoinPoint joinPoint, \n                                Cacheable cacheable) throws Throwable {\n        \n        String cacheName = cacheable.value();\n        String key = generateCacheKey(joinPoint);\n        \n        Cache cache = cacheManager.getCache(cacheName);\n        ValueWrapper cachedValue = cache.get(key);\n        \n        if (cachedValue != null) {\n            logger.debug("缓存命中: {}.{}", \n                joinPoint.getTarget().getClass().getSimpleName(),\n                joinPoint.getSignature().getName());\n            return cachedValue.get();\n        }\n        \n        // 缓存未命中，执行方法\n        Object result = joinPoint.proceed();\n        \n        // 缓存结果\n        cache.put(key, result);\n        logger.debug("缓存设置: {}.{}", \n            joinPoint.getTarget().getClass().getSimpleName(),\n            joinPoint.getSignature().getName());\n        \n        return result;\n    }\n    \n    // 缓存失效\n    @After("@annotation(cacheEvict)")\n    public void handleCacheEvict(JoinPoint joinPoint, CacheEvict cacheEvict) {\n        String cacheName = cacheEvict.value();\n        Cache cache = cacheManager.getCache(cacheName);\n        \n        if (cacheEvict.allEntries()) {\n            cache.clear(); // 清空整个缓存\n        } else {\n            String key = generateCacheKey(joinPoint);\n            cache.evict(key); // 清除特定key\n        }\n    }\n    \n    private String generateCacheKey(ProceedingJoinPoint joinPoint) {\n        // 基于方法签名和参数生成缓存key\n        return joinPoint.getSignature().toShortString() + \n               Arrays.toString(joinPoint.getArgs());\n    }\n}\n')])])]),n("h4",{attrs:{id:"示例4-安全权限aop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#示例4-安全权限aop"}},[t._v("#")]),t._v(" 示例4：安全权限AOP")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@Aspect\n@Component\npublic class SecurityAspect {\n    \n    @Autowired\n    private AuthenticationService authService;\n    \n    // 方法级权限控制\n    @Around("@annotation(requiresPermission)")\n    public Object checkPermission(ProceedingJoinPoint joinPoint,\n                                RequiresPermission requiresPermission) throws Throwable {\n        \n        String permission = requiresPermission.value();\n        User currentUser = authService.getCurrentUser();\n        \n        if (!authService.hasPermission(currentUser, permission)) {\n            throw new AccessDeniedException(\n                "用户 " + currentUser.getUsername() + " 没有权限: " + permission);\n        }\n        \n        logger.info("权限检查通过: {} 执行 {}.{}", \n            currentUser.getUsername(),\n            joinPoint.getTarget().getClass().getSimpleName(),\n            joinPoint.getSignature().getName());\n        \n        return joinPoint.proceed();\n    }\n    \n    // 参数级权限控制\n    @Before("execution(* delete*(..)) && args(id,..)")\n    public void checkDeletePermission(JoinPoint joinPoint, Long id) {\n        User currentUser = authService.getCurrentUser();\n        if (!authService.canDelete(currentUser, id)) {\n            throw new AccessDeniedException("无权删除资源: " + id);\n        }\n    }\n}\n')])])]),n("h4",{attrs:{id:"示例5-日志记录aop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#示例5-日志记录aop"}},[t._v("#")]),t._v(" 示例5：日志记录AOP")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@Aspect\n@Component\npublic class LoggingAspect {\n    \n    // 方法调用日志\n    @Before("execution(* com.example.controller.*.*(..))")\n    public void logMethodEntry(JoinPoint joinPoint) {\n        logger.info("→ 进入方法: {}.{}", \n            joinPoint.getTarget().getClass().getSimpleName(),\n            joinPoint.getSignature().getName());\n        \n        if (logger.isDebugEnabled()) {\n            logger.debug("方法参数: {}", Arrays.toString(joinPoint.getArgs()));\n        }\n    }\n    \n    // 方法退出日志\n    @AfterReturning(pointcut = "execution(* com.example.controller.*.*(..))", \n                   returning = "result")\n    public void logMethodExit(JoinPoint joinPoint, Object result) {\n        logger.info("← 退出方法: {}.{}", \n            joinPoint.getTarget().getClass().getSimpleName(),\n            joinPoint.getSignature().getName());\n        \n        if (logger.isDebugEnabled() && result != null) {\n            logger.debug("方法返回值: {}", result.toString());\n        }\n    }\n    \n    // 异常日志\n    @AfterThrowing(pointcut = "execution(* com.example..*.*(..))", \n                  throwing = "ex")\n    public void logException(JoinPoint joinPoint, Exception ex) {\n        logger.error("✗ 方法执行异常: {}.{}", \n            joinPoint.getTarget().getClass().getSimpleName(),\n            joinPoint.getSignature().getName(), ex);\n    }\n}\n')])])]),n("h4",{attrs:{id:"aop最佳实践"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#aop最佳实践"}},[t._v("#")]),t._v(" AOP最佳实践")]),t._v(" "),n("ol",[n("li",[t._v("切点表达式优化")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@Aspect\n@Component\npublic class OptimizedPointcutAspect {\n    \n    // 不好的写法：过于宽泛\n    // @Around("execution(* com.example..*(..))")\n    \n    // 好的写法：精确匹配\n    @Around("execution(* com.example.service.*Service.*(..))")\n    public Object serviceLayerMonitoring(ProceedingJoinPoint pjp) throws Throwable {\n        // 只监控Service层\n        return pjp.proceed();\n    }\n    \n    // 使用注解驱动更精确\n    @Around("@annotation(com.example.annotation.Monitored)")\n    public Object monitoredMethods(ProceedingJoinPoint pjp) throws Throwable {\n        // 只监控有@Monitored注解的方法\n        return pjp.proceed();\n    }\n}\n')])])]),n("ol",{attrs:{start:"2"}},[n("li",[t._v("性能考虑")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@Aspect\n@Component\npublic class PerformanceOptimizedAspect {\n    \n    // 避免在切面中执行耗时操作\n    @Around("execution(* com.example..*(..))")\n    public Object optimizedAdvice(ProceedingJoinPoint pjp) throws Throwable {\n        // 不好的做法：每次都生成复杂日志\n        // String detailedLog = createDetailedLog(pjp); // 耗时操作\n        \n        // 好的做法：延迟计算\n        if (logger.isDebugEnabled()) {\n            logger.debug("执行方法: {}", pjp.getSignature());\n        }\n        \n        return pjp.proceed();\n    }\n}\n')])])]),n("h2",{attrs:{id:"_5-spring-boot启动优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-spring-boot启动优化"}},[t._v("#")]),t._v(" 5. Spring Boot启动优化")]),t._v(" "),n("p",[t._v("启动性能监控和分析")]),t._v(" "),n("p",[t._v("使用Spring Boot Actuator监控启动时间")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('# application.yml\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: startup\n  endpoint:\n    startup:\n      enabled: true\n\nspring:\n  application:\n    name: myapp\n\n// 启动时间监控端点\n@RestController\npublic class StartupMetricsController {\n    \n    @Autowired\n    private ApplicationStartup startup;\n    \n    @GetMapping("/startup-metrics")\n    public StartupMetrics getStartupMetrics() {\n        return startup.getMetrics();\n    }\n}\n\n// 启动时间分析结果示例\npublic class StartupAnalysis {\n    public void analyzeStartupTime() {\n        System.out.println("启动阶段耗时分析:");\n        System.out.println("JVM启动: 0.8秒");\n        System.out.println("组件扫描: 4.2秒 (51%) ← 优化重点!");\n        System.out.println("Bean实例化: 2.1秒 (26%)");\n        System.out.println("自动配置: 1.1秒 (13%)");\n        System.out.println("服务器启动: 0.3秒 (4%)");\n        System.out.println("总启动时间: 8.5秒");\n    }\n}\n')])])]),n("p",[t._v("使用JVM参数优化启动性能")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("# 优化启动速度的JVM参数\njava -jar myapp.jar \\\n  -Xms512m -Xmx512m \\          # 固定堆大小，避免动态调整\n  -XX:+UseG1GC \\               # 使用G1垃圾回收器\n  -XX:MaxGCPauseMillis=200 \\   # 控制GC停顿时间\n  -noverify \\                  # 关闭字节码验证（开发环境）\n  -Dspring.jmx.enabled=false \\ # 关闭JMX监控\n  -Dspring.main.lazy-initialization=true \\ # 启用懒加载\n  -Dspring.context.index.enabled=true      # 启用类路径索引\n")])])]),n("p",[t._v("案例1：减少组件扫描范围")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('优化前（扫描整个包路径）：\n@SpringBootApplication\n@ComponentScan("com.example")  // 扫描整个项目包\npublic class MyApplication {\n    // 启动时间: 8.2秒（扫描2000个类）\n}\n\n优化后（精确扫描必要包）：\n@SpringBootApplication\n@ComponentScan({\n    "com.example.controller",\n    "com.example.service", \n    "com.example.config"\n    // 不扫描: com.example.entity, com.example.dto等\n})\npublic class MyApplication {\n    // 启动时间: 3.1秒（只扫描500个类）\n}\n')])])]),n("p",[t._v("案例2：使用懒加载优化")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('优化前（所有Bean立即加载）：\n@Service\npublic class HeavyService {\n    // 启动时立即初始化，耗时2秒\n    public HeavyService() {\n        loadLargeDataSet();  // 耗时的初始化操作\n    }\n}\n优化后（按需懒加载）：\n@Service\n@Lazy  // 添加懒加载注解\npublic class HeavyService {\n    // 第一次使用时才初始化\n    public HeavyService() {\n        loadLargeDataSet();\n    }\n}\n\n@RestController\npublic class MyController {\n    @Autowired\n    private HeavyService heavyService;  // 启动时不初始化\n    \n    @GetMapping("/data")\n    public Data getData() {\n        // 第一次调用时才初始化HeavyService\n        return heavyService.processData();\n    }\n}\n\n')])])]),n("p",[t._v("案例3：排除不必要的自动配置")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("优化前（加载所有自动配置）：\n@SpringBootApplication  // 默认加载100+个自动配置\npublic class MyApplication {\n    // 启动时间: 6.5秒\n}\n\n优化后（排除不需要的配置）：\n@SpringBootApplication(exclude = {\n    DataSourceAutoConfiguration.class,      // 不使用数据库\n    SecurityAutoConfiguration.class,        // 不需要安全配置\n    MailSenderAutoConfiguration.class,     // 不需要邮件发送\n    CacheAutoConfiguration.class           // 不使用缓存\n})\npublic class MyApplication {\n    // 启动时间: 3.8秒\n}\n\n")])])]),n("p",[t._v("案例4：类路径索引优化")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("优化前（类路径扫描）：\n// Maven依赖包含大量不需要的jar\n<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-data-jpa</artifactId> \x3c!-- 不用数据库 --\x3e\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>  \n        <artifactId>spring-boot-starter-security</artifactId> \x3c!-- 不用安全 --\x3e\n    </dependency>\n</dependencies>\n\n优化后（精简依赖）：\n// 只引入必要的starter\n<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-web</artifactId>\n    </dependency>\n    \x3c!-- 移除不必要的starter --\x3e\n</dependencies>\n\n// 添加类路径索引（Spring 5.2+）\nspring:\n  context:\n    index:\n      enabled: true  # 启用编译时类路径索引\n")])])]),n("p",[t._v("案例5：使用Spring Fu进行函数式配置")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("传统配置方式：\n@Configuration\npublic class TraditionalConfig {\n    @Bean\n    public MyService myService() {\n        return new MyService();  // 反射创建，性能一般\n    }\n}\n\n函数式配置（Spring Fu）：\npublic class FunctionalConfig {\n    public static void main(String[] args) {\n        var app = new SpringApplication(Application.class)\n            .run(args);\n        \n        // 函数式注册Bean，避免反射开销\n        app.addInitializer((context) -> {\n            context.registerBean(MyService.class, \n                () -> new MyService());  // 直接lambda创建\n        });\n    }\n}\n")])])]),n("p",[t._v("案例6：编译时处理优化")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("使用Micronaut或Quarkus的编译时处理：\n// Quarkus示例：编译时处理依赖注入\n@ApplicationScoped\npublic class MyService {\n    @Inject\n    MyRepository repository;  // 编译时生成注入代码，避免运行时反射\n}\n\n\n")])])]),n("h2",{attrs:{id:"_6-troubleshooting"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-troubleshooting"}},[t._v("#")]),t._v(" 6. Troubleshooting")]),t._v(" "),n("h3",{attrs:{id:"beandefinitionoverrideexception"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#beandefinitionoverrideexception"}},[t._v("#")]),t._v(" BeanDefinitionOverrideException")]),t._v(" "),n("p",[t._v("https://www.baeldung.com/spring-boot-bean-definition-override-exception")]),t._v(" "),n("h3",{attrs:{id:"beancurrentlyincreationexception-circular-reference"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#beancurrentlyincreationexception-circular-reference"}},[t._v("#")]),t._v(" BeanCurrentlyInCreationException/circular reference")]),t._v(" "),n("p",[t._v("Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'AAAA': Bean with name 'AAAA' has been injected into other beans [BBBB] in its raw version as part of a circular reference, but has eventually been wrapped. This means that said other beans do not use the final version of the bean. This is often the result of over-eager type matching - consider using 'getBeanNamesForType' with the 'allowEagerInit' flag turned off, for example.")]),t._v(" "),n("p",[t._v("解决：加@Lazy")]),t._v(" "),n("h3",{attrs:{id:"nohup-ignoring-input-no-main-manifest-attribute"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nohup-ignoring-input-no-main-manifest-attribute"}},[t._v("#")]),t._v(" nohup: ignoring input no main manifest attribute")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("执行 \nnohup java -server -jar test.jar > `date +\\%F`_funding-rate-datasource_`date +\\%H.%M.%S`.log 2>&1\nlog中内容为：\nnohup: ignoring input no main manifest attribute\n解决方法，pom增加：\n<build>\n        <finalName>funding-rate-datasource</finalName>\n        <plugins>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-source-plugin</artifactId>\n                <configuration>\n                    <attach>true</attach>\n                </configuration>\n                <executions>\n                    <execution>\n                        <phase>compile</phase>\n                        <goals>\n                            <goal>jar</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n            \x3c!-- package --\x3e\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n                <configuration>\n                    <fork>true</fork>\n                </configuration>\n            </plugin>\n            \x3c!-- deploy --\x3e\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-deploy-plugin</artifactId>\n                <configuration>\n                    <skip>true</skip>\n                </configuration>\n            </plugin>\n        </plugins>\n    </build>\n")])])]),n("disqus")],1)}),[],!1,null,null,null);a.default=e.exports}}]);
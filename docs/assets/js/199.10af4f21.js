(window.webpackJsonp=window.webpackJsonp||[]).push([[199],{653:function(e,t,n){"use strict";n.r(t);var a=n(65),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("p",[e._v("The SSL protocol runs above the TCP/IP and below higher-level protocols such as HTTP. It uses TCP/IP on behalf of the higher-level protocols.")]),e._v(" "),n("p",[e._v("The TLS handshake happens after the TCP handshake. For the TCP or for the transport layer, everything in the TLS handshake is just application data. Once the TCP handshake is completed the TLS layer will initiate the TLS handshake.")]),e._v(" "),n("p",[e._v("https secure http")]),e._v(" "),n("p",[e._v("wss secure websocket")]),e._v(" "),n("p",[e._v("refer to 《network.md/tls》")]),e._v(" "),n("h2",{attrs:{id:"ssl-tls-certificate-证书类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ssl-tls-certificate-证书类型"}},[e._v("#")]),e._v(" SSL/TLS Certificate 证书类型")]),e._v(" "),n("p",[e._v("工具：keytool openssl")]),e._v(" "),n("p",[e._v("证书可以单纯只是包含ca认证的证书链（CA的签名）或自签名，以及公钥，也可以同时包含私钥，私钥当然可以独立于证书生成单独存储；")]),e._v(" "),n("p",[e._v("带密码：spring boot mvc程序，这样好处是双重保护，因为需要同时需要密码和私钥才可以")]),e._v(" "),n("p",[e._v("不带密码：ngnix，私钥或者是含有私钥的证书一定要控制读取权限")]),e._v(" "),n("p",[e._v("按照生成方式分为：")]),e._v(" "),n("h3",{attrs:{id:"self-sgined-certificate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#self-sgined-certificate"}},[e._v("#")]),e._v(" self-sgined certificate")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('------------------------------------------------------------\n--- use openssl 不带密码\n------------------------------------------------------------\nsudo mkdir /etc/ssl/privatekey\nsudo chmod 700 /etc/ssl/privatekey\nsudo openssl req -x509 -nodes -days 3650 -newkey rsa:2048 -keyout /etc/ssl/privatekey/nginx-selfsigned.key -out /etc/ssl/certs/nginx-selfsigned.crt\n\nvim nginx-selfsigned.crt\n\t-----BEGIN CERTIFICATE-----\n\t-----END CERTIFICATE-----\n\nvim /etc/ssl/privatekey/nginx-selfsigned.key\n\t-----BEGIN PRIVATE KEY-----\n\t-----END PRIVATE KEY-----\n\nopenssl x509 -in nginx-selfsigned.crt -text -noout\nkeytool -printcert -file /etc/ssl/certs/nginx-selfsigned.crt\n\n检查crt跟private key是否匹配：\nopenssl x509 -noout -modulus -in test.crt | openssl md5\nopenssl rsa -noout -modulus -in test.key | openssl md5\n两者输出的 Modulus 应该一致（RSA素数乘积，用来生成key pair）\n------------------------------------------------------------\n--- use keytool 带密码\n------------------------------------------------------------\n-- Generate a Java keystore and key pair\nkeytool -genkey -alias mydomain -keyalg RSA -keystore keystore.jks  -keysize 2048\n-- Generate a certificate signing request (CSR) for an existing Java keystore\nkeytool -certreq -alias mydomain -keystore keystore.jks -file mydomain.csr\n-- Import a root or intermediate CA certificate to an existing Java keystore\nkeytool -import -trustcacerts -alias root -file Thawte.crt -keystore keystore.jks\n-- Import a signed primary certificate to an existing Java keystore\nkeytool -import -trustcacerts -alias mydomain -file mydomain.crt -keystore keystore.jks\n-- Generate a keystore and self-signed certificate\nkeytool -genkey -keyalg RSA -alias selfsigned -keystore keystore.jks -storepass password -validity 360 -keysize 2048\n-- Export a certificate from a keystore\nkeytool -export -alias selfsigned -file selfsigned.crt -keystore keystore.jks\n\nkeytool -genkey -alias secure_netty -keysize 2048 -validity 365 -keyalg RSA -dname "CN=localhost" -keypass 123456 -storepass 123456 -keystore selfsigned.jks\nkeytool -export -alias secure_netty -keystore selfsigned.jks -storepass 123456 -file selfsigned.cer\n\n\nkeytool -genkey -alias secure_tomcat -keysize 1024 -validity 365 -keyalg RSA -keypass 123456 -storepass 123456 -keystore selfsigned.keystore \nkeytool -list -v -keystore selfsigned.keystore\n\t打印信息包含 Entry type: PrivateKeyEntry\nkeytool -export -alias secure_tomcat -keystore selfsigned.keystore -file selfsigned.cer\n\nexample:\njava import self-signed certificate\nkeytool.exe -import -trustcacerts -keystore ../lib/security/cacerts  -storepass changeit -noprompt -alias myownaliasformysystem -file "\\saved-certs\\ca.cert"\nhttps://stackoverflow.com/questions/11617210/how-to-properly-import-a-selfsigned-certificate-into-java-keystore-that-is-avail\n\ntomcat:\nhttps://support.microfocus.com/kb/doc.php?id=7022204\n')])])]),n("h3",{attrs:{id:"三方免费证书"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三方免费证书"}},[e._v("#")]),e._v(" 三方免费证书")]),e._v(" "),n("h4",{attrs:{id:"let-s-encrypt"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#let-s-encrypt"}},[e._v("#")]),e._v(" let's encrypt")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('//自动化工具\nwget https://dl.eff.org/certbot-auto\nchmod a+x certbot-auto\n./certbot-auto certonly --standalone -d  www.demoProject.com   # www.demoProject.com为你想要配置https的域名\nls /etc/letsencrypt/live/\n\n//证书定时自动更新\ncrontab -e    #编辑crontab\n30 2 * * 1 /root/certbot-auto renew --pre-hook "systemctl stop nginx" --post-hook "systemctl start nginx" >> /var/log/le-renew.log 2>&1 &\nroot/certbot-auto renew --pre-hook "systemctl stop nginx" --post-hook "systemctl start nginx"\n\n')])])]),n("h4",{attrs:{id:"cloudflare-dns解析提供商免费证书"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cloudflare-dns解析提供商免费证书"}},[e._v("#")]),e._v(" cloudflare dns解析提供商免费证书")]),e._v(" "),n("p",[n("a",{attrs:{href:"https://www.cloudflare.com/learning/dns/dns-over-tls/",target:"_blank",rel:"noopener noreferrer"}},[e._v("cloudflare比较特殊，它提供给了所谓 dns over tls，添加网站到cloudflare并且替换域名商的dns解析为cloudflare之后，dns的解析会被云朵点亮代表收到cloudflare保护"),n("OutboundLink")],1),e._v("；\n"),n("a",{attrs:{href:"#%E6%A1%88%E4%BE%8B-use-case-2-client-cdn-server"}},[e._v("然后cloudflare提供了几种加密模式，具体参考下面")])]),e._v(" "),n("h2",{attrs:{id:"supporting-https"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#supporting-https"}},[e._v("#")]),e._v(" Supporting https")]),e._v(" "),n("h3",{attrs:{id:"browser"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#browser"}},[e._v("#")]),e._v(" browser")]),e._v(" "),n("p",[e._v("浏览器自然是全面支持https的，不过不同浏览器的特性不同，比如")]),e._v(" "),n("p",[e._v("chrome是采用了操作系统本身的CA证书链，")]),e._v(" "),n("p",[e._v("而firefox是有完整自己的一套证书，所以对于渗透测试者来说，firefox是首选，因为不需要改变操作系统本身的证书，只需要安装给firefox本身就行了，当然firefox还有个特性是支持proxy，chrome还得装插件才行；")]),e._v(" "),n("p",[e._v("注意：如果是自签证书，浏览器会提示，可以手动信任，之后就可以正常访问，但是下面的js http client则不同")]),e._v(" "),n("p",[e._v("访问后端的时候需要注意cors也就是same origin的问题，比如reactjs项目本地测试默认开启nodejs服务：http://localhost:3000，这样访问后端服务，如果后端服务没有设置allow origin，因为后端服务端口一般不会刚好是3000，如果是其他端口，即使也是localhost服务，因为端口不同，不属于same origin，无法请求")]),e._v(" "),n("h3",{attrs:{id:"js-http-client"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#js-http-client"}},[e._v("#")]),e._v(" js http client")]),e._v(" "),n("p",[e._v("注意：跟上面不同的是，这里是没有用户交互的，而是js代码自动请求到后端，如果是自签证书，浏览器是不信任的，解决办法就是想办法手动从浏览器地址栏访问一次后端，然后手动加信任，之后应该就可以了，或者另外一种方式是")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("import axios from 'axios'\nimport https from 'https'\nconst result = await axios.post(\n    `https://${url}/login`,\n    body,\n    {\n      httpsAgent: new https.Agent({\n        rejectUnauthorized: false\n      })\n    }\n  )\n")])])]),n("p",[e._v("这样会完全忽略证书验证，不太好，所以更好的方法是：")]),e._v(" "),n("p",[e._v("https://stackoverflow.com/questions/51363855/how-to-configure-axios-to-use-ssl-certificate")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const httpsAgent = new https.Agent({ ca: MY_CA_BUNDLE });\n")])])]),n("h3",{attrs:{id:"nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[e._v("#")]),e._v(" nginx")]),e._v(" "),n("p",[e._v("refer to 《buildingblock/nginx.md》")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("\nnginx.conf:\n server {\n        listen       80;\n        listen 443 ssl;\n        listen [::]:443 ssl;\n        server_name  localhost;\n\n        ssl_certificate /etc/ssl/certs/nginx-selfsigned.crt;\n        ssl_certificate_key /etc/ssl/privatekey/nginx-selfsigned.key;\n        ssl_dhparam /etc/ssl/certs/dhparam.pem;\n")])])]),n("h3",{attrs:{id:"jdk-java-client"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jdk-java-client"}},[e._v("#")]),e._v(" jdk java client")]),e._v(" "),n("p",[e._v("Cacerts are default Trust store provided by every JVM vendor. We will see this cacerts file under JRE/lib/security folder.")]),e._v(" "),n("p",[e._v("如果不导入证书输出错误：\ntrustAnchors parameter must be non-empty\nor\njavax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No name matching found")]),e._v(" "),n("p",[e._v("keystore 默认密码 changeit")]),e._v(" "),n("p",[e._v("查看/验证")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('C:\\Program Files\\Java\\jdk1.8.0_231\\bin\n\nC:\\Program Files\\Java\\jdk1.8.0_231\\jre\\lib\\security\\cacerts\n\n\nC:\\WINDOWS\\system32>keytool.exe -list -v -keystore "C:\\Program Files\\Java\\jdk1.8.0_231\\jre\\lib\\security\\cacerts"\nEnter keystore password:\nKeystore type: JKS\nKeystore provider: SUN\n\nYour keystore contains XX entries\n\nAlias name: verisignclass2g2ca [jdk]\nCreation date: 25 Aug 2016\nEntry type: trustedCertEntry\n\nOwner: OU=VeriSign Trust Network, OU="(c) 1998 VeriSign, Inc. - For authorized use only", OU=Class 2 Public Primary Certification Authority - G2, O="VeriSign, Inc.", C=US\nIssuer: OU=VeriSign Trust Network, OU="(c) 1998 VeriSign, Inc. - For authorized use only", OU=Class 2 Public Primary Certification Authority - G2, O="VeriSign, Inc.", C=US\nSerial number: b92f60cc889fa17a4609b85b706c8aaf\nValid from: Mon May 18 08:00:00 SRET 1998 until: Wed Aug 02 07:59:59 SRET 2028\nCertificate fingerprints:\nSignature algorithm name: SHA1withRSA\nSubject Public Key Algorithm: 1024-bit RSA key\nVersion: 1\n\n\n*******************************************\n*******************************************\n\n\nAlias name: test-selfsigned\nCreation date: 25 Oct 2022\nEntry type: trustedCertEntry\n\nOwner: CN=test.local, OU=LYHISTORY, O=LYHISTORY, L=SG, ST=SG, C=SG\nIssuer: CN=test.local, OU=LYHISTORY, O=LYHISTORY, L=SG, ST=SG, C=SG\nSerial number: c79bfcff9e2a5aa77fd103e685f650a825346b9\nValid from: Tue Oct 18 10:50:58 SRET 2022 until: Fri Oct 15 10:50:58 SRET 2032\nCertificate fingerprints:\n         \nSignature algorithm name: SHA256withRSA\nSubject Public Key Algorithm: 2048-bit RSA key\nVersion: 3\n\n')])])]),n("p",[e._v("导入")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('C:\\Program Files\\Java\\jdk1.8.0_231\\bin>keytool.exe -importcert -file test-selfsigned.crt -keystore "C:\\Program Files\\Java\\jdk1.8.0_231\\jre\\lib\\security\\cacerts" -alias "test-selfsigned"\nEnter keystore password:\nOwner: CN=test.local, OU=LYHISTORY, O=LYHISTORY, L=SG, ST=SG, C=SG\nIssuer: CN=test.local, OU=LYHISTORY, O=LYHISTORY, L=SG, ST=SG, C=SG\nSerial number: c79bfcff9e2a5aa77fd103e685f650a825346b9\nValid from: Tue Oct 18 10:50:58 SGT 2022 until: Fri Oct 15 10:50:58 SGT 2032\nCertificate fingerprints:\n\nSignature algorithm name: SHA256withRSA\nSubject Public Key Algorithm: 2048-bit RSA key\nVersion: 3\n\nExtensions:\n\nTrust this certificate? [no]:  yes\nCertificate was added to keystore\n\n')])])]),n("h3",{attrs:{id:"springboot-mvc"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#springboot-mvc"}},[e._v("#")]),e._v(" springboot mvc")]),e._v(" "),n("p",[e._v("首先MVC有自己的端口比如10001，内置的tomcat默认的http端口是8080，")]),e._v(" "),n("p",[e._v("所有请求到spring mvc这个后台的都是通过 http://IP:10001 过来的，然后内部再交由tomcat 8080端口处理，")]),e._v(" "),n("p",[e._v("如果设置https比如8443，如下：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('yml：\n#debug: true\nserver:\n  servlet:\n    context-path: /test\n  port:\n    10001\n  ssl:\n    key-store: selfsigned.keystore\n    key-store-password: 123456\n    keyStoreType: JKS\n    keyAlias: secure_tomcat\n    \n@EnableAsync\n@SpringBootApplication\npublic class Application {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n    @Bean\n    public RestTemplate restTemplate() {\n        return new RestTemplate();\n    }\n\n    /**\n     * http重定向到https\n     * @return\n     */\n    @Bean\n    public TomcatServletWebServerFactory servletContainer() {\n        TomcatServletWebServerFactory tomcat = new TomcatServletWebServerFactory() {\n            @Override\n            protected void postProcessContext(Context context) {\n                SecurityConstraint constraint = new SecurityConstraint();\n                constraint.setUserConstraint("CONFIDENTIAL");\n                SecurityCollection collection = new SecurityCollection();\n                collection.addPattern("/*");\n                constraint.addCollection(collection);\n                context.addConstraint(constraint);\n            }\n        };\n        //这里tomcat.getPort拿到的就是8080\n        tomcat.addAdditionalTomcatConnectors(httpConnector(tomcat.getPort()));\n        return tomcat;\n    }\n\n    @Bean\n    public Connector httpConnector(int port) {\n        Connector connector = new Connector("org.apache.coyote.http11.Http11NioProtocol");\n        connector.setScheme("http");\n        //Connector监听的http的端口号\n        connector.setPort(port);\n        connector.setSecure(false);\n        //监听到http的端口号后转向到的https的端口号\n        connector.setRedirectPort(8443);\n        return connector;\n    }\n}\n\n')])])]),n("p",[e._v("注意到上面server本身就监听10001（应该是内置tomcat监听），然后为了https，需要创建tomcatfatory又出现一个http端口8080，为什么不可以直接扩展或override postProcessContext方法，可能是跟整个spring mvc的生命周期启动过程相关：")]),e._v(" "),n("p",[e._v("https://zhuanlan.zhihu.com/p/81807865")]),e._v(" "),n("h3",{attrs:{id:"netty"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#netty"}},[e._v("#")]),e._v(" netty")]),e._v(" "),n("p",[e._v("https://blog.csdn.net/invadersf/article/details/80337380")]),e._v(" "),n("p",[e._v("https://www.cnblogs.com/zhjh256/p/6488668.html")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('import io.netty.handler.ssl.SslHandler;\npublic class SslChannelInitializer extends ChannelInitializer<Channel> {\n    private final SslContext context;\n\n    public SslChannelInitializer(SslContext context) { \n        this.context = context;\n    }\n\n    @Override\n    protected void initChannel(Channel ch) throws Exception {\n        SSLEngine engine = context.newEngine(ch.alloc());\n        engine.setUseClientMode(false);\n        ch.pipeline().addFirst("ssl", new SslHandler(engine));\n        ChannelPipeline pipeline = ch.pipeline(); \n        pipeline.addLast("frameDecoder", new LengthFieldBasedFrameDecoder(Integer.MAX_VALUE, 0, 4, 0, 4));  \n        pipeline.addLast("frameEncoder", new LengthFieldPrepender(4));                \n        pipeline.addLast("decoder", new StringDecoder(Charset.forName("UTF-8")));  \n        pipeline.addLast("encoder", new StringEncoder(Charset.forName("UTF-8")));  \n        pipeline.addLast("spiderServerBusiHandler", new SpiderServerBusiHandler());\n    }\n}\n\nbossGroup = new NioEventLoopGroup(1);\nworkerGroup = new NioEventLoopGroup(WORKER_GROUP_SIZE);\nchannelClass = NioServerSocketChannel.class;\nlogger.info("workerGroup size:" + WORKER_GROUP_SIZE);\nlogger.info("preparing to start spider server...");\nb.group(bossGroup, workerGroup);  \nb.channel(channelClass);\nKeyManagerFactory keyManagerFactory = null;\nKeyStore keyStore = KeyStore.getInstance("JKS");\nkeyStore.load(new FileInputStream("selfsigned.jks"), "sNetty".toCharArray());\nkeyManagerFactory = KeyManagerFactory.getInstance("SunX509");\nkeyManagerFactory.init(keyStore,"123456".toCharArray());\nSslContext sslContext = SslContextBuilder.forServer(keyManagerFactory).build();\nb.childHandler(new SslChannelInitializer(sslContext)); \n')])])]),n("h2",{attrs:{id:"案例-use-case-1-client-server"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#案例-use-case-1-client-server"}},[e._v("#")]),e._v(" 案例 Use Case 1: client-server")]),e._v(" "),n("p",[e._v("这里的client就是浏览器或手机端，")]),e._v(" "),n("p",[e._v("这里的server指的是前后端代码集成一起的后端服务，")]),e._v(" "),n("p",[e._v("比较直白，只有两方参与，浏览器不需要什么设置，后端服务如果是self host则需要其本身实现https，比如spring mvc，如果不是self host，而是host在比如nginx或iis中，则需要对nginx或iis配置https支持即可；")]),e._v(" "),n("h2",{attrs:{id:"案例-use-case-2-client-cdn-server"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#案例-use-case-2-client-cdn-server"}},[e._v("#")]),e._v(" 案例 Use Case 2: client-cdn-server")]),e._v(" "),n("p",[e._v("example: 网站使用cloudflare的证书")]),e._v(" "),n("p",[e._v("Cloudflare 提供几种模式 Encryption modes：")]),e._v(" "),n("ul",[n("li",[e._v("flexible\nallows HTTPS connections between your visitor and Cloudflare, but all connections between Cloudflare and your origin are made through HTTP. As a result, an SSL certificate is not required on your origin.\n这种模式 server端无需配置tls")]),e._v(" "),n("li",[e._v("full\nCloudflare allows HTTPS connections between your visitor and Cloudflare and makes connections to the origin using the scheme requested by the visitor. If your visitor uses http, then Cloudflare connects to the origin using plaintext HTTP and vice versa.\n这种模式 server端可以配置\n"),n("ul",[n("li",[e._v("self-signed 自签证书")]),e._v(" "),n("li",[e._v("Cloudflare Origin CA,"),n("a",{attrs:{href:"https://community.cloudflare.com/t/https-certificate-not-trusted/3610/11",target:"_blank",rel:"noopener noreferrer"}},[e._v("Cloudflare Origin Certificate 是一个只被 Cloudflare 信任的证书，不被浏览器所信任，所以使用「Cloudflare Origin Certificate」就必须在前面使用 Cloudflare 添加 DNS 记录时将云朵点亮，即 ☁ Proxied。如果不点亮云朵，您的网站将无法安全访问，同时代理也会无法正常连接。"),n("OutboundLink")],1)]),e._v(" "),n("li",[e._v("or purchased from a Certificate Authority)")])])]),e._v(" "),n("li",[e._v("full(strict)\nCloudflare does everything in Full mode but also enforces more stringent requirements for origin certificates.\n这种模式server端需要使用cloudflare认可的证书：\n"),n("ul",[n("li",[e._v("Issued by a "),n("a",{attrs:{href:"https://github.com/cloudflare/cfssl_trust",target:"_blank",rel:"noopener noreferrer"}},[e._v("publicly trusted certificate authority "),n("OutboundLink")],1)]),e._v(" "),n("li",[e._v("or "),n("a",{attrs:{href:"https://developers.cloudflare.com/ssl/origin-configuration/origin-ca/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Cloudflare’s Origin CA, The “Cloudflare Origin Certificate” is a certificate that is only trusted by Cloudflare, not by browsers."),n("OutboundLink")],1)])])])]),e._v(" "),n("h3",{attrs:{id:"配置例子-client-cloudflare-server-full-strict模式并开启authenticated-origin-pulls"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置例子-client-cloudflare-server-full-strict模式并开启authenticated-origin-pulls"}},[e._v("#")]),e._v(" 配置例子：client-cloudflare-server, full strict模式并开启authenticated origin pulls")]),e._v(" "),n("ol",[n("li",[n("p",[e._v("Cloudflare’s Origin CA生成：\ncloudflare管理页面=>SSL/TLS=>Origin Server点击生成证书；\n保存证书至 /etc/ssl/cloudflare_cert.pem\n保存key至 /etc/ssl/cloudflare_key.pem")])]),e._v(" "),n("li",[n("p",[e._v("SSL/TLS 加密模式改为 Full (strict)")])]),e._v(" "),n("li",[n("p",[e._v("Edge Certificates=>Minimum TLS Version」改为「TLS 1.2」")])]),e._v(" "),n("li",[n("p",[e._v("Enable authenticated origin pulls\n如果在 Nginx 服务器上设置了「Authenticated Origin Pulls」，就可以确保它只接受来自 Cloudflare 服务器的请求，防止任何其他人直接连接到 Nginx 服务器,\ncloudflare管理页面=>SSL/TLS=>Origin Server,打开「Authenticated Origin Pulls」 。")]),e._v(" "),n("p",[e._v("然后"),n("a",{attrs:{href:"https://developers.cloudflare.com/ssl/origin-configuration/authenticated-origin-pull/set-up/zone-level/",target:"_blank",rel:"noopener noreferrer"}},[e._v("访问该页面"),n("OutboundLink")],1),e._v(",可以找到下载client证书链接:\n"),n("a",{attrs:{href:"https://developers.cloudflare.com/ssl/static/authenticated_origin_pull_ca.pem",target:"_blank",rel:"noopener noreferrer"}},[e._v("download authenticated_origin_pull_ca.pem"),n("OutboundLink")],1),e._v("\n将证书 authenticated_origin_pull_ca.pem 的内容写入到服务器的 /etc/ssl/cloudflare_client.crt 中")])]),e._v(" "),n("li",[n("p",[e._v("nginx 配置:")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('server {\n   listen 443 ssl http2;\n   listen [::]:443 ssl http2;\n\n   ssl_certificate /etc/ssl/cert.pem;\n   ssl_certificate_key /etc/ssl/key.pem;\n   ssl_client_certificate /etc/ssl/cloudflare.crt;\n   ssl_verify_client on;\n   ssl_session_timeout 1d;\n   ssl_session_cache shared:MozSSL:10m;  # about 40000 sessions\n   ssl_session_tickets off;\n\n   # intermediate configuration\n   ssl_protocols TLSv1.2 TLSv1.3;\n   ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;\n   ssl_prefer_server_ciphers off;\n\n   # HSTS (ngx_http_headers_module is required) (63072000 seconds)\n   add_header Strict-Transport-Security "max-age=63072000" always;\n')])])])])]),e._v(" "),n("h2",{attrs:{id:"案例-use-case-2-separated-frontend-backend前后端分离"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#案例-use-case-2-separated-frontend-backend前后端分离"}},[e._v("#")]),e._v(" 案例 Use Case 2: separated frontend/backend前后端分离")]),e._v(" "),n("p",[e._v("举例前后端分离项目：\n1.(user interact ) browser request nginx for frontend resource\ncreate self-signed cert and config nignx, so browser will talk to nginx through https (unsafe warning will be alert as it's self signed)")]),e._v(" "),n("p",[e._v("2.(no user interact) js codes will make http call to backend service to retrieve data through nginx, nginx forward http request to backend service\nbackend service has to implement and support https, and nginx also have to act as a https client to handshake with the backend service")]),e._v(" "),n("p",[e._v("3.(no user interact) js codes will connect to websocket server directly")]),e._v(" "),n("p",[e._v("假设前端项目用的是create-reactjs-app脚手架，npm run start会开启一个nodejs服务，如下")]),e._v(" "),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/network/ssl_local_env01.png",alt:""}})]),e._v(" "),n("p",[e._v("这种情况下显然是不可行的，首先：")]),e._v(" "),n("p",[e._v("1.默认情况下，origin是https://127.0.0.1:3000，axios http client请求的host是 https://127.0.0.1:10001 ，会被same origin policy阻挡，")]),e._v(" "),n("p",[e._v("注意如果是"),n("code",[e._v("<img src=https://127.0.0.1:3000/verifycode")]),e._v(" 这种图片src的验证码是不会被block住的，因为img link script等标签不会受制于same origin policy")]),e._v(" "),n("p",[e._v("2.浏览器用户互动的部分请求到的host是nodejs，而非用户互动的axios请求到的host是spring mvc，因为开发环境肯定都是自签证书，即使给nodejs设置好了自签证书，浏览器第一次会提醒用户不安全，用户选择继续访问后浏览器则记住该证书，但是axios请求的是spring mvc程序的证书，跟nodejs一般是不同的，这种情况下就会有问题")]),e._v(" "),n("p",[e._v("1的一个解决办法是通过设置chrome浏览器，允许其跨域： https://segmentfault.com/a/1190000021711445")]),e._v(" "),n("p",[e._v("2的一个解决方法是nodejs跟spring mvc用相同的证书，或者手动给浏览器安装证书：https://qastack.cn/superuser/27268/how-do-i-disable-the-warning-chrome-gives-if-a-security-certificate-is-not-trusted")]),e._v(" "),n("p",[e._v("但是其实更完美的解决方法是加一个nginx，nginx作为proxy转发两者的流量到nodejs和springmvc，这样浏览器本身和其中的js代码axios http client只需要跟nginx进行handshake即可，而且origin和host都是test.local，不存在跨域问题，参考下面这张图：")]),e._v(" "),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/network/ssl_local_env02.png",alt:""}})]),e._v(" "),n("p",[e._v("注意，关于websocket有两点：")]),e._v(" "),n("ol",[n("li",[n("p",[e._v("如果网站使用了https，默认必须使用wss，ws会被浏览器block住，另外注意到，这里前端跟nginx之间是使用wss的，nginx跟真正的服务端仍然是明文ws通信，这个很正常，本来nginx就是反向代理，客户端不需要直接跟被代理的服务端连接，所以实际上同理后端的服务也可以只用http跟nginx通信；")])]),e._v(" "),n("li",[n("p",[e._v("如果是本地测试 127.0.0.1，特别要小心，如图域名使用test.local会出现问题：provisional headers are shown")]),e._v(" "),n("p",[e._v("解决办法是，nginx将server_name改为localhost即可")])])]),e._v(" "),n("p",[e._v("而最终部署到服务器上则会简化，因为就不需要nodejs开发环境了：")]),e._v(" "),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/network/ssl_product_env.png",alt:""}})]),e._v(" "),n("p",[e._v("测试完https后，想回去测试http，chrome经常会强制使用https，解决办法：")]),e._v(" "),n("p",[e._v("https://superuser.com/questions/565409/how-to-stop-an-automatic-redirect-from-http-to-https-in-chrome")]),e._v(" "),n("ol",[n("li",[e._v("Go to "),n("code",[e._v("chrome://net-internals/#hsts")]),e._v(". Enter "),n("em",[e._v("3rdrevolution.com")]),e._v(" under "),n("strong",[e._v("Delete domain security policies")]),e._v(" and press the Delete button.")]),e._v(" "),n("li",[e._v("Now go to "),n("code",[e._v("chrome://settings/clearBrowserData")]),e._v(", tick the box "),n("em",[e._v("Cached images and files")]),e._v(" and press click the button "),n("em",[e._v("Clear data")]),e._v(".")])]),e._v(" "),n("h2",{attrs:{id:"troubleshooting"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting"}},[e._v("#")]),e._v(" Troubleshooting")]),e._v(" "),n("h3",{attrs:{id:"查看服务器支持的tls版本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看服务器支持的tls版本"}},[e._v("#")]),e._v(" 查看服务器支持的TLS版本")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("nmap -p 443 --script ssl-enum-ciphers <TARGET>\n\nopenssl s_client -host api.compass-ft.com -port 443\n")])])]),n("h3",{attrs:{id:"查看服务器支持的cipher-suite"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看服务器支持的cipher-suite"}},[e._v("#")]),e._v(" 查看服务器支持的cipher suite")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("To get a list of all cipher suites supported by your installation of OpenSSL, use the openssl command with the ciphers subcommand as follows:\n$ openssl ciphers -v 'ALL:COMPLEMENTOFALL'\nto only list suites that are defined as belonging to the HIGH group, use the following command:\n$ openssl ciphers -v 'HIGH'\n\n\nhttps://www.keyfactor.com/blog/cipher-suites-explained/\nTLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384\nKey Exchange - Authentication - Cipher(algorithm, strength, mode) - Hash or MAC\n")])])]),n("h3",{attrs:{id:"net-err-cert-common-name-invalid"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#net-err-cert-common-name-invalid"}},[e._v("#")]),e._v(" NET::ERR_CERT_COMMON_NAME_INVALID")]),e._v(" "),n("p",[e._v("如果是设置，基本就是域名跟证书不一致，比如证书中的：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("openssl x509 -noout -text -in test.crt\nSubject: CN = *.test.com\nnginx配置的server_name就需要是其子域名\n")])])]),n("p",[e._v("如果是访问其他网站遇到，可能是dns解析问题：")]),e._v(" "),n("p",[e._v("https://blog.csdn.net/zerooffdate/article/details/80513730")]),e._v(" "),n("h3",{attrs:{id:"ssl-ctx-use-privatekey-failed"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ssl-ctx-use-privatekey-failed"}},[e._v("#")]),e._v(" SSL_CTX_use_PrivateKey failed")]),e._v(" "),n("p",[e._v("emerg] SSL_CTX_use_PrivateKey failed (SSL: error:0B080074:x509 certificate routines:X509_check_private_key:key values mismatch)")]),e._v(" "),n("p",[e._v("私钥和证书不匹配，验证")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("openssl x509 -noout -modulus -in certificate.crt | openssl md5\nopenssl rsa -noout -modulus -in privateKey.key | openssl md5\n")])])]),n("h3",{attrs:{id:"服务端cert过期导致handshake请求失败"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#服务端cert过期导致handshake请求失败"}},[e._v("#")]),e._v(" 服务端cert过期导致Handshake请求失败")]),e._v(" "),n("p",[e._v("sprintboot访问一个https的api遇到问题：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("2022-01-25 16:18:05.175 ^[[31mERROR^[[m ^[[35m30604GG^[[m [scheduling-1] ^[[36mc.a.m.f.u.HttpClientUtil^[[m : Get Exception Remote host closed connection during handshake\n\njavax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake\n        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:980)\n        at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1363)\n        at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:735)\n        at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:123)\n        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)\n        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)\n        at org.apache.commons.httpclient.HttpConnection.flushRequestOutputStream(HttpConnection.java:828)\n        at org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2116)\n        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096)\n        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)\n        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)\n        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)\n        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)\n        at com.lyhistory.middleware.fundingrate.util.HttpClientUtil.sendGet(HttpClientUtil.java:64)\n        at com.lyhistory.middleware.fundingrate.service.impl.CompassftServiceImpl.sendRequest(CompassftServiceImpl.java:25)\n        at com.lyhistory.middleware.fundingrate.job.CompassftJob.crawlData(CompassftJob.java:33)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:497)\n        at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)\n        at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\nCaused by: java.io.EOFException: SSL peer shut down incorrectly\n        at sun.security.ssl.InputRecord.read(InputRecord.java:505)\n        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:961)\n        ... 28 more\n")])])]),n("p",[e._v("但是此前在另外一台服务器上测试没有问题，确定了浏览器访问该api没有问题，然后在这台机器上curl一下")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("#curl https://api.compass-ft.com/v1/indexes/CCRTBTC/history?access_token=\ncurl: (60) The certificate issuer's certificate has expired.  Check your system date and time.\nMore details here: http://curl.haxx.se/docs/sslcerts.html\n\ncurl performs SSL certificate verification by default, using a \"bundle\"\n of Certificate Authority (CA) public keys (CA certs). If the default\n bundle file isn't adequate, you can specify an alternate file\n using the --cacert option.\nIf this HTTPS server uses a certificate signed by a CA represented in\n the bundle, the certificate verification probably failed due to a\n problem with the certificate (it might be expired, or the name might\n not match the domain name in the URL).\nIf you'd like to turn off curl's verification of the certificate, use\n the -k (or --insecure) option.\n")])])]),n("p",[e._v("说是证书过期，浏览器查看一下果然过期了几天，可能是浏览器不会那么频繁的验证，在此前另外一台装好的机器上curl没问题，估计是首次访问才验证，后续就验证了或者定期检查，")]),e._v(" "),n("p",[e._v("通知api提供商，提供商迅速更新了证书，浏览器看了下，确实更新了，postman也能访问，但是这台机器上仍然无法访问，curl也是一样的提示，")]),e._v(" "),n("p",[e._v("根据curl的提示查看")]),e._v(" "),n("p",[e._v("https://curl.se/docs/sslcerts.html")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("openssl s_client -showcerts -servername server -connect server:443 > cacert.pem")])]),e._v(" "),n("li",[e._v('type "quit", followed by the "ENTER" key')]),e._v(" "),n("li",[e._v('The certificate will have "BEGIN CERTIFICATE" and "END CERTIFICATE" markers.')]),e._v(" "),n("li",[e._v('If you want to see the data in the certificate, you can do: "openssl x509 -inform PEM -in certfile -text -out certdata" where certfile is the cert you extracted from logfile. Look in certdata.')])]),e._v(" "),n("p",[e._v("结合这个帖子 https://stackoverflow.com/questions/24992976/openssl-telling-certificate-has-expired-when-it-has-not")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("openssl s_client -showcerts -servername api.compass-ft.com -connect api.compass-ft.com:443\nCONNECTED(00000003)\ndepth=3 O = Digital Signature Trust Co., CN = DST Root CA X3\nverify error:num=10:certificate has expired\nnotAfter=Sep 30 14:01:15 2021 GMT\nverify return:0\n---\nCertificate chain\n 0 s:/CN=api.compass-ft.com\n   i:/C=US/O=Let's Encrypt/CN=R3\n-----BEGIN CERTIFICATE-----\n\n#openssl s_client -servername api.compass-ft.com -connect api.compass-ft.com:443\nCONNECTED(00000003)\ndepth=3 O = Digital Signature Trust Co., CN = DST Root CA X3\nverify error:num=10:certificate has expired\nnotAfter=Sep 30 14:01:15 2021 GMT\nverify return:0\n---\nCertificate chain\n 0 s:/CN=api.compass-ft.com\n   i:/C=US/O=Let's Encrypt/CN=R3\n 1 s:/C=US/O=Let's Encrypt/CN=R3\n   i:/C=US/O=Internet Security Research Group/CN=ISRG Root X1\n 2 s:/C=US/O=Internet Security Research Group/CN=ISRG Root X1\n   i:/O=Digital Signature Trust Co./CN=DST Root CA X3\n---\nServer certificate\n-----BEGIN CERTIFICATE-----\n\nopenssl s_client -servername api.compass-ft.com -connect api.compass-ft.com:443 2>/dev/null | openssl x509 -noout -dates\n")])])]),n("p",[e._v("又从浏览器观察了这三级的证书链，都是正常的，所以怀疑是os上的根证书链中哪个可能过期了但一直没更新！")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("]#find / -type d -name \"certs\"\n/etc/pki/CA/certs\n/etc/pki/tls/certs\n/etc/openldap/certs\n\n#openssl x509 -in ca-bundle.crt -text\n\nopenssl x509 -enddate -noout -in\n\n\n#curl -v https://api.compass-ft.com/v1/indexes/\n* About to connect() to api.compass-ft.com port 443 (#0)\n*   Trying 54.216.252.255...\n* Connected to api.compass-ft.com (54.216.252.255) port 443 (#0)\n* Initializing NSS with certpath: sql:/etc/pki/nssdb\n*   CAfile: /etc/pki/tls/certs/ca-bundle.crt\n  CApath: none\n* Server certificate:\n*       subject: CN=api.compass-ft.com\n*       start date: Dec 09 23:25:14 2021 GMT\n*       expire date: Mar 09 23:25:13 2022 GMT\n*       common name: api.compass-ft.com\n*       issuer: CN=R3,O=Let's Encrypt,C=US\n* NSS error -8162 (SEC_ERROR_EXPIRED_ISSUER_CERTIFICATE)\n* The certificate issuer's certificate has expired.  Check your system date and time.\n* Closing connection 0\ncurl: (60) The certificate issuer's certificate has expired.  Check your system date and time.\nMore details here: http://curl.haxx.se/docs/sslcerts.html\n\ncurl performs SSL certificate verification by default, using a \"bundle\"\n of Certificate Authority (CA) public keys (CA certs). If the default\n bundle file isn't adequate, you can specify an alternate file\n using the --cacert option.\nIf this HTTPS server uses a certificate signed by a CA represented in\n the bundle, the certificate verification probably failed due to a\n problem with the certificate (it might be expired, or the name might\n not match the domain name in the URL).\nIf you'd like to turn off curl's verification of the certificate, use\n the -k (or --insecure) option.\n\n")])])]),n("p",[e._v("搜索得知：")]),e._v(" "),n("p",[n("em",[e._v("For TLS certificates issued by Let’s Encrypt, the root certificate (DST Root CA X3) in the default chain expires on")]),e._v(" ***September 30, 2021***"),n("em",[e._v(".")])]),e._v(" "),n("p",[e._v("https://blog.devgenius.io/rhel-centos-7-fix-for-lets-encrypt-change-8af2de587fe4")]),e._v(" "),n("p",[e._v("插曲：开始还一度怀疑是不是os支持的tls Protocol跟api服务商支持的不同")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("openssl ciphers -v | awk '{print $2}' | sort | uniq\n")])])]),n("h3",{attrs:{id:"jdk版本bug导致handshake失败"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jdk版本bug导致handshake失败"}},[e._v("#")]),e._v(" jdk版本bug导致Handshake失败")]),e._v(" "),n("p",[e._v("跟前面一样dev上可以，生产上失败，错误输出也一样")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("2022-01-27 17:45:29.928 ^[[31mERROR^[[m ^[[35m25521GG^[[m [scheduling-1] ^[[36mc.a.m.f.u.HttpClientUtil^[[m : Get Exception Remote host closed connection during handshake\n\njavax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake\n        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:980)\n        at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1363)\n        at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:735)\n        at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:123)\n        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)\n        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)\n        at org.apache.commons.httpclient.HttpConnection.flushRequestOutputStream(HttpConnection.java:828)\n        at org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2116)\n        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096)\n        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)\n        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)\n        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)\n        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)\n        at com.lyhistory.middleware.fundingrate.util.HttpClientUtil.sendGet(HttpClientUtil.java:64)\n        at com.lyhistory.middleware.fundingrate.service.impl.CompassftServiceImpl.sendRequest(CompassftServiceImpl.java:25)\n        at com.lyhistory.middleware.fundingrate.job.CompassftJob.crawlData(CompassftJob.java:33)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:497)\n        at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)\n        at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\nCaused by: java.io.EOFException: SSL peer shut down incorrectly\n        at sun.security.ssl.InputRecord.read(InputRecord.java:505)\n        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:961)\n        ... 28 more\n\n")])])]),n("p",[e._v("通过这个帖子的提示https://stackoverflow.com/questions/21245796/javax-net-ssl-sslhandshakeexception-remote-host-closed-connection-during-handsh")]),e._v(" "),n("h4",{attrs:{id:"进行debug输出更详细的handshake握手内容"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#进行debug输出更详细的handshake握手内容"}},[e._v("#")]),e._v(" 进行debug输出更详细的handshake握手内容")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("[root@sgtcs-mdw-v02 funding-rate-datasource]# java -jar -Djavax.net.debug=all funding-rate-datasource.jar\n2022-01-28 09:11:49,757 main INFO Log4j appears to be running in a Servlet environment, but there's no log4j-web module available. If you want better web container support, please add the log4j-web JAR to your web archive or server lib directory.\n2022-01-28 09:11:49,766 main INFO jar:file:/opt/funding-rate-datasource/funding-rate-datasource.jar!/BOOT-INF/classes!/log4j2.yml does not support dynamic reconfiguration\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v2.4.5)\n\n2022-01-28 09:11:49.871  INFO 23127GG [kground-preinit] o.h.v.i.u.Version : HV000001: Hibernate Validator 6.1.7.Final\n2022-01-28 09:11:49.918  INFO 23127GG [main] o.s.b.StartupInfoLogger : Starting FundingRateMain v0.0.1-SNAPSHOT using Java 1.8.0_40 on sgtcs-mdw-v02 with PID 23127 (/opt/funding-rate-datasource/funding-rate-datasource.jar started by root in /opt/funding-rate-datasource)\n2022-01-28 09:11:49.926  INFO 23127GG [main] o.s.b.SpringApplication : The following profiles are active: datasource\n2022-01-28 09:11:51.084  INFO 23127GG [main] o.s.b.w.e.t.TomcatWebServer : Tomcat initialized with port(s): 10999 (http)\n2022-01-28 09:11:51.109  INFO 23127GG [main] o.a.j.l.DirectJDKLog : Initializing ProtocolHandler [\"http-nio-10999\"]\n2022-01-28 09:11:51.110  INFO 23127GG [main] o.a.j.l.DirectJDKLog : Starting service [Tomcat]\n2022-01-28 09:11:51.110  INFO 23127GG [main] o.a.j.l.DirectJDKLog : Starting Servlet engine: [Apache Tomcat/9.0.45]\n2022-01-28 09:11:51.170  INFO 23127GG [main] o.a.j.l.DirectJDKLog : Initializing Spring embedded WebApplicationContext\n2022-01-28 09:11:51.171  INFO 23127GG [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1197 ms\n2022-01-28 09:11:51.658  INFO 23127GG [main] o.s.s.c.ExecutorConfigurationSupport : Initializing ExecutorService 'applicationTaskExecutor'\n2022-01-28 09:11:51.853  INFO 23127GG [main] o.s.s.c.ExecutorConfigurationSupport : Initializing ExecutorService 'taskScheduler'\n2022-01-28 09:11:51.884  INFO 23127GG [main] o.a.j.l.DirectJDKLog : Starting ProtocolHandler [\"http-nio-10999\"]\n2022-01-28 09:11:51.907  INFO 23127GG [main] o.s.b.w.e.t.TomcatWebServer : Tomcat started on port(s): 10999 (http) with context path '/middleware'\n2022-01-28 09:11:51.922  INFO 23127GG [scheduling-1] c.a.m.f.j.CompassftJob : CompassftJob crawlData, start time is 09:11:51\n2022-01-28 09:11:51.924  INFO 23127GG [main] o.s.b.StartupInfoLogger : Started FundingRateMain in 2.449 seconds (JVM running for 3.494)\nkeyStore is :\nkeyStore type is : jks\nkeyStore provider is :\ninit keystore\ninit keymanager of type SunX509\ntrustStore is: /apps/3rd-party/java-se-8u40-ri/jre/lib/security/cacerts\ntrustStore type is : jks\ntrustStore provider is :\ninit truststore\ntrigger seeding of SecureRandom\ndone seeding SecureRandom\nIgnoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_GCM_SHA384\nIgnoring unavailable cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA\nIgnoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_GCM_SHA384\nIgnoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA\nIgnoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\nIgnoring unavailable cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256\nIgnoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA\nIgnoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384\nIgnoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384\nIgnoring unavailable cipher suite: TLS_RSA_WITH_AES_256_GCM_SHA384\nIgnoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384\nIgnoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384\nIgnoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA\nIgnoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384\nIgnoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384\nIgnoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256\nIgnoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA\nIgnoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256\nIgnoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA\nIgnoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA\nIgnoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\nAllow unsafe renegotiation: false\nAllow legacy hello messages: true\nIs initial handshake: true\nIs secure renegotiation: false\nscheduling-1, setSoTimeout(0) called\nscheduling-1, setSoTimeout(60000) called\nIgnoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256 for TLSv1.1\n%% No cached client session\n*** ClientHello, TLSv1.2\nRandomCookie:  GMT: 1626554840 bytes = { 233, 246, 57, 123, 111, 81, 50, 152, 19, 185, 227, 133, 240, 86, 55, 133, 151, 4, 29, 231, 232, 156, 23, 144, 11, 15, 125, 61 }\nSession ID:  {}\nCipher Suites: [TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_ECDSA_WITH_RC4_128_SHA, TLS_ECDHE_RSA_WITH_RC4_128_SHA, SSL_RSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_RC4_128_SHA, TLS_ECDH_RSA_WITH_RC4_128_SHA, SSL_RSA_WITH_RC4_128_MD5, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]\nCompression Methods:  { 0 }\nExtension elliptic_curves, curve names: {secp256r1, sect163k1, sect163r2, secp192r1, secp224r1, sect233k1, sect233r1, sect283k1, sect283r1, secp384r1, sect409k1, sect409r1, secp521r1, sect571k1, sect571r1, secp160k1, secp160r1, secp160r2, sect163r1, secp192k1, sect193r1, sect193r2, secp224k1, sect239k1, secp256k1}\nExtension ec_point_formats, formats: [uncompressed]\nExtension signature_algorithms, signature_algorithms: SHA512withECDSA, SHA512withRSA, SHA384withECDSA, SHA384withRSA, SHA256withECDSA, SHA256withRSA, SHA224withECDSA, SHA224withRSA, SHA1withECDSA, SHA1withRSA, SHA1withDSA, MD5withRSA\n***\n[write] MD5 and SHA1 hashes:  len = 207\n0000: 01 00 00 CB 03 03 61 F3   42 D8 E9 F6 39 7B 6F 51  ......a.B...9.oQ\n0010: 32 98 13 B9 E3 85 F0 56   37 85 97 04 1D E7 E8 9C  2......V7.......\n0020: 17 90 0B 0F 7D 3D 00 00   46 C0 23 C0 27 00 3C C0  .....=..F.#.'.<.\n0030: 25 C0 29 00 67 00 40 C0   09 C0 13 00 2F C0 04 C0  %.).g.@...../...\n0040: 0E 00 33 00 32 C0 2B C0   2F 00 9C C0 2D C0 31 00  ..3.2.+./...-.1.\n0050: 9E 00 A2 C0 08 C0 12 00   0A C0 03 C0 0D 00 16 00  ................\n0060: 13 C0 07 C0 11 00 05 C0   02 C0 0C 00 04 00 FF 01  ................\n0070: 00 00 5C 00 0A 00 34 00   32 00 17 00 01 00 03 00  ..\\...4.2.......\n0080: 13 00 15 00 06 00 07 00   09 00 0A 00 18 00 0B 00  ................\n0090: 0C 00 19 00 0D 00 0E 00   0F 00 10 00 11 00 02 00  ................\n00A0: 12 00 04 00 05 00 14 00   08 00 16 00 0B 00 02 01  ................\n00B0: 00 00 0D 00 1A 00 18 06   03 06 01 05 03 05 01 04  ................\n00C0: 03 04 01 03 03 03 01 02   03 02 01 02 02 01 01     ...............\nscheduling-1, WRITE: TLSv1.2 Handshake, length = 207\n[Raw write]: length = 212\n0000: 16 03 03 00 CF 01 00 00   CB 03 03 61 F3 42 D8 E9  ...........a.B..\n0010: F6 39 7B 6F 51 32 98 13   B9 E3 85 F0 56 37 85 97  .9.oQ2......V7..\n0020: 04 1D E7 E8 9C 17 90 0B   0F 7D 3D 00 00 46 C0 23  ..........=..F.#\n0030: C0 27 00 3C C0 25 C0 29   00 67 00 40 C0 09 C0 13  .'.<.%.).g.@....\n0040: 00 2F C0 04 C0 0E 00 33   00 32 C0 2B C0 2F 00 9C  ./.....3.2.+./..\n0050: C0 2D C0 31 00 9E 00 A2   C0 08 C0 12 00 0A C0 03  .-.1............\n0060: C0 0D 00 16 00 13 C0 07   C0 11 00 05 C0 02 C0 0C  ................\n0070: 00 04 00 FF 01 00 00 5C   00 0A 00 34 00 32 00 17  .......\\...4.2..\n0080: 00 01 00 03 00 13 00 15   00 06 00 07 00 09 00 0A  ................\n0090: 00 18 00 0B 00 0C 00 19   00 0D 00 0E 00 0F 00 10  ................\n00A0: 00 11 00 02 00 12 00 04   00 05 00 14 00 08 00 16  ................\n00B0: 00 0B 00 02 01 00 00 0D   00 1A 00 18 06 03 06 01  ................\n00C0: 05 03 05 01 04 03 04 01   03 03 03 01 02 03 02 01  ................\n00D0: 02 02 01 01                                        ....\nscheduling-1, received EOFException: error\nscheduling-1, handling exception: javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake\nscheduling-1, SEND TLSv1.2 ALERT:  fatal, description = handshake_failure\nscheduling-1, WRITE: TLSv1.2 Alert, length = 2\n[Raw write]: length = 7\n0000: 15 03 03 00 02 02 28                               ......(\nscheduling-1, called closeSocket()\nscheduling-1, called close()\nscheduling-1, called closeInternal(true)\nscheduling-1, called close()\nscheduling-1, called closeInternal(true)\nscheduling-1, called close()\nscheduling-1, called closeInternal(true)\n2022-01-28 09:11:52.563 ERROR 23127GG [scheduling-1] c.a.m.f.u.HttpClientUtil : Get Exception Remote host closed connection during handshake\n\njavax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake\n        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:980)\n        at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1363)\n        at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:735)\n        at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:123)\n        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)\n        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)\n        at org.apache.commons.httpclient.HttpConnection.flushRequestOutputStream(HttpConnection.java:828)\n        at org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2116)\n        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096)\n        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)\n        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)\n        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)\n        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)\n        at com.lyhistory.middleware.fundingrate.util.HttpClientUtil.sendGet(HttpClientUtil.java:64)\n        at com.lyhistory.middleware.fundingrate.service.impl.CompassftServiceImpl.sendRequest(CompassftServiceImpl.java:25)\n        at com.lyhistory.middleware.fundingrate.job.CompassftJob.crawlData(CompassftJob.java:33)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:497)\n        at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)\n        at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\nCaused by: java.io.EOFException: SSL peer shut down incorrectly\n        at sun.security.ssl.InputRecord.read(InputRecord.java:505)\n        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:961)\n        ... 28 more\n\n2022-01-28 09:11:52.565  WARN 23127GG [scheduling-1] c.a.m.f.s.i.CompassftServiceImpl : Failed http request to https://api.compass-ft.com/v1/indexes/CCRTBTC/history?access_token=\n2022-01-28 09:11:52.565  INFO 23127GG [scheduling-1] c.a.m.f.j.CompassftJob : CompassftJob crawlData, end time is 09:11:52\n^C2022-01-28 09:11:57.032  INFO 23127GG [extShutdownHook] o.s.s.c.ExecutorConfigurationSupport : Shutting down ExecutorService 'taskScheduler'\n2022-01-28 09:11:57.033  INFO 23127GG [extShutdownHook] o.s.s.c.ExecutorConfigurationSupport : Shutting down ExecutorService 'applicationTaskExecutor'\n2022-01-28 09:11:57.034  INFO 23127GG [extShutdownHook] c.a.d.p.DruidDataSource : {dataSource-0} closing ...\n\n")])])]),n("h4",{attrs:{id:"对比下dev环境成功的输出"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#对比下dev环境成功的输出"}},[e._v("#")]),e._v(" 对比下dev环境成功的输出")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('[root@os-node3 funding-rate-datasource]# java -jar -Djavax.net.debug=all funding-rate-datasource.jar\n2022-01-28 10:45:45,321 main INFO Log4j appears to be running in a Servlet environment, but there\'s no log4j-web module available. If you want better web container support, please add the log4j-web JAR to your web archive or server lib directory.\n2022-01-28 10:45:45,337 main INFO jar:file:/opt/funding-rate-datasource/funding-rate-datasource.jar!/BOOT-INF/classes!/log4j2.yml does not support dynamic reconfiguration\n\n  .   ____          _            __ _ _\n /\\\\ / ___\'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | \'_ | \'_| | \'_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  \'  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v2.4.5)\n\n2022-01-28 10:45:45.398  INFO 7939GG [kground-preinit] o.h.v.i.u.Version : HV000001: Hibernate Validator 6.1.7.Final\n2022-01-28 10:45:45.449  INFO 7939GG [main] o.s.b.StartupInfoLogger : Starting FundingRateMain v0.0.1-SNAPSHOT using Java 1.8.0_191 on os-node3 with PID 7939 (/opt/funding-rate-datasource/funding-rate-datasource.jar started by root in /opt/funding-rate-datasource)\n2022-01-28 10:45:45.453  INFO 7939GG [main] o.s.b.SpringApplication : The following profiles are active: datasource\n2022-01-28 10:45:46.738  INFO 7939GG [main] o.s.b.w.e.t.TomcatWebServer : Tomcat initialized with port(s): 10999 (http)\n2022-01-28 10:45:46.759  INFO 7939GG [main] o.a.j.l.DirectJDKLog : Initializing ProtocolHandler ["http-nio-10999"]\n2022-01-28 10:45:46.759  INFO 7939GG [main] o.a.j.l.DirectJDKLog : Starting service [Tomcat]\n2022-01-28 10:45:46.760  INFO 7939GG [main] o.a.j.l.DirectJDKLog : Starting Servlet engine: [Apache Tomcat/9.0.45]\n2022-01-28 10:45:46.814  INFO 7939GG [main] o.a.j.l.DirectJDKLog : Initializing Spring embedded WebApplicationContext\n2022-01-28 10:45:46.815  INFO 7939GG [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1311 ms\n2022-01-28 10:45:47.171  INFO 7939GG [main] o.s.s.c.ExecutorConfigurationSupport : Initializing ExecutorService \'applicationTaskExecutor\'\n2022-01-28 10:45:47.355  INFO 7939GG [main] o.s.s.c.ExecutorConfigurationSupport : Initializing ExecutorService \'taskScheduler\'\n2022-01-28 10:45:47.383  INFO 7939GG [main] o.a.j.l.DirectJDKLog : Starting ProtocolHandler ["http-nio-10999"]\n2022-01-28 10:45:47.402  INFO 7939GG [main] o.s.b.w.e.t.TomcatWebServer : Tomcat started on port(s): 10999 (http) with context path \'/middleware\'\n2022-01-28 10:45:47.414  INFO 7939GG [scheduling-1] c.a.m.f.j.CompassftJob : CompassftJob crawlData, start time is 10:45:47\n2022-01-28 10:45:47.417  INFO 7939GG [main] o.s.b.StartupInfoLogger : Started FundingRateMain in 2.496 seconds (JVM running for 8.733)\nIgnoring disabled cipher suite: SSL_RSA_WITH_DES_CBC_SHA\nIgnoring disabled cipher suite: SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA\nIgnoring disabled cipher suite: TLS_KRB5_WITH_DES_CBC_MD5\nIgnoring disabled cipher suite: SSL_DH_anon_EXPORT_WITH_RC4_40_MD5\nIgnoring disabled cipher suite: SSL_DH_anon_WITH_DES_CBC_SHA\nIgnoring disabled cipher suite: TLS_KRB5_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: TLS_KRB5_WITH_DES_CBC_SHA\nIgnoring disabled cipher suite: TLS_KRB5_EXPORT_WITH_DES_CBC_40_MD5\nIgnoring disabled cipher suite: TLS_ECDHE_ECDSA_WITH_RC4_128_SHA\nIgnoring disabled cipher suite: SSL_DHE_RSA_WITH_DES_CBC_SHA\nIgnoring disabled cipher suite: TLS_KRB5_WITH_3DES_EDE_CBC_MD5\nIgnoring disabled cipher suite: SSL_DH_anon_WITH_RC4_128_MD5\nIgnoring disabled cipher suite: SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: SSL_DH_anon_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: SSL_RSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA\nIgnoring disabled cipher suite: TLS_ECDH_anon_WITH_RC4_128_SHA\nIgnoring disabled cipher suite: SSL_DHE_DSS_WITH_DES_CBC_SHA\nIgnoring disabled cipher suite: TLS_KRB5_EXPORT_WITH_RC4_40_SHA\nIgnoring disabled cipher suite: SSL_RSA_EXPORT_WITH_DES40_CBC_SHA\nIgnoring disabled cipher suite: TLS_KRB5_WITH_RC4_128_SHA\nIgnoring disabled cipher suite: SSL_RSA_EXPORT_WITH_RC4_40_MD5\nIgnoring disabled cipher suite: TLS_KRB5_EXPORT_WITH_DES_CBC_40_SHA\nIgnoring disabled cipher suite: TLS_KRB5_EXPORT_WITH_RC4_40_MD5\nIgnoring disabled cipher suite: TLS_ECDH_ECDSA_WITH_RC4_128_SHA\nIgnoring disabled cipher suite: TLS_KRB5_WITH_RC4_128_MD5\nIgnoring disabled cipher suite: TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: SSL_RSA_WITH_RC4_128_SHA\nIgnoring disabled cipher suite: TLS_ECDH_anon_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: TLS_ECDH_RSA_WITH_RC4_128_SHA\nIgnoring disabled cipher suite: SSL_DH_anon_EXPORT_WITH_DES40_CBC_SHA\nIgnoring disabled cipher suite: SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: TLS_ECDHE_RSA_WITH_RC4_128_SHA\nIgnoring disabled cipher suite: SSL_RSA_WITH_RC4_128_MD5\nIgnoring disabled cipher suite: TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: SSL_RSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: SSL_RSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA\nIgnoring disabled cipher suite: SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA\ntrustStore is: /etc/pki/java/cacerts\ntrustStore type is : jks\ntrustStore provider is : \ninit truststore\nadding as trusted cert:\n  Subject: CN=Hongkong Post Root CA 1, O=Hongkong Post, C=HK\n  Issuer:  CN=Hongkong Post Root CA 1, O=Hongkong Post, C=HK\n  Algorithm: RSA; Serial number: 0x3e8\n  Valid from Thu May 15 13:13:14 SGT 2003 until Mon May 15 12:52:29 SGT 2023\n\nadding as trusted cert:\n  Subject: CN=SecureTrust CA, O=SecureTrust Corporation, C=US\n  Issuer:  CN=SecureTrust CA, O=SecureTrust Corporation, C=US\n  Algorithm: RSA; Serial number: 0xcf08e5c0816a5ad427ff0eb271859d0\n  Valid from Wed Nov 08 03:31:18 SGT 2006 until Tue Jan 01 03:40:55 SGT 2030\n\nadding as trusted cert:\n  Subject: CN=Entrust Root Certification Authority - EC1, OU="(c) 2012 Entrust, Inc. - for authorized use only", OU=See www.entrust.net/legal-terms, O="Entrust, Inc.", C=US\n  Issuer:  CN=Entrust Root Certification Authority - EC1, OU="(c) 2012 Entrust, Inc. - for authorized use only", OU=See www.entrust.net/legal-terms, O="Entrust, Inc.", C=US\n  Algorithm: EC; Serial number: 0xa68b79290000000050d091f9\n  Valid from Tue Dec 18 23:25:36 SGT 2012 until Fri Dec 18 23:55:36 SGT 2037\n\nadding as trusted cert:\n  Subject: CN=DigiCert Global Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US\n  Issuer:  CN=DigiCert Global Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US\n  Algorithm: RSA; Serial number: 0x83be056904246b1a1756ac95991c74a\n  Valid from Fri Nov 10 08:00:00 SGT 2006 until Mon Nov 10 08:00:00 SGT 2031\n\nadding as trusted cert:\n  Subject: OU=Security Communication RootCA1, O=SECOM Trust.net, C=JP\n  Issuer:  OU=Security Communication RootCA1, O=SECOM Trust.net, C=JP\n  Algorithm: RSA; Serial number: 0x0\n  Valid from Tue Sep 30 12:20:49 SGT 2003 until Sat Sep 30 12:20:49 SGT 2023\n\nadding as trusted cert:\n  Subject: CN=QuoVadis Root CA 2 G3, O=QuoVadis Limited, C=BM\n  Issuer:  CN=QuoVadis Root CA 2 G3, O=QuoVadis Limited, C=BM\n  Algorithm: RSA; Serial number: 0x445734245b81899b35f2ceb82b3b5ba726f07528\n  Valid from Fri Jan 13 02:59:32 SGT 2012 until Mon Jan 13 02:59:32 SGT 2042\n\nadding as trusted cert:\n  Subject: CN=Hellenic Academic and Research Institutions RootCA 2015, O=Hellenic Academic and Research Institutions Cert. Authority, L=Athens, C=GR\n  Issuer:  CN=Hellenic Academic and Research Institutions RootCA 2015, O=Hellenic Academic and Research Institutions Cert. Authority, L=Athens, C=GR\n  Algorithm: RSA; Serial number: 0x0\n  Valid from Tue Jul 07 18:11:21 SGT 2015 until Sat Jun 30 18:11:21 SGT 2040\n\nadding as trusted cert:\n  Subject: CN=DigiCert Trusted Root G4, OU=www.digicert.com, O=DigiCert Inc, C=US\n  Issuer:  CN=DigiCert Trusted Root G4, OU=www.digicert.com, O=DigiCert Inc, C=US\n  Algorithm: RSA; Serial number: 0x59b1b579e8e2132e23907bda777755c\n  Valid from Thu Aug 01 20:00:00 SGT 2013 until Fri Jan 15 20:00:00 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=Hellenic Academic and Research Institutions ECC RootCA 2015, O=Hellenic Academic and Research Institutions Cert. Authority, L=Athens, C=GR\n  Issuer:  CN=Hellenic Academic and Research Institutions ECC RootCA 2015, O=Hellenic Academic and Research Institutions Cert. Authority, L=Athens, C=GR\n  Algorithm: EC; Serial number: 0x0\n  Valid from Tue Jul 07 18:37:12 SGT 2015 until Sat Jun 30 18:37:12 SGT 2040\n\nadding as trusted cert:\n  Subject: CN=GeoTrust Primary Certification Authority, O=GeoTrust Inc., C=US\n  Issuer:  CN=GeoTrust Primary Certification Authority, O=GeoTrust Inc., C=US\n  Algorithm: RSA; Serial number: 0x18acb56afd69b6153a636cafdafac4a1\n  Valid from Mon Nov 27 08:00:00 SGT 2006 until Thu Jul 17 07:59:59 SGT 2036\n\nadding as trusted cert:\n  Subject: CN=OpenTrust Root CA G1, O=OpenTrust, C=FR\n  Issuer:  CN=OpenTrust Root CA G1, O=OpenTrust, C=FR\n  Algorithm: RSA; Serial number: 0x1120b39055397d7f366d64c2a79f6b638e67\n  Valid from Mon May 26 16:45:50 SGT 2014 until Fri Jan 15 08:00:00 SGT 2038\n\nadding as trusted cert:\n  Subject: OU=Security Communication RootCA2, O="SECOM Trust Systems CO.,LTD.", C=JP\n  Issuer:  OU=Security Communication RootCA2, O="SECOM Trust Systems CO.,LTD.", C=JP\n  Algorithm: RSA; Serial number: 0x0\n  Valid from Fri May 29 13:00:39 SGT 2009 until Tue May 29 13:00:39 SGT 2029\n\nadding as trusted cert:\n  Subject: OU=ePKI Root Certification Authority, O="Chunghwa Telecom Co., Ltd.", C=TW\n  Issuer:  OU=ePKI Root Certification Authority, O="Chunghwa Telecom Co., Ltd.", C=TW\n  Algorithm: RSA; Serial number: 0x15c8bd65475cafb897005ee406d2bc9d\n  Valid from Mon Dec 20 10:31:27 SGT 2004 until Wed Dec 20 10:31:27 SGT 2034\n\nadding as trusted cert:\n  Subject: CN=AffirmTrust Commercial, O=AffirmTrust, C=US\n  Issuer:  CN=AffirmTrust Commercial, O=AffirmTrust, C=US\n  Algorithm: RSA; Serial number: 0x7777062726a9b17c\n  Valid from Fri Jan 29 22:06:06 SGT 2010 until Tue Dec 31 22:06:06 SGT 2030\n\nadding as trusted cert:\n  Subject: CN=Certum Trusted Network CA, OU=Certum Certification Authority, O=Unizeto Technologies S.A., C=PL\n  Issuer:  CN=Certum Trusted Network CA, OU=Certum Certification Authority, O=Unizeto Technologies S.A., C=PL\n  Algorithm: RSA; Serial number: 0x444c0\n  Valid from Wed Oct 22 20:07:37 SGT 2008 until Mon Dec 31 20:07:37 SGT 2029\n\nadding as trusted cert:\n  Subject: CN=XRamp Global Certification Authority, O=XRamp Security Services Inc, OU=www.xrampsecurity.com, C=US\n  Issuer:  CN=XRamp Global Certification Authority, O=XRamp Security Services Inc, OU=www.xrampsecurity.com, C=US\n  Algorithm: RSA; Serial number: 0x50946cec18ead59c4dd597ef758fa0ad\n  Valid from Tue Nov 02 01:14:04 SGT 2004 until Mon Jan 01 13:37:19 SGT 2035\n\nadding as trusted cert:\n  Subject: CN=EC-ACC, OU=Jerarquia Entitats de Certificacio Catalanes, OU=Vegeu https://www.catcert.net/verarrel (c)03, OU=Serveis Publics de Certificacio, O=Agencia Catalana de Certificacio (NIF Q-0801176-I), C=ES\n  Issuer:  CN=EC-ACC, OU=Jerarquia Entitats de Certificacio Catalanes, OU=Vegeu https://www.catcert.net/verarrel (c)03, OU=Serveis Publics de Certificacio, O=Agencia Catalana de Certificacio (NIF Q-0801176-I), C=ES\n  Algorithm: RSA; Serial number: 0x-11d4c2142bde21eb579d53fb0c223bff\n  Valid from Wed Jan 08 07:00:00 SGT 2003 until Wed Jan 08 06:59:59 SGT 2031\n\nadding as trusted cert:\n  Subject: CN=Sonera Class2 CA, O=Sonera, C=FI\n  Issuer:  CN=Sonera Class2 CA, O=Sonera, C=FI\n  Algorithm: RSA; Serial number: 0x1d\n  Valid from Fri Apr 06 15:29:40 SGT 2001 until Tue Apr 06 15:29:40 SGT 2021\n\nadding as trusted cert:\n  Subject: CN=GeoTrust Primary Certification Authority - G2, OU=(c) 2007 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US\n  Issuer:  CN=GeoTrust Primary Certification Authority - G2, OU=(c) 2007 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US\n  Algorithm: EC; Serial number: 0x3cb2f4480a00e2feeb243b5e603ec36b\n  Valid from Mon Nov 05 08:00:00 SGT 2007 until Tue Jan 19 07:59:59 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=Certinomis - Root CA, OU=0002 433998903, O=Certinomis, C=FR\n  Issuer:  CN=Certinomis - Root CA, OU=0002 433998903, O=Certinomis, C=FR\n  Algorithm: RSA; Serial number: 0x1\n  Valid from Mon Oct 21 17:17:18 SGT 2013 until Fri Oct 21 17:17:18 SGT 2033\n\nadding as trusted cert:\n  Subject: CN=COMODO ECC Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB\n  Issuer:  CN=COMODO ECC Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB\n  Algorithm: EC; Serial number: 0x1f47afaa62007050544c019e9b63992a\n  Valid from Thu Mar 06 08:00:00 SGT 2008 until Tue Jan 19 07:59:59 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=ISRG Root X1, O=Internet Security Research Group, C=US\n  Issuer:  CN=ISRG Root X1, O=Internet Security Research Group, C=US\n  Algorithm: RSA; Serial number: 0x8210cfb0d240e3594463e0bb63828b00\n  Valid from Thu Jun 04 19:04:38 SGT 2015 until Mon Jun 04 19:04:38 SGT 2035\n\nadding as trusted cert:\n  Subject: CN=DigiCert High Assurance EV Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US\n  Issuer:  CN=DigiCert High Assurance EV Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US\n  Algorithm: RSA; Serial number: 0x2ac5c266a0b409b8f0b79f2ae462577\n  Valid from Fri Nov 10 08:00:00 SGT 2006 until Mon Nov 10 08:00:00 SGT 2031\n\nadding as trusted cert:\n  Subject: CN=TrustCor RootCert CA-1, OU=TrustCor Certificate Authority, O=TrustCor Systems S. de R.L., L=Panama City, ST=Panama, C=PA\n  Issuer:  CN=TrustCor RootCert CA-1, OU=TrustCor Certificate Authority, O=TrustCor Systems S. de R.L., L=Panama City, ST=Panama, C=PA\n  Algorithm: RSA; Serial number: 0xda9bec71f303b019\n  Valid from Thu Feb 04 20:32:16 SGT 2016 until Tue Jan 01 01:23:16 SGT 2030\n\nadding as trusted cert:\n  Subject: CN=GeoTrust Universal CA, O=GeoTrust Inc., C=US\n  Issuer:  CN=GeoTrust Universal CA, O=GeoTrust Inc., C=US\n  Algorithm: RSA; Serial number: 0x1\n  Valid from Thu Mar 04 13:00:00 SGT 2004 until Sun Mar 04 13:00:00 SGT 2029\n\nadding as trusted cert:\n  Subject: CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R3\n  Issuer:  CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R3\n  Algorithm: RSA; Serial number: 0x4000000000121585308a2\n  Valid from Wed Mar 18 18:00:00 SGT 2009 until Sun Mar 18 18:00:00 SGT 2029\n\nadding as trusted cert:\n  Subject: CN=GeoTrust Universal CA 2, O=GeoTrust Inc., C=US\n  Issuer:  CN=GeoTrust Universal CA 2, O=GeoTrust Inc., C=US\n  Algorithm: RSA; Serial number: 0x1\n  Valid from Thu Mar 04 13:00:00 SGT 2004 until Sun Mar 04 13:00:00 SGT 2029\n\nadding as trusted cert:\n  Subject: CN=Baltimore CyberTrust Root, OU=CyberTrust, O=Baltimore, C=IE\n  Issuer:  CN=Baltimore CyberTrust Root, OU=CyberTrust, O=Baltimore, C=IE\n  Algorithm: RSA; Serial number: 0x20000b9\n  Valid from Sat May 13 02:46:00 SGT 2000 until Tue May 13 07:59:00 SGT 2025\n\nadding as trusted cert:\n  Subject: CN=AAA Certificate Services, O=Comodo CA Limited, L=Salford, ST=Greater Manchester, C=GB\n  Issuer:  CN=AAA Certificate Services, O=Comodo CA Limited, L=Salford, ST=Greater Manchester, C=GB\n  Algorithm: RSA; Serial number: 0x1\n  Valid from Thu Jan 01 08:00:00 SGT 2004 until Mon Jan 01 07:59:59 SGT 2029\n\nadding as trusted cert:\n  Subject: OU=Starfield Class 2 Certification Authority, O="Starfield Technologies, Inc.", C=US\n  Issuer:  OU=Starfield Class 2 Certification Authority, O="Starfield Technologies, Inc.", C=US\n  Algorithm: RSA; Serial number: 0x0\n  Valid from Wed Jun 30 01:39:16 SGT 2004 until Fri Jun 30 01:39:16 SGT 2034\n\nadding as trusted cert:\n  Subject: CN=OpenTrust Root CA G2, O=OpenTrust, C=FR\n  Issuer:  CN=OpenTrust Root CA G2, O=OpenTrust, C=FR\n  Algorithm: RSA; Serial number: 0x1120a1691bbfbdb9bd52968f23e848bf2611\n  Valid from Mon May 26 08:00:00 SGT 2014 until Fri Jan 15 08:00:00 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=VeriSign Class 3 Public Primary Certification Authority - G3, OU="(c) 1999 VeriSign, Inc. - For authorized use only", OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US\n  Issuer:  CN=VeriSign Class 3 Public Primary Certification Authority - G3, OU="(c) 1999 VeriSign, Inc. - For authorized use only", OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US\n  Algorithm: RSA; Serial number: 0x9b7e0649a33e62b9d5ee90487129ef57\n  Valid from Fri Oct 01 08:00:00 SGT 1999 until Thu Jul 17 07:59:59 SGT 2036\n\nadding as trusted cert:\n  Subject: OU=AC RAIZ FNMT-RCM, O=FNMT-RCM, C=ES\n  Issuer:  OU=AC RAIZ FNMT-RCM, O=FNMT-RCM, C=ES\n  Algorithm: RSA; Serial number: 0x5d938d306736c8061d1ac754846907\n  Valid from Wed Oct 29 23:59:56 SGT 2008 until Tue Jan 01 08:00:00 SGT 2030\n\nadding as trusted cert:\n  Subject: CN=GlobalSign Root CA, OU=Root CA, O=GlobalSign nv-sa, C=BE\n  Issuer:  CN=GlobalSign Root CA, OU=Root CA, O=GlobalSign nv-sa, C=BE\n  Algorithm: RSA; Serial number: 0x40000000001154b5ac394\n  Valid from Tue Sep 01 20:00:00 SGT 1998 until Fri Jan 28 20:00:00 SGT 2028\n\nadding as trusted cert:\n  Subject: CN=OpenTrust Root CA G3, O=OpenTrust, C=FR\n  Issuer:  CN=OpenTrust Root CA G3, O=OpenTrust, C=FR\n  Algorithm: EC; Serial number: 0x1120e6f84cfc24b0be0540acda831b34603f\n  Valid from Mon May 26 08:00:00 SGT 2014 until Fri Jan 15 08:00:00 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=TÜRKTRUST Elektronik Sertifika Hizmet Sağlayıcısı H5, O=TÜRKTRUST Bilgi İletişim ve Bilişim Güvenliği Hizmetleri A.Ş., L=Ankara, C=TR\n  Issuer:  CN=TÜRKTRUST Elektronik Sertifika Hizmet Sağlayıcısı H5, O=TÜRKTRUST Bilgi İletişim ve Bilişim Güvenliği Hizmetleri A.Ş., L=Ankara, C=TR\n  Algorithm: RSA; Serial number: 0x8e17fe242081\n  Valid from Tue Apr 30 16:07:01 SGT 2013 until Fri Apr 28 16:07:01 SGT 2023\n\nadding as trusted cert:\n  Subject: CN=AffirmTrust Networking, O=AffirmTrust, C=US\n  Issuer:  CN=AffirmTrust Networking, O=AffirmTrust, C=US\n  Algorithm: RSA; Serial number: 0x7c4f04391cd4992d\n  Valid from Fri Jan 29 22:08:24 SGT 2010 until Tue Dec 31 22:08:24 SGT 2030\n\nadding as trusted cert:\n  Subject: CN=TWCA Global Root CA, OU=Root CA, O=TAIWAN-CA, C=TW\n  Issuer:  CN=TWCA Global Root CA, OU=Root CA, O=TAIWAN-CA, C=TW\n  Algorithm: RSA; Serial number: 0xcbe\n  Valid from Wed Jun 27 14:28:33 SGT 2012 until Tue Dec 31 23:59:59 SGT 2030\n\nadding as trusted cert:\n  Subject: CN=AffirmTrust Premium, O=AffirmTrust, C=US\n  Issuer:  CN=AffirmTrust Premium, O=AffirmTrust, C=US\n  Algorithm: RSA; Serial number: 0x6d8c1446b1a60aee\n  Valid from Fri Jan 29 22:10:36 SGT 2010 until Mon Dec 31 22:10:36 SGT 2040\n\nadding as trusted cert:\n  Subject: O=Government Root Certification Authority, C=TW\n  Issuer:  O=Government Root Certification Authority, C=TW\n  Algorithm: RSA; Serial number: 0x1f9d595ad72fc20644a5800869e35ef6\n  Valid from Thu Dec 05 21:23:33 SGT 2002 until Sun Dec 05 21:23:33 SGT 2032\n\nadding as trusted cert:\n  Subject: CN=GeoTrust Primary Certification Authority - G3, OU=(c) 2008 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US\n  Issuer:  CN=GeoTrust Primary Certification Authority - G3, OU=(c) 2008 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US\n  Algorithm: RSA; Serial number: 0x15ac6e9419b2794b41f627a9c3180f1f\n  Valid from Wed Apr 02 08:00:00 SGT 2008 until Wed Dec 02 07:59:59 SGT 2037\n\nadding as trusted cert:\n  Subject: CN=TWCA Root Certification Authority, OU=Root CA, O=TAIWAN-CA, C=TW\n  Issuer:  CN=TWCA Root Certification Authority, OU=Root CA, O=TAIWAN-CA, C=TW\n  Algorithm: RSA; Serial number: 0x1\n  Valid from Thu Aug 28 15:24:33 SGT 2008 until Tue Dec 31 23:59:59 SGT 2030\n\nadding as trusted cert:\n  Subject: CN=LuxTrust Global Root 2, O=LuxTrust S.A., C=LU\n  Issuer:  CN=LuxTrust Global Root 2, O=LuxTrust S.A., C=LU\n  Algorithm: RSA; Serial number: 0xa7ea6df4b449eda6a24859ee6b815d3167fbbb1\n  Valid from Thu Mar 05 21:21:57 SGT 2015 until Mon Mar 05 21:21:57 SGT 2035\n\nadding as trusted cert:\n  Subject: CN=Chambers of Commerce Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU\n  Issuer:  CN=Chambers of Commerce Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU\n  Algorithm: RSA; Serial number: 0xa3da427ea4b1aeda\n  Valid from Fri Aug 01 20:29:50 SGT 2008 until Sat Jul 31 20:29:50 SGT 2038\n\nadding as trusted cert:\n  Subject: C=DE, O=Atos, CN=Atos TrustedRoot 2011\n  Issuer:  C=DE, O=Atos, CN=Atos TrustedRoot 2011\n  Algorithm: RSA; Serial number: 0x5c33cb622c5fb332\n  Valid from Thu Jul 07 22:58:30 SGT 2011 until Wed Jan 01 07:59:59 SGT 2031\n\nadding as trusted cert:\n  Subject: CN=SSL.com EV Root Certification Authority RSA R2, O=SSL Corporation, L=Houston, ST=Texas, C=US\n  Issuer:  CN=SSL.com EV Root Certification Authority RSA R2, O=SSL Corporation, L=Houston, ST=Texas, C=US\n  Algorithm: RSA; Serial number: 0x56b629cd34bc78f6\n  Valid from Thu Jun 01 02:14:37 SGT 2017 until Sat May 31 02:14:37 SGT 2042\n\nadding as trusted cert:\n  Subject: CN=SwissSign Silver CA - G2, O=SwissSign AG, C=CH\n  Issuer:  CN=SwissSign Silver CA - G2, O=SwissSign AG, C=CH\n  Algorithm: RSA; Serial number: 0x4f1bd42f54bb2f4b\n  Valid from Wed Oct 25 16:32:46 SGT 2006 until Sat Oct 25 16:32:46 SGT 2036\n\nadding as trusted cert:\n  Subject: CN=SecureSign RootCA11, O="Japan Certification Services, Inc.", C=JP\n  Issuer:  CN=SecureSign RootCA11, O="Japan Certification Services, Inc.", C=JP\n  Algorithm: RSA; Serial number: 0x1\n  Valid from Wed Apr 08 12:56:47 SGT 2009 until Sun Apr 08 12:56:47 SGT 2029\n\nadding as trusted cert:\n  Subject: CN=SSL.com Root Certification Authority ECC, O=SSL Corporation, L=Houston, ST=Texas, C=US\n  Issuer:  CN=SSL.com Root Certification Authority ECC, O=SSL Corporation, L=Houston, ST=Texas, C=US\n  Algorithm: EC; Serial number: 0x75e6dfcbc1685ba8\n  Valid from Sat Feb 13 02:14:03 SGT 2016 until Wed Feb 13 02:14:03 SGT 2041\n\nadding as trusted cert:\n  Subject: CN=Entrust Root Certification Authority - G2, OU="(c) 2009 Entrust, Inc. - for authorized use only", OU=See www.entrust.net/legal-terms, O="Entrust, Inc.", C=US\n  Issuer:  CN=Entrust Root Certification Authority - G2, OU="(c) 2009 Entrust, Inc. - for authorized use only", OU=See www.entrust.net/legal-terms, O="Entrust, Inc.", C=US\n  Algorithm: RSA; Serial number: 0x4a538c28\n  Valid from Wed Jul 08 01:25:54 SGT 2009 until Sun Dec 08 01:55:54 SGT 2030\n\nadding as trusted cert:\n  Subject: CN=DigiCert Assured ID Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US\n  Issuer:  CN=DigiCert Assured ID Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US\n  Algorithm: RSA; Serial number: 0xce7e0e517d846fe8fe560fc1bf03039\n  Valid from Fri Nov 10 08:00:00 SGT 2006 until Mon Nov 10 08:00:00 SGT 2031\n\nadding as trusted cert:\n  Subject: OU=Go Daddy Class 2 Certification Authority, O="The Go Daddy Group, Inc.", C=US\n  Issuer:  OU=Go Daddy Class 2 Certification Authority, O="The Go Daddy Group, Inc.", C=US\n  Algorithm: RSA; Serial number: 0x0\n  Valid from Wed Jun 30 01:06:20 SGT 2004 until Fri Jun 30 01:06:20 SGT 2034\n\nadding as trusted cert:\n  Subject: CN=TrustCor RootCert CA-2, OU=TrustCor Certificate Authority, O=TrustCor Systems S. de R.L., L=Panama City, ST=Panama, C=PA\n  Issuer:  CN=TrustCor RootCert CA-2, OU=TrustCor Certificate Authority, O=TrustCor Systems S. de R.L., L=Panama City, ST=Panama, C=PA\n  Algorithm: RSA; Serial number: 0x25a1dfca33cb5902\n  Valid from Thu Feb 04 20:32:23 SGT 2016 until Mon Jan 01 01:26:39 SGT 2035\n\nadding as trusted cert:\n  Subject: CN=TUBITAK Kamu SM SSL Kok Sertifikasi - Surum 1, OU=Kamu Sertifikasyon Merkezi - Kamu SM, O=Turkiye Bilimsel ve Teknolojik Arastirma Kurumu - TUBITAK, L=Gebze - Kocaeli, C=TR\n  Issuer:  CN=TUBITAK Kamu SM SSL Kok Sertifikasi - Surum 1, OU=Kamu Sertifikasyon Merkezi - Kamu SM, O=Turkiye Bilimsel ve Teknolojik Arastirma Kurumu - TUBITAK, L=Gebze - Kocaeli, C=TR\n  Algorithm: RSA; Serial number: 0x1\n  Valid from Mon Nov 25 16:25:55 SGT 2013 until Sun Oct 25 16:25:55 SGT 2043\n\nadding as trusted cert:\n  Subject: CN=Secure Global CA, O=SecureTrust Corporation, C=US\n  Issuer:  CN=Secure Global CA, O=SecureTrust Corporation, C=US\n  Algorithm: RSA; Serial number: 0x75622a4e8d48a894df413c8f0f8eaa5\n  Valid from Wed Nov 08 03:42:28 SGT 2006 until Tue Jan 01 03:52:06 SGT 2030\n\nadding as trusted cert:\n  Subject: CN=AddTrust External CA Root, OU=AddTrust External TTP Network, O=AddTrust AB, C=SE\n  Issuer:  CN=AddTrust External CA Root, OU=AddTrust External TTP Network, O=AddTrust AB, C=SE\n  Algorithm: RSA; Serial number: 0x1\n  Valid from Tue May 30 18:48:38 SGT 2000 until Sat May 30 18:48:38 SGT 2020\n\nadding as trusted cert:\n  Subject: CN=T-TeleSec GlobalRoot Class 3, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE\n  Issuer:  CN=T-TeleSec GlobalRoot Class 3, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE\n  Algorithm: RSA; Serial number: 0x1\n  Valid from Wed Oct 01 18:29:56 SGT 2008 until Sun Oct 02 07:59:59 SGT 2033\n\nadding as trusted cert:\n  Subject: CN=DigiCert Global Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US\n  Issuer:  CN=DigiCert Global Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US\n  Algorithm: EC; Serial number: 0x55556bcf25ea43535c3a40fd5ab4572\n  Valid from Thu Aug 01 20:00:00 SGT 2013 until Fri Jan 15 20:00:00 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=TrustCor ECA-1, OU=TrustCor Certificate Authority, O=TrustCor Systems S. de R.L., L=Panama City, ST=Panama, C=PA\n  Issuer:  CN=TrustCor ECA-1, OU=TrustCor Certificate Authority, O=TrustCor Systems S. de R.L., L=Panama City, ST=Panama, C=PA\n  Algorithm: RSA; Serial number: 0x84822c5f1c62d040\n  Valid from Thu Feb 04 20:32:33 SGT 2016 until Tue Jan 01 01:28:07 SGT 2030\n\nadding as trusted cert:\n  Subject: CN=Class 2 Primary CA, O=Certplus, C=FR\n  Issuer:  CN=Class 2 Primary CA, O=Certplus, C=FR\n  Algorithm: RSA; Serial number: 0x85bd4bf3d8dae369f694d75fc3a54423\n  Valid from Thu Jul 08 01:05:00 SGT 1999 until Sun Jul 07 07:59:59 SGT 2019\n\nadding as trusted cert:\n  Subject: CN=OISTE WISeKey Global Root GA CA, OU=OISTE Foundation Endorsed, OU=Copyright (c) 2005, O=WISeKey, C=CH\n  Issuer:  CN=OISTE WISeKey Global Root GA CA, OU=OISTE Foundation Endorsed, OU=Copyright (c) 2005, O=WISeKey, C=CH\n  Algorithm: RSA; Serial number: 0x413d72c7f46b1f81437df1d22854df9a\n  Valid from Mon Dec 12 00:03:44 SGT 2005 until Sat Dec 12 00:09:51 SGT 2037\n\nadding as trusted cert:\n  Subject: CN=GeoTrust Global CA, O=GeoTrust Inc., C=US\n  Issuer:  CN=GeoTrust Global CA, O=GeoTrust Inc., C=US\n  Algorithm: RSA; Serial number: 0x23456\n  Valid from Tue May 21 12:00:00 SGT 2002 until Sat May 21 12:00:00 SGT 2022\n\nadding as trusted cert:\n  Subject: CN=Network Solutions Certificate Authority, O=Network Solutions L.L.C., C=US\n  Issuer:  CN=Network Solutions Certificate Authority, O=Network Solutions L.L.C., C=US\n  Algorithm: RSA; Serial number: 0x57cb336fc25c16e6471617e3903168e0\n  Valid from Fri Dec 01 08:00:00 SGT 2006 until Tue Jan 01 07:59:59 SGT 2030\n\nadding as trusted cert:\n  Subject: CN=CFCA EV ROOT, O=China Financial Certification Authority, C=CN\n  Issuer:  CN=CFCA EV ROOT, O=China Financial Certification Authority, C=CN\n  Algorithm: RSA; Serial number: 0x184accd6\n  Valid from Wed Aug 08 11:07:01 SGT 2012 until Mon Dec 31 11:07:01 SGT 2029\n\nadding as trusted cert:\n  Subject: CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R5\n  Issuer:  CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R5\n  Algorithm: EC; Serial number: 0x605949e0262ebb55f90a778a71f94ad86c\n  Valid from Tue Nov 13 08:00:00 SGT 2012 until Tue Jan 19 11:14:07 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=Hellenic Academic and Research Institutions RootCA 2011, O=Hellenic Academic and Research Institutions Cert. Authority, C=GR\n  Issuer:  CN=Hellenic Academic and Research Institutions RootCA 2011, O=Hellenic Academic and Research Institutions Cert. Authority, C=GR\n  Algorithm: RSA; Serial number: 0x0\n  Valid from Tue Dec 06 21:49:52 SGT 2011 until Mon Dec 01 21:49:52 SGT 2031\n\nadding as trusted cert:\n  Subject: CN=Certum Trusted Network CA 2, OU=Certum Certification Authority, O=Unizeto Technologies S.A., C=PL\n  Issuer:  CN=Certum Trusted Network CA 2, OU=Certum Certification Authority, O=Unizeto Technologies S.A., C=PL\n  Algorithm: RSA; Serial number: 0x21d6d04a4f250fc93237fcaa5e128de9\n  Valid from Thu Oct 06 16:39:56 SGT 2011 until Sat Oct 06 16:39:56 SGT 2046\n\nadding as trusted cert:\n  Subject: CN=Starfield Root Certificate Authority - G2, O="Starfield Technologies, Inc.", L=Scottsdale, ST=Arizona, C=US\n  Issuer:  CN=Starfield Root Certificate Authority - G2, O="Starfield Technologies, Inc.", L=Scottsdale, ST=Arizona, C=US\n  Algorithm: RSA; Serial number: 0x0\n  Valid from Tue Sep 01 08:00:00 SGT 2009 until Fri Jan 01 07:59:59 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=IdenTrust Public Sector Root CA 1, O=IdenTrust, C=US\n  Issuer:  CN=IdenTrust Public Sector Root CA 1, O=IdenTrust, C=US\n  Algorithm: RSA; Serial number: 0xa0142800000014523cf467c00000002\n  Valid from Fri Jan 17 01:53:32 SGT 2014 until Tue Jan 17 01:53:32 SGT 2034\n\nadding as trusted cert:\n  Subject: CN=Entrust.net Certification Authority (2048), OU=(c) 1999 Entrust.net Limited, OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.), O=Entrust.net\n  Issuer:  CN=Entrust.net Certification Authority (2048), OU=(c) 1999 Entrust.net Limited, OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.), O=Entrust.net\n  Algorithm: RSA; Serial number: 0x3863def8\n  Valid from Sat Dec 25 01:50:51 SGT 1999 until Tue Jul 24 22:15:12 SGT 2029\n\nadding as trusted cert:\n  Subject: CN=Staat der Nederlanden Root CA - G3, O=Staat der Nederlanden, C=NL\n  Issuer:  CN=Staat der Nederlanden Root CA - G3, O=Staat der Nederlanden, C=NL\n  Algorithm: RSA; Serial number: 0x98a239\n  Valid from Thu Nov 14 19:28:42 SGT 2013 until Tue Nov 14 07:00:00 SGT 2028\n\nadding as trusted cert:\n  Subject: CN=TeliaSonera Root CA v1, O=TeliaSonera\n  Issuer:  CN=TeliaSonera Root CA v1, O=TeliaSonera\n  Algorithm: RSA; Serial number: 0x95be16a0f72e46f17b398272fa8bcd96\n  Valid from Thu Oct 18 20:00:50 SGT 2007 until Mon Oct 18 20:00:50 SGT 2032\n\nadding as trusted cert:\n  Subject: CN=thawte Primary Root CA, OU="(c) 2006 thawte, Inc. - For authorized use only", OU=Certification Services Division, O="thawte, Inc.", C=US\n  Issuer:  CN=thawte Primary Root CA, OU="(c) 2006 thawte, Inc. - For authorized use only", OU=Certification Services Division, O="thawte, Inc.", C=US\n  Algorithm: RSA; Serial number: 0x344ed55720d5edec49f42fce37db2b6d\n  Valid from Fri Nov 17 08:00:00 SGT 2006 until Thu Jul 17 07:59:59 SGT 2036\n\nadding as trusted cert:\n  Subject: CN=Go Daddy Root Certificate Authority - G2, O="GoDaddy.com, Inc.", L=Scottsdale, ST=Arizona, C=US\n  Issuer:  CN=Go Daddy Root Certificate Authority - G2, O="GoDaddy.com, Inc.", L=Scottsdale, ST=Arizona, C=US\n  Algorithm: RSA; Serial number: 0x0\n  Valid from Tue Sep 01 08:00:00 SGT 2009 until Fri Jan 01 07:59:59 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=Visa eCommerce Root, OU=Visa International Service Association, O=VISA, C=US\n  Issuer:  CN=Visa eCommerce Root, OU=Visa International Service Association, O=VISA, C=US\n  Algorithm: RSA; Serial number: 0x1386354d1d3f06f2c1f96505d5901c62\n  Valid from Wed Jun 26 10:18:36 SGT 2002 until Fri Jun 24 08:16:12 SGT 2022\n\nadding as trusted cert:\n  Subject: CN=VeriSign Class 3 Public Primary Certification Authority - G4, OU="(c) 2007 VeriSign, Inc. - For authorized use only", OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US\n  Issuer:  CN=VeriSign Class 3 Public Primary Certification Authority - G4, OU="(c) 2007 VeriSign, Inc. - For authorized use only", OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US\n  Algorithm: EC; Serial number: 0x2f80fe238c0e220f486712289187acb3\n  Valid from Mon Nov 05 08:00:00 SGT 2007 until Tue Jan 19 07:59:59 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=Staat der Nederlanden EV Root CA, O=Staat der Nederlanden, C=NL\n  Issuer:  CN=Staat der Nederlanden EV Root CA, O=Staat der Nederlanden, C=NL\n  Algorithm: RSA; Serial number: 0x98968d\n  Valid from Wed Dec 08 19:19:29 SGT 2010 until Thu Dec 08 19:10:28 SGT 2022\n\nadding as trusted cert:\n  Subject: CN=Entrust Root Certification Authority, OU="(c) 2006 Entrust, Inc.", OU=www.entrust.net/CPS is incorporated by reference, O="Entrust, Inc.", C=US\n  Issuer:  CN=Entrust Root Certification Authority, OU="(c) 2006 Entrust, Inc.", OU=www.entrust.net/CPS is incorporated by reference, O="Entrust, Inc.", C=US\n  Algorithm: RSA; Serial number: 0x456b5054\n  Valid from Tue Nov 28 04:23:42 SGT 2006 until Sat Nov 28 04:53:42 SGT 2026\n\nadding as trusted cert:\n  Subject: CN=DigiCert Assured ID Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US\n  Issuer:  CN=DigiCert Assured ID Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US\n  Algorithm: RSA; Serial number: 0xb931c3ad63967ea6723bfc3af9af44b\n  Valid from Thu Aug 01 20:00:00 SGT 2013 until Fri Jan 15 20:00:00 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=SSL.com Root Certification Authority RSA, O=SSL Corporation, L=Houston, ST=Texas, C=US\n  Issuer:  CN=SSL.com Root Certification Authority RSA, O=SSL Corporation, L=Houston, ST=Texas, C=US\n  Algorithm: RSA; Serial number: 0x7b2c9bd316803299\n  Valid from Sat Feb 13 01:39:39 SGT 2016 until Wed Feb 13 01:39:39 SGT 2041\n\nadding as trusted cert:\n  Subject: CN=Amazon Root CA 4, O=Amazon, C=US\n  Issuer:  CN=Amazon Root CA 4, O=Amazon, C=US\n  Algorithm: EC; Serial number: 0x66c9fd7c1bb104c2943e5717b7b2cc81ac10e\n  Valid from Tue May 26 08:00:00 SGT 2015 until Sat May 26 08:00:00 SGT 2040\n\nadding as trusted cert:\n  Subject: CN=CA Disig Root R2, O=Disig a.s., L=Bratislava, C=SK\n  Issuer:  CN=CA Disig Root R2, O=Disig a.s., L=Bratislava, C=SK\n  Algorithm: RSA; Serial number: 0x92b888dbb08ac163\n  Valid from Thu Jul 19 17:15:30 SGT 2012 until Sat Jul 19 17:15:30 SGT 2042\n\nadding as trusted cert:\n  Subject: CN=DST Root CA X3, O=Digital Signature Trust Co.\n  Issuer:  CN=DST Root CA X3, O=Digital Signature Trust Co.\n  Algorithm: RSA; Serial number: 0x44afb080d6a327ba893039862ef8406b\n  Valid from Sun Oct 01 05:12:19 SGT 2000 until Thu Sep 30 22:01:15 SGT 2021\n\nadding as trusted cert:\n  Subject: CN=Buypass Class 2 Root CA, O=Buypass AS-983163327, C=NO\n  Issuer:  CN=Buypass Class 2 Root CA, O=Buypass AS-983163327, C=NO\n  Algorithm: RSA; Serial number: 0x2\n  Valid from Tue Oct 26 16:38:03 SGT 2010 until Fri Oct 26 16:38:03 SGT 2040\n\nadding as trusted cert:\n  Subject: CN=D-TRUST Root Class 3 CA 2 EV 2009, O=D-Trust GmbH, C=DE\n  Issuer:  CN=D-TRUST Root Class 3 CA 2 EV 2009, O=D-Trust GmbH, C=DE\n  Algorithm: RSA; Serial number: 0x983f4\n  Valid from Thu Nov 05 16:50:46 SGT 2009 until Mon Nov 05 16:50:46 SGT 2029\n\nadding as trusted cert:\n  Subject: CN=DigiCert Assured ID Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US\n  Issuer:  CN=DigiCert Assured ID Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US\n  Algorithm: EC; Serial number: 0xba15afa1ddfa0b54944afcd24a06cec\n  Valid from Thu Aug 01 20:00:00 SGT 2013 until Fri Jan 15 20:00:00 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=SwissSign Gold CA - G2, O=SwissSign AG, C=CH\n  Issuer:  CN=SwissSign Gold CA - G2, O=SwissSign AG, C=CH\n  Algorithm: RSA; Serial number: 0xbb401c43f55e4fb0\n  Valid from Wed Oct 25 16:30:35 SGT 2006 until Sat Oct 25 16:30:35 SGT 2036\n\nadding as trusted cert:\n  Subject: CN=USERTrust ECC Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US\n  Issuer:  CN=USERTrust ECC Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US\n  Algorithm: EC; Serial number: 0x5c8b99c55a94c5d27156decd8980cc26\n  Valid from Mon Feb 01 08:00:00 SGT 2010 until Tue Jan 19 07:59:59 SGT 2038\n\nadding as trusted cert:\n  Subject: OU=certSIGN ROOT CA, O=certSIGN, C=RO\n  Issuer:  OU=certSIGN ROOT CA, O=certSIGN, C=RO\n  Algorithm: RSA; Serial number: 0x200605167002\n  Valid from Wed Jul 05 01:20:04 SGT 2006 until Sat Jul 05 01:20:04 SGT 2031\n\nadding as trusted cert:\n  Subject: CN=QuoVadis Root CA 2, O=QuoVadis Limited, C=BM\n  Issuer:  CN=QuoVadis Root CA 2, O=QuoVadis Limited, C=BM\n  Algorithm: RSA; Serial number: 0x509\n  Valid from Sat Nov 25 02:27:00 SGT 2006 until Tue Nov 25 02:23:33 SGT 2031\n\nadding as trusted cert:\n  Subject: CN=IdenTrust Commercial Root CA 1, O=IdenTrust, C=US\n  Issuer:  CN=IdenTrust Commercial Root CA 1, O=IdenTrust, C=US\n  Algorithm: RSA; Serial number: 0xa0142800000014523c844b500000002\n  Valid from Fri Jan 17 02:12:23 SGT 2014 until Tue Jan 17 02:12:23 SGT 2034\n\nadding as trusted cert:\n  Subject: CN=Deutsche Telekom Root CA 2, OU=T-TeleSec Trust Center, O=Deutsche Telekom AG, C=DE\n  Issuer:  CN=Deutsche Telekom Root CA 2, OU=T-TeleSec Trust Center, O=Deutsche Telekom AG, C=DE\n  Algorithm: RSA; Serial number: 0x26\n  Valid from Fri Jul 09 20:11:00 SGT 1999 until Wed Jul 10 07:59:00 SGT 2019\n\nadding as trusted cert:\n  Subject: CN=D-TRUST Root Class 3 CA 2 2009, O=D-Trust GmbH, C=DE\n  Issuer:  CN=D-TRUST Root Class 3 CA 2 2009, O=D-Trust GmbH, C=DE\n  Algorithm: RSA; Serial number: 0x983f3\n  Valid from Thu Nov 05 16:35:58 SGT 2009 until Mon Nov 05 16:35:58 SGT 2029\n\nadding as trusted cert:\n  Subject: CN=QuoVadis Root CA 1 G3, O=QuoVadis Limited, C=BM\n  Issuer:  CN=QuoVadis Root CA 1 G3, O=QuoVadis Limited, C=BM\n  Algorithm: RSA; Serial number: 0x78585f2ead2c194be3370735341328b596d46593\n  Valid from Fri Jan 13 01:27:44 SGT 2012 until Mon Jan 13 01:27:44 SGT 2042\n\nadding as trusted cert:\n  Subject: CN=USERTrust RSA Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US\n  Issuer:  CN=USERTrust RSA Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US\n  Algorithm: RSA; Serial number: 0x1fd6d30fca3ca51a81bbc640e35032d\n  Valid from Mon Feb 01 08:00:00 SGT 2010 until Tue Jan 19 07:59:59 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=Izenpe.com, O=IZENPE S.A., C=ES\n  Issuer:  CN=Izenpe.com, O=IZENPE S.A., C=ES\n  Algorithm: RSA; Serial number: 0xb0b75a16485fbfe1cbf58bd719e67d\n  Valid from Thu Dec 13 21:08:28 SGT 2007 until Sun Dec 13 16:27:25 SGT 2037\n\nadding as trusted cert:\n  Subject: CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R2\n  Issuer:  CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R2\n  Algorithm: RSA; Serial number: 0x400000000010f8626e60d\n  Valid from Fri Dec 15 16:00:00 SGT 2006 until Wed Dec 15 16:00:00 SGT 2021\n\nadding as trusted cert:\n  Subject: CN=VeriSign Class 3 Public Primary Certification Authority - G5, OU="(c) 2006 VeriSign, Inc. - For authorized use only", OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US\n  Issuer:  CN=VeriSign Class 3 Public Primary Certification Authority - G5, OU="(c) 2006 VeriSign, Inc. - For authorized use only", OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US\n  Algorithm: RSA; Serial number: 0x18dad19e267de8bb4a2158cdcc6b3b4a\n  Valid from Wed Nov 08 08:00:00 SGT 2006 until Thu Jul 17 07:59:59 SGT 2036\n\nadding as trusted cert:\n  Subject: CN=QuoVadis Root CA 3, O=QuoVadis Limited, C=BM\n  Issuer:  CN=QuoVadis Root CA 3, O=QuoVadis Limited, C=BM\n  Algorithm: RSA; Serial number: 0x5c6\n  Valid from Sat Nov 25 03:11:23 SGT 2006 until Tue Nov 25 03:06:44 SGT 2031\n\nadding as trusted cert:\n  Subject: CN=Starfield Services Root Certificate Authority - G2, O="Starfield Technologies, Inc.", L=Scottsdale, ST=Arizona, C=US\n  Issuer:  CN=Starfield Services Root Certificate Authority - G2, O="Starfield Technologies, Inc.", L=Scottsdale, ST=Arizona, C=US\n  Algorithm: RSA; Serial number: 0x0\n  Valid from Tue Sep 01 08:00:00 SGT 2009 until Fri Jan 01 07:59:59 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=OISTE WISeKey Global Root GB CA, OU=OISTE Foundation Endorsed, O=WISeKey, C=CH\n  Issuer:  CN=OISTE WISeKey Global Root GB CA, OU=OISTE Foundation Endorsed, O=WISeKey, C=CH\n  Algorithm: RSA; Serial number: 0x76b1205274f0858746b3f8231af6c2c0\n  Valid from Mon Dec 01 23:00:32 SGT 2014 until Thu Dec 01 23:10:31 SGT 2039\n\nadding as trusted cert:\n  Subject: CN=Amazon Root CA 3, O=Amazon, C=US\n  Issuer:  CN=Amazon Root CA 3, O=Amazon, C=US\n  Algorithm: EC; Serial number: 0x66c9fd5749736663f3b0b9ad9e89e7603f24a\n  Valid from Tue May 26 08:00:00 SGT 2015 until Sat May 26 08:00:00 SGT 2040\n\nadding as trusted cert:\n  Subject: CN=QuoVadis Root CA 3 G3, O=QuoVadis Limited, C=BM\n  Issuer:  CN=QuoVadis Root CA 3 G3, O=QuoVadis Limited, C=BM\n  Algorithm: RSA; Serial number: 0x2ef59b0228a7db7affd5a3a9eebd03a0cf126a1d\n  Valid from Fri Jan 13 04:26:32 SGT 2012 until Mon Jan 13 04:26:32 SGT 2042\n\nadding as trusted cert:\n  Subject: EMAILADDRESS=info@e-szigno.hu, CN=Microsec e-Szigno Root CA 2009, O=Microsec Ltd., L=Budapest, C=HU\n  Issuer:  EMAILADDRESS=info@e-szigno.hu, CN=Microsec e-Szigno Root CA 2009, O=Microsec Ltd., L=Budapest, C=HU\n  Algorithm: RSA; Serial number: 0xc27e43044e473f19\n  Valid from Tue Jun 16 19:30:18 SGT 2009 until Sun Dec 30 19:30:18 SGT 2029\n\nadding as trusted cert:\n  Subject: CN=NetLock Arany (Class Gold) Főtanúsítvány, OU=Tanúsítványkiadók (Certification Services), O=NetLock Kft., L=Budapest, C=HU\n  Issuer:  CN=NetLock Arany (Class Gold) Főtanúsítvány, OU=Tanúsítványkiadók (Certification Services), O=NetLock Kft., L=Budapest, C=HU\n  Algorithm: RSA; Serial number: 0x49412ce40010\n  Valid from Thu Dec 11 23:08:21 SGT 2008 until Wed Dec 06 23:08:21 SGT 2028\n\nadding as trusted cert:\n  Subject: CN=Actalis Authentication Root CA, O=Actalis S.p.A./03358520967, L=Milan, C=IT\n  Issuer:  CN=Actalis Authentication Root CA, O=Actalis S.p.A./03358520967, L=Milan, C=IT\n  Algorithm: RSA; Serial number: 0x570a119742c4e3cc\n  Valid from Thu Sep 22 19:22:02 SGT 2011 until Sun Sep 22 19:22:02 SGT 2030\n\nadding as trusted cert:\n  Subject: CN=Autoridad de Certificacion Firmaprofesional CIF A62634068, C=ES\n  Issuer:  CN=Autoridad de Certificacion Firmaprofesional CIF A62634068, C=ES\n  Algorithm: RSA; Serial number: 0x53ec3beefbb2485f\n  Valid from Wed May 20 16:38:15 SGT 2009 until Tue Dec 31 16:38:15 SGT 2030\n\nadding as trusted cert:\n  Subject: CN=Certplus Root CA G1, O=Certplus, C=FR\n  Issuer:  CN=Certplus Root CA G1, O=Certplus, C=FR\n  Algorithm: RSA; Serial number: 0x11205583e42d3e5456852d8337b72cdc4611\n  Valid from Mon May 26 08:00:00 SGT 2014 until Fri Jan 15 08:00:00 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=Certigna, O=Dhimyotis, C=FR\n  Issuer:  CN=Certigna, O=Dhimyotis, C=FR\n  Algorithm: RSA; Serial number: 0xfedce3010fc948ff\n  Valid from Fri Jun 29 23:13:05 SGT 2007 until Tue Jun 29 23:13:05 SGT 2027\n\nadding as trusted cert:\n  Subject: CN=E-Tugra Certification Authority, OU=E-Tugra Sertifikasyon Merkezi, O=E-Tuğra EBG Bilişim Teknolojileri ve Hizmetleri A.Ş., L=Ankara, C=TR\n  Issuer:  CN=E-Tugra Certification Authority, OU=E-Tugra Sertifikasyon Merkezi, O=E-Tuğra EBG Bilişim Teknolojileri ve Hizmetleri A.Ş., L=Ankara, C=TR\n  Algorithm: RSA; Serial number: 0x6a683e9c519bcb53\n  Valid from Tue Mar 05 20:09:48 SGT 2013 until Fri Mar 03 20:09:48 SGT 2023\n\nadding as trusted cert:\n  Subject: C=ES, O=ACCV, OU=PKIACCV, CN=ACCVRAIZ1\n  Issuer:  C=ES, O=ACCV, OU=PKIACCV, CN=ACCVRAIZ1\n  Algorithm: RSA; Serial number: 0x5ec3b7a6437fa4e0\n  Valid from Thu May 05 17:37:37 SGT 2011 until Tue Dec 31 17:37:37 SGT 2030\n\nadding as trusted cert:\n  Subject: CN=QuoVadis Root Certification Authority, OU=Root Certification Authority, O=QuoVadis Limited, C=BM\n  Issuer:  CN=QuoVadis Root Certification Authority, OU=Root Certification Authority, O=QuoVadis Limited, C=BM\n  Algorithm: RSA; Serial number: 0x3ab6508b\n  Valid from Tue Mar 20 02:33:33 SGT 2001 until Thu Mar 18 02:33:33 SGT 2021\n\nadding as trusted cert:\n  Subject: CN=SSL.com EV Root Certification Authority ECC, O=SSL Corporation, L=Houston, ST=Texas, C=US\n  Issuer:  CN=SSL.com EV Root Certification Authority ECC, O=SSL Corporation, L=Houston, ST=Texas, C=US\n  Algorithm: EC; Serial number: 0x2c299c5b16ed0595\n  Valid from Sat Feb 13 02:15:23 SGT 2016 until Wed Feb 13 02:15:23 SGT 2041\n\nadding as trusted cert:\n  Subject: CN=Buypass Class 3 Root CA, O=Buypass AS-983163327, C=NO\n  Issuer:  CN=Buypass Class 3 Root CA, O=Buypass AS-983163327, C=NO\n  Algorithm: RSA; Serial number: 0x2\n  Valid from Tue Oct 26 16:28:58 SGT 2010 until Fri Oct 26 16:28:58 SGT 2040\n\nadding as trusted cert:\n  Subject: CN=thawte Primary Root CA - G2, OU="(c) 2007 thawte, Inc. - For authorized use only", O="thawte, Inc.", C=US\n  Issuer:  CN=thawte Primary Root CA - G2, OU="(c) 2007 thawte, Inc. - For authorized use only", O="thawte, Inc.", C=US\n  Algorithm: EC; Serial number: 0x35fc265cd9844fc93d263d579baed756\n  Valid from Mon Nov 05 08:00:00 SGT 2007 until Tue Jan 19 07:59:59 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=VeriSign Universal Root Certification Authority, OU="(c) 2008 VeriSign, Inc. - For authorized use only", OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US\n  Issuer:  CN=VeriSign Universal Root Certification Authority, OU="(c) 2008 VeriSign, Inc. - For authorized use only", OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US\n  Algorithm: RSA; Serial number: 0x401ac46421b31321030ebbe4121ac51d\n  Valid from Wed Apr 02 08:00:00 SGT 2008 until Wed Dec 02 07:59:59 SGT 2037\n\nadding as trusted cert:\n  Subject: CN=Cybertrust Global Root, O="Cybertrust, Inc"\n  Issuer:  CN=Cybertrust Global Root, O="Cybertrust, Inc"\n  Algorithm: RSA; Serial number: 0x400000000010f85aa2d48\n  Valid from Fri Dec 15 16:00:00 SGT 2006 until Wed Dec 15 16:00:00 SGT 2021\n\nadding as trusted cert:\n  Subject: CN=Amazon Root CA 1, O=Amazon, C=US\n  Issuer:  CN=Amazon Root CA 1, O=Amazon, C=US\n  Algorithm: RSA; Serial number: 0x66c9fcf99bf8c0a39e2f0788a43e696365bca\n  Valid from Tue May 26 08:00:00 SGT 2015 until Sun Jan 17 08:00:00 SGT 2038\n\nadding as trusted cert:\n  Subject: OU=Trustis FPS Root CA, O=Trustis Limited, C=GB\n  Issuer:  OU=Trustis FPS Root CA, O=Trustis Limited, C=GB\n  Algorithm: RSA; Serial number: 0x1b1fadb620f924d3366bf7c7f18ca059\n  Valid from Tue Dec 23 20:14:06 SGT 2003 until Sun Jan 21 19:36:54 SGT 2024\n\nadding as trusted cert:\n  Subject: CN=GDCA TrustAUTH R5 ROOT, O="GUANG DONG CERTIFICATE AUTHORITY CO.,LTD.", C=CN\n  Issuer:  CN=GDCA TrustAUTH R5 ROOT, O="GUANG DONG CERTIFICATE AUTHORITY CO.,LTD.", C=CN\n  Algorithm: RSA; Serial number: 0x7d0997fef047ea7a\n  Valid from Wed Nov 26 13:13:15 SGT 2014 until Mon Dec 31 23:59:59 SGT 2040\n\nadding as trusted cert:\n  Subject: CN=Amazon Root CA 2, O=Amazon, C=US\n  Issuer:  CN=Amazon Root CA 2, O=Amazon, C=US\n  Algorithm: RSA; Serial number: 0x66c9fd29635869f0a0fe58678f85b26bb8a37\n  Valid from Tue May 26 08:00:00 SGT 2015 until Sat May 26 08:00:00 SGT 2040\n\nadding as trusted cert:\n  Subject: CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R4\n  Issuer:  CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R4\n  Algorithm: EC; Serial number: 0x2a38a41c960a04de42b228a50be8349802\n  Valid from Tue Nov 13 08:00:00 SGT 2012 until Tue Jan 19 11:14:07 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=COMODO Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB\n  Issuer:  CN=COMODO Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB\n  Algorithm: RSA; Serial number: 0x4e812d8a8265e00b02ee3e350246e53d\n  Valid from Fri Dec 01 08:00:00 SGT 2006 until Tue Jan 01 07:59:59 SGT 2030\n\nadding as trusted cert:\n  Subject: EMAILADDRESS=pki@sk.ee, CN=EE Certification Centre Root CA, O=AS Sertifitseerimiskeskus, C=EE\n  Issuer:  EMAILADDRESS=pki@sk.ee, CN=EE Certification Centre Root CA, O=AS Sertifitseerimiskeskus, C=EE\n  Algorithm: RSA; Serial number: 0x5480f9a073ed3f004cca89d8e371e64a\n  Valid from Sat Oct 30 18:10:30 SGT 2010 until Wed Dec 18 07:59:59 SGT 2030\n\nadding as trusted cert:\n  Subject: CN=Global Chambersign Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU\n  Issuer:  CN=Global Chambersign Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU\n  Algorithm: RSA; Serial number: 0xc9cdd3e9d57d23ce\n  Valid from Fri Aug 01 20:31:40 SGT 2008 until Sat Jul 31 20:31:40 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=COMODO RSA Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB\n  Issuer:  CN=COMODO RSA Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB\n  Algorithm: RSA; Serial number: 0x4caaf9cadb636fe01ff74ed85b03869d\n  Valid from Tue Jan 19 08:00:00 SGT 2010 until Tue Jan 19 07:59:59 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=thawte Primary Root CA - G3, OU="(c) 2008 thawte, Inc. - For authorized use only", OU=Certification Services Division, O="thawte, Inc.", C=US\n  Issuer:  CN=thawte Primary Root CA - G3, OU="(c) 2008 thawte, Inc. - For authorized use only", OU=Certification Services Division, O="thawte, Inc.", C=US\n  Algorithm: RSA; Serial number: 0x600197b746a7eab4b49ad64b2ff790fb\n  Valid from Wed Apr 02 08:00:00 SGT 2008 until Wed Dec 02 07:59:59 SGT 2037\n\nadding as trusted cert:\n  Subject: CN=Certplus Root CA G2, O=Certplus, C=FR\n  Issuer:  CN=Certplus Root CA G2, O=Certplus, C=FR\n  Algorithm: EC; Serial number: 0x1120d991ceaea3e8c5e7ffe902afcf73bc55\n  Valid from Mon May 26 08:00:00 SGT 2014 until Fri Jan 15 08:00:00 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=AffirmTrust Premium ECC, O=AffirmTrust, C=US\n  Issuer:  CN=AffirmTrust Premium ECC, O=AffirmTrust, C=US\n  Algorithm: EC; Serial number: 0x7497258ac73f7a54\n  Valid from Fri Jan 29 22:20:24 SGT 2010 until Mon Dec 31 22:20:24 SGT 2040\n\nadding as trusted cert:\n  Subject: CN=T-TeleSec GlobalRoot Class 2, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE\n  Issuer:  CN=T-TeleSec GlobalRoot Class 2, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE\n  Algorithm: RSA; Serial number: 0x1\n  Valid from Wed Oct 01 18:40:14 SGT 2008 until Sun Oct 02 07:59:59 SGT 2033\n\nadding as trusted cert:\n  Subject: CN=Staat der Nederlanden Root CA - G2, O=Staat der Nederlanden, C=NL\n  Issuer:  CN=Staat der Nederlanden Root CA - G2, O=Staat der Nederlanden, C=NL\n  Algorithm: RSA; Serial number: 0x98968c\n  Valid from Wed Mar 26 19:18:17 SGT 2008 until Wed Mar 25 19:03:10 SGT 2020\n\nadding as trusted cert:\n  Subject: CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US\n  Issuer:  CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US\n  Algorithm: RSA; Serial number: 0x33af1e6a711a9a0bb2864b11d09fae5\n  Valid from Thu Aug 01 20:00:00 SGT 2013 until Fri Jan 15 20:00:00 SGT 2038\n\nadding as trusted cert:\n  Subject: CN=SZAFIR ROOT CA2, O=Krajowa Izba Rozliczeniowa S.A., C=PL\n  Issuer:  CN=SZAFIR ROOT CA2, O=Krajowa Izba Rozliczeniowa S.A., C=PL\n  Algorithm: RSA; Serial number: 0x3e8a5d07ec55d232d5b7e3b65f01eb2ddce4d6e4\n  Valid from Mon Oct 19 15:43:30 SGT 2015 until Fri Oct 19 15:43:30 SGT 2035\n\nkeyStore is : \nkeyStore type is : jks\nkeyStore provider is : \ninit keystore\ninit keymanager of type SunX509\ntrigger seeding of SecureRandom\ndone seeding SecureRandom\nAllow unsafe renegotiation: false\nAllow legacy hello messages: true\nIs initial handshake: true\nIs secure renegotiation: false\nscheduling-1, setSoTimeout(0) called\nscheduling-1, setSoTimeout(60000) called\nIgnoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384 for TLSv1\nIgnoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384 for TLSv1\nIgnoring unsupported cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384 for TLSv1\nIgnoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384 for TLSv1\nIgnoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256 for TLSv1.1\n%% No cached client session\nupdate handshake state: client_hello[1]\nupcoming handshake states: server_hello[2]\n*** ClientHello, TLSv1.2\nRandomCookie:  GMT: 1626560475 bytes = { 112, 239, 236, 239, 122, 212, 244, 10, 144, 127, 175, 230, 81, 156, 57, 128, 83, 111, 76, 99, 217, 111, 179, 84, 241, 81, 103, 94 }\nSession ID:  {}\nCipher Suites: [TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384, TLS_RSA_WITH_AES_256_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384, TLS_DHE_RSA_WITH_AES_256_CBC_SHA256, TLS_DHE_DSS_WITH_AES_256_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384, TLS_RSA_WITH_AES_256_GCM_SHA384, TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384, TLS_DHE_RSA_WITH_AES_256_GCM_SHA384, TLS_DHE_DSS_WITH_AES_256_GCM_SHA384, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]\nCompression Methods:  { 0 }\nExtension elliptic_curves, curve names: {secp256r1, secp384r1, secp521r1}\nExtension ec_point_formats, formats: [uncompressed]\nExtension signature_algorithms, signature_algorithms: SHA512withECDSA, SHA512withRSA, SHA384withECDSA, SHA384withRSA, SHA256withECDSA, SHA256withRSA, SHA256withDSA, SHA224withECDSA, SHA224withRSA, SHA224withDSA, SHA1withECDSA, SHA1withRSA, SHA1withDSA\nExtension extended_master_secret\nExtension server_name, server_name: [type=host_name (0), value=api.compass-ft.com]\n***\n[write] MD5 and SHA1 hashes:  len = 212\n0000: 01 00 00 D0 03 03 61 F3   58 DB 70 EF EC EF 7A D4  ......a.X.p...z.\n0010: F4 0A 90 7F AF E6 51 9C   39 80 53 6F 4C 63 D9 6F  ......Q.9.SoLc.o\n0020: B3 54 F1 51 67 5E 00 00   56 C0 24 C0 28 00 3D C0  .T.Qg^..V.$.(.=.\n0030: 26 C0 2A 00 6B 00 6A C0   0A C0 14 00 35 C0 05 C0  &.*.k.j.....5...\n0040: 0F 00 39 00 38 C0 23 C0   27 00 3C C0 25 C0 29 00  ..9.8.#.\'.<.%.).\n0050: 67 00 40 C0 09 C0 13 00   2F C0 04 C0 0E 00 33 00  g.@...../.....3.\n0060: 32 C0 2C C0 2B C0 30 00   9D C0 2E C0 32 00 9F 00  2.,.+.0.....2...\n0070: A3 C0 2F 00 9C C0 2D C0   31 00 9E 00 A2 00 FF 01  ../...-.1.......\n0080: 00 00 51 00 0A 00 08 00   06 00 17 00 18 00 19 00  ..Q.............\n0090: 0B 00 02 01 00 00 0D 00   1C 00 1A 06 03 06 01 05  ................\n00A0: 03 05 01 04 03 04 01 04   02 03 03 03 01 03 02 02  ................\n00B0: 03 02 01 02 02 00 17 00   00 00 00 00 17 00 15 00  ................\n00C0: 00 12 61 70 69 2E 63 6F   6D 70 61 73 73 2D 66 74  ..api.compass-ft\n00D0: 2E 63 6F 6D                                        .com\nscheduling-1, WRITE: TLSv1.2 Handshake, length = 212\n[Raw write]: length = 217\n0000: 16 03 03 00 D4 01 00 00   D0 03 03 61 F3 58 DB 70  ...........a.X.p\n0010: EF EC EF 7A D4 F4 0A 90   7F AF E6 51 9C 39 80 53  ...z.......Q.9.S\n0020: 6F 4C 63 D9 6F B3 54 F1   51 67 5E 00 00 56 C0 24  oLc.o.T.Qg^..V.$\n0030: C0 28 00 3D C0 26 C0 2A   00 6B 00 6A C0 0A C0 14  .(.=.&.*.k.j....\n0040: 00 35 C0 05 C0 0F 00 39   00 38 C0 23 C0 27 00 3C  .5.....9.8.#.\'.<\n0050: C0 25 C0 29 00 67 00 40   C0 09 C0 13 00 2F C0 04  .%.).g.@...../..\n0060: C0 0E 00 33 00 32 C0 2C   C0 2B C0 30 00 9D C0 2E  ...3.2.,.+.0....\n0070: C0 32 00 9F 00 A3 C0 2F   00 9C C0 2D C0 31 00 9E  .2...../...-.1..\n0080: 00 A2 00 FF 01 00 00 51   00 0A 00 08 00 06 00 17  .......Q........\n0090: 00 18 00 19 00 0B 00 02   01 00 00 0D 00 1C 00 1A  ................\n00A0: 06 03 06 01 05 03 05 01   04 03 04 01 04 02 03 03  ................\n00B0: 03 01 03 02 02 03 02 01   02 02 00 17 00 00 00 00  ................\n00C0: 00 17 00 15 00 00 12 61   70 69 2E 63 6F 6D 70 61  .......api.compa\n00D0: 73 73 2D 66 74 2E 63 6F   6D                       ss-ft.com\n[Raw read]: length = 5\n0000: 16 03 03 00 37                                     ....7\n[Raw read]: length = 55\n0000: 02 00 00 33 03 03 94 62   C2 45 AD 7F 63 B8 F6 7C  ...3...b.E..c...\n0010: D4 D5 7A A7 89 AE AB FD   F0 82 F9 22 21 15 44 4F  ..z........"!.DO\n0020: 57 4E 47 52 44 01 00 C0   2F 00 00 0B FF 01 00 01  WNGRD.../.......\n0030: 00 00 0B 00 02 01 00                               .......\nscheduling-1, READ: TLSv1.2 Handshake, length = 55\ncheck handshake state: server_hello[2]\n*** ServerHello, TLSv1.2\nRandomCookie:  GMT: -1805532603 bytes = { 173, 127, 99, 184, 246, 124, 212, 213, 122, 167, 137, 174, 171, 253, 240, 130, 249, 34, 33, 21, 68, 79, 87, 78, 71, 82, 68, 1 }\nSession ID:  {}\n')])])]),n("h4",{attrs:{id:"注意到"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注意到"}},[e._v("#")]),e._v(" 注意到")]),e._v(" "),n("p",[e._v("生产上（失败）：")]),e._v(" "),n("p",[e._v("trustStore is: /apps/3rd-party/java-se-8u40-ri/jre/lib/security/cacerts")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("Cipher Suites: [TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_ECDSA_WITH_RC4_128_SHA, TLS_ECDHE_RSA_WITH_RC4_128_SHA, SSL_RSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_RC4_128_SHA, TLS_ECDH_RSA_WITH_RC4_128_SHA, SSL_RSA_WITH_RC4_128_MD5, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]\n")])])]),n("p",[e._v("dev上（成功）：")]),e._v(" "),n("p",[e._v("trustStore is: /etc/pki/java/cacerts")]),e._v(" "),n("p",[e._v("ignore的都是 ***128-SHA")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("Cipher Suites: [TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384, TLS_RSA_WITH_AES_256_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384, TLS_DHE_RSA_WITH_AES_256_CBC_SHA256, TLS_DHE_DSS_WITH_AES_256_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384, TLS_RSA_WITH_AES_256_GCM_SHA384, TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384, TLS_DHE_RSA_WITH_AES_256_GCM_SHA384, TLS_DHE_DSS_WITH_AES_256_GCM_SHA384, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]\nCompression Methods:  { 0 }\n")])])]),n("h4",{attrs:{id:"查看一下服务器支持的tls版本类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看一下服务器支持的tls版本类型"}},[e._v("#")]),e._v(" 查看一下服务器支持的TLS版本类型：")]),e._v(" "),n("p",[e._v("https://stackoverflow.com/questions/28908835/ssl-peer-shut-down-incorrectly-in-java")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("> nmap -p 443 --script ssl-enum-ciphers api.compass-ft.com\n\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-01-28 09:05 Malay Peninsula Standard Time\n\nNmap scan report for api.compass-ft.com (108.128.72.146)\nHost is up (0.23s latency).\nOther addresses for api.compass-ft.com (not scanned): 54.73.26.109 54.216.252.255\nrDNS record for 108.128.72.146: ec2-108-128-72-146.eu-west-1.compute.amazonaws.com\n\nPORT    STATE SERVICE\n443/tcp open  https\n| ssl-enum-ciphers: \n|   TLSv1.2: \n|     ciphers: \n|       TLS_RSA_WITH_AES_128_GCM_SHA256 (rsa 2048) - A\n|       TLS_RSA_WITH_AES_256_GCM_SHA384 (rsa 2048) - A\n|     compressors: \n|       NULL\n|     cipher preference: server\n|     warnings: \n|       Forward Secrecy not supported by any cipher\n|_  least strength: A\n\nNmap done: 1 IP address (1 host up) scanned in 10.33 seconds\n\n\n")])])]),n("p",[e._v("貌似支持128和256")]),e._v(" "),n("h4",{attrs:{id:"dev上用的java跟生产上的不同"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dev上用的java跟生产上的不同"}},[e._v("#")]),e._v(" dev上用的java跟生产上的不同")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('生产：\n# java -version\nopenjdk version "1.8.0_40"\nOpenJDK Runtime Environment (build 1.8.0_40-b25)\nOpenJDK 64-Bit Server VM (build 25.40-b25, mixed mode)\n\ndev:\n# java -version\nopenjdk version "1.8.0_191"\nOpenJDK Runtime Environment (build 1.8.0_191-b12)\nOpenJDK 64-Bit Server VM (build 25.191-b12, mixed mode)\n')])])]),n("p",[e._v("也没有很大差别，不过安装方式不同，可以看到前面输出两者使用的truststore不同，")]),e._v(" "),n("p",[e._v("dev用的是os的 trustStore is: /etc/pki/java/cacerts")]),e._v(" "),n("p",[e._v("生产用的是jre自己的 trustStore is: /apps/3rd-party/java-se-8u40-ri/jre/lib/security/cacerts")]),e._v(" "),n("p",[e._v("试着用openjdk的cacerts请求一下，居然可以")]),e._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[e._v("   \n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("root"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@sgtcs")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("mdw"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("v02 funding"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("rate"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("datasource"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("# curl "),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("v "),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("--")]),e._v("capath "),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("opt"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("3")]),e._v("rd"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("party"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("java"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("se"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("8")]),e._v("u40"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("ri"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("jre"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("lib"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("security"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("cacerts https"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("api"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("compass"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("ft"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("com"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("v1"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("indexes"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("CCRTBTC"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("history"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),e._v("access_token"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("About")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("to")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("connect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("to")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("api"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("compass")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("ft"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("com port "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("443")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("#"),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v("   "),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Trying")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("54.73")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v(".26")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v(".109")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Connected")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("to")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("api"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("compass")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("ft"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("com "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("54.73")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v(".26")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v(".109")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" port "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("443")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("#"),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Initializing")]),e._v(" NSS "),n("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("with")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("certpath")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" sql"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("etc"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("pki"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("nssdb\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" warning"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" CURLOPT_CAPATH not a directory "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("opt"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("3")]),e._v("rd"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("party"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("java"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("se"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("8")]),e._v("u40"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("ri"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("jre"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("lib"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("security"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("cacerts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v("   "),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("CAfile")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("etc"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("pki"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("tls"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("certs"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("ca"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("bundle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("crt\n  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("CApath")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("opt"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("3")]),e._v("rd"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("party"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("java"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("se"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("8")]),e._v("u40"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("ri"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("jre"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("lib"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("security"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("cacerts\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" SSL connection using TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Server")]),e._v(" certificate"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v("       subject"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" CN"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("api"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("compass"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("ft"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("com\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v("       start date"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Dec")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("09")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("23")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("25")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("14")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("2021")]),e._v(" GMT\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v("       expire date"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Mar")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("09")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("23")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("25")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("13")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("2022")]),e._v(" GMT\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v("       common name"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" api"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("compass"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("ft"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("com\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v("       issuer"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" CN"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("R3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("O")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Let")]),e._v("'s "),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Encrypt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("C")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("US\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" GET "),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("v1"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("indexes"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("CCRTBTC"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("history"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),e._v("access_token"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" HTTP"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.1")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("User")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Agent")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" curl"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("7.29")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v(".0")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Host")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" api"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("compass"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("ft"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("com\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Accept")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/*\n\n\n")])])])]),n("p",[e._v("反过来用系统的ca给java程序试一下\n#java -jar -Djavax.net.debug=all -Djavax.net.ssl.trustStore=/etc/pki/java/cacerts funding-rate-datasource.jar\n仍然是不行")]),e._v(" "),n("p",[n("strong",[e._v("然后想到在dev上用生产的jdk版本试试，确实能够重现出错误！")])]),e._v(" "),n("p",[e._v("openjdk-8u40-b25-linux-x64-10_feb_2015.tar.gz\nopenjdk-8u41-b04-linux-x64-14_jan_2020.tar.gz\n这两个版本都有问题，可能是这个版本的jdk底层实现的tls handshake采用的cipher suite已经过时了;")]),e._v(" "),n("p",[e._v("结合之前VAPT漏洞扫描遇到过的一个tls hardening的问题，我觉着也有可能：\n因为这个版本的jdk刚好优先使用了os所支持的某些比较不安全的cipher suite，然后compassft服务端对这些不安全的算法进行了屏蔽，所以另一种可能的解决办法是对os进行tls hardening可能可以解决这个问题")]),e._v(" "),n("h4",{attrs:{id:"java-security"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#java-security"}},[e._v("#")]),e._v(" java.security")]),e._v(" "),n("p",[e._v("想到是否可以通过更改java security配置来修复这个问题：")]),e._v(" "),n("p",[e._v("Additional information on Oracle's JDK and JRE Cryptographic Algorithms\nhttps://java.com/en/configure_crypto.html")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('[root@sgtcs-mdw-v02 java-se-8u40-ri]# grep -r -l "cipher" ./*\n./jre/lib/security/java.security\n./jre/lib/rt.jar\n./jre/lib/jsse.jar\n./jre/lib/management/management.properties\n./jre/lib/amd64/server/libjvm.so\n./lib/ct.sym\n./man/ja_JP.UTF-8/man1/keytool.1\n./man/man1/keytool.1\n./sample/jmx/jmx-scandir/src/etc/management.properties\n\n')])])]),n("p",[e._v("参照dev上面的java.security配置，更改了生产，")]),e._v(" "),n("p",[e._v("也试了jvm参数 java -jar -Djavax.net.debug=all -Djdk.tls.client.cipherSuites=TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384 funding-rate-datasource.jar")]),e._v(" "),n("p",[e._v("不过没有解决，两种可能：")]),e._v(" "),n("p",[e._v("一种可能是有些配置只是对当前的程序是server端有效，而我现在是client端；")]),e._v(" "),n("p",[e._v("另一种可能是jdk处理握手的代码有hardcode https://github.com/AdoptOpenJDK/openjdk-jdk8u/blob/master/jdk/src/share/classes/sun/security/ssl/CipherSuite.java")]),e._v(" "),n("h4",{attrs:{id:"jdk9也不行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jdk9也不行"}},[e._v("#")]),e._v(" jdk9也不行")]),e._v(" "),n("p",[e._v("JDK 9好像握手能够进行多几步了，但是居然爆了另外一个错误：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("System property jdk.tls.client.cipherSuites is set to 'null'\nSystem property jdk.tls.server.cipherSuites is set to 'null'\n\nscheduling-1, handling exception: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty\n%% Invalidated:  [Session-5, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256]\nscheduling-1, SEND TLSv1.2 ALERT:  fatal, description = internal_error\nscheduling-1, WRITE: TLSv1.2 Alert, length = 2\n[Raw write]: length = 7\n0000: 15 03 03 00 02 02 50                               ......P\nscheduling-1, called closeSocket()\nscheduling-1, called close()\nscheduling-1, called closeInternal(true)\nscheduling-1, called closeSocket()\nscheduling-1, called close()\nscheduling-1, called closeInternal(true)\nscheduling-1, called close()\nscheduling-1, called closeInternal(true)\n2022-01-31 12:05:52.181 ERROR 21924GG [scheduling-1] c.a.m.f.u.HttpClientUtil : Get Exception java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty\n\njavax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty\n        at java.base/sun.security.ssl.Alerts.getSSLException(Alerts.java:214)\n        at java.base/sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1969)\n        at java.base/sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1921)\n        at java.base/sun.security.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1904)\n        at java.base/sun.security.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1830)\n        at java.base/sun.security.ssl.AppOutputStream.write(AppOutputStream.java:71)\n        at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81)\n        at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142)\n        at org.apache.commons.httpclient.HttpConnection.flushRequestOutputStream(HttpConnection.java:828)\n        at org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2116)\n        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096)\n        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)\n        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)\n        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)\n        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)\n        at com.lyhistory.middleware.fundingrate.util.HttpClientUtil.sendGet(HttpClientUtil.java:64)\n        at com.lyhistory.middleware.fundingrate.service.impl.CompassftServiceImpl.sendRequest(CompassftServiceImpl.java:25)\n        at com.lyhistory.middleware.fundingrate.job.CompassftJob.crawlData(CompassftJob.java:33)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n        at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)\n        at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:514)\n        at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)\n        at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:300)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\n        at java.base/java.lang.Thread.run(Thread.java:844)\nCaused by: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty\n        at java.base/sun.security.validator.PKIXValidator.<init>(PKIXValidator.java:89)\n        at java.base/sun.security.validator.Validator.getInstance(Validator.java:181)\n        at java.base/sun.security.ssl.X509TrustManagerImpl.getValidator(X509TrustManagerImpl.java:330)\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrustedInit(X509TrustManagerImpl.java:180)\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:192)\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:133)\n        at java.base/sun.security.ssl.ClientHandshaker.checkServerCerts(ClientHandshaker.java:1825)\n        at java.base/sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1655)\n        at java.base/sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:260)\n        at java.base/sun.security.ssl.Handshaker.processLoop(Handshaker.java:1086)\n        at java.base/sun.security.ssl.Handshaker.processRecord(Handshaker.java:1020)\n        at java.base/sun.security.ssl.SSLSocketImpl.processInputRecord(SSLSocketImpl.java:1137)\n        at java.base/sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1074)\n        at java.base/sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:973)\n        at java.base/sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1402)\n        at java.base/sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:733)\n        at java.base/sun.security.ssl.AppOutputStream.write(AppOutputStream.java:67)\n        ... 24 more\nCaused by: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty\n        at java.base/java.security.cert.PKIXParameters.setTrustAnchors(PKIXParameters.java:200)\n        at java.base/java.security.cert.PKIXParameters.<init>(PKIXParameters.java:120)\n        at java.base/java.security.cert.PKIXBuilderParameters.<init>(PKIXBuilderParameters.java:104)\n        at java.base/sun.security.validator.PKIXValidator.<init>(PKIXValidator.java:86)\n        ... 40 more\n\n")])])]),n("p",[e._v("中间还找到类似的bug https://bugs.openjdk.java.net/browse/JDK-8266562")]),e._v(" "),n("p",[e._v("可以看到有的bug同时出现在多个版本，所以高版本的某个小版本可能并没有低版本的fix，")]),e._v(" "),n("h4",{attrs:{id:"openjdk8-update"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#openjdk8-update"}},[e._v("#")]),e._v(" openjdk8 update")]),e._v(" "),n("p",[e._v("所以继续找openjdk8u191，没找到，只找到Oracle和redhat编译的，试了下Oracle的果然没问题")]),e._v(" "),n("p",[e._v("https://www.oracle.com/java/technologies/javase/javase8-archive-downloads.html")]),e._v(" "),n("p",[e._v("https://www.oracle.com/java/technologies/javase/8u191-relnotes.html")]),e._v(" "),n("p",[e._v("https://developers.redhat.com/products/openjdk/download")]),e._v(" "),n("p",[e._v("最后找到openjdk的8u系列的版本：")]),e._v(" "),n("p",[e._v('openjdk build 1.8.0_191-b12\nopenjdk site=> left panel click "java 8 update"=> click "wiki"\nhttps://openjdk.java.net/projects/jdk8u/\n=》\nhttps://wiki.openjdk.java.net/display/jdk8u\nNote:')]),e._v(" "),n("p",[e._v("http://hg.openjdk.java.net/jdk8u/jdk8u/ 滚动到下面看到 Added tag jdk8u191-b12 for changeset 6432b2dd408cjdk8u191-b26")]),e._v(" "),n("p",[e._v("虽然没有8u191的release，测试了8u的最高版本8u312b07，果然成功了！")]),e._v(" "),n("p",[e._v("没有尝试的可能方案：")]),e._v(" "),n("p",[e._v('HttpClient如何指定CipherSuites https://ask.csdn.net/questions/189433\nen.setEnabledCipherSuites(new String[]{"TLS_RSA_WITH_AES_128_CBC_SHA"});')]),e._v(" "),n("h4",{attrs:{id:"解决之后研究原因"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决之后研究原因"}},[e._v("#")]),e._v(" 解决之后研究原因")]),e._v(" "),n("p",[e._v("https://bugs.openjdk.java.net/browse/JDK-8144544?jql=text%20~%20%22%5C%22Remote%20host%20closed%20connection%20during%20handshake%5C%22%22")]),e._v(" "),n("p",[e._v("https://bugs.openjdk.java.net/browse/JDK-8144544")]),e._v(" "),n("p",[e._v("看来这个比较像，有可能是interoperability issue")]),e._v(" "),n("blockquote",[n("p",[e._v("Check for alternate AES providers. If there's a bad provider, the peer could easily result in a bad padding.")]),e._v(" "),n("p",[e._v("The submitter's environment may have been using IBM JDK and trying to use Oracle's keymanager SunX509 implementation. No further updates. Closing out as not an issue.")])]),e._v(" "),n("p",[e._v("openjdk ibm padding EOFException handshake")]),e._v(" "),n("p",[e._v("https://www.ibm.com/support/pages/apar/IV37231")]),e._v(" "),n("blockquote",[n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('The problem happens because the size of the "PreMaster Secret"\ngenerated from ECDH KeyAgreement in IBMJCE provider\ndid not match openssl\'s counterpart for some of the EC curves.\n')])])])]),e._v(" "),n("p",[e._v("https://wiki.openjdk.java.net/display/jdk8u")]),e._v(" "),n("p",[e._v("下载代码，确实有很多相关的修复")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('git clone https://github.com/openjdk/jdk8u\ncd jdk8u/\ngit status\ngit tag\ngit checkout jdk8u40-b25\ngit checkout jdk8u191-b12\ngit log -S"receiveChangeCipherSpec"\ngit log -S"receiveChangeCipherSpec"\ngit show b9d40c7d6cfa8f221bf1973821b97210e6f3a5be\ngit log -S"provider"\nGIT SHOW b380264de3d82ceb291401dae06e9c605e36ebd0\ngit show b380264de3d82ceb291401dae06e9c605e36ebd0\ngit log -S"padding"\ngit log -S"ECDH"\ngit log -S"EC curve"\n')])])]),n("h3",{attrs:{id:"certificateexception-no-subject-alternative-names-present"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#certificateexception-no-subject-alternative-names-present"}},[e._v("#")]),e._v(" CertificateException: No subject alternative names present")]),e._v(" "),n("p",[e._v("When the server certificate is having Subject Alternative Names (SAN), the requesting home name must match with one of the SANs. If the server’s SSL certificate does not have SANs, then the requesting home name must match with the Common Name (CN) of the certificate.\nhttps://stackoverflow.com/questions/29157861/java-certificateexception-no-subject-alternative-names-matching-ip-address")]),e._v(" "),n("h3",{attrs:{id:"一些有意思的问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一些有意思的问题"}},[e._v("#")]),e._v(" 一些有意思的问题")]),e._v(" "),n("p",[e._v("用jmeter通过ssl验证访问https https://cloud.tencent.com/developer/article/1199237?from=15425\n解决 HTTPS 证书失效菜刀连不上 https://cloud.tencent.com/developer/article/1399952?from=15425\nHow can I disable a TLS cipher for only some protocols using JVM Config? https://stackoverflow.com/questions/52779312/java-how-can-i-disable-a-tls-cipher-for-only-some-protocols-using-jvm-config?rq=1")]),e._v(" "),n("p",[e._v("Comparative study of TLS Cipher Suite supported by Java 8\nhttps://linuxtut.com/en/877120a7dfa9e4a0e1e3/")]),e._v(" "),n("disqus")],1)}),[],!1,null,null,null);t.default=r.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{313:function(e,t,s){"use strict";s.r(t);var n=s(0),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[s("a",{attrs:{href:"/docs/software"}},[e._v("回目录")]),e._v("  《python实用基础》")]),e._v(" "),s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),s("p",[e._v("每一个应用程序在未执行的时候，只是一个二进制文件，当被执行的时候，操作系统会创建一个该应用的“活体”，就是进程，只有进程才能执行具体的任务。一个进程包括二进制镜像文件、虚拟内存、�需要访问的内核资源、安全上下文等等，操作系统会为进程分配一个唯一id。\n线程是程序运行的最小调度单元，线程包含在进程中，它包括虚拟处理器、�栈、应用程序�状态信息等。\n一个进程至少包含一个线程。多线程进程中，理论上每个线程代表单独的任务，多个任务可以同时执行。")]),e._v(" "),s("p",[e._v("在操作系统中两个重要的虚拟化概念是是虚拟内存和虚拟处理器。这两个虚拟化给每个进程一个错觉，就是它们都在独享这个计算机资源。通过虚拟内存，每个进程可以操作的内存地址空间都�被认为是整个内存资源（包括磁盘上的交互内存），然后映射到实际的物理内存上，这样将物理内存访问和应用程序的内存访问隔离开。假如计算机上只有4G内存，你起了10个进程，每个进程都认为自己拥有4G内存的空间可以访问。虚拟处理器，让进程认为它独占处理器资源，运行过程中不用关心是否和其他进程发生争抢，不必去处理实际的资源分配问题。�虚拟处理器模型，可以很�方便的�在多处理器架构上，让多个进程并行执行。\n虚拟内存和进程的概念是直接关联的，一个进程中的多个线程共享同一个虚拟内存空间。虚拟处理器和线程是直接关联的，每一个线程是一个独立的调度单元。")]),e._v(" "),s("p",[e._v("Python的多线程�和�其他语言还是有很大区别的，原则上讲是假的多线程。下面的解释引自知乎：")]),e._v(" "),s("p",[e._v("Python代码的执行由Python虚拟机（解释器）来控制。Python在设计之初就考虑要在主循环中，同时只有一个线程在执行，就像单CPU的系统中运行多个进程那样，内存中可以存放多个程序，但任意时刻，只有一个程序在CPU中运行。同样地，虽然Python解释器可以运行多个线程，只有一个线程在解释器中运行。对Python虚拟机的访问由全局解释器锁（GIL）来控制，正是这个锁能保证同时只有一个线程在运行。在多线程环境中，Python虚拟机按照以下方式执行。")]),e._v(" "),s("p",[e._v("1.设置GIL。\n2.切换到一个线程去执行。\n3.运行。\n4.把线程设置为睡眠状态。\n5.解锁GIL。\n6.再次重复以上步骤。\n对所有面向I/O的（会调用内建的操作系统C代码的）程序来说，GIL会在这个I/O调用之前被释放，以允许其他线程在这个线程等待I/O的时候运行。如果某线程并未使用很多I/O操作，它会在自己的时间片内一直占用处理器和GIL。也就是说，I/O密集型的Python程序比计算密集型的Python程序更能充分利用多线程的好处。")]),e._v(" "),s("p",[e._v("作者：DarrenChan陈驰\n链接：https://www.zhihu.com/question/23474039/answer/269526476")]),e._v(" "),s("p",[e._v("Python的多线程由于全局线程锁的存在并不能实现真正的并行编程，但是Python中的多进程编程模式是可以实现这个目标的。多进程模式下进行上下文切换的损耗要远远大于线程。进程间无法直接共享数据，需要通过Queue、Pipe或则Manager方式做进程间通信")]),e._v(" "),s("h2",{attrs:{id:"_1-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-setup"}},[e._v("#")]),e._v(" 1. Setup")]),e._v(" "),s("h3",{attrs:{id:"_1-1-env"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-env"}},[e._v("#")]),e._v(" 1.1 Env")]),e._v(" "),s("p",[s("strong",[e._v("Common")]),e._v("\n\\Python37-32\\Lib\\site-packages\n%AppData%\\Local\\Programs\\Python\\Python37-32\\Lib\\site-packages")]),e._v(" "),s("p",[e._v("Linux:\tWhich python")]),e._v(" "),s("p",[e._v("Windows Powershell: where python")]),e._v(" "),s("p",[e._v("Windows path:\n;%PYTHON_HOME%;\n%PYTHON_HOME%\\Scripts\\ (for PIP etc)")]),e._v(" "),s("p",[s("strong",[e._v("Virtualenv")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("#sudo apt-get install python-virtualenv\n#source py2/bin/activate\nvirtualenvwrapper (based on python-virtualenv)\nhttps://virtualenvwrapper.readthedocs.io/en/latest/\npip install virtualenvwrapper\nvi .bashrc\nexport WORKON_HOME=~/Envs\nsource /usr/local/bin/virtualenvwrapper.sh\nsource .bashrc\nmkvirtualenv --python=/usr/bin/python3 bitcoin\n")])])]),s("h3",{attrs:{id:"_1-2-ide-vscode-visual-studio-code"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-ide-vscode-visual-studio-code"}},[e._v("#")]),e._v(" 1.2 IDE - VSCode(Visual Studio Code)")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("ctrl+shift+P\nPython:select-interpreter\nCtrl+shift+` \n\tpython -m pip install ****\npython -m pip install scrapy\n")])])]),s("h2",{attrs:{id:"_2-python-usage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-python-usage"}},[e._v("#")]),e._v(" 2. Python Usage")]),e._v(" "),s("h3",{attrs:{id:"_2-1-run-scripts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-run-scripts"}},[e._v("#")]),e._v(" 2.1 Run scripts")]),e._v(" "),s("p",[e._v("Nohup\nRun it in session (eg. use Screen)\nRun in daemon")]),e._v(" "),s("p",[e._v("http://code.activestate.com/recipes/278731/\nHow to make a Python script run like a service or daemon in Linux https://stackoverflow.com/questions/1603109/how-to-make-a-python-script-run-like-a-service-or-daemon-in-linux")]),e._v(" "),s("p",[e._v("Run Python script as systemd service  https://gist.github.com/ewenchou/be496b2b73be801fd85267ef5471458c")]),e._v(" "),s("p",[e._v("What is the reason for performing a double fork when creating a daemon? https://stackoverflow.com/questions/881388/what-is-the-reason-for-performing-a-double-fork-when-creating-a-daemon\nHow do you create a daemon in Python? https://stackoverflow.com/questions/473620/how-do-you-create-a-daemon-in-python")]),e._v(" "),s("p",[e._v("Redirect stdout to a file in Python? https://stackoverflow.com/questions/4675728/redirect-stdout-to-a-file-in-python")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('python myscript.py >> myfile$(date "+%b_%d_%Y").txt\n\npython myscript.py 2>&1 1>>myfile$(date "+%b_%d_%Y").txt\n\n\npython myscript.py 2>&1 > /dev/null\nnohup python myscript.py\n')])])]),s("p",[e._v("Jobs -l\nhttps://www.cnblogs.com/baby123/p/6477429.html")]),e._v(" "),s("p",[s("strong",[e._v("publish Package executable")]),e._v("\npip install pyinstaller\npyinstaller --onefile <your_script_name>.py")]),e._v(" "),s("h2",{attrs:{id:"_3-python-basics"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-python-basics"}},[e._v("#")]),e._v(" 3. Python Basics")]),e._v(" "),s("p",[e._v("PEP 8 - Python 编码风格指南 https://drafts.damnever.com/2015/EPE8-style-guide-for-python-code.html")]),e._v(" "),s("h3",{attrs:{id:"_3-1-syntax"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-syntax"}},[e._v("#")]),e._v(" 3.1 syntax")]),e._v(" "),s("p",[e._v("https://www.w3schools.com/python/default.asp")]),e._v(" "),s("p",[e._v("Python does not have built-in support for Arrays, but Python Lists can be used instead.\nhttps://www.w3schools.com/python/python_json.asp")]),e._v(" "),s("p",[e._v("coerce https://python-reference.readthedocs.io/en/latest/docs/functions/coerce.html")]),e._v(" "),s("p",[e._v("Lamda\nhttps://stackoverflow.com/questions/15712210/python-3-2-lambda-syntax-error")]),e._v(" "),s("p",[e._v("https://www.python.org/dev/peps/pep-3113/")]),e._v(" "),s("p",[e._v("import")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("\t__import__\n\tSearch path\n")])])]),s("p",[e._v("List comprehensions\nhttps://docs.python.org/2/tutorial/datastructures.html#list-comprehensions")]),e._v(" "),s("p",[e._v("Config\nhttps://hackernoon.com/4-ways-to-manage-the-configuration-in-python-4623049e841b")]),e._v(" "),s("p",[e._v("https://stackoverflow.com/questions/25470844/specify-format-for-input-arguments-argparse-python")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('def valid_date(s):\n    try:\n        return datetime.strptime(s, "%Y-%m-%d")\n    except ValueError:\n        msg = "Not a valid date: \'{0}\'.".format(s)\n        raise argparse.ArgumentTypeError(msg)\n')])])]),s("h3",{attrs:{id:"_3-2-libaray"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-libaray"}},[e._v("#")]),e._v(" 3.2 libaray")]),e._v(" "),s("p",[e._v("Struct pack unpack\nhttps://www.reddit.com/r/learnpython/comments/tewfl/can_someone_explain_pack_and_unpack_to_me/")]),e._v(" "),s("h4",{attrs:{id:"numpy-pandas"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#numpy-pandas"}},[e._v("#")]),e._v(" numpy pandas")]),e._v(" "),s("p",[e._v("df = pd.DataFrame({'B': [0, 1, 2, 3, 4]})")]),e._v(" "),s("h4",{attrs:{id:"pymongo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pymongo"}},[e._v("#")]),e._v(" Pymongo")]),e._v(" "),s("p",[e._v("Bulk wirte\nhttp://api.mongodb.com/python/current/examples/bulk.html\nMap reduce\nhttps://docs.mongodb.com/manual/reference/method/db.collection.mapReduce/#mapreduce-finalize-mtd\nhttps://blog.mozilla.org/webdev/2011/08/17/knowing-what-you-want-pymongo/\nHow can I select a number of records per a specific field using mongodb? https://stackoverflow.com/questions/16067288/how-can-i-select-a-number-of-records-per-a-specific-field-using-mongodb\nhttps://www.youtube.com/watch?v=5B7mJtiwbMg\nhttps://groups.google.com/forum/#!msg/mongodb-user/UPz1bnaYS8Q/6PQiPMn7J9IJ")]),e._v(" "),s("h4",{attrs:{id:"selenium"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#selenium"}},[e._v("#")]),e._v(" Selenium")]),e._v(" "),s("p",[e._v("Greasemonkey\nhttp://selenium-python.readthedocs.io/getting-started.html\nhttps://media.readthedocs.org/pdf/selenium-python-test/latest/selenium-python-test.pdf")]),e._v(" "),s("p",[e._v("https://www.hongkiat.com/blog/automate-create-login-bot-python-selenium/")]),e._v(" "),s("p",[e._v("python selenium chrome webdriver giving me data; page\nhttps://www.reddit.com/r/learnpython/comments/6cfzov/trouble_with_selenium_and_chrome_webdriver/\nhttps://stackoverflow.com/questions/46143639/python-selenium-chrome-webdriver-giving-me-data-page")]),e._v(" "),s("p",[e._v("https://sites.google.com/a/chromium.org/chromedriver/\nhttps://stackoverflow.com/questions/49162667/unknown-error-call-function-result-missing-value-for-selenium-send-keys-even\nCheck chrome version because its auto upgrading")]),e._v(" "),s("p",[e._v("https://chromedriver.storage.googleapis.com/index.html")]),e._v(" "),s("p",[e._v("chromedriver.exe put in %AppData%\\Local\\Programs\\Python\\Python37-32\\Scripts\\")]),e._v(" "),s("p",[e._v("Wait for page loading\nhttps://stackoverflow.com/questions/26566799/how-to-wait-until-the-page-is-loaded-with-selenium-for-python")]),e._v(" "),s("p",[e._v("python Message: unknown error: Element is not clickable at point\nhttps://stackoverflow.com/questions/37879010/selenium-debugging-element-is-not-clickable-at-point-x-y\nSingle result and multi result\nhttps://stackoverflow.com/questions/42216174/selecting-a-button-list-object-has-no-attribute-click-python-selenium?rq=1")]),e._v(" "),s("p",[e._v("Override click\nhttps://stackoverflow.com/questions/36882983/override-click-method-of-webelement-in-selenium-using-python\nMonitor event firing\nhttps://searchcode.com/codesearch/view/51336554/")]),e._v(" "),s("p",[e._v("Locating elements\nhttp://selenium-python.readthedocs.io/locating-elements.html")]),e._v(" "),s("p",[e._v("Xpath selector\nNote: special type ‘type’ cannot use it\ncompelete:　https://www.guru99.com/xpath-selenium.html\nhttps://blog.csdn.net/huiseqiutian/article/details/73739707\nFind_element_by_css_selector\nBy.cssSelector")]),e._v(" "),s("p",[e._v("New tab, switch tab\nhttps://gist.github.com/lrhache/7686903\nhttps://stackoverflow.com/questions/28715942/how-do-i-switch-to-the-active-tab-in-selenium")]),e._v(" "),s("p",[e._v("Fireevent https://www.youtube.com/watch?v=OZ_XIgxbyiY")]),e._v(" "),s("p",[e._v("Get svg https://codeday.me/bug/20181211/453475.html")]),e._v(" "),s("p",[e._v("inspect on disappering element，有些元素是鼠标mouse hover才显示，所以直接用开发者工具inspect是不行的，\n需要在相关的parent上面右键设置一个Break on->subtree modifications")]),e._v(" "),s("p",[e._v('总结：\n1.clickable li .click() ActionChain, execute\n2.get parent/child by xpath, dot .\n3.wait and time.sleep\n4.stale / not attached, re-query again\n5.Selenium Element not visible exception或者selenium.common.exceptions.ElementClickInterceptedException: Message: element click intercepted（刚好页面上某个按钮的位置被某个漂浮的比如feedback icon挡住）\nthe html element is created from JavaScript, that is why webdriver cannot see it, use driver.execute_script("javascript code here")')]),e._v(" "),s("p",[e._v("Serverless\nhttps://www.serverlessops.io/blog/serverless-contact-form-for-static-websites")]),e._v(" "),s("h3",{attrs:{id:"_3-3-gui"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-gui"}},[e._v("#")]),e._v(" 3.3 GUI")]),e._v(" "),s("p",[e._v("http://pyqt.sourceforge.net/Docs/PyQt5/")]),e._v(" "),s("h2",{attrs:{id:"_4-frameworks-and-use-cases"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-frameworks-and-use-cases"}},[e._v("#")]),e._v(" 4.Frameworks and Use Cases")]),e._v(" "),s("h3",{attrs:{id:"_4-1-crawler-scrapy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-crawler-scrapy"}},[e._v("#")]),e._v(" 4.1 Crawler - Scrapy")]),e._v(" "),s("p",[e._v('Search engine Web crawlers are a central part of search engines, and details on their algorithms and architecture are kept as business secrets. When crawler designs are published, there is often an important lack of detail that prevents others from reproducing the work. There are also emerging concerns about "search engine spamming", which prevent major search engines from publishing their ranking algorithms.\n'),s("img",{attrs:{src:"/docs/docs_image/software/programming/python01.png",alt:""}})]),e._v(" "),s("p",[e._v("Scrapy  Architecture\n"),s("img",{attrs:{src:"/docs/docs_image/software/programming/python02.png",alt:""}})]),e._v(" "),s("p",[e._v("https://docs.scrapy.org/en/latest/intro/tutorial.html")]),e._v(" "),s("ol",[s("li",[e._v("The Engine gets the initial Requests to crawl from the Spider.")]),e._v(" "),s("li",[e._v("The Engine schedules the Requests in the Scheduler and asks for the next Requests to crawl.")]),e._v(" "),s("li",[e._v("The Scheduler returns the next Requests to the Engine.")]),e._v(" "),s("li",[e._v("The Engine sends the Requests to the Downloader, passing through the Downloader Middlewares (see process_request()).")]),e._v(" "),s("li",[e._v("Once the page finishes downloading the Downloader generates a Response (with that page) and sends it to the Engine, passing through the Downloader Middlewares (see process_response()).")]),e._v(" "),s("li",[e._v("The Engine receives the Response from the Downloader and sends it to the Spider for processing, passing through the Spider Middleware (see process_spider_input()).")]),e._v(" "),s("li",[e._v("The Spider processes the Response and returns scraped items and new Requests (to follow) to the Engine, passing through the Spider Middleware (see process_spider_output()).")]),e._v(" "),s("li",[e._v("The Engine sends processed items to Item Pipelines, then send processed Requests to the Scheduler and asks for possible next Requests to crawl.")]),e._v(" "),s("li",[e._v("The process repeats (from step 1) until there are no more requests from the Scheduler.")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("scrapy startproject clothing_factory\nscrapy genspider b2b.11467 b2b.11467.com\npython -m pip install pypiwin32\nscrapy crawl b2b.11467\nscrapy shell\n\nscrapy genspide --list\nIntegrate with selenium\nSelenium without display:\tpip install pyvirtualdisplay\n")])])]),s("h3",{attrs:{id:"_4-2-data-analysis"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-data-analysis"}},[e._v("#")]),e._v(" 4.2 Data Analysis")]),e._v(" "),s("p",[e._v("https://www.tutorialspoint.com/python/python_cgi_programming.htm\nNumpy\nhttps://docs.scipy.org/doc/numpy-dev/user/quickstart.html\n10 Minutes to pandas\nhttps://pandas.pydata.org/pandas-docs/stable/10min.html")]),e._v(" "),s("p",[e._v("basic set up tips\nrecommend: Anaconda + pycharm (change interpreter to python.exe under anaconda folder)\nI installed Anaconda3.0 version with python version 3.6.3, now I want to use lower version 2.7, so I can do this:")]),e._v(" "),s("ol",[s("li",[e._v("open up 'Anaconda prompt' window")]),e._v(" "),s("li",[e._v("run: conda create -n py27 python=2.7 anaconda (now if you run: conda info --envs, you can see there is new extra env called py27)")]),e._v(" "),s("li",[e._v("run: activate py27")]),e._v(" "),s("li",[e._v("check python version: python --version, done!")]),e._v(" "),s("li",[e._v("if later you want to switch back to python3, all you need to do is running: deactivate\nPS: folder= \\Anaconda%\\envs\nnumpy.random.uniform\ncumprod\nhistogram")])]),e._v(" "),s("p",[e._v("Refer\nOverview of Exploratory Data Analysis With Python https://hackernoon.com/overview-of-exploratory-data-analysis-with-python-6213e105b00b")]),e._v(" "),s("h3",{attrs:{id:"_4-3-machine-learning"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-machine-learning"}},[e._v("#")]),e._v(" 4.3 Machine Learning")]),e._v(" "),s("p",[e._v("Collaborative Filtering - RDD-based API https://spark.apache.org/docs/latest/mllib-collaborative-filtering.html")]),e._v(" "),s("p",[e._v("A Hands-On Introduction to Neural Networks https://hackernoon.com/a-hands-on-introduction-to-neural-networks-6a03afb468b1\n初探机器学习检测 PHP Webshell https://paper.seebug.org/526/")]),e._v(" "),s("h2",{attrs:{id:"_5-troubleshooting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-troubleshooting"}},[e._v("#")]),e._v(" 5. troubleshooting")]),e._v(" "),s("p",[e._v("Package install\n?# fatal error: pyconfig.h: No such file or directory#include \"pyconfig.h\"^ compilation terminated.error: command 'gcc' failed with exit status 1\nInstall python development tool\nhttps://stackoverflow.com/questions/6230444/how-to-install-python-developer-package")]),e._v(" "),s("p",[e._v("?#issue: install lxml failed on win10\nhttps://www.lfd.uci.edu/~gohlke/pythonlibs/")]),e._v(" "),s("p",[e._v("https://python-forum.io/Thread-Where-lxml-for-Python-3-6-2-for-windows-10?pid=21585\nhttps://ask.hellobi.com/question/25374")]),e._v(" "),s("p",[e._v("?#issue: SSLError: HTTPSConnectionPool(host='files.pythonhosted.org', port=443): Max retries exceeded with url:\npip install --trusted-host pypi.org --trusted-host files.pythonhosted.org <package_name>\nhttps://stackoverflow.com/questions/25981703/pip-install-fails-with-connection-error-ssl-certificate-verify-failed-certi")]),e._v(" "),s("p",[e._v("?#issue: install mysqlclient on win10\nhttps://stackoverflow.com/questions/47044149/unable-to-install-mysqlclient-python-package-on-windows/54830728#54830728\ndownload mysqlclient from http://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python\npip install wheel\npip install mysqlclient‑1.4.2‑cp37‑cp37m‑win_amd64.whl")])])}),[],!1,null,null,null);t.default=a.exports}}]);
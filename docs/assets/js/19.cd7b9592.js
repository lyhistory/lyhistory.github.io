(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{221:function(e,t,a){"use strict";a.r(t);var n=a(0),o=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[a("a",{attrs:{href:"/docs/software"}},[e._v("回目录")]),e._v("  《java实用基础》")]),e._v(" "),a("h2",{attrs:{id:"_1-install"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-install"}},[e._v("#")]),e._v(" 1.Install")]),e._v(" "),a("p",[e._v("Jdk vs Openjdk")]),e._v(" "),a("p",[e._v("https://www.oracle.com/technetwork/java/javase/downloads/index.html\narchive\nhttps://www.oracle.com/technetwork/java/javase/downloads/java-archive-javase8-2177648.html")]),e._v(" "),a("p",[e._v("Runtime source: rt.jar\t/java/jre18XXX/lib")]),e._v(" "),a("p",[e._v("UBUNTU")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo add-apt-repository ppa:openjdk-r/ppa\nsudo apt-get update\nsudo apt-get install openjdk-8-jdk\napt-cache search jdk\nexport JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64/\nexport PATH=$PATH:$JAVA_HOME/bin\njava -version\n")])])]),a("p",[e._v("No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?\nhttps://stackoverflow.com/questions/19655184/no-compiler-is-provided-in-this-environment-perhaps-you-are-running-on-a-jre-ra")]),e._v(" "),a("h2",{attrs:{id:"_2-tools-ide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-tools-ide"}},[e._v("#")]),e._v(" 2.Tools&IDE")]),e._v(" "),a("h3",{attrs:{id:"_2-1-decompiler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-decompiler"}},[e._v("#")]),e._v(" 2.1 Decompiler")]),e._v(" "),a("p",[e._v("Reverse class to view code http://java-decompiler.github.io/\n分析JVM\t\nJVisualVM https://www.cnblogs.com/xifengxiaoma/p/9402497.html\nJava ServiceabilityAgent(HSDB)使用和分析\nhttps://liuzhengyang.github.io/2017/05/27/serviceabilityagent/")]),e._v(" "),a("h3",{attrs:{id:"_2-2-cmdline"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-cmdline"}},[e._v("#")]),e._v(" 2.2 Cmdline")]),e._v(" "),a("p",[e._v("https://stackoverflow.com/questions/19843096/how-to-debug-a-java-application-without-access-to-the-source-code/58555431#58555431\nhttps://stackoverflow.com/questions/3668379/use-a-jar-with-source-as-source-for-jdb/58603802#58603802\njava -cp vs java -jar\nhttps://stackoverflow.com/questions/11922681/differences-between-java-cp-and-java-jar\n基本区别就是，如果jar包，比如springboot的包将依赖都已经打入了META-INF，则用-jar，否则如果需要依赖外部的lib，则需要用cp指定classpath\njava -server -jar *.jar\njava程序启动参数-D含义详解 https://www.cnblogs.com/grefr/p/6087955.html\nJdb\nhttps://stackoverflow.com/questions/20018866/specifying-sourcepath-in-jdb-what-am-i-doing-wrong")]),e._v(" "),a("p",[e._v("Debug jar file")]),e._v(" "),a("p",[a("s",[e._v("-sourcepath -classpath com.quantdo.framework.websocket.WebSocketApplication\njava -jar -agentlib:jdwp=transport=dt_shmem,address=jdbconn,server=y,suspend=n C:\\Workspace\\EclipseWorkspace\\quantdo-websocket\\quantdo-websocket.jar\njdb -attach jdbconn\njdb -sourcepath BOOT-INF/classes/ -classpath . org.springframework.boot.loader.JarLauncher")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("\njdb -sourcepath BOOT-INF/classes/ -classpath .;BOOT-INF/classes/\nstop at com.quantdo.framework.websocket.endpoint.GeneralWebSocketEndpoint:54\nstop at com.quantdo.framework.websocket.handler.DefaultWebSocketMessageHandler:32\nstop in DefaultWebSocketMessageHandler.receiveMessage\nstop in com.quantdo.framework.websocket.endpoint.GeneralWebSocketEndpoint.onMessage\nstop in com.alibaba.fastjson.parser.JSONLexerBase.scanString\n\t  public final void scanString() {\n\t  public String scanString(char expectNextChar) {\nstop at com.alibaba.fastjson.parser.JSONLexerBase:880\nrun org.springframework.boot.loader.JarLauncher\n\njdb -sourcepath BOOT-INF/classes/ -classpath .;BOOT-INF/classes/;BOOT-INF/lib/\n\tstop at com.quantdo.framework.cache.autoconfigure.support.WebsocketMessageListener:35\n\tstop at org.springframework.data.redis.listener.RedisMessageListenerContainer:968\n\tstop at com.quantdo.framework.websocket.endpoint.GeneralWebSocketEndpoint:54\nstop at com.quantdo.framework.websocket.handler.DefaultWebSocketMessageHandler:32\nstop at com.alibaba.fastjson.parser.JSONLexerBase:880\nrun org.springframework.boot.loader.JarLauncher\n\nnext\ncont\nstep up\nstep out\nlocals\nprint \nwhere\nwhere all\nlist\nthreads\nthread <THREADID>\n\n")])])]),a("p",[a("img",{attrs:{src:"/docs/docs_image/software/java/java01.png",alt:"测试例子"}})]),e._v(" "),a("p",[e._v("Refer:\nhttps://docs.oracle.com/javase/8/docs/technotes/tools/unix/jdb.html\nhttp://hengyunabc.github.io/spring-boot-application-start-analysis/\nhttps://www.oschina.net/question/1263216_2267259\nhttps://blog.csdn.net/arkblue/article/details/39718947\nhttps://www.bilibili.com/read/cv1844967/")]),e._v(" "),a("h3",{attrs:{id:"_2-3-ide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-ide"}},[e._v("#")]),e._v(" 2.3 IDE")]),e._v(" "),a("p",[e._v("Eclipse/STS\nProject Explorer-> Projects Presentation (select hierarchy)")]),e._v(" "),a("h4",{attrs:{id:"_2-3-1-folder-structure"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1-folder-structure"}},[e._v("#")]),e._v(" 2.3.1 Folder structure")]),e._v(" "),a("p",[e._v("**About resources folder\nMissing resources: manually create resources folder in src/main, and then Manve->update project\nsrc/main/resources https://stackoverflow.com/questions/18875635/cant-access-files-from-src-main-resources-via-a-test-case")]),e._v(" "),a("p",[e._v('New Maven project -> Tick "Create a simple project(skip archetype selection) [auto create resource folder]\nhttps://stackoverflow.com/questions/49351806/eclipse-adds-an-exclusion-pattern-of-to-src-main-resources-how-to-read-a-res')]),e._v(" "),a("p",[e._v("**Missing src/test/java\nmanual add in file system, then in java build path, remove first, then Add Folder")]),e._v(" "),a("h4",{attrs:{id:"_2-3-2-compiler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2-compiler"}},[e._v("#")]),e._v(" 2.3.2 compiler")]),e._v(" "),a("p",[e._v("**default compiler & project build path & runtime/debug JRE& compiler compliance\nSet project compiler compliance settings to 1.7 Set project JRE build path entry to 'JavaSE-1.7' https://docs.infor.com/help_m3_coreit_13.4/index.jsp?topic=%2Fcom.lawson.help.administration%2Fcom.lawson.help.makag-w_10.1.2%2FL157071229479555.html")]),e._v(" "),a("p",[e._v("java->Compiler/Installed JREs")]),e._v(" "),a("p",[e._v("run config-> maven build->maven debug-> jre")]),e._v(" "),a("p",[e._v("show jdk version that maven dependent on: mvn -version")]),e._v(" "),a("h4",{attrs:{id:"_2-3-3-debug"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-3-debug"}},[e._v("#")]),e._v(" 2.3.3 Debug")]),e._v(" "),a("p",[a("strong",[e._v("基本debug技巧")]),e._v("\n1）调试依赖比如maven dependencies的时候，注意在eclipse里面设置断点有可能不生效，因为debugger view下会有很多空行，技巧是多设置一些断点，调试起来之后再在debugger view下设置断点\n2）比如pom.xml在eclipse里面可以查看Dependency hierarchy view，可以比较清晰的看到所有依赖的层级关系")]),e._v(" "),a("p",[a("strong",[e._v("Remote Debug(attach jar)")]),e._v("\nhttps://stackoverflow.com/questions/6855520/attach-debugger-to-application-using-eclipse/23297651\nDebug Configurations:\nRemote Java Application->Connect: Remote Host & Port\n&\nRemote Java Application->Source: Add Source code (& dependencies sourcecode if needed)\nthen Start jar and expose port:\njava -Xdebug -Xrunjdwp:transport=dt_socket,address=127.0.0.1:8008,server=y,suspend=y -jar target\\test.jar")]),e._v(" "),a("p",[e._v('For remote debug war hosting in remote tomcat:\nvim /etc/tomcat/tomcat.conf\nJAVA_OPTS or CATALINA_OPTS="-Xdebug -Xrunjdwp:transport=dt_socket,address=10001,server=y,suspend=n"\nFailed using port 8000')]),e._v(" "),a("p",[e._v("For mvn project another way can be found in Maven->debug below")]),e._v(" "),a("p",[a("strong",[e._v("Debug into jar without sourcecode using decompiler")]),e._v("\nMy original post\nhttps://stackoverflow.com/questions/58534925/eclipse-not-decompile-rt-jar-when-debugging-but-idea-does/58535553#58535553")]),e._v(" "),a("p",[e._v("手动方式：\n可以先手动decompile出来，然后再添加\n"),a("img",{attrs:{src:"/docs/docs_image/software/java/java02.png",alt:"add source path"}}),e._v("\n自动方式：\nFor eclipse install:\nEnhanced Class Decompiler https://ecd-plugin.github.io/ecd/ or jd plugin http://java-decompiler.github.io/\nHaven’t try another one Bytecode Visualizer https://www.crowdstrike.com/blog/native-java-bytecode-debugging-without-source-code/\nFor intellj idea, it’s auto;")]),e._v(" "),a("p",[a("strong",[e._v("Run and Debug external jar without sourcecode")])]),e._v(" "),a("p",[e._v("RUN external jar in eclipse:\nProgram-> create -> Locatoin:jdk/java.exe Argument:-jar XXX.jar")]),e._v(" "),a("p",[e._v("DEBUG:\nBut how to debug ? can try woring with jdb.exe\nhttps://docs.oracle.com/javase/7/docs/technotes/tools/windows/jdb.html\nhttps://stackoverflow.com/questions/19843096/how-to-debug-a-java-application-without-access-to-the-source-code/58555431#58555431")]),e._v(" "),a("p",[e._v("run jar with:\njava -jar -agentlib:jdwp=transport=dt_shmem,address=jdbconn,server=y,suspend=n C:\\Workspace\\EclipseWorkspace\\test.jar\nthen debug in eclipse:\nProgram-> create -> Locatoin:jdk/jdb.exe Argument:-attach jdbconn")]),e._v(" "),a("h4",{attrs:{id:"_2-3-4-其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-4-其他"}},[e._v("#")]),e._v(" 2.3.4 其他")]),e._v(" "),a("p",[e._v("Install new software/ marketpalce 如果报错\n"),a("img",{attrs:{src:"/docs/docs_image/software/java/java03.png",alt:""}})]),e._v(" "),a("hr"),e._v(" "),a("h2",{attrs:{id:"_3-project-management-framework"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-project-management-framework"}},[e._v("#")]),e._v(" 3.Project Management Framework")]),e._v(" "),a("h3",{attrs:{id:"_3-1-gradle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-gradle"}},[e._v("#")]),e._v(" 3.1 Gradle")]),e._v(" "),a("p",[e._v("todo Refer to Project:alpha-wallet")]),e._v(" "),a("h3",{attrs:{id:"_3-2-maven"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-maven"}},[e._v("#")]),e._v(" 3.2 MAVEN")]),e._v(" "),a("h4",{attrs:{id:"_3-2-1-install"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-install"}},[e._v("#")]),e._v(" 3.2.1 Install")]),e._v(" "),a("p",[e._v("manual:\nhttp://maven.apache.org/download.cgi\nhttps://www.mkyong.com/maven/how-to-install-maven-in-windows/\nhttps://maven.apache.org/guides/getting-started/maven-in-five-minutes.html")]),e._v(" "),a("p",[e._v("MAVEN_HOME:C:\\dev\\maven\\apache-maven-3.6.1\\bin"),a("br"),e._v("\nJAVA_HOME:C:\\Java\\jdk1.6.0"),a("br"),e._v("\nPATH=...%MAVEN_HOME/bin;%JAVA_HOME%/bin\n自定义startup script： mvn.bat/mvn.cmd")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('@REM ==== START VALIDATION ====\nset JAVA_HOME=C:\\PROGRA~1\\Java\\jdk1.6.0_45\nif not "%JAVA_HOME%" == "" goto OkJHome\n\necho.\necho ERROR: JAVA_HOME not found in your environment.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation\necho.\ngoto error\n\n:OkJHome\nif exist "%JAVA_HOME%\\bin\\java.exe" goto chkMHome\n')])])]),a("p",[e._v("auto: choco install maven")]),e._v(" "),a("p",[e._v("特殊情况下比如研究测试旧版本的漏洞，需要降级maven和对应的jdk，可以利用Maven toolchain\nhttps://maven.apache.org/guides/mini/guide-using-toolchains.html\n在.m2/resposity下面建立toolchains.xml")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<?xml version="1.0" encoding="UTF8"?>\n<toolchains>\n  <toolchain>\n    <type>jdk</type>\n    <provides>\n      <version>1.6</version>\n      <vendor>sun</vendor>\n    </provides>\n    <configuration>\n       <jdkHome>C:\\Program Files\\Java\\jdk1.6.0_45</jdkHome>\n    </configuration>\n  </toolchain>\n</toolchains>\n')])])]),a("p",[e._v("Generate project\nmvn archetype:generate https://kafka.apache.org/22/documentation/streams/tutorial\nhttps://stackoverflow.com/questions/31720328/maven-not-downloading-dependencies-in-eclipse\nhttps://stackoverflow.com/questions/19655184/no-compiler-is-provided-in-this-environment-perhaps-you-are-running-on-a-jre-ra")]),e._v(" "),a("h4",{attrs:{id:"_3-2-2-pom"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-pom"}},[e._v("#")]),e._v(" 3.2.2 POM")]),e._v(" "),a("p",[e._v("https://maven.apache.org/guides/introduction/introduction-to-the-pom.html\nhttps://maven.apache.org/guides/introduction/introduction-to-profiles.html\nm2 repository\nC:\\Users\\lyhistory.m2\\repository")]),e._v(" "),a("p",[e._v("Project Inheritance vs Project Aggregation\nProject Interpolation and Variables\nGuide to creating assemblies https://maven.apache.org/guides/mini/guide-assemblies.html")]),e._v(" "),a("p",[e._v("https://search.maven.org/")]),e._v(" "),a("p",[e._v("?#.Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12:test (default-test) on project.\nhttps://stackoverflow.com/questions/36427868/failed-to-execute-goal-org-apache-maven-pluginsmaven-surefire-plugin2-12test")]),e._v(" "),a("p",[e._v("?#.invalid LOC header (bad signature)/repo.maven.apache.org: Unknown host repo.maven.apache.org/Maven install error: Dependency could not be resolved")]),e._v(" "),a("ol",[a("li",[e._v("Delete .m2\\repository\\org\\apache\\maven")]),e._v(" "),a("li",[e._v("mvn dependency:resolve -X")])]),e._v(" "),a("h4",{attrs:{id:"_3-2-3-lifecycle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-3-lifecycle"}},[e._v("#")]),e._v(" 3.2.3 Lifecycle")]),e._v(" "),a("p",[e._v("https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html\nMaven -> Update Projects\nMaven package\nethereumj-core maven package https://github.com/ethereum/ethereumj/issues/1018")]),e._v(" "),a("p",[e._v("mvn clean build\nmvn clean install -P"),a("profileName")],1),e._v(" "),a("p",[e._v("https://gerardnico.com/maven/bin\nUnsupported major.minor version 52.0 https://blog.csdn.net/qq_36769100/article/details/78880341\n打包\nmaven 生成可执行jar并使用shell脚本运行 https://blog.csdn.net/hg_harvey/article/details/79076939\nMaven打包的三种方式 https://blog.csdn.net/daiyutage/article/details/53739452")]),e._v(" "),a("p",[e._v("Maven 发布deploy到remote/internal repository\nhttps://maven.apache.org/guides/introduction/introduction-to-repositories.html\nhttps://maven.apache.org/plugins/maven-deploy-plugin/usage.html")]),e._v(" "),a("p",[e._v("Dependencies show in file icon\nhttps://stackoverflow.com/questions/45291243/maven-dependency-jar-file-displayed-as-folder-icon/45291377\nSet mvn version in eclipse: Preferences->Maven->Installations")]),e._v(" "),a("p",[e._v("?#issues: maven unknown lifecycle phase exec\nDon’t use powershell , use cmd instead!!!!!!!https://stackoverflow.com/questions/7576265/maven-exec-plugin-throws-exception-for-no-apparent-reason")]),e._v(" "),a("h4",{attrs:{id:"_3-2-4-remote-debug"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-4-remote-debug"}},[e._v("#")]),e._v(" 3.2.4 Remote Debug")]),e._v(" "),a("p",[e._v("前面已经提到了很多debug方式包括远程调试，这里maven还有自己的特有方式：\nhttps://maven.apache.org/surefire/maven-surefire-plugin/examples/debugging.html")]),e._v(" "),a("p",[e._v("命令行执行: mvnDebug -DforkCount=0 test\n然后在ECLIPSE: Debug Configuration->Remote Java Application->maven surfire->Connect(Remote IP&Port)&Source")]),e._v(" "),a("p",[e._v("Haven’t solve, why mvn -Dmaven.surefire.debug test not working?\nWith , maybe because of using powershell, should try cmd instead\nhttps://www.cnblogs.com/sylvia-liu/articles/4685130.html")]),e._v(" "),a("h2",{attrs:{id:"_4-java-tutorial"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-java-tutorial"}},[e._v("#")]),e._v(" 4.JAVA TUTORIAL")]),e._v(" "),a("p",[e._v("https://github.com/lyhistory/java-learn?organization=lyhistory&organization=lyhistory\nhttps://github.com/lyhistory/learn_coding")]),e._v(" "),a("h3",{attrs:{id:"_4-1-java-basics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-java-basics"}},[e._v("#")]),e._v(" 4.1 JAVA BASICS")]),e._v(" "),a("p",[e._v("List:\nDesign Note – There is no setter method for a List property. The getter returns the List by reference. An item can be added to the List returned by the getter method using an appropriate method defined on java.util.List. Rationale for this design in JAXB 1.0 was to enable the implementation to wrapper the list and be able to perform checks as content was added or removed from the List.")]),e._v(" "),a("p",[e._v("DateTime:\nSimpleDateFormat https://dzone.com/articles/java-simpledateformat-guide\n1384171247000+0800 https://blog.csdn.net/mingtianhaiyouwo/article/details/51336576\nhttp://tutorials.jenkov.com/java-date-time/index.html#java-7-date-time-api")]),e._v(" "),a("p",[e._v("localdate calendar\nhttps://stackoverflow.com/questions/21242110/convert-java-util-date-to-java-time-localdate\nhttps://beginnersbook.com/2017/10/java-8-calculate-days-between-two-dates/\nhttps://www.mkyong.com/java/java-how-to-add-days-to-current-date/")]),e._v(" "),a("p",[e._v("Number scale precision\nhttps://www.baeldung.com/java-round-decimal-number")]),e._v(" "),a("p",[e._v("SortedDictionary treemap https://stackoverflow.com/questions/4621464/whats-the-equivalent-to-a-net-sorteddictionary-in-java")]),e._v(" "),a("p",[e._v("java parameter default value\nhttps://stackoverflow.com/questions/997482/does-java-support-default-parameter-values")]),e._v(" "),a("p",[e._v("Java8 lambda expression, functional programming\nhttps://rodrigouchoa.wordpress.com/2014/09/10/java-8-lambda-expressions-tutorial/")]),e._v(" "),a("p",[e._v("Stream\nDistinct https://howtodoinjava.com/java8/java-stream-distinct-examples/\nhttps://stackoverflow.com/questions/42578210/filter-stream-with-values-from-another-stream")]),e._v(" "),a("p",[e._v("future\nhttps://www.baeldung.com/java-future")]),e._v(" "),a("p",[e._v("Java serialization algorithm\nhttps://www.javaworld.com/article/2072752/the-java-serialization-algorithm-revealed.html")]),e._v(" "),a("h3",{attrs:{id:"_4-2-java-advance"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-java-advance"}},[e._v("#")]),e._v(" 4.2 JAVA ADVANCE")]),e._v(" "),a("p",[e._v("Functional reference\nFunctional Interfaces https://www.baeldung.com/java-8-functional-interfaces\nhttps://www.codementor.io/eh3rrera/using-java-8-method-reference-du10866vx\nhttps://www.theserverside.com/blog/Coffee-Talk-Java-News-Stories-and-Opinions/How-to-use-Javas-functional-Consumer-interface-example")]),e._v(" "),a("h4",{attrs:{id:"_4-2-1-concurrency-handling"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-concurrency-handling"}},[e._v("#")]),e._v(" 4.2.1 Concurrency handling")]),e._v(" "),a("p",[a("strong",[e._v("method 1:Multi-thread")])]),e._v(" "),a("p",[e._v("There is a new computeIfAbsent API introduced in Java 8. The javadocs for ConcurrentHashMap's impelementation of it state:")]),e._v(" "),a("blockquote",[a("p",[e._v("The entire method invocation is performed atomically, so the function is applied at most once per key.\nSome attempted update operations on this map by other threads may be blocked while computation is in progress,\n"),a("strong",[e._v("so the computation should be short and simple, and must not attempt to update any other mappings of this map")]),e._v(".\nConditional thread safe\nhttps://www.ibm.com/developerworks/java/library/j-jtp07233/index.html")])]),e._v(" "),a("p",[e._v("Forkjoinpool\n"),a("img",{attrs:{src:"/docs/docs_image/software/java/java04.png",alt:""}})]),e._v(" "),a("p",[e._v("ParallelStream的实现原理——ForkJoin线程池框架\nhttp://tangxiaolin.com/learn/show?id=402881d2651d1bdf01651e51d8f80001\nJava 并发编程笔记：如何使用 ForkJoinPool 以及原理\nhttp://blog.dyngr.com/blog/2016/09/15/java-forkjoinpool-internals/\nhttp://blog.nigol.cz/java-8-dont-be-afraid-of-streams.html\nhttps://www.cnblogs.com/shijiaqi1066/p/4631466.html")]),e._v(" "),a("p",[e._v("聊聊并发（八）——Fork/Join 框架介绍 https://www.infoq.cn/article/fork-join-introduction/\n分析jdk-1.8-ForkJoinPool实现原理 https://www.jianshu.com/p/44b09f52a225\nhttps://blog.csdn.net/dweizhao/article/details/73480025")]),e._v(" "),a("p",[a("strong",[e._v("method 2: Single thread queue - Disruptor")]),e._v("\nLMAX DisruptorHigh Performance Inter-Thread Messaging Library\nhttps://lmax-exchange.github.io/disruptor/\nhttp://lmax-exchange.github.io/disruptor/files/Disruptor-1.0.pdf\nhttps://github.com/LMAX-Exchange/disruptor/wiki/Getting-Started")]),e._v(" "),a("h4",{attrs:{id:"_4-2-2-jni"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-jni"}},[e._v("#")]),e._v(" 4.2.2 JNI")]),e._v(" "),a("p",[e._v("Interface Definition Language IDL\nhttps://www.ejbtutorial.com/corba/interface-definition-language-idl-hello-world-tutorial-with-java-and-c")]),e._v(" "),a("p",[e._v("https://www.baeldung.com/jni\nhttps://www.jianshu.com/p/c708c2602db0\nhttps://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html")]),e._v(" "),a("p",[e._v("采坑：\n1）maven打包dll和so的时候会默认更改文件，所以加了pom过滤，我是直接用获取路径，动态添加路径到system path，再loadlibrary\nCan't load this .dll (machine code=0xbd) on a AMD 64-bit platform")]),e._v(" "),a("p",[e._v("https://stackoverflow.com/questions/38244970/running-my-generated-jar-yields-cant-load-this-dll-machine-code-0xbd-on-a\nhttps://stackoverflow.com/questions/19500458/maven-resource-binary-changes-file-size-after-build/24282250#24282250\nhttps://blog.csdn.net/azrael6619/article/details/83761225\nhttps://stackoverflow.com/questions/1403788/java-lang-unsatisfiedlinkerror-no-dll-in-java-library-path\nhttps://www.imooc.com/article/14702")]),e._v(" "),a("p",[e._v("2）jni调用的时候有个大坑，native函数所在的class包名必须跟c++那边的包名一致，否则会报unsatifisfield错误\nhttps://blog.csdn.net/xiaoyaoerxing/article/details/80461015\nhttps://www.cnblogs.com/harrymore/p/10570284.html")]),e._v(" "),a("p",[e._v("3）java, c++联调debug\nhttps://www.cnblogs.com/yejg1212/archive/2013/06/07/3125392.html\nC++ ide attach javaw")]),e._v(" "),a("h2",{attrs:{id:"_5-java-framework"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-java-framework"}},[e._v("#")]),e._v(" 5.JAVA framework")]),e._v(" "),a("h3",{attrs:{id:"_5-1-reactive-and-streaming-framework"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-reactive-and-streaming-framework"}},[e._v("#")]),e._v(" 5.1 Reactive and Streaming Framework")]),e._v(" "),a("p",[e._v("(java8 stream is only for Collections, means that the input is fixed collections, not realtime stream, after processed, the input cannot be changed )\nReactive framework: Akka, Vert.x, Java 9 “Flow” API, spring flux")]),e._v(" "),a("blockquote",[a("p",[e._v("通常，我们写服务器处理模型的程序时，有以下几种模型：")]),e._v(" "),a("p",[e._v("(1)每收到一个请求，创建一个新的进程，来处理该请求；\n(2)每收到一个请求，创建一个新的线程，来处理该请求；\n(3)每收到一个请求，放入一个事件列表，让主进程通过非阻塞I/O方式来处理请求")]),e._v(" "),a("p",[e._v("上面的几种方式，各有千秋，\n第(1)中方法，由于创建新的进程的开销比较大，所以，会导致服务器性能比较差,但实现比较简单。\n第(2)种方式，由于要涉及到线程的同步，有可能会面临死锁等问题。\n第(3)种方式，在写应用程序代码时，逻辑比前面两种都复杂。\n综合考虑各方面因素，一般普遍认为第(3)种方式是大多数网络服务器采用的方式\nhttps://blog.csdn.net/m0_37886429/article/details/78292300")])]),e._v(" "),a("p",[e._v("Non-blocking React 对应于blocking servlet，举例餐厅比喻web应用，传统的blocking做法是，有个http pool（.net的http handler或java的servlet），pool就是一个工作组，工作组里的每个服务员都是处理线程，当一个客人即web request进来时，餐厅立马分配一个服务员给这个客户，全程服务，直到客人离开（http response或者websocket断开连接），整个过程中这个服务员是被独占的，所以是阻塞式；而假设换一种做法，类似于nodejs和netty的event loop单线程处理方式，餐厅只请一个服务员，第一个客人过来之后，服务员过来安排座位，记下菜单，然后发送给后厨，然后同时第二个客人来了，服务员立马过去做同样的事情，因为是非阻塞式的，在后厨做好饭，服务员端给第一个客人之前，服务员可以利用空余时间去服务其他客人，比如刚才的场景，或者其他服务员要加餐等等，这就是所谓的java响应式编程；\n可能有人会疑惑具体什么机制让单线程可以处理并发，很多人之前还以为只有多线程才能产生并发，换个问题：单核时代是如何实现的并发，并发是个宏观的概念，单核微观上同一个时刻只可能处理一个task，只是其他线程在排队等待，然后分片迅速切换，所以nodejs的单线程也是一样的办法，进行排队；再进一步上升到架构角度看，架构中采用message queue的方式也是一种排队处理的扩展方式，下游可以增加多个消费者；\n这里多引入一个问题，如果是多线程，还可以通过增加线程池中服务员的数量来扩展，既然是单线程，那么怎么扩展scale呢？")]),e._v(" "),a("p",[e._v("一种方法就是nodejs的新feature cluster\nnode.js scalability problems and how to solve them https://softwareontheroad.com/nodejs-scalability-issues/#resources\nGood practices for high-performance and scalable Node.js applications https://medium.com/iquii/good-practices-for-high-performance-and-scalable-node-js-applications-part-1-3-bb06b6204197")]),e._v(" "),a("p",[e._v("用nodejs的朋友都有了解，node是单线程的，也就是说跑在8核CPU上，只能使用一个核的算力。\n单线程一直是node的一个诟病，但随着0.6版本中引入cluster之后，这个情况则得到了改变，开发人员可以依靠cluster很轻松的将自己的Node服务器扩展为多线程服务器了。\n另一种从微服务层面找到瓶颈，https://blog.risingstack.com/nodejs-microservices-scaling-case-study/")]),e._v(" "),a("p",[e._v("先上一张大图：\n"),a("img",{attrs:{src:"/docs/docs_image/software/java/java05.png",alt:"Java reactive API VS java8 stream"}})]),e._v(" "),a("p",[e._v("图开始是对比Java reactive API VS java8 stream，图片下部分是印证下面的内容：")]),e._v(" "),a("p",[e._v("Streaming framework: apache spark，storm，kafka stream等，感觉reactive响应式编程也是处理stream，有什么分别呢，reactive基本是request response的模式，而streaming最终是要做collection reduce合并计算的")]),e._v(" "),a("blockquote",[a("p",[e._v("People tend to confuse between streaming frameworks and reactive programmings frameworks,\nbecause they both deal with high throughput of real-time events. The different is with what they do after consuming the events:\n"),a("strong",[e._v("Reactive systems are used to provide a quick action for each event. Streaming systems are used to collect the data from the events and store it in files or databases after aggregations and other calculations.")])])]),e._v(" "),a("p",[e._v("pipeline，method chaining，fluent Interface\n我们可以看到从synchronous到asynchronous转换比较明显就是用callback，但是如果步骤过多就会出现类似这样的嵌套写法\nprocess1().done( callback() ) 然后callback().done( anothercallback())；为了解决这个问题就出现了fluent interface，即\nprocess1().then(process2())")]),e._v(" "),a("p",[e._v("Streaming里面也是很多这种写法\n他们的背后实现方法是什么我暂时不知道，也许是pub sub的观察着模式，比如前面的reactive响应式编程的发展路线：")]),e._v(" "),a("p",[e._v("前面提到非阻塞式基本都是采用nodejs的event loop单线程思想，而event loop就是基于观察者模式：\nhttps://medium.com/@brianjleeofcl/what-they-probably-didnt-teach-you-pt-1-node-js-event-emitters-observer-pattern-7dd02b67c061\n当然现在第四代的Reactor Library未必是用观察者模式，因为观察者模式是事件驱动，而响应式编程是消息驱动（比如抓获的异常也是消息）")]),e._v(" "),a("p",[e._v("从更高的角度来看，这些都可以称作是pipeline，比如有这么一篇文章《Kafka streams - From pub/sub to a complete stream processing platform》，kafka api and unix analogy\ncat < in.txt | grep “apache” | tr a-z A-Z > out.txt")]),e._v(" "),a("h3",{attrs:{id:"_5-2-rpc-rmi-jms-webservice-rest-soap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-rpc-rmi-jms-webservice-rest-soap"}},[e._v("#")]),e._v(" 5.2 RPC / RMI / JMS / WebService(Rest/SOAP)")]),e._v(" "),a("hr"),e._v(" "),a("p",[e._v("todo")]),e._v(" "),a("p",[e._v("-agentlib VS -X")]),e._v(" "),a("hr"),e._v(" "),a("p",[e._v("ref:")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/PlamenStilyianov/Java/blob/master/Charlie%20Hunt%2C%20Binu%20John%20-%20Java%20Performance%20-%202011.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("圣经《JAVA Performance》"),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://www.jianshu.com/p/d168ecdce022",target:"_blank",rel:"noopener noreferrer"}},[e._v("Java远程调试（Remote Debugging）的那些事"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=o.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[230],{680:function(t,e,n){"use strict";n.r(e);var a=n(65),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("refer: 《programming/js_dev_overview》")]),t._v(" "),n("h2",{attrs:{id:"_1-基本概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-基本概念"}},[t._v("#")]),t._v(" 1. 基本概念")]),t._v(" "),n("p",[t._v("https://reactjs.org/docs/glossary.html")]),t._v(" "),n("h3",{attrs:{id:"_1-1-reacjs-application"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-reacjs-application"}},[t._v("#")]),t._v(" 1.1 Reacjs Application")]),t._v(" "),n("p",[n("strong",[t._v("Single-page Applicaiton")])]),t._v(" "),n("p",[t._v("Though you may build a single-page application in React, it is not a requirement. React can also be used for enhancing small parts of existing websites with additional interactivity. Code written in React can coexist peacefully with markup rendered on the server by something like PHP, or with other client-side libraries. In fact, this is exactly how React is being used at Facebook.")]),t._v(" "),n("p",[t._v("通过 react router可以实现多页面：")]),t._v(" "),n("p",[n("code",[t._v("import { Router, BrowserRouter, Redirect, Route, Switch } from 'react-router-dom'")])]),t._v(" "),n("p",[t._v("页面切换的时候url变化，相应触发页面的WillUnmount生命周期")]),t._v(" "),n("p",[n("strong",[t._v("CDN")])]),t._v(" "),n("p",[t._v("CDN stands for Content Delivery Network. CDNs deliver cached, static content from a network of servers across the globe.")]),t._v(" "),n("h3",{attrs:{id:"_1-2-es6-es2015-es2016-etc"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-es6-es2015-es2016-etc"}},[t._v("#")]),t._v(" 1.2 ES6, ES2015, ES2016, etc")]),t._v(" "),n("p",[t._v("These acronyms all refer to the most recent versions of the ECMAScript Language Specification standard, which the JavaScript language is an implementation of. The ES6 version (also known as ES2015) includes many additions to the previous versions such as: arrow functions, classes, template literals, "),n("code",[t._v("let")]),t._v(" and "),n("code",[t._v("const")]),t._v(" statements. You can learn more about specific versions "),n("a",{attrs:{href:"https://en.wikipedia.org/wiki/ECMAScript#Versions",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),n("OutboundLink")],1),t._v(".")]),t._v(" "),n("h3",{attrs:{id:"_1-3-compilers"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-compilers"}},[t._v("#")]),t._v(" 1.3 Compilers")]),t._v(" "),n("p",[t._v("有的称之为 transpiling")]),t._v(" "),n("p",[t._v("A JavaScript compiler takes JavaScript code, transforms it and returns JavaScript code in a different format. The most common use case is to take ES6 syntax and transform it into syntax that older browsers are capable of interpreting. "),n("a",{attrs:{href:"https://babeljs.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Babel"),n("OutboundLink")],1),t._v(" is the compiler most commonly used with React.")]),t._v(" "),n("h3",{attrs:{id:"_1-4-bundlers"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-bundlers"}},[t._v("#")]),t._v(" 1.4 Bundlers")]),t._v(" "),n("p",[t._v("又称 minimize？")]),t._v(" "),n("p",[t._v("Bundlers take JavaScript and CSS code written as separate modules (often hundreds of them), and combine them together into a few files better optimized for the browsers. Some bundlers commonly used in React applications include "),n("a",{attrs:{href:"https://webpack.js.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack"),n("OutboundLink")],1),t._v(" and "),n("a",{attrs:{href:"http://browserify.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Browserify"),n("OutboundLink")],1),t._v(".")]),t._v(" "),n("h3",{attrs:{id:"_1-5-package-managers"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-package-managers"}},[t._v("#")]),t._v(" 1.5 Package Managers")]),t._v(" "),n("p",[t._v("Package managers are tools that allow you to manage dependencies in your project. "),n("a",{attrs:{href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm"),n("OutboundLink")],1),t._v(" and "),n("a",{attrs:{href:"https://yarnpkg.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Yarn"),n("OutboundLink")],1),t._v(" are two package managers commonly used in React applications. Both of them are clients for the same npm package registry.")]),t._v(" "),n("h3",{attrs:{id:"_1-6-jsx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-jsx"}},[t._v("#")]),t._v(" 1.6 JSX")]),t._v(" "),n("p",[t._v("JSX is a syntax extension to JavaScript. It is similar to a template language, but it has full power of JavaScript. JSX gets compiled to "),n("code",[t._v("React.createElement()")]),t._v(" calls which return plain JavaScript objects called “React elements”.")]),t._v(" "),n("p",[t._v("JSX is a special syntax developed by Facebook to support in-line templates for react components.")]),t._v(" "),n("p",[t._v("JSX是一个JavaScript语法扩展，类似于XML。你可以使用React，可以进行JSX语法到JavaScript的转换")]),t._v(" "),n("p",[t._v("react不是必须使用JSX。你可以使用普通的JS。然而，我们建议使用JSX因为它定义树结构（dom）简洁而且是我们熟悉的语法。简明的代码结构更利于开发和维护。 XML有着开闭标签，在构建复杂的树形结构时，比函数调用和对象字面量更易读。")]),t._v(" "),n("p",[n("strong",[t._v("jsx中原有的javascript的保留字都不能使用，例如：class,for必须使用className,htmlFor;")])]),t._v(" "),n("p",[n("strong",[t._v("JSX并不是新语言，也没有改变JavaScript的语法，只是对JavaScript的拓展。")])]),t._v(" "),n("p",[t._v("jsx是类似于html但是不完全相同，但是还是有不同的地方")]),t._v(" "),n("h3",{attrs:{id:"_1-7-reactjs"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-reactjs"}},[t._v("#")]),t._v(" 1.7 ReactJS")]),t._v(" "),n("h4",{attrs:{id:"_1-7-1-elements"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-1-elements"}},[t._v("#")]),t._v(" 1.7.1 Elements")]),t._v(" "),n("p",[t._v("first-class JavaScript objects\nhttps://reactjs.org/docs/react-api.html#createelement")]),t._v(" "),n("p",[t._v("components的building block: React elements are the building blocks of React applications. One might confuse elements with a more widely known concept of “components”. An element describes what you want to see on the screen. React elements are immutable.")]),t._v(" "),n("p",[n("code",[t._v("const element = <h1>Hello, world</h1>;")])]),t._v(" "),n("p",[t._v("Typically, elements are not used directly, but get returned from components.")]),t._v(" "),n("p",[t._v("Unlike browser DOM elements, React elements are plain objects. React DOM takes care of updating the DOM to match the React elements.")]),t._v(" "),n("p",[t._v("To render a React element into a root DOM node, pass both to "),n("a",{attrs:{href:"https://reactjs.org/docs/react-dom.html#render",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("ReactDOM.render()")]),n("OutboundLink")],1),t._v(":")]),t._v(" "),n("h4",{attrs:{id:"_1-7-2-component-props-state-lifecycle-methods"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-2-component-props-state-lifecycle-methods"}},[t._v("#")]),t._v(" 1.7.2 Component&props|State&Lifecycle Methods")]),t._v(" "),n("p",[t._v("https://reactjs.org/docs/react-component.html")]),t._v(" "),n("p",[t._v("https://reactjs.org/docs/components-and-props.html")]),t._v(" "),n("h5",{attrs:{id:"component-props"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#component-props"}},[t._v("#")]),t._v(" "),n("strong",[t._v("component&props")])]),t._v(" "),n("p",[t._v("React components are small, reusable pieces of code that return a React element to be rendered to the page.")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("//The simplest version of React component is a plain JavaScript function that returns a React element\nfunction Welcome(props) {\n  return <h1>Hello, {props.name}</h1>;\n}\n//Components can also be ES6 classes:\nclass Welcome extends React.Component {\n  render() {\n    return <h1>Hello, {this.props.name}</h1>;\n  }\n}\n")])])]),n("p",[t._v("Conceptually, components are like JavaScript functions. They accept arbitrary inputs (called “props”) and return React elements describing what should appear on the screen.")]),t._v(" "),n("ul",[n("li",[t._v("function components: are a simpler way to write components that only contain a render method and don’t have their own state")]),t._v(" "),n("li",[t._v("class componenets:\n"),n("ul",[n("li",[t._v("controlled components: by lift up state")]),t._v(" "),n("li",[t._v("pure components: by using immutable")])])])]),t._v(" "),n("p",[t._v("从react的角度，function component和class component是等价的，只是ES6的角度写法不同")]),t._v(" "),n("p",[n("strong",[t._v("All React components must act like pure functions with respect to their props.")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("pure function不改变输入：\nfunction sum(a, b) {\n  return a + b;\n}\n非 pure function：\nfunction withdraw(account, amount) {\n  account.total -= amount;\n}\n")])])]),n("p",[t._v("readonly "),n("code",[t._v("props")]),t._v(" are inputs to a React component. They are data passed down from a parent component to a child component.")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("//`props.children` is available on every component. It contains the content between the opening and closing tags of a component. For example:\n\n<Welcome>Hello world!</Welcome>\nfunction Welcome(props) {\n  return <p>{props.children}</p>;\n}\nclass Welcome extends React.Component {\n  render() {\n    return <p>{this.props.children}</p>;\n  }\n}\n")])])]),n("p",[t._v("The most important difference between "),n("code",[t._v("state")]),t._v(" and "),n("code",[t._v("props")]),t._v(" is that "),n("code",[t._v("props")]),t._v(" are passed from a parent component, but "),n("code",[t._v("state")]),t._v(" is managed by the component itself. A component cannot change its "),n("code",[t._v("props")]),t._v(", but it can change its "),n("code",[t._v("state")]),t._v(".")]),t._v(" "),n("p",[t._v("For each particular piece of changing data, there should be just one component that “owns” it in its state. Don’t try to synchronize states of two different components. Instead, "),n("a",{attrs:{href:"https://reactjs.org/docs/lifting-state-up.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("lift it up"),n("OutboundLink")],1),t._v(" to their closest shared ancestor, and pass it down as props to both of them.")]),t._v(" "),n("p",[t._v("除了props和state，对于component来说可以定义任意的fields，比如")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("componentDidMount() {\n    this.timerID = setInterval(\n      () => this.tick(),\n      1000\n    );\n  }\n  While `this.props` is set up by React itself and `this.state` has a special meaning, you are free to add additional fields to the class manually if you need to store something that doesn’t participate in the data flow \n")])])]),n("h5",{attrs:{id:"state-lifecycle-methods"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#state-lifecycle-methods"}},[t._v("#")]),t._v(" State & Lifecycle Methods")]),t._v(" "),n("p",[t._v("Lifecycle methods are custom functionality that gets executed during the different phases of a component. There are methods available when the component gets created and inserted into the DOM ("),n("a",{attrs:{href:"https://reactjs.org/docs/react-component.html#mounting",target:"_blank",rel:"noopener noreferrer"}},[t._v("mounting"),n("OutboundLink")],1),t._v("), when the component updates, and when the component gets unmounted or removed from the DOM.")]),t._v(" "),n("p",[t._v("componentDidMount")]),t._v(" "),n("p",[t._v("componentWillUnmount")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// Wrong\nthis.state.comment = 'Hello';\n// Correct\nthis.setState({comment: 'Hello'});\n\n#特别小心：State Updates May Be Asynchronous\nBecause this.props and this.state may be updated asynchronously, you should not rely on their values for calculating the next state.\n\n// Wrong\nthis.setState({\n  counter: this.state.counter + this.props.increment,\n});\n// Correct\nthis.setState((state, props) => ({\n  counter: state.counter + props.increment\n}));\n// Correct\nthis.setState(function(state, props) {\n  return {\n    counter: state.counter + props.increment\n  };\n});\n\nNeither parent nor child components can know if a certain component is stateful or stateless, and they shouldn’t care whether it is defined as a function or a class.\n")])])]),n("h4",{attrs:{id:"_1-7-3-controlled-vs-uncontrolled-components-很重要的概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-3-controlled-vs-uncontrolled-components-很重要的概念"}},[t._v("#")]),t._v(" 1.7.3 Controlled vs. Uncontrolled Components 很重要的概念")]),t._v(" "),n("h5",{attrs:{id:"_1-controlled"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-controlled"}},[t._v("#")]),t._v(" 1. Controlled")]),t._v(" "),n("p",[t._v("https://reactjs.org/docs/forms.html#controlled-components")]),t._v(" "),n("p",[t._v("https://reactjs.org/docs/forms.html")]),t._v(" "),n("p",[t._v("HTML form elements work a little bit differently from other DOM elements in React, because form elements naturally keep some internal state,  such as "),n("code",[t._v("<input>")]),t._v(", "),n("code",[t._v("<textarea>")]),t._v(", and "),n("code",[t._v("<select>")]),t._v(" typically maintain their own state and update it based on user input.")]),t._v(" "),n("p",[t._v("The form has the default HTML form behavior of browsing to a new page when the user submits the form. If you want this behavior in React, it just works. But in most cases, it’s convenient to have a JavaScript function that handles the submission of the form and has access to the data that the user entered into the form. The standard way to achieve this is with a technique called “controlled components”.")]),t._v(" "),n("p",[t._v("In React, mutable state is typically kept in the state property of components, and only updated with "),n("a",{attrs:{href:"https://reactjs.org/docs/react-component.html#setstate",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("setState()")]),n("OutboundLink")],1),t._v(".")]),t._v(" "),n("p",[t._v("We can combine the two by making the React state be the “single source of truth”. Then the React component that renders a form also controls what happens in that form on subsequent user input. An input form element whose value is controlled by React in this way is called a “controlled component”.")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('class Reservation extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isGoing: true,\n      numberOfGuests: 2\n    };\n\tthis.handleSubmit = this.handleSubmit.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n  }\n  handleSubmit(event) {\n    alert(\'A name was submitted: \' + this.state.value);\n    event.preventDefault();\n  }\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.type === \'checkbox\' ? target.checked : target.value;\n    const name = target.name;\n\n    this.setState({\n      [name]: value\n    });\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <label>\n          Is going:\n          <input\n            name="isGoing"\n            type="checkbox"\n            checked={this.state.isGoing}\n            onChange={this.handleInputChange} />\n        </label>\n        <br />\n        <label>\n          Number of guests:\n          <input\n            name="numberOfGuests"\n            type="number"\n            value={this.state.numberOfGuests}\n            onChange={this.handleInputChange} />\n        </label>\n        <input type="submit" value="Submit" />\n      </form>\n    );\n  }\n}\n')])])]),n("p",[t._v("完整解决方案/框架：")]),t._v(" "),n("p",[t._v("If you’re looking for a complete solution including validation, keeping track of the visited fields, and handling form submission, "),n("a",{attrs:{href:"https://jaredpalmer.com/formik",target:"_blank",rel:"noopener noreferrer"}},[t._v("Formik"),n("OutboundLink")],1),t._v(" (is one of the popular choices. However, it is built on the same principles of controlled components and managing state)")]),t._v(" "),n("p",[t._v("antd")]),t._v(" "),n("h5",{attrs:{id:"_2-uncontrolled"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-uncontrolled"}},[t._v("#")]),t._v(" 2. Uncontrolled")]),t._v(" "),n("p",[t._v("where form data is handled by the DOM itself. To write an uncontrolled component, instead of writing an event handler for every state update, you can "),n("a",{attrs:{href:"https://reactjs.org/docs/refs-and-the-dom.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("use a ref"),n("OutboundLink")],1),t._v(" to get form values from the DOM.")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('class NameForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.input = React.createRef();\n  }\n  handleSubmit(event) {\n    alert(\'A name was submitted: \' + this.input.current.value);\n    event.preventDefault();\n  }\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <label>\n          Name:\n          <input type="text" ref={this.input} />\n        </label>\n        <input type="submit" value="Submit" />\n      </form>\n    );\n  }\n}\n\nIn the React rendering lifecycle, the value attribute on form elements will override the value in the DOM. With an uncontrolled component, you often want React to specify the initial value, but leave subsequent updates uncontrolled. To handle this case, you can specify a defaultValue attribute instead of value.\nLikewise, <input type="checkbox"> and <input type="radio"> support defaultChecked, and <select> and <textarea> supports defaultValue.\nIn React, an <input type="file" /> is always an uncontrolled component because its value can only be set by a user, and not programmatically.\n')])])]),n("h4",{attrs:{id:"_1-7-4-handling-events"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-4-handling-events"}},[t._v("#")]),t._v(" 1.7.4 Handling Events")]),t._v(" "),n("p",[t._v("https://reactjs.org/docs/handling-events.html")]),t._v(" "),n("p",[t._v("Handling events with React elements is very similar to handling events on DOM elements but has some syntactic differences:")]),t._v(" "),n("ul",[n("li",[t._v("React event handlers are named using camelCase, rather than lowercase.")]),t._v(" "),n("li",[t._v("With JSX you pass a function as the event handler, rather than a string.")])]),t._v(" "),n("p",[t._v("SyntheticEvent: https://reactjs.org/docs/events.html")]),t._v(" "),n("p",[t._v("When you define a component using an "),n("a",{attrs:{href:"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes",target:"_blank",rel:"noopener noreferrer"}},[t._v("ES6 class"),n("OutboundLink")],1),t._v(", a common pattern is for an event handler to be a method on the class.")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("https://stackoverflow.com/questions/6348494/addeventlistener-vs-onclick#:~:text=Summary%3A,can%20stop%20the%20event%20propagation.\n\n## html\n<button onclick=\"activateLasers()\">\n  Activate Lasers\n</button>\nOR\nelement.addEventListener('click', function() { /* do stuff here*/ }, false);\n\nWhen using React, you generally don’t need to call addEventListener to add listeners to a DOM element after it is created. Instead, just provide a listener when the element is initially rendered.\n\n## react\nfunction ActionLink() {\n  function handleClick(e) {\n    e.preventDefault();\n    console.log('The link was clicked.');\n  }\n  return (\n    <a href=\"#\" onClick={handleClick}>\n      Click me\n    </a>\n  );\n}\n\nclass Toggle extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {isToggleOn: true};\n\n    // This binding is necessary to make `this` work in the callback\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick() {\n    this.setState(state => ({\n      isToggleOn: !state.isToggleOn\n    }));\n  }\n\n  render() {\n    return (\n      <button onClick={this.handleClick}>\n        {this.state.isToggleOn ? 'ON' : 'OFF'}\n      </button>\n    );\n  }\n}\n\n\nclass LoggingButton extends React.Component {\n  // This syntax ensures `this` is bound within handleClick.\n  // Warning: this is *experimental* syntax.\n  handleClick = () => {\n    console.log('this is:', this);\n  }\n\n  render() {\n    return (\n      <button onClick={this.handleClick}>\n        Click me\n      </button>\n    );\n  }\n}\n\nclass LoggingButton extends React.Component {\n  handleClick() {\n    console.log('this is:', this);\n  }\n\n  render() {\n    // This syntax ensures `this` is bound within handleClick\n    //The problem with this syntax is that a different callback is created each time the LoggingButton renders. In most cases, this is fine. However, if this callback is passed as a prop to lower components, those components might do an extra re-rendering. We generally recommend binding in the constructor or using the class fields syntax, to avoid this sort of performance problem.\n    return (\n      <button onClick={() => this.handleClick()}>\n        Click me\n      </button>\n    );\n  }\n}\n\n")])])]),n("h4",{attrs:{id:"_1-7-5-conditional-rendering"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-5-conditional-rendering"}},[t._v("#")]),t._v(" 1.7.5 Conditional Rendering")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// if else\nfunction Greeting(props) {\n  const isLoggedIn = props.isLoggedIn;\n  if (isLoggedIn) {\n    return <UserGreeting />;\n  }\n  return <GuestGreeting />;\n}\n\nReactDOM.render(\n  // Try changing to isLoggedIn={true}:\n  <Greeting isLoggedIn={false} />,\n  document.getElementById('root')\n);\n\n//Inline If with Logical && Operator (embed expressions in JSX)\nfunction Mailbox(props) {\n  const unreadMessages = props.unreadMessages;\n  return (\n    <div>\n      <h1>Hello!</h1>\n      {unreadMessages.length > 0 &&\n        <h2>\n          You have {unreadMessages.length} unread messages.\n        </h2>\n      }\n    </div>\n  );\n}\nconst messages = ['React', 'Re: React', 'Re:Re: React'];\nReactDOM.render(\n  <Mailbox unreadMessages={messages} />,\n  document.getElementById('root')\n);\n\n//Inline If-Else with Conditional Operator\nrender() {\n  const isLoggedIn = this.state.isLoggedIn;\n  return (\n    <div>\n      The user is <b>{isLoggedIn ? 'currently' : 'not'}</b> logged in.\n    </div>\n  );\n}\n\n// Return null to prevent rendering\n// Returning null from a component’s render method does not affect the firing of the component’s lifecycle methods. For instance componentDidUpdate will still be called.\n\nfunction WarningBanner(props) {\n  if (!props.warn) {\n    return null;\n  }\n\n  return (\n    <div className=\"warning\">\n      Warning!\n    </div>\n  );\n}\n\n")])])]),n("h4",{attrs:{id:"_1-7-6-lists-keys"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-6-lists-keys"}},[t._v("#")]),t._v(" 1.7.6 Lists & Keys")]),t._v(" "),n("p",[t._v("https://reactjs.org/docs/lists-and-keys.html")]),t._v(" "),n("p",[t._v("Don’t pass something like "),n("code",[t._v("Math.random()")]),t._v(" to keys. It is important that keys have a “stable identity” across re-renders so that React can determine when items are added, removed, or re-ordered. Ideally, keys should correspond to unique and stable identifiers coming from your data, such as "),n("code",[t._v("post.id")]),t._v(".")]),t._v(" "),n("p",[t._v("Keys only make sense in the context of the surrounding array.")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("## wrong:\nfunction ListItem(props) {\n  const value = props.value;\n  return (\n    // Wrong! There is no need to specify the key here:\n    <li key={value.toString()}>\n      {value}\n    </li>\n  );\n}\nfunction NumberList(props) {\n  const numbers = props.numbers;\n  const listItems = numbers.map((number) =>\n    // Wrong! The key should have been specified here:\n    <ListItem value={number} />\n  );\n  return (\n    <ul>\n      {listItems}\n    </ul>\n  );\n}\n\nconst numbers = [1, 2, 3, 4, 5];\nReactDOM.render(\n  <NumberList numbers={numbers} />,\n  document.getElementById('root')\n);\n\n##correct:\n\nfunction ListItem(props) {\n  // Correct! There is no need to specify the key here:\n  return <li>{props.value}</li>;\n}\nfunction NumberList(props) {\n  const numbers = props.numbers;\n  const listItems = numbers.map((number) =>\n    // Correct! Key should be specified inside the array.\n    <ListItem key={number.toString()} value={number} />\n  );\n  return (\n    <ul>\n      {listItems}\n    </ul>\n  );\n}\nconst numbers = [1, 2, 3, 4, 5];\nReactDOM.render(\n  <NumberList numbers={numbers} />,\n  document.getElementById('root')\n);\n\n# JSX allows embedding any expression in curly braces so we could inline the map() result:\nfunction NumberList(props) {\n  const numbers = props.numbers;\n  return (\n    <ul>\n      {numbers.map((number) =>\n        <ListItem key={number.toString()}\n                  value={number} />\n      )}\n    </ul>\n  );\n}\n\n")])])]),n("h4",{attrs:{id:"_1-7-7-components设计思想"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-7-components设计思想"}},[t._v("#")]),t._v(" 1.7.7 Components设计思想")]),t._v(" "),n("h5",{attrs:{id:"thinking-in-react-基本封装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#thinking-in-react-基本封装"}},[t._v("#")]),t._v(" Thinking in React 基本封装")]),t._v(" "),n("p",[t._v("判断什么是state：")]),t._v(" "),n("ol",[n("li",[t._v("Is it passed in from a parent via props? If so, it probably isn’t state.")]),t._v(" "),n("li",[t._v("Does it remain unchanged over time? If so, it probably isn’t state.")]),t._v(" "),n("li",[t._v("Can you compute it based on any other state or props in your component? If so, it isn’t state.")])]),t._v(" "),n("p",[t._v("谁是state拥有者：")]),t._v(" "),n("p",[t._v("React is all about one-way data flow down the component hierarchy. It may not be immediately clear which component should own what state. For each piece of state in your application:")]),t._v(" "),n("ul",[n("li",[t._v("Identify every component that renders something based on that state.")]),t._v(" "),n("li",[t._v("Find a common owner component (a single component above all the components that need the state in the hierarchy).")]),t._v(" "),n("li",[t._v("Either the common owner or another component higher up in the hierarchy should own the state.")]),t._v(" "),n("li",[t._v("If you can’t find a component where it makes sense to own the state, create a new component solely for holding the state and add it somewhere in the hierarchy above the common owner component.")])]),t._v(" "),n("h5",{attrs:{id:"lifting-state-up-联动类组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lifting-state-up-联动类组件"}},[t._v("#")]),t._v(" Lifting State Up 联动类组件")]),t._v(" "),n("p",[t._v("If something can be derived from either props or state, it probably shouldn’t be in the state. For example, instead of storing both "),n("code",[t._v("celsiusValue")]),t._v(" and "),n("code",[t._v("fahrenheitValue")]),t._v(", we store just the last edited "),n("code",[t._v("temperature")]),t._v(" and its "),n("code",[t._v("scale")]),t._v(". The value of the other input can always be calculated from them in the "),n("code",[t._v("render()")]),t._v(" method.")]),t._v(" "),n("p",[t._v("When you see something wrong in the UI, you can use "),n("a",{attrs:{href:"https://github.com/facebook/react/tree/master/packages/react-devtools",target:"_blank",rel:"noopener noreferrer"}},[t._v("React Developer Tools"),n("OutboundLink")],1),t._v(" to inspect the props and move up the tree until you find the component responsible for updating the state. This lets you trace the bugs to their source")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" scaleNames "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("c")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Celsius'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("f")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Fahrenheit'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toCelsius")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("fahrenheit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fahrenheit "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toFahrenheit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("celsius")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("celsius "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tryConvert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("temperature"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" convert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" input "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseFloat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("temperature"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Number"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isNaN")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" output "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rounded "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("round")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("output "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" rounded"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("BoilingVerdict")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("celsius "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("The water would boil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("The water would not boil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TemperatureInput")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleChange "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleChange")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleChange")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onTemperatureChange")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" temperature "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("temperature"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" scale "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scale"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("fieldset"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("legend"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Enter temperature "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("scaleNames"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("scale"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("legend"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("temperature"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n               onChange"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleChange"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fieldset"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Calculator")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleCelsiusChange "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleCelsiusChange")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleFahrenheitChange "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleFahrenheitChange")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("temperature")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("scale")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'c'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleCelsiusChange")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("temperature")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("scale")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'c'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" temperature"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleFahrenheitChange")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("temperature")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("scale")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'f'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" temperature"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" scale "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scale"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" temperature "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("temperature"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" celsius "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" scale "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'f'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tryConvert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("temperature"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" toCelsius"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" temperature"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fahrenheit "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" scale "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'c'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tryConvert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("temperature"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" toFahrenheit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" temperature"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TemperatureInput\n          scale"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"c"')]),t._v("\n          temperature"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("celsius"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          onTemperatureChange"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleCelsiusChange"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TemperatureInput\n          scale"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"f"')]),t._v("\n          temperature"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("fahrenheit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          onTemperatureChange"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleFahrenheitChange"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("BoilingVerdict\n          celsius"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseFloat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("celsius"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nReactDOM"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Calculator "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h5",{attrs:{id:"containment-容器类组件-弹窗类和布局类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#containment-容器类组件-弹窗类和布局类"}},[t._v("#")]),t._v(" Containment 容器类组件(弹窗类和布局类)")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('--- 弹窗类\nSome components don’t know their children ahead of time. This is especially common for components like `Sidebar` or `Dialog` that represent generic “boxes”. We recommend that such components use the special `children` prop to pass children elements directly into their output:\n\nfunction FancyBorder(props) {\n  return (\n    <div className={\'FancyBorder FancyBorder-\' + props.color}>\n      {props.children}\n    </div>\n  );\n}\nfunction WelcomeDialog() {\n  return (\n    <FancyBorder color="blue">\n      <h1 className="Dialog-title">\n        Welcome\n      </h1>\n      <p className="Dialog-message">\n        Thank you for visiting our spacecraft!\n      </p>\n    </FancyBorder>\n  );\n}\n\n--- 布局类\nsometimes you might need multiple “holes” in a component. In such cases you may come up with your own convention instead of using children:\n\nfunction SplitPane(props) {\n  return (\n    <div className="SplitPane">\n      <div className="SplitPane-left">\n        {props.left}\n      </div>\n      <div className="SplitPane-right">\n        {props.right}\n      </div>\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <SplitPane\n      left={\n        <Contacts />\n      }\n      right={\n        <Chat />\n      } />\n  );\n}\n')])])]),n("h5",{attrs:{id:"specialization-通用到定制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#specialization-通用到定制"}},[t._v("#")]),t._v(" Specialization 通用到定制")]),t._v(" "),n("p",[t._v("a more “specific” component renders a more “generic” one and configures it with props")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('function Dialog(props) {\n  return (\n    <FancyBorder color="blue">\n      <h1 className="Dialog-title">\n        {props.title}\n      </h1>\n      <p className="Dialog-message">\n        {props.message}\n      </p>\n      {props.children}\n    </FancyBorder>\n  );\n}\n\nfunction WelcomeDialog() {\n  return (\n    <Dialog\n      title="Welcome"\n      message="Thank you for visiting our spacecraft!" />\n  );\n}\n\nclass SignUpDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSignUp = this.handleSignUp.bind(this);\n    this.state = {login: \'\'};\n  }\n\n  render() {\n    return (\n      <Dialog title="Mars Exploration Program"\n              message="How should we refer to you?">\n        <input value={this.state.login}\n               onChange={this.handleChange} />\n        <button onClick={this.handleSignUp}>\n          Sign Me Up!\n        </button>\n      </Dialog>\n    );\n  }\n\n  handleChange(e) {\n    this.setState({login: e.target.value});\n  }\n\n  handleSignUp() {\n    alert(`Welcome aboard, ${this.state.login}!`);\n  }\n}\n')])])]),n("h5",{attrs:{id:"more"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#more"}},[t._v("#")]),t._v(" More")]),t._v(" "),n("p",[t._v("If you want to reuse non-UI functionality between components, we suggest extracting it into a separate JavaScript module. The components may import it and use that function, object, or a class, without extending it.")]),t._v(" "),n("h4",{attrs:{id:"_1-7-8-refs"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-8-refs"}},[t._v("#")]),t._v(" 1.7.8 Refs")]),t._v(" "),n("p",[t._v("https://reactjs.org/docs/refs-and-the-dom.html")]),t._v(" "),n("p",[t._v("In the typical React dataflow, "),n("a",{attrs:{href:"https://reactjs.org/docs/components-and-props.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("props"),n("OutboundLink")],1),t._v(" are the only way that parent components interact with their children. To modify a child, you re-render it with new props. However, there are a few cases where you need to imperatively modify a child outside of the typical dataflow. The child to be modified could be an instance of a React component, or it could be a DOM element. For both of these cases, React provides an escape hatch.")]),t._v(" "),n("p",[t._v("React supports a special attribute that you can attach to any component. The "),n("code",[t._v("ref")]),t._v(" attribute can be an object created by "),n("a",{attrs:{href:"https://reactjs.org/docs/react-api.html#reactcreateref",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("React.createRef()")]),t._v(" function"),n("OutboundLink")],1),t._v(" or a callback function, or a string (in legacy API). When the "),n("code",[t._v("ref")]),t._v(" attribute is a callback function, the function receives the underlying DOM element or class instance (depending on the type of element) as its argument. This allows you to have direct access to the DOM element or component instance.")]),t._v(" "),n("p",[t._v("Use refs sparingly. If you find yourself often using refs to “make things happen” in your app, consider getting more familiar with "),n("a",{attrs:{href:"https://reactjs.org/docs/lifting-state-up.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("top-down data flow"),n("OutboundLink")],1),t._v(".")]),t._v(" "),n("p",[t._v("可以在html element或者class component上面用ref，但是不可以在function component上面使用！ because they don’t have instances")]),t._v(" "),n("p",[t._v("使用方式：")]),t._v(" "),n("p",[t._v("推荐：When a ref is passed to an element in "),n("code",[t._v("render")]),t._v(", a reference to the node becomes accessible at the "),n("code",[t._v("current")]),t._v(" attribute of the ref.")]),t._v(" "),n("p",[t._v("即将移除：If you worked with React before, you might be familiar with an older API where the "),n("code",[t._v("ref")]),t._v(" attribute is a string, like "),n("code",[t._v('"textInput"')]),t._v(", and the DOM node is accessed as "),n("code",[t._v("this.refs.textInput")]),t._v(". We advise against it because string refs have "),n("a",{attrs:{href:"https://github.com/facebook/react/pull/8333#issuecomment-271648615",target:"_blank",rel:"noopener noreferrer"}},[t._v("some issues"),n("OutboundLink")],1),t._v(", are considered legacy, and "),n("strong",[t._v("are likely to be removed in one of the future releases")]),t._v(".")]),t._v(" "),n("p",[t._v("使用场景：")]),t._v(" "),n("p",[t._v("There are a few good use cases for refs:")]),t._v(" "),n("ul",[n("li",[t._v("Managing focus, text selection, or media playback.")]),t._v(" "),n("li",[t._v("Triggering imperative animations.")]),t._v(" "),n("li",[t._v("Integrating with third-party DOM libraries.")])]),t._v(" "),n("p",[t._v("比如有些情况下，确实需要通过拿到dom元素来获取其clientheight，scrollheight之类的，虽然读取需要ref，但是set还是尽量用state来更新，而不是直接通过dom去改变；")]),t._v(" "),n("p",[t._v("但是不好的做法：没有设计好parent child，所以造成有时候只好偷懒通过ref直接操作child的dom或方法，其实可以 Avoid using refs for anything that can be done declaratively 通过在parent维护state 然后传给child prop，然后在handler里面去更改state来解决：例如, instead of exposing "),n("code",[t._v("open()")]),t._v(" and "),n("code",[t._v("close()")]),t._v(" methods on a "),n("code",[t._v("Dialog")]),t._v(" component, pass an "),n("code",[t._v("isOpen")]),t._v(" prop to it.")]),t._v(" "),n("h4",{attrs:{id:"_1-7-9-reconciliation"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-9-reconciliation"}},[t._v("#")]),t._v(" 1.7.9 Reconciliation")]),t._v(" "),n("p",[t._v("https://reactjs.org/docs/reconciliation.html")]),t._v(" "),n("p",[t._v("When a component’s props or state change, React decides whether an actual DOM update is necessary by comparing the newly returned element with the previously rendered one. When they are not equal, React will update the DOM. This process is called “reconciliation”.")]),t._v(" "),n("h2",{attrs:{id:"_2-深入解读"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-深入解读"}},[t._v("#")]),t._v(" 2. 深入解读")]),t._v(" "),n("p",[t._v("https://reactjs.org/docs/hello-world.html\nhttps://reactjs.org/tutorial/tutorial.html")]),t._v(" "),n("h3",{attrs:{id:"jsx-emac-script-es5-es6-reactjs"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jsx-emac-script-es5-es6-reactjs"}},[t._v("#")]),t._v(" JSX?EMAC SCRIPT(ES5 ES6)?REACTJS")]),t._v(" "),n("p",[t._v("说白了ecma script就是javascript")]),t._v(" "),n("p",[t._v("语法全在这里：")]),t._v(" "),n("p",[t._v("https://developer.mozilla.org/en-US/docs/Web/JavaScript")]),t._v(" "),n("p",[t._v("如reactjs常用的 import export")]),t._v(" "),n("p",[t._v("reacjts就是基于javascript搞的前端框架，提供了众多api和组件")]),t._v(" "),n("p",[t._v("jsx是Facebook搞的，为了给reactjs简化in-line模板")]),t._v(" "),n("p",[t._v("直观可以这么看：")]),t._v(" "),n("p",[n("strong",[t._v("react without es6")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("The API of ES6 classes is similar to createReactClass() with a few exceptions.\n\nwith es6:\nclass Greeting extends React.Component {\n  onstructor(props) {\n    super(props);\n    this.state = {count: props.initialCount};\n    // This line is important!\n    this.handleClick = this.handleClick.bind(this);\n  }\n  handleClick() {\n    alert(this.state.message);\n  }\n  render() {\n    return <h1 onClick={this.handleClick}>Hello, {this.props.name}</h1>;\n  }\n}\nGreeting.defaultProps = {\n  name: 'Mary'\n};\n\nwithout es6:\nvar createReactClass = require('create-react-class');\nvar Greeting = createReactClass({\n  getDefaultProps: function() {\n    return {\n      name: 'Mary'\n    };\n  },\n  getInitialState: function() {\n    return {count: this.props.initialCount};\n  },\n  handleClick: function() {\n    alert(this.state.message);\n  },\n  render: function() {\n    return <h1 onClick={this.handleClick}>Hello, {this.props.name}</h1>;\n  }\n});\n")])])]),n("p",[t._v("react without JSX")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("with JSX:\nclass Hello extends React.Component {\n  render() {\n    return <div>Hello {this.props.toWhat}</div>;\n  }\n}\n\nReactDOM.render(\n  <Hello toWhat=\"World\" />,\n  document.getElementById('root')\n);\n\nwithout JSX:\nclass Hello extends React.Component {\n  render() {\n    return React.createElement('div', null, `Hello ${this.props.toWhat}`);\n  }\n}\n\nReactDOM.render(\n  React.createElement(Hello, {toWhat: 'World'}, null),\n  document.getElementById('root')\n);\n")])])]),n("h3",{attrs:{id:"reactjs"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#reactjs"}},[t._v("#")]),t._v(" Reactjs")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("Forms")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://reactjs.org/docs/lifting-state-up.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Lifting state up 联动"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[t._v("Composition vs Inheritance")])]),t._v(" "),n("li",[n("p",[t._v("Fragment")])]),t._v(" "),n("li",[n("p",[t._v("HOCs: Higher-Order Components")]),t._v(" "),n("p",[t._v("For Cross-Cutting Concerns  主要是为了重用一些重复的逻辑（比如订阅datasource）")])]),t._v(" "),n("li",[n("p",[t._v("Hooks")]),t._v(" "),n("p",[t._v("为了替换HOCs，为了重用一些“有状态的 stateful”逻辑")])])]),t._v(" "),n("p",[t._v("Component:")]),t._v(" "),n("ol",[n("li",[t._v("class App extends React.Component{…​} is the method that creates a React component.")]),t._v(" "),n("li",[t._v("componentDidMount is the API invoked after React renders a component in the DOM.")]),t._v(" "),n("li",[t._v("render is the API that “draws” the component on the screen.")])]),t._v(" "),n("p",[t._v("top level api: https://reactjs.org/docs/react-api.html")]),t._v(" "),n("h4",{attrs:{id:"生命周期排查"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#生命周期排查"}},[t._v("#")]),t._v(" 生命周期排查")]),t._v(" "),n("p",[t._v("某个项目，由于需求是高度定制化的类似Excel的表格，市面没有现成产品，所以某高人通过模仿antd写了一套原生的表格组件，层层嵌套，大概是windowtable下面包了一层table叫Seperatetable")]),t._v(" "),n("p",[t._v("县看下普通组件生命周期")]),t._v(" "),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/programming/reactjs_lifecycle_01.png",alt:""}})]),t._v(" "),n("p",[t._v("实际项目中，会将api调用获取数据逻辑放在didmount里面（为什么不放在willmount？好像有问题），所以获取数据后必然会触发setSate数据变动操作，从而有一次引发render，这都是正常的，但是因为高人哥们包装的不算太好，造成render完之后Seperatetable又多了一次render，然后windowtable接着触发render，由此循环几次才结束，分析如下")]),t._v(" "),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/programming/reactjs_lifecycle_02.png",alt:""}})]),t._v(" "),n("p",[t._v("此问题还在研究中")]),t._v(" "),n("p",[t._v("willunmount已经被干掉了 https://reactjs.org/docs/react-component.html#componentwillunmount")]),t._v(" "),n("h3",{attrs:{id:"es6"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#es6"}},[t._v("#")]),t._v(" ES6")]),t._v(" "),n("h4",{attrs:{id:"解构属性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解构属性"}},[t._v("#")]),t._v(" 解构属性")]),t._v(" "),n("p",[t._v("https://es6.ruanyifeng.com/#docs/destructuring")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("spread attributes:\nhttps://stackoverflow.com/questions/28452358/what-is-the-meaning-of-this-props-in-reactjs\n<Component x={} y={} z={} />\n=>\nvar props = { x: 1, y: 1, z:1 };\n<Component {...props} />\n")])])]),n("h4",{attrs:{id:"autobinding"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#autobinding"}},[t._v("#")]),t._v(" AutoBinding")]),t._v(" "),n("p",[t._v("https://blog.csdn.net/qq_42817227/article/details/82689047")]),t._v(" "),n("p",[t._v("https://www.cnblogs.com/daidechong/p/11586448.html")]),t._v(" "),n("p",[t._v("In React components declared as ES6 classes, methods follow the same semantics as regular ES6 classes. This means that they don’t automatically bind "),n("code",[t._v("this")]),t._v(" to the instance. You’ll have to explicitly use "),n("code",[t._v(".bind(this)")]),t._v(" in the constructor:")]),t._v(" "),n("p",[t._v("This means writing ES6 classes comes with a little more boilerplate code "),n("code",[t._v("this.handleClick = this.handleClick.bind(this);")]),t._v(" for event handlers, but the upside is slightly better performance in large applications.")]),t._v(" "),n("p",[t._v("If the boilerplate code is too unattractive to you, you may enable the "),n("strong",[t._v("experimental")]),t._v(" "),n("a",{attrs:{href:"https://babeljs.io/docs/plugins/transform-class-properties/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Class Properties"),n("OutboundLink")],1),t._v(" syntax proposal with Babel:")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SayHello")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("message")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This line is important!")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleClick "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// WARNING: this syntax is experimental!")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Using an arrow here binds the method:")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleClick")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nPlease note that the syntax above is experimental and the syntax may change"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" or the proposal might not make it into the language"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\nIf you’d rather play it safe"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" you have a few options"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Bind methods "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the constructor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("即用第一种方法\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Use arrow functions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("g"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" 这种也不错\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Keep using createReactClass"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" 这个就是说用原生reactjs without "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ES6")]),t._v("\n")])])]),n("h4",{attrs:{id:"export"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#export"}},[t._v("#")]),t._v(" export")]),t._v(" "),n("p",[t._v("基本")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("named export vs default export:\nhttps://developer.mozilla.org/en-US/docs/web/javascript/reference/statements/export\n\n普通模式：\nexport defalt new BirdStore();\n导出class? export defalt <classname>;\n单例模式\nconst store = new BirdStore();\nexport default store;\n\nimport store from '../xxx/store'\nclass TestStore {\n  imported_store = store\n  mystore = new MyStore()\n}\nexport default new TestStore()\n\n\n")])])]),n("p",[t._v("逻辑代码中调用UI,如弹窗")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("## \nimport Modal from '/mymodal' //默认是寻找到/mymodal/index.js\n\n## /mymodal/index.js\nimport Modal from './Modal'\nimport { close, open, information, withInfo, withSuccess, withError, withWarn, withConfirm } from './fake'\nimport './modal.less'\n\nModal.open = open\nModal.close = close\nModal.info = function infoFn (props) {\n  return information(withInfo(props))\n}\nModal.error = function errorFn (props) {\n  return information(withError(props))\n}\nexport default Modal\n\n## fake.js\nfunction createDiv (props) {\n  const { id } = props\n  let div = getDiv(props.id)\n  if (div) {\n    return div\n  }\n  div = document.createElement('div')\n  document.body.appendChild(div)\n  // div.className = 'modal'\n\n  containers[id] = { div }\n\n  return div\n}\nexport const open = (props, isPortal = false) => {\n  const { content, onClose } = props\n  const div = createDiv(props)\n\n  const scrollWidth = window.innerWidth - document.body.clientWidth\n  const doc = document.body.parentNode\n  doc.style.overflow = 'hidden'\n  doc.style.paddingRight = `${scrollWidth}px`\n\n  const handleClose = () => {\n    if (onClose) {\n      onClose()\n    }\n    close(props)\n  }\n\n  const modal = (\n    <Panel\n      visible={true}\n      {...props}\n      onClose={handleClose}>\n      {content}\n    </Panel>\n  )\n  ReactDOM.render(modal, div)\n  return null\n}\n\nexport const information = (props, isPortal = false) => {\n  const { content, onClose } = props\n  const div = createDiv(props)\n\n  const scrollWidth = window.innerWidth - document.body.clientWidth\n  const doc = document.body.parentNode\n  doc.style.overflow = 'hidden'\n  doc.style.paddingRight = `${scrollWidth}px`\n\n  const handleClose = () => {\n    if (onClose) {\n      onClose()\n    }\n    close(props)\n  }\n\n  const modal = (\n    <div>\n      <div className=\"ant-modal-mask\"/>\n      <div className={'ant-modal-wrap '} role={'dialog'}>\n        <div role=\"document\" className=\"ant-modal ant-modal-confirm ant-modal-confirm-confirm\"\n          style={{ display: 'block', width: 416 }}>\n          <div className={'ant-modal-content'}>\n            <div className=\"ant-modal-body\">\n              <div className=\"ant-modal-confirm-body-wrapper\">\n                <div className=\"ant-modal-confirm-body\">\n                  {props.icon}\n                  <span className=\"ant-modal-confirm-title\">{props.title || ''}</span>\n                  <div className=\"ant-modal-confirm-content\">{props.content || ''}</div>\n                </div>\n                <div className=\"ant-modal-confirm-btns\">\n                  {props.okCancel && <button type=\"button\" className=\"ant-btn\" onClick={() => {\n                    handleClose()\n                    props.onCancel && props.onCancel()\n                  }}><span>{props.cancelText || 'cancel'}</span></button>}\n                  <button type=\"button\" className=\"ant-btn ant-btn-primary\" onClick={() => {\n                    handleClose()\n                    props.onOk && props.onOk()\n                  }}><span>{props.okText || 'confirm'}</span></button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n  ReactDOM.render(modal, div)\n  return null\n}\n\n")])])]),n("h4",{attrs:{id:"其他常用语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#其他常用语法"}},[t._v("#")]),t._v(" 其他常用语法")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("we used the ES6 computed property name syntax to update the state key\nhttps://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Object_initializer#Computed_property_names\nthis.setState({\n  [name]: value\n});\nequivalent to this ES5 code:\nvar partialState = {};\npartialState[name] = value;\nthis.setState(partialState);\n\nimport时候 {}\nconst { BirdStore } = this.props;\n==\nconst BirdStore = this.props.BirdStore;\n\n")])])]),n("h3",{attrs:{id:"jsx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jsx"}},[t._v("#")]),t._v(" JSX")]),t._v(" "),n("p",[t._v("为什么用JSX?")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("React embraces the fact that rendering logic is inherently coupled with other UI logic: how events are handled, how the state changes over time, and how the data is prepared for display.")])]),t._v(" "),n("li",[n("p",[t._v("Prevents Injection Attacks")])])]),t._v(" "),n("p",[t._v("By default, React DOM escape any values embedded in JSX before rendering them. Thus it ensures that you can never inject anything that’s not explicitly written in your application. Everything is converted to a string before being rendered. This helps prevent "),n("a",{attrs:{href:"https://en.wikipedia.org/wiki/Cross-site_scripting",target:"_blank",rel:"noopener noreferrer"}},[t._v("XSS (cross-site-scripting)"),n("OutboundLink")],1),t._v(" attacks.")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const title = response.potentiallyMaliciousInput;\n// This is safe:\nconst element = <h1>{title}</h1>;\n")])])]),n("ul",[n("li",[n("p",[t._v("Each JSX element is just syntactic sugar for calling "),n("code",[t._v("React.createElement(component, props, ...children)")]),t._v(". So, anything you can do with JSX can also be done with just plain JavaScript, If you’re curious to see more examples of how JSX is converted to JavaScript, you can try out "),n("a",{attrs:{href:"https://babeljs.io/repl/#?presets=react&code_lz=GYVwdgxgLglg9mABACwKYBt1wBQEpEDeAUIogE6pQhlIA8AJjAG4B8AEhlogO5xnr0AhLQD0jVgG4iAXyJA",target:"_blank",rel:"noopener noreferrer"}},[t._v("the online Babel compiler"),n("OutboundLink")],1),t._v(".")]),t._v(" "),n("p",[t._v("Babel compiles JSX down to "),n("code",[t._v("React.createElement()")]),t._v(" calls.")])]),t._v(" "),n("li",[n("p",[t._v("React DOM uses camelCase property naming convention instead of HTML attribute names. For example, "),n("code",[t._v("tabindex")]),t._v(" becomes "),n("code",[t._v("tabIndex")]),t._v(" in JSX. The attribute "),n("code",[t._v("class")]),t._v(" is also written as "),n("code",[t._v("className")]),t._v(" since "),n("code",[t._v("class")]),t._v(" is a reserved word in JavaScript")])])]),t._v(" "),n("p",[n("a",{attrs:{href:"https://reactjs.org/docs/jsx-in-depth.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("in-depth tutorial on JSX"),n("OutboundLink")],1),t._v(".")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("-------------------------------------------------------------\n--- react使用首字母大小写的惯例区分本地组件和html标签\n-------------------------------------------------------------\n<Person/>(这是react组件)\n<p>这是html标签</p>\n\n-------------------------------------------------------------\n--- jsx transform\n-------------------------------------------------------------\nReact JSX从类似于xml的语法转换成javascript。xml的元素，属性和子节点转换成参数传入React.createElement方法\n//使用JSX\nReact.render(\n    <label className=\"xxx\" htmlFor=\"input\">content</label>,\n    document.getElementById('example')\n);\n\n//不使用JSX\nReact.render(\n    React.createElement('label', {className: 'xxx', htmlFor: 'input'}, 'content'),\n    document.getElementById('example')\n);\n\nvar Nav, Profile;\n// 输入(JSX):\nvar app = <Nav color=\"blue\"><Profile>click</Profile></Nav>;\n// 转换后(JS):\nvar app = React.createElement(\n  Nav,\n  {color:\"blue\"},\n  React.createElement(Profile, null, \"click\")\n);\n-------------------------------------------------------------\n--- JavaScript 表达式\n-------------------------------------------------------------\n使用JavaScript表达式为一个属性值，将表达式写在一对花括号（{}）中代替双引号（“”）。\n\n// Input (JSX):\nvar person = <Person name={window.isLoggedIn ? window.name : ''} />;\n// Output (JS):\nvar person = React.createElement(\n  Person,\n  {name: window.isLoggedIn ? window.name : ''}\n);\n\n-------------------------------------------------------------\n--- 布尔型属性\n-------------------------------------------------------------\n// These two are equivalent in JSX for disabling a button\n<input type=\"button\" disabled />;\n<input type=\"button\" disabled={true} />;\n\n// And these two are equivalent in JSX for not disabling a button\n<input type=\"button\" />;\n<input type=\"button\" disabled={false} />;\n\n-------------------------------------------------------------\n--- 子表达式\n-------------------------------------------------------------\t\n// Input (JSX):\nvar content = <Container>{window.isLoggedIn ? <Nav /> : <Login />}</Container>;\n// Output (JS):\nvar content = React.createElement(\n  Container,\n  null,\n  window.isLoggedIn ? React.createElement(Nav) : React.createElement(Login)\n);\n\n-------------------------------------------------------------\n--- 注释\n-------------------------------------------------------------\n在JSX添加注释是很容易的；他们只是JS表达式。当你在一个标签区域内，你只需要小心地把{ }放在注释的周围\n\nvar content = (\n  <Nav>\n    {/* 我是注释, 使用{} 包围着*/}\n    <Person\n      /* 我是\n         多行\n         注释*/\n      name={window.isLoggedIn ? window.name : ''} //结尾处注释\n    />\n  </Nav>\n);\n\n-------------------------------------------------------------\n--- JSX解构赋值\n-------------------------------------------------------------\n如果提前就知道了组件的属性的话，写起来很容易。例如component组件有两个动态的属性foo和bar\nvar component = <Component foo={x} bar={y} />;\n而实际上，有些属性可能是后续添加的，我们没办法一开始就确定，我们可能会写出下面不好的代码：\nvar component = <Component />;\ncomponent.props.foo = x; // bad\ncomponent.props.bar = y; // also bad\n这样写是错误的，因为我们手动直接添加的属性React后续没办法检查到属性类型错误，也就是说，当我们手动添加的属性发生类型错误时，在控制台是看不到错误信息的。\n在React的设定中，初始化完props后，props是不可变的。改变props会引起无法想象的后果。\n为了解决这个问题，React引入了解构属性，其实就是es6的语法实现具体看\nhttps://es6.ruanyifeng.com/#docs/destructuring\n\nvar props = {};\nprops.foo = x;\nprops.bar = y;\nvar component = <Component {...props} />;\n\n你可以使用结构赋值方式和普通的方式混合使用，但如果碰到同名的属性的时候后者覆盖前者的属性如下\n var props = { foo: 'default' };\n var component = <Component {...props} foo={'override'} />;\n console.log(component.props.foo); // 'override'\n \n-------------------------------------------------------------\n--- JSX踩坑\n-------------------------------------------------------------\n1. HTML 实体需要采用\n使用unicode编码；\nString.fromCharCode(183)；\n使用属性：dangerouslySetInnerHTML如：<div dangerouslySetInnerHTML={{__html: 'First &middot; Second'}} />\n否则：\n｛/*\n正常显示\nFirst · Second\n*/｝\n<div>First &middot; Second</div>\n｛/*\n显示异常\nFirst &middot; Second\n*/｝\n<div>{'First &middot; Second'}</div>\n\n2.自定义HTML属性\n如果在编写React过程中使用了自定义属性，React不会渲染的\nReact.createClass({\n\trender: function(){\n\t\treturn (\n\t\t<input type=\"text\" placeholder=\"test\" dd=\"test\"/>\n\t\t)\n\t}\n})\n要想使用请在属性前面添加data-\n\n3.style属性\n在React中写行内样式时，需要写在双大括号中（{{}}），不能采用引号的书写方式\n\n")])])]),n("p",[t._v("style举例：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("render () {\n    const { appInfoStore } = this.props\n    return (\n      <Modal\n        visible={appInfoStore.notificationBell.isShowDetailsModal}\n        title=\"Notification List\"\n        cancelButtonText={CommonItem.getLocalLang('close')}\n        onClose={this.onCancelClick}\n        onCancelClick={this.onCancelClick}\n        width={ 800 }>\n        <div>\n          <Table\n            fixed=\"both\"\n            isModalTable={true}\n            onGridItemClick={this.onGridItemClick}\n            columns={toJS(appInfoStore.notificationTableColumns)}\n            data={toJS(appInfoStore.notificationBell.data)}\n            style={{ marginLeft: 18, marginBottom: 15 }}/>\n        </div>\n      </Modal>\n    )\n  }\n  \n## width={ 800 }\nimport React, { createRef, PureComponent } from 'react'\nimport { Scrollbars } from 'react-custom-scrollbars'\n\nimport './modal.less'\nimport { CloseOutlined, LoadingOutlined } from '@ant-design/icons'\n\nclass Panel extends PureComponent {\n  static defaultProps = {\n    visible: false,\n    cancelLoadingVisible: false,\n    confirmLoadingVisible: false,\n    hideCloseButton: false,\n    title: '',\n    width: 'auto',\n    cancelButtonText: 'Cancel',\n    confirmButtonText: 'Confirm',\n    footerButtons: null,\n    onClose: () => {},\n    onCancelClick: null,\n    onConfirmClick: null\n  }\n\n  render () {\n    debugger\n    const {\n      visible, title, width,\n      cancelButtonText, confirmButtonText,\n      onClose, onCancelClick, onConfirmClick, hideCloseButton,\n      footerButtons, children, cancelLoadingVisible, confirmLoadingVisible\n    } = this.props\n    if (!visible) {\n      return null\n    }\n    return (\n      <div className=\"modal\">\n        <div\n          style={{ width }}\t等同于 style={{ width: width }} 同名可以被简写\n          className=\"modal-inner\">\n\t\t...............\n        </div>\n      </div>\n    )\n  }\n}\n\n\n## style={{ marginLeft: 18, marginBottom: 15 }}\nclass Table extends PureComponent {\n\n  render () {\n    const {\n      height,\n      columns,\n      value,\n      children,\n      data,\n      style,\n      fixed,\n      width,\n      loadingVisible,\n      loadingContent,\n      verticalAlign,\n      isModalTable,\n      ...others\n    } = this.props\n\n    const { scrollLeft, scrollRight } = this.state\n    const className = classnames(\n      'so-table',\n      'so-table-bordered',\n      'so-table-fixed',\n      scrollLeft > 0 && 'so-table-left-float',\n      scrollRight < 0 && 'so-table-right-float',\n      `so-table-vertical-${verticalAlign}`,\n      this.props.className\n    )\n\n    const props = {\n      ...others,\n      children,\n      fixed,\n      loadingVisible,\n      rowsInView: this.getRowsInView(),\n      height,\n      isModalTable,\n      width,\n      data,\n      columns\n    }\n    const newStyle = Object.assign({}, style)\n    debugger // newStyle: {marginLeft: 18, marginBottom: 15}\n    return (\n      <div\n        className={className}\n        ref={this.bindTable}\n        style={newStyle}>\n        <SeperateTable {...props} height={newStyle.height}/>\n        <Loading content={loadingContent || 'Loading...'} visible={loadingVisible}/>\n      </div>\n    )\n  }\n}\n")])])]),n("h3",{attrs:{id:"code-bundling-splitting"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#code-bundling-splitting"}},[t._v("#")]),t._v(" Code Bundling&Splitting")]),t._v(" "),n("p",[t._v("Effective Code Splitting in React: A Practical Guide: https://hackernoon.com/effective-code-splitting-in-react-a-practical-guide-2195359d5d49")]),t._v(" "),n("p",[n("strong",[t._v("Bundling")])]),t._v(" "),n("p",[t._v("Most React apps will have their files “bundled” using tools like "),n("a",{attrs:{href:"https://webpack.js.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack"),n("OutboundLink")],1),t._v(", "),n("a",{attrs:{href:"https://rollupjs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Rollup"),n("OutboundLink")],1),t._v(" or "),n("a",{attrs:{href:"http://browserify.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Browserify"),n("OutboundLink")],1),t._v(". Bundling is the process of following imported files and merging them into a single file: a “bundle”. This bundle can then be included on a webpage to load an entire app at once.")]),t._v(" "),n("p",[t._v("If you’re using "),n("a",{attrs:{href:"https://create-react-app.dev/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Create React App"),n("OutboundLink")],1),t._v(", "),n("a",{attrs:{href:"https://nextjs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Next.js"),n("OutboundLink")],1),t._v(", "),n("a",{attrs:{href:"https://www.gatsbyjs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Gatsby"),n("OutboundLink")],1),t._v(", or a similar tool, you will have a Webpack setup out of the box to bundle your app.")]),t._v(" "),n("p",[t._v("If you aren’t, you’ll need to setup bundling yourself. For example, see the "),n("a",{attrs:{href:"https://webpack.js.org/guides/installation/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Installation"),n("OutboundLink")],1),t._v(" and "),n("a",{attrs:{href:"https://webpack.js.org/guides/getting-started/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Getting Started"),n("OutboundLink")],1),t._v(" guides on the Webpack docs.")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// math.js\nexport function add(a, b) {\n  return a + b;\n}\n\n// app.js\nimport { add } from './math.js';\n\nconsole.log(add(16, 26)); // 42\n\n//bundle result:\nfunction add(a, b) {\n  return a + b;\n}\nconsole.log(add(16, 26)); // 42\n\n")])])]),n("p",[n("strong",[t._v("Splitting")])]),t._v(" "),n("p",[t._v("Bundling is great, but as your app grows, your bundle will grow too. Especially if you are including large third-party libraries.")]),t._v(" "),n("p",[t._v("To avoid winding up with a large bundle, it’s good to get ahead of the problem and start “splitting” your bundle. Code-Splitting is a feature supported by bundlers like "),n("a",{attrs:{href:"https://webpack.js.org/guides/code-splitting/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack"),n("OutboundLink")],1),t._v(", "),n("a",{attrs:{href:"https://rollupjs.org/guide/en/#code-splitting",target:"_blank",rel:"noopener noreferrer"}},[t._v("Rollup"),n("OutboundLink")],1),t._v(" and Browserify (via "),n("a",{attrs:{href:"https://github.com/browserify/factor-bundle",target:"_blank",rel:"noopener noreferrer"}},[t._v("factor-bundle"),n("OutboundLink")],1),t._v(") which can create multiple bundles that can be dynamically loaded at runtime.")]),t._v(" "),n("p",[t._v("Code-splitting your app can help you “lazy-load” just the things that are currently needed by the user, which can dramatically improve the performance of your app.")]),t._v(" "),n("p",[t._v("If you’re using Create React App, this is already configured for you and you can "),n("a",{attrs:{href:"https://facebook.github.io/create-react-app/docs/code-splitting",target:"_blank",rel:"noopener noreferrer"}},[t._v("start using it"),n("OutboundLink")],1),t._v(" immediately. It’s also supported out of the box in "),n("a",{attrs:{href:"https://nextjs.org/docs/advanced-features/dynamic-import",target:"_blank",rel:"noopener noreferrer"}},[t._v("Next.js"),n("OutboundLink")],1),t._v(".")]),t._v(" "),n("p",[t._v("If you’re setting up Webpack yourself, you’ll probably want to read Webpack’s "),n("a",{attrs:{href:"https://webpack.js.org/guides/code-splitting/",target:"_blank",rel:"noopener noreferrer"}},[t._v("guide on code splitting"),n("OutboundLink")],1),t._v(". Your Webpack config should look vaguely "),n("a",{attrs:{href:"https://gist.github.com/gaearon/ca6e803f5c604d37468b0091d9959269",target:"_blank",rel:"noopener noreferrer"}},[t._v("like this"),n("OutboundLink")],1),t._v(".")]),t._v(" "),n("p",[t._v("When using "),n("a",{attrs:{href:"https://babeljs.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Babel"),n("OutboundLink")],1),t._v(", you’ll need to make sure that Babel can parse the dynamic import syntax but is not transforming it. For that you will need "),n("a",{attrs:{href:"https://yarnpkg.com/en/package/babel-plugin-syntax-dynamic-import",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-plugin-syntax-dynamic-import"),n("OutboundLink")],1),t._v(".")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('import("./math").then(math => {\n  console.log(math.add(16, 26));\n});\n')])])]),n("p",[n("strong",[t._v("Lazy Loadding")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("before:\nimport OtherComponent from './OtherComponent';\n\nafter:\nconst OtherComponent = React.lazy(() => import('./OtherComponent'));\nThis will automatically load the bundle containing the OtherComponent when this component is first rendered.\n\nThe lazy component should then be rendered inside a Suspense component, which allows us to show some fallback content (such as a loading indicator) while we’re waiting for the lazy component to load.\n\nimport React, { Suspense } from 'react';\n\nconst OtherComponent = React.lazy(() => import('./OtherComponent'));\n\nfunction MyComponent() {\n  return (\n    <div>\n      <Suspense fallback={<div>Loading...</div>}>\n        <OtherComponent />\n      </Suspense>\n    </div>\n  );\n}\n\nDeciding where in your app to introduce code splitting can be a bit tricky. You want to make sure you choose places that will split bundles evenly, but won’t disrupt the user experience.A good place to start is with routes. \n\nimport React, { Suspense, lazy } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\n\nconst Home = lazy(() => import('./routes/Home'));\nconst About = lazy(() => import('./routes/About'));\n\nconst App = () => (\n  <Router>\n    <Suspense fallback={<div>Loading...</div>}>\n      <Switch>\n        <Route exact path=\"/\" component={Home}/>\n        <Route path=\"/about\" component={About}/>\n      </Switch>\n    </Suspense>\n  </Router>\n);\n\nReact.lazy currently only supports default exports. If the module you want to import uses named exports, you can create an intermediate module that reexports it as the default. This ensures that tree shaking keeps working and that you don’t pull in unused components.\n\n// ManyComponents.js\nexport const MyComponent = /* ... */;\nexport const MyUnusedComponent = /* ... */;\n// MyComponent.js\nexport { MyComponent as default } from \"./ManyComponents.js\";\n// MyApp.js\nimport React, { lazy } from 'react';\nconst MyComponent = lazy(() => import(\"./MyComponent.js\"));\n")])])]),n("h3",{attrs:{id:"typescript"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#typescript"}},[t._v("#")]),t._v(" TypeScript")]),t._v(" "),n("p",[t._v("从 React 迁移到 TypeScript：忍受了 15 年的 JavaScript 错误从此走远")]),t._v(" "),n("p",[t._v("https://mp.weixin.qq.com/s/EvOkI-g3VCzzzuh0Cc4AkA")]),t._v(" "),n("h2",{attrs:{id:"_3-troubleshooting"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-troubleshooting"}},[t._v("#")]),t._v(" 3. Troubleshooting")]),t._v(" "),n("p",[n("strong",[t._v("?# Attempted import error: '' is not exported from")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("since it's a default export, and not a named export.\nimport { combineReducers } from '../../store/reducers';\nshould be\nimport combineReducers from '../../store/reducers';\n")])])]),n("p",[t._v("https://stackoverflow.com/questions/53328408/receiving-attempted-import-error-in-react-app")]),t._v(" "),n("p",[n("strong",[t._v("?# 非单例模式（不同实例）引起的一次问题排查")])]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("------------------------------------------\nfolderA/TableA:\n------------------------------------------\nimport ViewDetail from '../folderB/ViewDetail'\n\n@inject('aStore')\n@observer\nclass TableA extends Component {\nonXXClick = (controlData) => {\n    const { aStore } = this.props\n\taStore.bAnotherStore.displayDetailsModal(controlData)\n}\nrender () {\n    const { aStore } = this.props\n    return [\n\t\t<ViewDetail key=\"details\"/>,\n\t\txxxx\n   ]\n  }\n}\n------------------------------------------\nfolderA/AStore:\n------------------------------------------\nimport { BAnotherStore } from '../folderB/BAnotherStore'\nclass AStore {\n  bAnotherStore = new BAnotherStore()\n}\nexport default new AStore()\n\n------------------------------------------\nfolderB/TableB:\n------------------------------------------\nimport ViewDetail from './ViewDetail'\n@inject('bStore')\n@observer\nclass TableB extends React.Component {\nrender () {\n    const { bStore } = this.props\n    return [\n\t\t<ViewDetail key=\"details\"/>,\n\t\txxxx\n   ]\n  }\n}\nexport default TableB\n\n------------------------------------------\nfolderB/bStore:\n------------------------------------------\nimport { BAnotherStore } from './bAnotherStore'\nclass BStore {\n\tbAnotherStore\n\tconstructor () {\n    \tthis.bAnotherStore = new BAnotherStore()\n    }\n}\nexport default new BStore()\n\n------------------------------------------\nfolderB/bAnotherStore:\n------------------------------------------\nexport class BAnotherStore {\n\t@observable isVisible = false\n\t@observable detailsData = {}\n\t@action.bound\n\tdisplayDetailsModal (controlData) {\n    \tthis.isVisible = !this.isVisible\n    \tif (this.isVisible) {\n      \t\tthis.detailsData = JSON.parse(controlData.content)\n    }\n  }\n}\n------------------------------------------\nfolderB/ViewDetail:\n------------------------------------------\n@inject('bStore')\n@observer\nclass ViewDetail extends Component {\nrender () {\n      const { bStore } = this.props\n      if (!bStore.bAnotherStore.isVisible) {\n        return null\n      }\n      const entity = bStore.bAnotherStore.detailsData\n      return (\n        <Modal\n          visible={true}\n          <DetailPart title={'Basic Information'} partArray={[\n            { title: 'Name', value: entity.name },\n            { title: 'Status', value: entity.status }\n          ]}/>\n        </Modal>\n      )\n    }\n}\n\nexport default Form.create({ name: 'details' })(ViewDetail)\n\n\nindex.js:\nimport aStore from '../folderA/aStore'\nimport bStore from '../folderB/bStore'\nReactDOM.render(\n  <Provider\n  \taStore={aStore}\n    bStore={bStore}\n        <App/>\n  </Provider>,\n  document.getElementById('root')\n)\n\nApp.jsx:\nimport TableA from '../folderA/TableA'\nimport TableB from '../folderB/TableB'\nclass App extends Component {\n    render () {\n    \t<TableA/>\n\t\t<TableB/>\n    }\n}\n\n      \n问题就是：\nTableA引用的页面是folderB/ViewDetail，folderB/ViewDetail所inject的bStore实例是index.js传入的bStore，index.js的bStore是通过import folderB/bStore而来的一个单例，\n但是 TableA 调用的aStore.bAnotherStore并不是前面的实例bStore的成员变量，而是自己在构造aStore的时候自己new的！\n所以换言之，ViewDetail页面渲染用的实例 和 TableA更改状态的实例是两回事！\n更改方法很简单：\nfolderA/AStore:\nimport { BAnotherStore } from '../folderB/BAnotherStore' //注意这里加大括号是因为BAnotherStore是name export的class\nclass AStore {\n  bAnotherStore = new BAnotherStore()\n}\n=>\nimport bStore from '../folderB/bStore' //注意这里不能加大括号，因为是Default export的实例\nclass AStore {\n  bStore = bStore\n}\n以及：           \nfolderA/TableA:\nonXXClick = (controlData) => {\n    const { aStore } = this.props\n\taStore.bAnotherStore.displayDetailsModal(controlData)\n}\n=>\nonXXClick = (controlData) => {\n    const { aStore } = this.props\n\taStore.bStore.bAnotherStore.displayDetailsModal(controlData)\n}              \n")])])]),n("disqus")],1)}),[],!1,null,null,null);e.default=s.exports}}]);
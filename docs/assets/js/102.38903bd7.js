(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{533:function(a,e,n){"use strict";n.r(e);var t=n(56),r=Object(t.a)({},(function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h2",{attrs:{id:"jdk"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jdk"}},[a._v("#")]),a._v(" jdk")]),a._v(" "),n("p",[a._v("Jdk vs Openjdk")]),a._v(" "),n("p",[a._v("https://www.oracle.com/technetwork/java/javase/downloads/index.html\narchive\nhttps://www.oracle.com/technetwork/java/javase/downloads/java-archive-javase8-2177648.html")]),a._v(" "),n("p",[a._v("Runtime source: rt.jar\t/java/jre18XXX/lib")]),a._v(" "),n("p",[a._v("No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?\nhttps://stackoverflow.com/questions/19655184/no-compiler-is-provided-in-this-environment-perhaps-you-are-running-on-a-jre-ra")]),a._v(" "),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/java/java00.png",alt:"https://docs.oracle.com/javase/8/docs/"}})]),a._v(" "),n("h2",{attrs:{id:"jdk-install"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jdk-install"}},[a._v("#")]),a._v(" jdk install")]),a._v(" "),n("p",[a._v("difference between JAVA_HOME and update-alternatives")]),a._v(" "),n("p",[a._v("https://unix.stackexchange.com/questions/123412/what-is-the-difference-between-java-home-and-update-alternatives")]),a._v(" "),n("p",[a._v("update-java-alternatives vs update-alternatives --config java")]),a._v(" "),n("p",[a._v("https://askubuntu.com/questions/315646/update-java-alternatives-vs-update-alternatives-config-java")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("-----------------------------------------\n--- java home:\n-----------------------------------------\nvim ~/.bash_profile\n\nexport JAVA_HOME=/opt/jdk1.8.0_221\nPATH=$PATH:$HOME/.local/bin:$HOME/bin:$JAVA_HOME/bin\nexport PATH\n\nsource ~/.bash_profile\n-----------------------------------------\n--- UBUNTU:\n-----------------------------------------\nsudo add-apt-repository ppa:openjdk-r/ppa\nsudo apt-get update\nsudo apt-get install openjdk-8-jdk\napt-cache search jdk\nexport JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64/\nexport PATH=$PATH:$JAVA_HOME/bin\njava -version\n")])])]),n("h3",{attrs:{id:"java-home"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#java-home"}},[a._v("#")]),a._v(" $JAVA_HOME")]),a._v(" "),n("p",[n("code",[a._v("$JAVA_HOME")]),a._v(" is where software can be told to look through the use of an environment variable. Adding it to the "),n("code",[a._v("$PATH")]),a._v(" simply adds the executables present in "),n("code",[a._v("$JAVA_HOME/bin")]),a._v(" to your "),n("code",[a._v("$PATH")]),a._v(". This is sometimes necessary for certain applications.")]),a._v(" "),n("p",[a._v("The 2 mechanisms are related but can be used together or independent  of each other, it really depends on the Java application which mechanism is preferable.")]),a._v(" "),n("h3",{attrs:{id:"alternatives"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#alternatives"}},[a._v("#")]),a._v(" Alternatives")]),a._v(" "),n("p",[a._v("Alternatives is a tool that will manage the locations of the installed software using links under the control of the "),n("code",[a._v("alternatives")]),a._v(" tool.")]),a._v(" "),n("p",[a._v("These links are ultimately managed under "),n("code",[a._v("/etc/alternatives")]),a._v(" with intermediate links created under a directory in "),n("code",[a._v("$PATH")]),a._v(", typically "),n("code",[a._v("/usr/bin")]),a._v(".")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("查看系统安装的所有java版本\nupdate-alternatives --config java\n\n\n$ update-alternatives --config java\n\nThere are 2 programs which provide 'java'.\n\n  Selection    Command\n-----------------------------------------------\n   1           java-1.8.0-openjdk.x86_64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.232.b09-0.el7_7.x86_64-debug/jre/bin/java)\n*+ 2           java-1.8.0-openjdk.x86_64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.232.b09-0.el7_7.x86_64/jre/bin/java)\n\nEnter to keep the current selection[+], or type selection number:\nfailed to create /var/lib/alternatives/java.new: Permission denied\n$ which java\n/usr/bin/java\n$ ll /usr/bin/java\nlrwxrwxrwx 1 root root 22 Nov 25  2019 /usr/bin/java -> /etc/alternatives/java\n$ ll /etc/alternatives/java\nlrwxrwxrwx 1 root root 73 Nov 25  2019 /etc/alternatives/java -> /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.232.b09-0.el7_7.x86_64/jre/bin/java\n")])])]),n("h2",{attrs:{id:"jdk-troubleshooting"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jdk-troubleshooting"}},[a._v("#")]),a._v(" jdk troubleshooting")]),a._v(" "),n("h3",{attrs:{id:"验证码无法显示"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#验证码无法显示"}},[a._v("#")]),a._v(" 验证码无法显示")]),a._v(" "),n("p",[a._v("，需要输出完整的错误日志")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v('使用的是log4j2\n\nlogger.error("exception: {} " , e.getMessage());\n改为\nlogger.error("exception: {} " , e);\n\nconfig加上 %ex{full}：\nPatternLayout:\n  pattern: "%-d{yyyy-MM-dd HH:mm:ss.SSS}-[%l]-[%p] ${PID:-} %m%n - %ex{full}"\n\n- java.lang.NullPointerException\n        at sun.awt.FontConfiguration.getVersion(FontConfiguration.java:1264)\n        at sun.awt.FontConfiguration.readFontConfigFile(FontConfiguration.java:219)\n        at sun.awt.FontConfiguration.init(FontConfiguration.java:107)\n        at sun.awt.X11FontManager.createFontConfiguration(X11FontManager.java:776)\n        at sun.font.SunFontManager$2.run(SunFontManager.java:431)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at sun.font.SunFontManager.<init>(SunFontManager.java:376)\n        at sun.awt.X11FontManager.<init>(X11FontManager.java:57)\n')])])]),n("p",[a._v("搜索openjdk sun.awt.FontConfiguration.getVersion nullpointer基本都是：")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("yum install fontconfig\nfc-cache --force\n")])])]),n("p",[a._v("去到openjdk官网")]),a._v(" "),n("p",[a._v("https://github.com/openjdk/jdk/search?q=FontConfiguration")]),a._v(" "),n("p",[a._v("没有人反应有问题，说明还是系统的问题")]),a._v(" "),n("p",[a._v("从")]),a._v(" "),n("p",[a._v("https://stackoverflow.com/questions/30626136/cannot-load-font-in-jre-8/50802170")]),a._v(" "),n("p",[a._v("得到启发")]),a._v(" "),n("p",[a._v("Also one might need to install at least one font ("),n("code",[a._v("dejavu")]),a._v(", "),n("code",[a._v("liberation")]),a._v(", etc).")]),a._v(" "),n("p",[a._v("应该是找不到系统上任何字体")]),a._v(" "),n("p",[a._v("对比了一个正常的环境，发现有")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("[vm2-devclr-v08@SG/home/clear]$ll /usr/share/fonts/\ntotal 4\ndrwxr-xr-x 2 root root 4096 Nov 25  2019 dejavu\n")])])]),n("p",[a._v("但是另外还有一个可以工作的正常环境，里面并没有上述任何字体，")]),a._v(" "),n("p",[a._v("然后又看到")]),a._v(" "),n("p",[a._v("https://docs.oracle.com/javase/9/intl/font-configuration-files.htm")]),a._v(" "),n("p",[a._v("https://docs.oracle.com/javase/8/docs/technotes/guides/intl/fontconfig.html")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v('[vm2-devclr-v05@SG/root]#find / -name "fontconfig*"\n/var/cache/fontconfig\n/usr/lib64/girepository-1.0/fontconfig-2.0.typelib\n/usr/share/doc/fontconfig-2.10.95\n/usr/share/doc/fontconfig-2.10.95/fontconfig-user.html\n/usr/share/doc/fontconfig-2.10.95/fontconfig-user.txt\n/usr/share/fontconfig\n/usr/share/xml/fontconfig\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.RedHat.5.bfc\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.RedHat.5.properties.src\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.RedHat.6.bfc\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.RedHat.6.properties.src\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.SuSE.10.bfc\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.SuSE.10.properties.src\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.SuSE.11.bfc\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.SuSE.11.properties.src\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.Turbo.bfc\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.Turbo.properties.src\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.bfc\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.properties.src\n\n]#update-alternatives --config java\n\nThere are 3 programs which provide \'java\'.\n\n  Selection    Command\n-----------------------------------------------\n   1           /usr/java/jre1.8.0_221-amd64/bin/java\n   2           java-11-openjdk.x86_64 (/usr/lib/jvm/java-11-openjdk-11.0.5.10-0.el7_7.x86_64/bin/java)\n*+ 3           java-1.8.0-openjdk.x86_64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.232.b09-0.el7_7.x86_64/jre/bin/java)\n\n#echo $JAVA_HOME\n/apps/dependency/java-se-8u40-ri\n#echo $PATH\n/apps/dependency/java-se-8u40-ri/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin\n#which java\n/apps/dependency/java-se-8u40-ri/bin/java\n#java -version\nopenjdk version "1.8.0_40"\nOpenJDK Runtime Environment (build 1.8.0_40-b25)\nOpenJDK 64-Bit Server VM (build 25.40-b25, mixed mode)\n\nfind / -name "java-1.8.0-openjdk*"\n\n')])])]),n("p",[a._v("但是也不对，这个jre版本明显跟我们设置的JAVA_HOME版本不一样")]),a._v(" "),n("p",[a._v("最终找到如何在redhat配置fonts")]),a._v(" "),n("p",[a._v("https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/desktop_migration_and_administration_guide/configure-fonts")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("#fc-list : file\n/usr/share/X11/fonts/Type1/c0649bt_.pfb:\n/usr/share/X11/fonts/Type1/UTRG____.pfa:\n/usr/share/X11/fonts/Type1/c0611bt_.pfb:\n/usr/share/X11/fonts/Type1/c0419bt_.pfb:\n/usr/share/X11/fonts/Type1/UTI_____.pfa:\n/usr/share/X11/fonts/Type1/cursor.pfa:\n/usr/share/X11/fonts/Type1/c0633bt_.pfb:\n/usr/share/X11/fonts/Type1/UTB_____.pfa:\n/usr/share/X11/fonts/Type1/c0648bt_.pfb:\n/usr/share/X11/fonts/Type1/c0583bt_.pfb:\n/usr/share/X11/fonts/Type1/UTBI____.pfa:\n/usr/share/X11/fonts/Type1/c0632bt_.pfb:\n/usr/share/X11/fonts/Type1/c0582bt_.pfb:\n\n")])])]),n("p",[a._v("上面是在可以工作的机器上看到的结果，有问题的机器上输出是空，所以查了下redhat linux 7 install X11 fonts，发现这个字体叫做")]),a._v(" "),n("p",[a._v("xorg-x11-fonts ，继而搜索 linux install xorg-x11-fonts，得到")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("yum install xorg-x11-fonts-Type1\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{273:function(e,o,r){"use strict";r.r(o);var t=r(0),a=Object(t.a)({},(function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("p",[e._v("Key Concepts:")]),e._v(" "),r("p",[e._v("ROM: Factory Images")]),e._v(" "),r("blockquote",[r("p",[e._v("Read-only memory (ROM) is a type of non-volatile memory used in computers and other electronic devices. Data stored in ROM cannot be electronically modified after the manufacture of the memory device. Read-only memory is useful for storing software that is rarely changed during the life of the system, also known as firmware.\nhttps://en.wikipedia.org/wiki/Read-only_memory\nROM Images:\nThe contents of ROM chips can be extracted with special hardware devices and relevant controlling software. This practice is common for, as a main example, reading the contents of older video game console cartridges. Another example is making backups of firmware/OS ROMs from older computers or other devices - for archival purposes, as in many cases, the original chips are PROMs and thus at risk of exceeding their usable data lifetime.")])]),e._v(" "),r("blockquote",[r("p",[e._v("The resultant memory dump files are known as ROM images or abbreviated ROMs, and can be used to produce duplicate ROMs - for example to produce new cartridges or as digital files for playing in console emulators. The term ROM image originated when most console games were distributed on cartridges containing ROM chips, but achieved such widespread usage that it is still applied to images of newer games distributed on CD-ROMs or other optical media.")])]),e._v(" "),r("blockquote",[r("p",[e._v("ROM images of commercial games, firmware, etc. usually contain copyrighted software. The unauthorized copying and distribution of copyrighted software is a violation of copyright laws in many jurisdictions, although duplication for backup purposes may be considered fair use depending on location. In any case, there is a thriving community engaged in the distribution and trading of such software and abandonware for preservation/sharing purposes.")])]),e._v(" "),r("p",[e._v("firmeware vs rom:")]),e._v(" "),r("blockquote",[r("p",[e._v("Firmware also called as BIOS (Basic Input Output System) is usually small software package that is permanently installed/written (cannot not be uninstalled normally) on the memory chip that is “Read Only Memory” which mean the hard ware of the system is not allowed to make changes to it. How ever it can be be updated by specific procedure and if done wrongly it can make a machine permanently unusable. This BIOS/Firmware helps the hard ware to communicate with each other and assign their roles. It let the OS (operating system i.e. Windows etc) to be installed to do specific tasks and then other applications to do further complex tasks.\nhttps://www.quora.com/What-is-the-difference-between-firmware-and-a-ROM")])]),e._v(" "),r("p",[e._v("OTA: Over the air, 分为incremental or full ota\nWhat is the difference between Factory Images and Full OTA Images on the Android download site?\nhttps://android.stackexchange.com/questions/207600/what-is-the-difference-between-factory-images-and-full-ota-images-on-the-android")]),e._v(" "),r("blockquote",[r("p",[e._v("Factory images are bootloader compatible images, that is to say, they can be flashed using fastboot or alternative low-level tools or environment.\nFull OTA images are over-the-air updates that are to be flashed via recovery environment. OTA updates are usually either incremental or full. Incremental updates require the user to be running a specific Android build (not just Android version) as they increment in the existing build only. On the other hand, full OTA updates don't require a specific existing build to continue. They are handy when a user hasn't updated their system for a long time and wants to skip successive incremental updates.")])]),e._v(" "),r("p",[e._v("rom又分为官方rom/stock firmware和custom rom")]),e._v(" "),r("blockquote",[r("p",[e._v("Do you mean by installing stock Android? That's where XDA Developers come in, if any devs actually created custom ROMs for Mate 7.\nhttps://forums.hardwarezone.com.sg/mobile-communication-technology-9/how-format-huawei-ascend-mate-7-pure-android-5502081.html")])]),e._v(" "),r("p",[e._v("我的旧手机华为mate7想改造成为一台黑客基站，需要升级android版本，但是要首先root一下，首先我还是清理了下手机，\n卸载了几乎除了系统安装的所有软件，手动删除了很多我认为是垃圾文件夹，估计是不慎删多了，google play打开出错，\n我直接reset工厂模式，然后下面是root的过程")]),e._v(" "),r("p",[e._v("为什么要root")]),e._v(" "),r("blockquote",[r("p",[e._v("Rooting Huawei Ascend Mate 7 means you’re now the god of your Huawei device.\nYou can do everything. you can Increase RAM of Huawei Ascend Mate 7 Device, Play HD Games, Increase Internal Memory, Delete Bloatware Android Apps, but you need to be careful about what you install because some apps can use root permission to damage or brick your Huawei Ascend Mate 7 device.")])]),e._v(" "),r("p",[e._v("一些推荐的app")]),e._v(" "),r("blockquote",[r("p",[e._v("Root Explorer, ES File Explorer, Lucky Patcher, Dumpster, Xposed Framework, Titanium Backup, apps2rom, Bloatfreezer, Link2SD, Android Wi-Fi Tether, Wireless Tether, ShootMe, Dropcap2, Greenify, Root Explorer, ClockworkMod Recovery, AdFree, Adaway, Droid Wall, Orbot, Cache Mate, Droid VNC Server, LBE Privacy Guard, Button Savior, gravitybox, xhangouts, xwhatsapp, Xprivacy, SetCPU, Overclock Widget, ROEHSOFT RAM-EXPANDER, Memory Swapper Free, ClockSync, AdBlock Plus, SuperSU, Titanium Backup, Wakelock Detector, ROM Manager, Quick Boot, LED Hack, TRIM, StickMount, busybox, Viper4Android")])]),e._v(" "),r("p",[e._v("Model: HUAWEI MT7-L09\nCPU: Hisilicon Kirin 925\nRAM: 2.0G\nAndroid Version：4.4.2\nEMUI version：EMUI 3.0")]),e._v(" "),r("p",[e._v("root和unlock bootloader的区别")]),e._v(" "),r("blockquote",[r("p",[e._v("Root是”取得”系统最高权限，你可以自由存取/删除系统档案，也可以增加对于系统的控制能力.\nUnlock Bootloader是解除系统启动加载器（Bootloader）的原厂限制，让用户可以使用到更多的功能（如刷新内核、刷ROM、修改超频….）\nhttps://blog.csdn.net/my_xxh/article/details/51638085")])]),e._v(" "),r("h2",{attrs:{id:"root"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#root"}},[e._v("#")]),e._v(" root")]),e._v(" "),r("p",[e._v("本来是想参照"),r("a",{attrs:{href:"https://huaweiflash.com/how-to-root-huawei-ascend-mate-7/",target:"_blank",rel:"noopener noreferrer"}},[e._v("How to ROOT Huawei Ascend Mate 7"),r("OutboundLink")],1),e._v("，\n结果他这种方法的prerequisite是按照twrp，然后安装twrp的前提是unlock bootloader解锁，然后解锁的申请通道被华为关闭了！\n所以参考解锁的另一种办法"),r("a",{attrs:{href:"http://www.usbmi.com/4280.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("绕过官方unlock code"),r("OutboundLink")],1),e._v(",但是他这种方法的前提是root！循环回来了，\n不过幸运的是，我用了"),r("a",{attrs:{href:"https://www.kingoapp.com/android-root.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("kingo Root"),r("OutboundLink")],1),e._v("，或者用“刷机精灵的一键root”\n一键root成功！")]),e._v(" "),r("p",[e._v("以后不想买华为了，还是买one plus吧！")]),e._v(" "),r("p",[e._v("root本质应该就是在/system/bin/su或者/system/xbin/su下面增加一个superuser")]),e._v(" "),r("h2",{attrs:{id:"解锁手机-unlock-bootloader"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#解锁手机-unlock-bootloader"}},[e._v("#")]),e._v(" 解锁手机 Unlock Bootloader")]),e._v(" "),r("p",[e._v("我们使用ADB命令行获取解锁码，首先下载"),r("a",{attrs:{href:"https://developer.android.google.cn/studio/releases/platform-tools",target:"_blank",rel:"noopener noreferrer"}},[e._v("ADB"),r("OutboundLink")],1),e._v("\nps:本来想使用"),r("a",{attrs:{href:"https://atmb.sm9.top/AutumnBox/%E4%B8%BB%E7%A8%8B%E5%BA%8F/",target:"_blank",rel:"noopener noreferrer"}},[e._v("秋之盒"),r("OutboundLink")],1),e._v("，结果其内置adb启动不了")]),e._v(" "),r("p",[e._v("Enable USB debugging & OEM unlocking:\nGo to Settings ==> About Phone and tap 8 times on Build Number until it says You’re a developer.\nusb连接电脑 手机里面USB连接方式选择PC助手（HiSuite）")]),e._v(" "),r("p",[e._v("打开cmd或powershell，到ddb目录下")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("adb.exe devices\nadb.exe shell\n#进入手机shell\nsu\n#sdcard0 内置存储 sdcard1外部存储\ncd storage/sdcard1/\nmkdir -p PartitionBackup\ncd PartitionBackup\n#把nvme路径下的文件复制到PartitionBackup\ndd of=nvme \\\nif=/dev/block/platform/ff1fe000.dwmmc0/by-name/nvme\ndd of=oeminfo \\\nif=/dev/block/platform/ff1fe000.dwmmc0/by-name/oeminfo \ndd of=recovery \\\nif=/dev/block/platform/ff1fe000.dwmmc0/by-name/recovery\n\nstrings nvme | grep WVDEVID -B 1\n")])])]),r("p",[e._v("在host机器上可以直接将文件pull下来")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v(".\\adb.exe pull /storage/sdcard1/PartitionBackup/nvme .\n")])])]),r("p",[e._v("下载"),r("a",{attrs:{href:"https://www.x-ways.net/winhex/",target:"_blank",rel:"noopener noreferrer"}},[e._v("winhex"),r("OutboundLink")],1),e._v(",\n打开nvme，搜索WVLOCK")]),e._v(" "),r("p",[e._v("解锁unlock bootloader\n打开“华为工具箱” 点击 解锁bootloader")]),e._v(" "),r("p",[e._v("正在检查设备连接。。\n设备连接成功。。\n正在重启你的手机，即将进入FastBoot模式。。。(为保证解锁成功，请等待10秒)。。。\n正在尝试解锁。。\n如果手机重启，说明你成功解锁BootLoader。。。否则，请你重新获取正确的解锁码后再试。。。")]),e._v(" "),r("p",[e._v("手机重启并进入 FASTBOOT&RESCUE MODE，显示机器人页面，提示：Phone Unlocked\n至此解锁成功！")]),e._v(" "),r("h2",{attrs:{id:"刷firmware"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#刷firmware"}},[e._v("#")]),e._v(" 刷firmware")]),e._v(" "),r("p",[e._v("华为fireware:\nhttp://huawei-firmware.com/?q=MT7-L09&load_page=search&page=1\nhttps://forum.xda-developers.com/mate-7/general/huawei-mt7-l09-l10-stock-firmware-ota-t3275784")]),e._v(" "),r("p",[e._v("线刷\n连usb 用工具刷")]),e._v(" "),r("p",[e._v("卡刷\n自己下载到手机\n通过手机工具刷")]),e._v(" "),r("p",[e._v("终于找到了MT7-L09的包\nhttps://forum.xda-developers.com/mate-7/general/huawei-mt7-l09-l10-stock-firmware-ota-t3275784")]),e._v(" "),r("p",[e._v("这个刷机方法原理可以学习下\nhttps://huaweiflash.com/how-to-flash-huawei-stock-firmware-all-methods/")]),e._v(" "),r("p",[e._v("噩梦一般的刷机经历！前面说华为关闭了unlock code通道，现在又关闭了EMUI卡刷包通道，再也不买华为了")]),e._v(" "),r("p",[e._v("自己手动下载了所谓的官方固件update.app和update.zip，全部失败，搞笑的是EMUI updater有时候都无法识别到我放在sdcard（sdcard1）或者internal存储（sdcard0）上面的dload，\n必须要一个放zip，一个放app才识别！\n而且是不会成功，一更新重启就卡住在开机logo页面")]),e._v(" "),r("p",[e._v("然后试了firmwarefinder for huawei，也是手动下载，也尝试了proxy下载，都一样\nhttps://www.jb51.net/shouji/615464.html")]),e._v(" "),r("p",[e._v("通过updater更新以及三键强刷都没用，甚至测试了三键的各种姿势：")]),e._v(" "),r("blockquote",[r("p",[e._v("三键强刷方法： 1、下载固件到手机的根目录中，下载下来解压出来，复制dload文件夹到手机根目录。 2、关闭手机。 3、按住音量+和音量- 、再按开机键，手机出现LOGO时放开机键，黑屏时全部放开，就进行强刷模式，开始强刷系统。")])]),e._v(" "),r("p",[e._v("甚至也试过 按*#"),r("em",[e._v("#2846579#")]),e._v("#*进入工程模式系统升级 https://www.cnblogs.com/jifeng/p/7734117.html")]),e._v(" "),r("p",[e._v("在花粉俱乐部club.huawei.com也没有什么结果，社区好烂")]),e._v(" "),r("p",[e._v("最后发现了一些关键词：中转包 rec双清")]),e._v(" "),r("p",[e._v("才想明白，之所以刷不进去是因为官方的loader应该是做了检测，所以想强刷还是要刷入一个所谓的recovery！\n理论：https://club.huawei.com/thread-2558980-1-1.html")]),e._v(" "),r("blockquote",[r("p",[e._v("手机启动的基本顺序为bootloader、recovery、系统（第三方）。我们对系统的升级、恢复出厂等都是基于recovery操作的，这个recovery，一般理解为镜像小系统，类似与ghost。是一个非常的小的文件系统，一般用来对系统进行操作。\n也就是说，我们能不能刷第三方系统，能不能救砖，能不能刷回官方系统，取决于recovery是否能用，是否对系统有限制。\n第三方recovery和官方recovery的最大不同在于是否对即将刷入的系统rom提供校验。一般官方的recovery会限制非官方的系统刷入，确保刷入的系统的可靠性和安全性\n第三方的recovery一般可以刷更多的系统（第三方），更好的界面，更多的功能。其余2者差别不大。在个别功能上2者也有不同。rom制作者一般发布的rom只可以通过第三方recovery来刷。\n当准备刷的rom对recovery的要求和本机一致时，则无需刷recovery，相反，则需要先刷recovery。")])]),e._v(" "),r("p",[e._v("刷recovery需要首先unlock bootloader，这个前面已经做过了")]),e._v(" "),r("blockquote",[r("p",[e._v("一般能否卡刷第三方系统，取决于recovery能否更改。而能否刷recovery则取决于bootloader是否锁定。锁定，recovery则不可刷，反之则可刷。\n注意的是：这个的可刷与否并不是指recovery文件分区是否可擦写，而是修改过的recovery是否可以顺利启动，修改过的系统是否可以顺利进入。")])]),e._v(" "),r("p",[e._v("fastboot flash recovery XXX.img")]),e._v(" "),r("h2",{attrs:{id:"安装-twrp-team-win-recovery-project"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装-twrp-team-win-recovery-project"}},[e._v("#")]),e._v(" 安装 TWRP (Team Win Recovery Project)")]),e._v(" "),r("p",[e._v("所以我们现在要刷recovery，TWRP是其中一种第三方recovery")]),e._v(" "),r("p",[e._v("重复下TWRP可以干啥：")]),e._v(" "),r("blockquote",[r("p",[e._v("Through TWRP you can flash official ROMs, Custom ROMs, kernels, add-ons, zip files Xposed Module on your Huawei Ascend Mate 7, install SuperSU or Magiskthat gives you root access to your Huawei Ascend Mate 7. the custom recovery has more additional features, restore & repair a soft-bricked Huawei Ascend Mate 7 device, Wiping, backing up, restoring partition, Make a Nandroid backup, create and restore Huawei Ascend Mate 7 backups, & Wipe data or factory reset your Huawei Ascend Mate 7 mobile. & There are a few Advanced section of TWRP like Fix permissions ADB Sideload File Manager Wrap up.\nhttps://huaweiflash.com/how-to-install-twrp-recovery-on-huawei-ascend-mate-7/")])]),e._v(" "),r("p",[e._v("twrp.me/Deivces/Huawei没有找到mate7！\nhttps://hwmate.blogspot.com/2016/05/twrp-recovery-mate7-mt7-for-android-51.html")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("adb reboot bootloader\nfastboot flash recovery twrp_3.0.2_mate7_6.0.img\nfastboot reboot\n")])])]),r("p",[e._v("进入twrp：")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("adb reboot recovery\n")])])]),r("p",[e._v("重启还是卡死在Huawei Ascend logo页面，同样三键power+volume+-也进不去，")]),e._v(" "),r("p",[e._v("试了twrp_2.8.7.0_mate7_6.0.img 也是一样")]),e._v(" "),r("p",[e._v("又试了 https://www.huaweirom.com/guide/3526.html")]),e._v(" "),r("p",[e._v("查了下，有人说是因为底包问题，要刷到3.1：\nhttps://club.huawei.com/thread-6915106-1-1.html\n有人说“先三建强刷4.4.2的133底包然后本地升级357”")]),e._v(" "),r("p",[e._v("又陷入死循环，就是因为我无法刷包才想办法通过recovery来刷，但是现在不升级底包就刷不了")]),e._v(" "),r("p",[e._v("最终我发现了CMW - clockworkmode CWM-based Recovery V6.0.5.1 ONLY FOR Huawei MT7-TL10\nhttp://www.romleyuan.com/lec/read?id=247")]),e._v(" "),r("p",[e._v("但是这个在刷机的时候出现各种错误,比如")]),e._v(" "),r("p",[e._v("E:unknown command [errno]\nfile_getprop: failed to stat")]),e._v(" "),r("p",[e._v("甚至clear cache的时候都有错误\nunkonw volume for path /sd-ext")]),e._v(" "),r("p",[e._v("我试了internal和external sdcard以及通过连接电脑，用adb工具发送：")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v(" .\\adb.exe sideload update.zip\n")])])]),r("p",[e._v("又提示 error /tmp/update.zip\n我甚至还测试了")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v(".\\adb.exe push update.zip /tmp/update.zip\n")])])]),r("p",[e._v("都没有成功，")]),e._v(" "),r("p",[e._v("查了下\nhttps://forum.xda-developers.com/mate-7/help/softbricked-device-fix-t3159742\nhttps://forum.xda-developers.com/mate-7/help/5-1-to-4-4-2-bootloop-t3132888")]),e._v(" "),r("p",[e._v('还是没有解决,最后发现了原来可以直接用play store搜索clockworkmod下载rom manager,\nrom manager的使用前提是手机要先root过，不然会提示\n"You must root your phone for ROM Mnager to function. Superuser was not found at /system/bin/su or /system/xbin/su "')]),e._v(" "),r("p",[e._v("首次进去会提示设置custom recovery,然后选择INSTALL OR UPDATE RECOVERY->ClockworkMod Recovery，\nConfirm Phone Model，如果没有检测到，选择show all，然后手动选择，我的是Huawei Ascend，\n然后点击Flash ClockworkMod Recovery，等待下载，不要离开，下载完会弹出root权限授权，点击allow，\n最后提示flash successful，说明刷入CMW recovery成功！\n当然你也可以手动触发上面的设置过程，点击首页的Recovery setup即可")]),e._v(" "),r("p",[e._v("提示：最好backup一下当前的rom，默认路径/mnt/shell/emulated/clockworkmod/backup")]),e._v(" "),r("p",[e._v("然后我用这个cmw刷了下这个包，"),r("s",[e._v("说是3.1其实是3.0 http://rom.7to.cn/romdetail/50356")]),e._v("，实际我后来又看了下应该是\nhttp://www.romleyuan.com/rom/info?romid=39ec2c69-a131-4a97-a7f2-19147f33252e这个包，因为我刷的时候用了很多包，\n所以混淆很正常，我是从sdcard拷贝出来的包名看到的，而且我确认了这个里面是有supersu的，因为我确实刷好之后可以直接用rom manager，\n说明是有root权限，所以ycjeson那个包里面实际没有supersu，所以可以排除了，\n结果我前面用了那个rom乐园的EMUI3.0-4.4的工具包刷入的cmw有很多垃圾，reset factory会预装很多垃圾软件，\n结果我用了这个包神奇的将系统重置回我之前的版本")]),e._v(" "),r("p",[r("s",[e._v("然后我觉着ycjeson这个人开发的rom包还不错，所以想继续尝试高版本，结果其说明里面明确了说：必须基于底包3.1/4，不然无法刷入，基于前面的坑，我强刷没戏，")]),e._v("\n这个思路是没错的，\n不过这时候我想起，刚才不是看到了EMUI的recovery页面吗，我岂不是可以重新尝试刷官方stock firmware，\n然后我就下载了这个全量包，update.zip，里面看起来挺全的，不只是有update.app，还有\nsystem,cust,patch,META-INF\nhttp://huawei-firmware.com/rom/huawei-mate-7/mt7-tl00/15076")]),e._v(" "),r("p",[e._v("将update.zip放入外置sdcard的dload里面，结果updater不识别，不过根据前面的姿势，知道可以解压开，\n把update.app也放出来，果然updater识别了，显示一个incremental增量update.app包，一个integrate zip包，\n我当然是点击刷全量zip包，重启果然成功了，哎呀赶紧多下载下这个网站的rom备份下：\n注意链接，根据型号来，我的是L09，根据版本的区别：渠道版TL，移动版，电信版，联通版，这里T100应该是TL10\nFullOTA-MF vs FullOTA-MF-PV：\nAccording to team MT. PV means point version and is used to move between android versions e.g. 7 to 8. MF means multi file e.g. more than one update is contained in the package.")]),e._v(" "),r("blockquote",[r("p",[e._v("MT7-CL00是电信版型号，可以是标配版，也可以是高配版。\nMT7-TL10是高配版移动联通双4G版（公开版），一定是高配版。")])]),e._v(" "),r("p",[e._v("mate7总共分为标配版和高配版。\n标配版有电信版、移动版、联通版。\n高配版有移动版、电信版、公开版。\n电信版：CLOO   移动版：TL00  联通版：UL00   公开版：TL10\n只有高配和标配有区别，运营商版本配置都是一样的。")]),e._v(" "),r("blockquote",[r("p",[e._v("https://wenwen.sogou.com/z/q703188238.htm")])]),e._v(" "),r("p",[e._v("http://huawei-firmware.com/phone-list/huawei-ascend-mate-7")]),e._v(" "),r("p",[e._v("根据上面的说法，我应该找我L09对应的\nhttp://huawei-firmware.com/phone-list/huawei-ascend-mate-7/jazz-l09\n或者公开版\nhttp://huawei-firmware.com/phone-list/huawei-ascend-mate-7/jazz-tl10\n但是貌似里面都没有full ota PV版本，\n而实际上我前面成功的版本是在tl00也就是移动版下找到的\nhttp://huawei-firmware.com/phone-list/huawei-mate-7/mt7-tl00")]),e._v(" "),r("p",[e._v("思路总结\n如果系统recovery卡死，通过三方recovery刷新同版本rom，然后再通过系统recovery升级底包，然后你可以开心的升级其他三方的custom rom")]),e._v(" "),r("p",[e._v("几点建议：\n做操作之前先备份，通过命令行或者工具备份你的数据")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("//backup\nadb backup -apk -shared -all -nosystem -f backup08262012.ab\nadb restore backup08262012.ab\n//restore\n\n")])])]),r("p",[e._v("同样也要备份当前rom，如果你也是孤儿版，估计找到原厂firmware的几率比较低，所以备份很重要，备份别忘了存到电脑，如果你存到了sdcard又format了相当于啥都没备份\nrom manager有备份功能，备份默认存在\n/mnt/shell/emulated/clockworkmod/backup\n普通用户无法查看操作，可以通过adb命令用superuser权限查看获取\nadb shell \"su -c '[your command goes here]'\"\n.\\adb.exe shell \"su -c 'ls /storage/sdcard0/clockworkmod/download'\"\n但是有时候rom manager可能不工作 http://www.droidforums.net/threads/rom-manager-will-not-backup-my-current-rom.55511/\n另一种方法就是直接通过adb命令backup image，然后通过fastboot或者shell命令re-install image：")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v('-- backup/dump image(include system.img recovery.img etc)\nhttps://forum.xda-developers.com/showthread.php?t=2771411\nmethod1 via adb shell dd：\n首先要明确 Android MMC/EMMC/MTD Partition Layout\nhttps://wossoneri.github.io/2018/11/06/[Android]MTD-MMC-EMMC-partition-layout/\nhttps://www.cnblogs.com/shangdawei/p/4514128.html\n\n1|root@hwmt7:/ # cat /proc/mtd\ndev:    size   erasesize  name\nmtd0: 00020000 00001000 "block2mtd: /dev/block/mmcblk0p1"\nmtd1: 00020000 00001000 "block2mtd: /dev/block/mmcblk0p2"\nmtd2: 00400000 00001000 "block2mtd: /dev/block/mmcblk0p7"\nmtd3: 00400000 00001000 "block2mtd: /dev/block/mmcblk0p23"\nmtd4: 00400000 00001000 "block2mtd: /dev/block/mmcblk0p25"\nmtd5: 03c00000 00001000 "block2mtd: /dev/block/mmcblk0p26"\nmtd6: 00400000 00001000 "block2mtd: /dev/block/mmcblk0p27"\nmtd7: 01800000 00001000 "block2mtd: /dev/block/mmcblk0p29"\nmtd8: 00400000 00001000 "block2mtd: /dev/block/mmcblk0p6"\n\nroot@hwmt7:/ # ls -l /dev/block/platform/hi_mci.0/by-name\nlrwxrwxrwx root     root              2020-06-01 20:13 3rdmodem -> /dev/block/mmcblk0p31\nlrwxrwxrwx root     root              2020-06-01 20:13 3rdmodemnvm -> /dev/block/mmcblk0p32\nlrwxrwxrwx root     root              2020-06-01 20:13 3rdmodemnvmbkp -> /dev/block/mmcblk0p33\nlrwxrwxrwx root     root              2020-06-01 20:13 boot -> /dev/block/mmcblk0p13\nlrwxrwxrwx root     root              2020-06-01 20:13 cache -> /dev/block/mmcblk0p39\nlrwxrwxrwx root     root              2020-06-01 20:13 cust -> /dev/block/mmcblk0p37\nlrwxrwxrwx root     root              2020-06-01 20:13 dfx -> /dev/block/mmcblk0p22\nlrwxrwxrwx root     root              2020-06-01 20:13 dts -> /dev/block/mmcblk0p20\nlrwxrwxrwx root     root              2020-06-01 20:13 fastboot -> /dev/block/mmcblk0p4\nlrwxrwxrwx root     root              2020-06-01 20:13 fw_hifi -> /dev/block/mmcblk0p9\nlrwxrwxrwx root     root              2020-06-01 20:13 fw_lpm3 -> /dev/block/mmcblk0p5\nlrwxrwxrwx root     root              2020-06-01 20:13 hibench -> /dev/block/mmcblk0p8\nlrwxrwxrwx root     root              2020-06-01 20:13 hisitest0 -> /dev/block/mmcblk0p35\nlrwxrwxrwx root     root              2020-06-01 20:13 hisitest1 -> /dev/block/mmcblk0p36\nlrwxrwxrwx root     root              2020-06-01 20:13 misc -> /dev/block/mmcblk0p11\nlrwxrwxrwx root     root              2020-06-01 20:13 modem -> /dev/block/mmcblk0p26\nlrwxrwxrwx root     root              2020-06-01 20:13 modem_dsp -> /dev/block/mmcblk0p27\nlrwxrwxrwx root     root              2020-06-01 20:13 modem_om -> /dev/block/mmcblk0p28\nlrwxrwxrwx root     root              2020-06-01 20:13 modemnvm_backup -> /dev/block/mmcblk0p23\nlrwxrwxrwx root     root              2020-06-01 20:13 modemnvm_factory -> /dev/block/mmcblk0p7\nlrwxrwxrwx root     root              2020-06-01 20:13 modemnvm_img -> /dev/block/mmcblk0p24\nlrwxrwxrwx root     root              2020-06-01 20:13 modemnvm_system -> /dev/block/mmcblk0p25\nlrwxrwxrwx root     root              2020-06-01 20:13 modemnvm_update -> /dev/block/mmcblk0p29\nlrwxrwxrwx root     root              2020-06-01 20:13 nvme -> /dev/block/mmcblk0p6\nlrwxrwxrwx root     root              2020-06-01 20:13 oeminfo -> /dev/block/mmcblk0p16\nlrwxrwxrwx root     root              2020-06-01 20:13 recovery -> /dev/block/mmcblk0p14\nlrwxrwxrwx root     root              2020-06-01 20:13 recovery2 -> /dev/block/mmcblk0p30\nlrwxrwxrwx root     root              2020-06-01 20:13 recovery3 -> /dev/block/mmcblk0p15\nlrwxrwxrwx root     root              2020-06-01 20:13 reserved1 -> /dev/block/mmcblk0p3\nlrwxrwxrwx root     root              2020-06-01 20:13 reserved2 -> /dev/block/mmcblk0p12\nlrwxrwxrwx root     root              2020-06-01 20:13 secure_storage -> /dev/block/mmcblk0p21\nlrwxrwxrwx root     root              2020-06-01 20:13 sensorhub -> /dev/block/mmcblk0p17\nlrwxrwxrwx root     root              2020-06-01 20:13 splash -> /dev/block/mmcblk0p18\nlrwxrwxrwx root     root              2020-06-01 20:13 splash2 -> /dev/block/mmcblk0p34\nlrwxrwxrwx root     root              2020-06-01 20:13 splash3 -> /dev/block/mmcblk0p19\nlrwxrwxrwx root     root              2020-06-01 20:13 system -> /dev/block/mmcblk0p38\nlrwxrwxrwx root     root              2020-06-01 20:13 teeos -> /dev/block/mmcblk0p10\nlrwxrwxrwx root     root              2020-06-01 20:13 userdata -> /dev/block/mmcblk0p40\nlrwxrwxrwx root     root              2020-06-01 20:13 vrl -> /dev/block/mmcblk0p1\nlrwxrwxrwx root     root              2020-06-01 20:13 vrl_backup -> /dev/block/mmcblk0p2\n\ncd storage/sdcard1/\nmkdir -p RomBackup\ncd RomBackup\n\ndd of=boot.img if=/dev/block/platform/hi_mci.0/by-name/boot\ndd of=recovery.img if=/dev/block/platform/hi_mci.0/by-name/recovery\ndd of=recovery2.img if=/dev/block/platform/hi_mci.0/by-name/recovery2\ndd of=recovery3.img if=/dev/block/platform/hi_mci.0/by-name/recovery3\ndd of=system.img if=/dev/block/platform/hi_mci.0/by-name/system\n\n//dd if=/dev/block/hi_mci.0 of=/mnt/external_sd/backup/metadata.img\n//dd if=/dev/block/mtdblock0 of=/mnt/external_sd/backup/misc.img\n//dd if=/dev/block/mtdblock1 of=/mnt/external_sd/backup/kernel.img\n//dd if=/dev/block/mtdblock4 of=/mnt/external_sd/backup/backup.img\n// /data/busybox-armv7l_1.21.1 ls -ltr /mnt/external_sd/backup/\nmore if need:\n//dd if=/dev/block/mtdblock5 of=/mnt/external_sd/backup/cache.img\n//dd if=/dev/block/mtdblock6 of=/mnt/external_sd/backup/userdata.img\n//dd if=/dev/block/mtdblock7 of=/mnt/external_sd/backup/kpanic.img\n//dd if=/dev/block/mtdblock9 of=/mnt/external_sd/backup/user.img\n\nmethod2 via romdump：\nhttps://forum.xda-developers.com/showthread.php?p=28732414#post28732414\n\n-- re-install image\nhttps://android.stackexchange.com/questions/22473/install-system-img-on-android-phone\nmethod1 fastboot:\nIf you have a fastboot-enabled bootloader\nfastboot flash system /path/to/system.img\n\nmethod2 adb shell dd:\nadb push system.img /sdcard/\nadb shell\ndd if=/sdcard/system.img of=/your/system/partition\n\n')])])]),r("p",[e._v("升级的时候要一个版本一个版本来，不要直接从android4升到6，先升到5，这样成功概率更高，步子太大容易扯着\n如果发现你的系统recovery不好用，建议通过三方recovery刷一下当前的版本，我的意思是找个custom或者official的rom，版本跟你当前版本一致，原因是也许你当前的版本有特别的限制，所以你刷个同等版本的首先容易成功，如果成功你再测试recovery就更容易成功\n手机这个玩意还是很多变量：\n比如外置sdcard是否要format，我甚至看到有人三键强刷升级的时候是等系统重启到logo页面，黑掉之后才迅速插入sdcard，所以需要多试试不同的姿势；\n再比如，有时候你以为是卡死，但是请耐心多等待一会，比如放20十分钟或者一个小时，也许就会不同；\n时刻清楚当前的机器的状态，比如是reset factory之后还是clear cache之后，还是刷了三方recovery之后，再比如每次reset factory和升级之后，你的root权限是否还在，这些状态是你下一步的判断依据\n通过细小的差异，观察系统的反应，你会找到跟机器交流的感觉")]),e._v(" "),r("p",[e._v("其他思路：通过fastboot直接刷https://www.youtube.com/watch?v=AIyEO4uoWLc\nMagiskManager")]),e._v(" "),r("p",[e._v("##XIAOMI")]),e._v(" "),r("p",[e._v("HM NOTE 1LTE - Xiaomi Redmi Note 4G (Single SIM)\nhttps://twrp.me/xiaomi/xiaomiredminote4gsinglesim.html")]),e._v(" "),r("h2",{attrs:{id:"more"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#more"}},[e._v("#")]),e._v(" more")]),e._v(" "),r("p",[e._v("extend interal storage with sdcard\nmethod 1 via ext4 partition and link2sd app\nhttps://www.diskpart.com/articles/partition-sd-card-1203.html\n注意，partition type ext2 3 4 尽量跟系统本身一致，可以用adb shell查看系统partition type ：cat /proc/mounts")]),e._v(" "),r("p",[e._v("method 2 via Adoptable storage:\nhttps://fossbytes.com/android-sd-card-internal-storage-adoptable-storage/")]),e._v(" "),r("p",[e._v("发布文章：\nhttps://mp.weixin.qq.com/s/b2HGQptEMExLeVL4Jo9_rw")])])}),[],!1,null,null,null);o.default=a.exports}}]);
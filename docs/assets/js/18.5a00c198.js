(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{220:function(e,s,t){"use strict";t.r(s);var r=t(0),n=Object(r.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[t("a",{attrs:{href:"/docs/software"}},[e._v("回目录")]),e._v("  《分布式缓存redis》")]),e._v(" "),t("h2",{attrs:{id:"install"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install"}},[e._v("#")]),e._v(" Install")]),e._v(" "),t("p",[e._v("https://redis.io/topics/quickstart\nwget http://download.redis.io/redis-stable.tar.gz\ntar xvzf redis-stable.tar.gz\ncd redis-stable\nmake\nmake test\nsudo cp src/redis-server /usr/local/bin/\nsudo cp src/redis-cli /usr/local/bin/")]),e._v(" "),t("h3",{attrs:{id:"single-node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#single-node"}},[e._v("#")]),e._v(" Single node")]),e._v(" "),t("p",[e._v("redis-server\nOr start with config\nredis-server redis.conf")]),e._v(" "),t("h3",{attrs:{id:"cluster-mode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cluster-mode"}},[e._v("#")]),e._v(" Cluster Mode")]),e._v(" "),t("p",[e._v("Redis cluster tutorial https://redis.io/topics/cluster-tutorial\nConfig:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('daemonize yes  #后台运行模式\nlogfile “redis_6379_log”\npidfile /home/web/redis/var/run/redis_6379.pid  #修改pid文件\ndir /home/web/redis/data/ #指定本地数据库存放目录\nport 6379  #端口\ndbfilename dump_6379.rdb #数据文件\nappendfilename "appendonly_6379.aof"\ncluster-enabled yes #打开注释，启动cluster模式\ncluster-config-file nodes-6379.conf #打开注释，启动cluster模式\n# Cluster node timeout is the amount of milliseconds a node must be unreachable\n# for it to be considered in failure state.\n# Most other internal time limits are multiple of the node timeout.\ncluster-node-timeout 15000 #打开注释，启动cluster模式\n')])])]),t("p",[e._v("参考最低配置：https://redis.io/topics/cluster-tutorial\n"),t("em",[e._v("Note that the minimal cluster that works as expected requires to contain at least three master nodes.")])]),e._v(" "),t("p",[e._v("redis-server conf/redis6379.conf\nredis-server conf/redis6380.conf\nredis-server conf/redis6381.conf\nredis-cli --cluster create 10.136.100.48:6379 10.136.100.48:6380 10.136.100.48:6381 "),t("br"),e._v("\n10.136.100.49:6379 10.136.100.49:6380 10.136.100.49:6381 "),t("br"),e._v("\n10.136.100.50:6379 10.136.100.50:6380 10.136.100.50:6381 "),t("br"),e._v("\n--cluster-replicas 2")]),e._v(" "),t("p",[e._v("Start and shutdown")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('REDIS_HOME=/opt/redis-5.0.5\npushd ${REDIS_HOME} &>/dev/null\n\nwhile [ "${1:0:1}" == "-" ]; do\n  case $1 in\n    --start)\n      echo "Starting redis nodes..."\n      redis-server conf/redis6379.conf\n      redis-server conf/redis6380.conf\n      redis-server conf/redis6381.conf\n      ;;\n    --kill)\n      echo "Stopping redis nodes..."\n      redis-cli -p 6379 shutdown\n      redis-cli -p 6380 shutdown\n      redis-cli -p 6381 shutdown\n          ;;\n    *)\n      echo "usage: --start|--kill"\n      exit 1\n      ;;\n  esac\n  shift\ndone\n\n')])])])])}),[],!1,null,null,null);s.default=n.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[187],{615:function(e,t,a){"use strict";a.r(t);var s=a(56),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"grammar"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grammar"}},[e._v("#")]),e._v(" Grammar")]),e._v(" "),a("h3",{attrs:{id:"_1-superglobals-vs-variable-variables"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-superglobals-vs-variable-variables"}},[e._v("#")]),e._v(" 1.Superglobals vs Variable variables")]),e._v(" "),a("p",[e._v("Translation faulty:\nhttp://php.net/manual/en/language.variables.variable.php")]),e._v(" "),a("p",[e._v("Please note that variable variables cannot be used with PHP's Superglobal arrays within functions or class methods. The variable $this is also a special variable that cannot be referenced dynamically.\nhttp://www.php.net/manual/zh/language.variables.variable.php")]),e._v(" "),a("p",[e._v("注意，在 PHP 的函数和类的方法中，超全局变量不能用作可变变量。$this 变量也是一个特殊变量，不能被动态引用。\nMy Post: "),a("a",{attrs:{href:"http://stackoverflow.com/questions/34367055/use-variable-variables-with-phps-superglobal-arrays-outside-of-function-and-cla",target:"_blank",rel:"noopener noreferrer"}},[e._v("Use variable variables with PHP's Superglobal arrays outside of function and class"),a("OutboundLink")],1),e._v("\nBTW: Variable variables IN C#: dynamic or variable")]),e._v(" "),a("p",[e._v("php变量覆盖经验解说\nhttp://zone.wooyun.org/content/1872\nphp全局变量漏洞 $GLOBALS"),a("br"),e._v("\nhttp://www.2cto.com/Article/201207/143314.html\n全局变量与超级全局变量什么区别 http://blog.sina.com.cn/s/blog_9c6ac47201010gye.html\n"),a("a",{attrs:{href:"http://netsecurity.51cto.com/art/201406/443327.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("缓解PHP超全局变量带来的企业风险"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("Superglobals can't be accessed via variable variables in a function?\nhttp://stackoverflow.com/questions/8071118/superglobals-cant-be-accessed-via-variable-variables-in-a-function\nVariable variables and superglobals\nhttp://stackoverflow.com/questions/12163183/variable-variables-and-superglobals\nAccessing _POST and _GET dynamically using ${$varname}\nhttp://stackoverflow.com/questions/15071907/accessing-post-and-get-dynamically-using-varname\nInteresting Use of PHP Super Globals\nhttp://pageconfig.com/post/interesting-use-of-php-super-globals\nAre there any good use-cases for variable variables?\nhttp://programmers.stackexchange.com/questions/154588/are-there-any-good-use-cases-for-variable-variables\nIs using superglobals directly good or bad in PHP?\nhttp://stackoverflow.com/questions/3498207/is-using-superglobals-directly-good-or-bad-in-php")]),e._v(" "),a("h3",{attrs:{id:"_2-class-and-function"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-class-and-function"}},[e._v("#")]),e._v(" 2.Class and Function")]),e._v(" "),a("p",[e._v("Using namespaces: fallback to global function/constant\nhttp://www.php.net/manual/en/language.namespaces.fallback.php\nWhat is the difference between class and function in php?\nhttp://stackoverflow.com/questions/20649820/what-is-the-difference-between-class-and-function-in-php")]),e._v(" "),a("p",[e._v("http://www.php.net/manual/en/langref.php\nhttp://mamboforge.net/\ntodo...\n高级PHP应用程序漏洞审核技术  https://code.google.com/archive/p/pasc2at/wikis/SimplifiedChinese.wiki\nhttp://www.wooyun.org/bugs/wooyun-2012-013400\nhttp://www.wooyun.org/bugs/wooyun-2015-0131548\nhttps://www.google.com.sg/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=metinfo-variables-covering-bypass-sql-ids\nhttps://www.google.com.sg/search?q=%24newpassword+%3D+password(%24_POST%5B%27info%27%5D%5B%27newpassword%27%5D%2C+%24this-%3Ememberinfo%5B%27encrypt%27%5D)%3B&oq=%24newpassword+%3D+password(%24_POST%5B%27info%27%5D%5B%27newpassword%27%5D%2C+%24this-%3Ememberinfo%5B%27encrypt%27%5D)%3B&aqs=chrome..69i57.1555j0j4&sourceid=chrome&es_sm=93&ie=UTF-8\nhttp://www.imperva.com/docs/hii_php_superglobals_supersized_trouble.pdf\nhttps://books.google.com.sg/books?id=_3dBGqq7eF4C&pg=PT408&lpg=PT408&dq=array(%27_GET%27,%27_POST%27,%27_COOKIE%27,%27_REQUEST%27)&source=bl&ots=PusiiP_Hfh&sig=wOMZWbK7dfiMBltbC18ajDoxomo&hl=en&sa=X&ved=0ahUKEwjknrzo8uXJAhWDkI4KHUVDC-YQ6AEIRjAJ#v=onepage&q=array('_GET'%2C'_POST'%2C'_COOKIE'%2C'_REQUEST')&f=false\nhttps://books.google.com.sg/books?id=Gz_9qi0yRcoC&pg=PA133&lpg=PA133&dq=Superglobal+variable+variables+outside&source=bl&ots=Yb-7X9zyyX&sig=8MDQMYe35BSxanKIwDipmoiJXAc&hl=en&sa=X&ved=0ahUKEwiom87l3-XJAhVFGo4KHYH-BDQ4ChDoAQgZMAA#v=onepage&q=Superglobal%20variable%20variables%20outside&f=false\nhttp://test.91toufang.com/test.php?"),a("em",[e._v("POST[GLOBALS][cfg_dbname]=X\nhttp://web-archive-me.com/me/y/yaseng.me/2013-11-28_3239576-titles_2/webshell_xss")]),e._v("%E7%8C%A5%E7%90%90%E5%88%B7%E6%9F%90%E6%8A%95%E7%A5%A8_Yaseng_s_Blog/")]),e._v(" "),a("h3",{attrs:{id:"_3-encoding-problem"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-encoding-problem"}},[e._v("#")]),e._v(" 3.Encoding Problem")]),e._v(" "),a("p",[e._v("page encoding, transport encoding, html header encoding, md5 sign encoding, database encoding, etc.\nicov\nheader\n1.send sms\n2.html to object")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('public static function html_to_obj($html) {\n\t$pattern = "/<[^\\/>]*>([\\s]?)*<\\/[^>]*>/";\n\t$html=preg_replace($pattern, \'\', $html);\n\t$meta = \'\';\n\t$dom = new DOMDocument();\n\t$dom->loadHTML($meta.$html);\n\treturn Response::element_to_obj($dom->documentElement);\n\t}\n\tpublic static function element_to_obj($element) {\n\t$obj = array( "tag" => $element->tagName );\n\tforeach ($element->attributes as $attribute) {\n\t$obj[$attribute->name] = $attribute->value;\n\t}\n\tforeach ($element->childNodes as $subElement) {\n\tif ($subElement->nodeType == XML_TEXT_NODE) {\n\t$obj["html"] = $subElement->wholeText;\n\t}\n\telse {\n\t$obj["children"][] = Response::element_to_obj($subElement);\n\t}\n\t}\n\treturn $obj;\n}\n')])])]),a("p",[e._v("中文一个字在不同的encoding下会有不同的字节长度 2-3")]),e._v(" "),a("h3",{attrs:{id:"request-vs-get-and-post"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-vs-get-and-post"}},[e._v("#")]),e._v(" $_REQUEST vs $_GET and $_POST")]),e._v(" "),a("p",[e._v("variables_order")]),e._v(" "),a("h3",{attrs:{id:"files-tmp-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#files-tmp-name"}},[e._v("#")]),e._v(" $_FILES tmp_name")]),e._v(" "),a("p",[e._v("https://www.php.net/manual/en/reserved.variables.files.php")]),e._v(" "),a("p",[e._v("windows默认是%AppData%\\Local\\Temp")]),e._v(" "),a("p",[e._v("linux默认是 /tmp")]),e._v(" "),a("p",[e._v("打印方法：sys_get_temp_dir()")]),e._v(" "),a("p",[e._v("设置方法：php.ini: upload_tmp_dir")]),e._v(" "),a("h2",{attrs:{id:"搭建环境和ide调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建环境和ide调试"}},[e._v("#")]),e._v(" 搭建环境和IDE调试")]),e._v(" "),a("h3",{attrs:{id:"versions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#versions"}},[e._v("#")]),e._v(" Versions")]),e._v(" "),a("p",[e._v("TS NTS(N)\nISAPI\nCGI\nFast CGI\nPHP版本中的VC6,VC9,VC11,TS,NTS区别\nhttp://www.cnblogs.com/codersay/p/4301783.html")]),e._v(" "),a("p",[e._v("?#使用php5.2时遇到，error_incomplete_chunked_encoding，换用5.6即可")]),e._v(" "),a("p",[e._v("?# php5.5 changes:")]),e._v(" "),a("p",[e._v("ignore. Deprecated: mysql_connect(): The mysql extension is deprecated and will be removed in the future: use mysqli or PDO instead")]),e._v(" "),a("h3",{attrs:{id:"php-ini-常用配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#php-ini-常用配置"}},[e._v("#")]),e._v(" PHP.INI 常用配置")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("#php -ini | grep 'php.ini'\nConfiguration File (php.ini) Path => /etc/opt/rh/rh-php72\nLoaded Configuration File => /etc/opt/rh/rh-php72/php.ini\n\n<?php\nphpinfo();\n?>\n\nphp version\nphp extension\n\nshort_open_tag = On #php显示源码/代码   https://www.oschina.net/question/5029_79046\n")])])]),a("h3",{attrs:{id:"phpstudy-vscode-xdebug"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#phpstudy-vscode-xdebug"}},[e._v("#")]),e._v(" phpstudy+vscode+xdebug")]),e._v(" "),a("p",[a("strong",[e._v("step 1: 给vscode配置外部php executor（phpstudy)")]),e._v("\nhttps://code.visualstudio.com/docs/languages/php")]),e._v(" "),a("p",[e._v("ctrl+shift+P 打开 setting.json\nphp.validate.executablePath")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('{\n    "workbench.colorTheme": "Relax Eyes",\n    "diffEditor.ignoreTrimWhitespace": false,\n    "C_Cpp.updateChannel": "Insiders",\n    "php.executablePath": "",\n    "php.validate.executablePath": "D:/phpstudy_pro/Extensions/php/php7.3.4nts/php.exe"\n}\n')])])]),a("p",[a("strong",[e._v("step 2: 开启listen for xdebug")]),e._v("\nvscode开启debug，deubg=》新建配置选择 listen for xdebug，")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('{\n    // Use IntelliSense to learn about possible attributes.\n    // Hover to view descriptions of existing attributes.\n    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n    "version": "0.2.0",\n    "configurations": [\n        {\n            "name": "Listen for XDebug",\n            "type": "php",\n            "request": "launch",\n            "port": 9000,\n            "xdebugSettings": {\n                "max_children": 1000,\n                "max_data": 512,\n                "max_depth": 3\n                }\n      }\n            \n        },\n        {\n            "name": "Launch currently open script",\n            "type": "php",\n            "request": "launch",\n            "program": "${file}",\n            "cwd": "${fileDirname}",\n            "port": 9000\n        }\n    ]\n}\n')])])]),a("p",[e._v("注意xdebug settings是为了vscode watch变量的时候不受默认限制\nhttps://github.com/xdebug/vscode-php-debug#supported-launchjson-settings")]),e._v(" "),a("p",[a("strong",[e._v("step 3: phpstudy php配置xdebug extenstion")]),e._v("\nPHP Debug Extension")]),e._v(" "),a("p",[e._v("https://marketplace.visualstudio.com/items?itemName=felixfbecker.php-debug")]),e._v(" "),a("p",[e._v("创建phpinfo文件，访问获取相应php的路径：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("phpinfo.php放到网站根目录:\n<?php\nphpinfo();\n?>\n\n访问：\nhttp://testphp.local/phpinfo.php\n\n获得：\n**Loaded Configuration File**：D:\\phpstudy_pro\\Extensions\\php\\php7.3.4nts\\php.ini\n")])])]),a("p",[e._v("https://xdebug.org/wizard")]),e._v(" "),a("p",[e._v("贴入phpinfo内容，根据提示下载配置，比如")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Download php_xdebug-2.9.6-7.3-vc15-nts-x86_64.dll\n\n如果找不到相应版本，可以去https://xdebug.org/download/historical 手动下载\n注意要根据 phpinfo下载相应的版本，比如Architecture\tx86则下载32位的\n注意测试5.5的版本及以下都不成功，需要用php5.6版本以上\n\nMove the downloaded file to D:\\phpstudy_pro\\Extensions\\php\\php7.3.4nts\\ext\nEdit D:\\phpstudy_pro\\Extensions\\php\\php7.3.4nts\\php.ini and add the line\nzend_extension = D:\\phpstudy_pro\\Extensions\\php\\php7.3.4nts\\ext\\php_xdebug-2.9.6-7.3-vc15-nts-x86_64.dll\nRestart the webserver\n")])])]),a("p",[e._v("php.ini添加：")]),e._v(" "),a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[e._v("XDebug")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")])]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[e._v("xdebug.remote_enable")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[e._v("1")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[e._v("xdebug.remote_autostart")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[e._v("1")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[e._v("xdebug.remote_host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[e._v("localhost")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[e._v("xdebug.remote_port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[e._v("9000（对应vscode的端口）")]),e._v("\n")])])]),a("p",[e._v("或者直接在phpstudy->系统环境找到php配置，enable xdebug，填上端口号（对应vscode的端口）")]),e._v(" "),a("p",[e._v("重启phpstudy")]),e._v(" "),a("p",[e._v("查看phpinfo是否有xdebug")]),e._v(" "),a("p",[e._v("PHP Intelephense\nhttps://marketplace.visualstudio.com/items?itemName=bmewburn.vscode-intelephense-client")]),e._v(" "),a("h3",{attrs:{id:"xampp-phpstorm-xdebug"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xampp-phpstorm-xdebug"}},[e._v("#")]),e._v(" XAMPP+PHPStorm+xdebug")]),e._v(" "),a("p",[e._v("集成了apache+mysql phpadmin+tomcat)+PHPStorm。")]),e._v(" "),a("p",[e._v("With a static IP/single developer\n"),a("img",{attrs:{src:"/docs/docs_image/software/programming/php01.gif",alt:""}}),e._v("\nWith an unknown IP/multiple developers\n"),a("img",{attrs:{src:"/docs/docs_image/software/programming/php02.gif",alt:""}})]),e._v(" "),a("p",[e._v('安装过程不必多说，好像有一步需要选择自动启动service（这样以后就无需开启xampp就自动service中启动apache mysql等等），不过没关系，以后手动启动也是可以\n启动的时候总是不顺利的，一般来说80端口肯定是被占用的，你可以cmd命令行netstat -aon|findstr "80"查看端口是否被使用，如果被占用，更改下端口即可，还有SSL端口默认是443')]),e._v(" "),a("p",[e._v("小技巧，从xampp面板启动apache启动失败有时候提示的错误信息很少，请找到xampp的安装目录，执行apache_start.bat脚本，命令窗会提示更详细的信息\n接下来是mysql了，默认的port是3306，user是root，password为空，如果3306被占用就改成其他端口，\nxmapp work with mysql existing!\n此处寡人遇到了一个问题，我的机器之前已经安装了完整的mysql（server和connector），所以就尴尬了，各种错误，比如\n10:31:05 PM [mysql] MySQL Service detected with wrong path\n10:31:05 PM [mysql] Change XAMPP MySQL and Control Panel settings or\n10:31:05 PM [mysql] Uninstall/disable the other service manually first\n10:31:05 PM [mysql] Found Path: \"C:\\Program Files\\MySQL\\MySQL Server 5.5\\bin\\mysqld\" --defaults-file=\"C:\\Program Files\\MySQL\\MySQL Server 5.5\\my.ini\" MySQL\n10:31:05 PM [mysql] Expected Path: c:\\xampp\\mysql\\bin\\mysqld.exe --defaults-file=c:\\xampp\\mysql\\bin\\my.ini mysql\n可见xampp被搞晕了，其实很简单，不要用xampp的mysql就好了嘛，改下phpMyAdmin的config.inc.php(比如我已经安装的mysql默认密码不是空)\n现在打开localhost:81就看到效果了，点击phpadmin，会有两个红色的扎眼的error\nThe phpMyAdmin configuration storage is not completely configured, some extended features have been deactivated. To find out why click here.\nConnection for controluser as defined in your configuration failed.\nfixed:\n1.import create_tables.sql, create database phpmyadmin\n2.add user and grant privileges to user pma with pmapass\nchange phpmyadmin/config.inc.php\n/* User used to manipulate with storage */\n// $cfg['Servers'][$i]['controluser'] = 'pma';\n// $cfg['Servers'][$i]['controlpass'] = 'pmapass';\n3.logout phpmyadmin\nfind $cfg['Servers'][$i]['auth_type'] = 'config'; change config to 'cookie'\n4.login with root,you query any table under phpmyadmin error 'phpmyadmin.pma_table_uiprefs doesn't exist',\nchange config again, table name has double underscore\n$cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark';\nto\n$cfg['Servers'][$i]['bookmarktable'] = 'pma__bookmark';\ncongratulations! everything settled, enjoy now.")]),e._v(" "),a("p",[e._v("phpstrom IDE的使用和强大的远程调试功能，常用的调试方法有xdebug和zend debugger，\n我们这里要介绍phpstorm+xdebug+xampp配置\n首先php.ini要修改配置如下：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('zend_extension = "C:\\xampp\\php\\ext\\php_xdebug.dll"\nxdebug.remote_enable = 1\nxdebug.remote_handler = "dbgp" 调试协议，xdebug两种调试协议，GDB和DBGP\nxdebug.remote_host = "localhost"\nxdebug.remote_mode = "req" 调试方式，req:php开始执行时，xdebug与IDE建立连接，jit:php稚轩到断点处或者error时，跟IDE建立连接\nxdebug.remote_port = 9000 \n')])])]),a("p",[e._v("然后phpstorm内配置：\nFile->Settings\n找到PHP（最新版本是在Languages&Frameworks下面）-> Debug，设置xdebug prot同上9000，\n继续在下面找到DBGp Proxy,IDE KEY:phpStorm, HOST:localhost, PORT:9000\n然后是在浏览器设置：\nchrome下载extension xdebug helper(IDEKEY选择phpstorm,DOMAIN FILTER加入whitelist)\nfirefox下载add on xdebug\n其他浏览器访问 http://www.jetbrains.com/phpstorm/marklets/ 填上phpStorm，generate，把start、stop拖入工具栏\n这样设置基本结束了\nphpstorm中设置断点，启动监听（电话标识），chrome中启动xdebug helper并选择状态Debug，访问\n原理：\n开启xdeug远程调试需要get 迫使他或者是cookie方式传入XDEBUG_SESSION_START变量，结束是传入XDEBUG_SESSION_STOP")]),e._v(" "),a("p",[e._v("结合我们上篇安装的集成环境xampp，我们需要设置：\nphpstorm的PHP interpreter\nphpstorm的server localhost，端口跟上篇xampp的apache端口一致\n并且注意一开始的php.ini要修改xampp内集成的php.ini，并且重启\n强大的远程调试：\n1.只需更改上面提到的phpstorm settings->php->server，host(ip/domain)和port，一定要勾选下面的use path mapping，对应server目录映射到本地目录")]),e._v(" "),a("p",[e._v("2.本地调试好远程对比同步，phpstorm创建project from existing files->Web server is on remote host,files are accessible via FTP/SFTP/FTPS,下一步选择default或者custom（比如exclude items by name[去除.git .svn等文件]，upload changed files automatically to the default server，这样比较危险，不过特殊需求的人喜欢），下一步就很简单了，提供ftp的相关信息即可，唯一注意的是如果ftp连接不上，请选择advanced->passive mode\n参考阅读：\nPhpStorm Best Practices - The Perfect Workflow for PHP Developers\nhttps://www.youtube.com/watch?v=TejBj_N-3rI\nphpstorm https://www.jetbrains.com/phpstorm/\nWorking with remote project in WebStorm PhpStorm\nhttps://www.youtube.com/watch?v=cDWwPWy8E1M")]),e._v(" "),a("p",[e._v("Debugging remote CLI with phpstorm\nhttps://www.adayinthelifeof.nl/2012/12/20/debugging-remote-cli-with-phpstorm/\nxdeug document\nhttp://xdebug.org/docs/")]),e._v(" "),a("p",[e._v("Bitnami for XAMPP\nhttps://bitnami.com/stack/xampp?utm_source=bitnami&utm_medium=installer&utm_campaign=XAMPP%2BInstaller")]),e._v(" "),a("p",[e._v("详细讲述远程调试remote debugging的配置问题，上一篇只是大概描述了下基本配置，\n理解远程调试的精髓首先要明确本地+浏览器+服务器的关系，即local develop env(phpstorm)+browser(chrome with xdebug helper)+php server(php+xdebug)的关系")]),e._v(" "),a("p",[e._v('这里有几个重点：\n1.远程server，一定要注意下载的xdebug版本跟php版本一致（以及确定php是否是线程安全模式），下载对应的版本的nts或者ts版本，这些都可以在phpinfo中查看，并且注意，实际server上的环境可能是phpstudy或者其他环境（注意扩展xdebug设置的时候，开启的格式可能是extension="c:*'),a("strong",[e._v('\\xdebug.dll" zend_extension="c:*')]),e._v('\\xdebug.dll" zend_extension_ts="..."），最后开启后再刷新phpinfo确认。\n2.端口转发，路由器设置WAN-Virtual Server/port forwarding外网端口9000映射本机9000，并且注意防火墙允许该端口的进出规则\n3.chrome xdebug helper设置正确，并且调试时开启小虫子（debug模式）\n4.本机的phpstorm 编辑run/debug configuration，server需要validate remote environment，use  path mapping注意远程的path是否正确，如果是根目录 / 最好也填写以下\n参考阅读：\n1.Configuring PhpStorm, XDebug, and DBGp Proxy Settings for Remote Debugging with Multiple Users\nhttp://matthardy.net/blog/configuring-phpstorm-xdebug-dbgp-proxy-settings-remote-debugging-multiple-users/\n2.Debugging remote CLI with phpstorm\nhttps://www.adayinthelifeof.nl/2012/12/20/debugging-remote-cli-with-phpstorm/\n3.Zero-configuration Web Application Debugging with Xdebug and PhpStorm   Xdebug and You: Why You Should be Using a Real Debugger\nhttp://confluence.jetbrains.com/display/PhpStorm/Zero-configuration+Web+Application+Debugging+with+Xdebug+and+PhpStorm\n4.xdebug download    PHP的(Thread Safe与Non Thread Safe)\nhttp://www.cnblogs.com/gaoxu387/p/3173194.html')]),e._v(" "),a("h3",{attrs:{id:"wamp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wamp"}},[e._v("#")]),e._v(" WAMP")]),e._v(" "),a("p",[e._v("Creating multiple virtual hosts/websites in Wampserver\nhttps://www.virendrachandak.com/techtalk/creating-multiple-virtual-websites-in-wampserver/\nhttp://sourceforge.net/projects/wampserver/?source=typ_redirect")]),e._v(" "),a("h3",{attrs:{id:"host-php-in-iis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#host-php-in-iis"}},[e._v("#")]),e._v(" host php in IIS")]),e._v(" "),a("p",[e._v("https://docs.microsoft.com/en-us/iis/application-frameworks/scenario-build-a-php-website-on-iis/configure-a-php-website-on-iis")]),e._v(" "),a("p",[e._v('Upgraded to Windows 10 and now WAMP won\'t work, show up IIS page\niisreset /stop,\nif got 404 not found error, open SERVICES.MSC  or Port 80 being used by Server: Microsoft-HTTPAPI/2.0 , stop "Web Deployment Agent Service"\nThen Apache > Service > Install Service will prompt you to press Enter to install as normal.')]),e._v(" "),a("h3",{attrs:{id:"php-hosts-troubleshooting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#php-hosts-troubleshooting"}},[e._v("#")]),e._v(" PHP Hosts Troubleshooting")]),e._v(" "),a("p",[e._v("multi-site :")]),e._v(" "),a("p",[e._v("httpd-vhosts.conf")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<VirtualHost *:80>\nServerAdmin admin@localhost\nDocumentRoot "c:/wamp/www"\nServerName localhost\nServerAlias www.localhost.com\nErrorLog "logs/localhost-error.log"\nCustomLog "logs/localhost-access.log" common\n</VirtualHost>\n<VirtualHost *:80>\nDocumentRoot "c:/wamp/www/site1"\nServerName site1.com\n</VirtualHost>\n<VirtualHost *:80>\nDocumentRoot "c:/wamp/www/site2"\nServerName site2.com\n<Directory "c:/wamp/www/site2">\nOptions Indexes FollowSymLinks MultiViews\nAllowOverride None\nOrder allow,deny\nAllow from all\n</Directory>\n</VirtualHost>\n')])])]),a("p",[e._v("The server encountered an internal error or misconfiguration and was unable to complete your request\ncheck logs/apache_error.log")]),e._v(" "),a("p",[e._v(".htaccess: Invalid command 'RewriteEngine',\nLoadModule rewrite_module modules/mod_rewrite.so")]),e._v(" "),a("p",[e._v(".mysql error, check port, 127.0.0.1 instead of localhost")]),e._v(" "),a("h2",{attrs:{id:"php-troubleshooting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#php-troubleshooting"}},[e._v("#")]),e._v(" PHP Troubleshooting")]),e._v(" "),a("h3",{attrs:{id:"md5withrsa"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#md5withrsa"}},[e._v("#")]),e._v(" ?#MD5withRSA")]),e._v(" "),a("p",[e._v("Recently when I made integration with a third-party payment supplier named '盛付通',somehow they mistakenly gave me a wrong documentation at first, in the 'wrong' document, the signature algorithm they are using is MD5withRSA,they require client to generate another private and public key pair, given steps:")]),e._v(" "),a("p",[e._v("tools:platform_private_key.pem openssl sn.exe")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("generate cert from private key：\nopenssl req -new -x509 -days 365 -key platform_private_key.pem -out platform_cert.crt")])]),e._v(" "),a("li",[a("p",[e._v("create pfx file：\nopenssl pkcs12 -export -out platform_cert.pfx -inkey platform_private_key.pem -in platform_cert.crt")])]),e._v(" "),a("li",[a("p",[e._v("generate snk format public key file from pfx：\nsn -p platform_cert.pfx platform_public.snk")])])]),e._v(" "),a("p",[e._v("4.convert platform_public.snk to Base64 encoding string and upload it to their '盛付通' platform.")]),e._v(" "),a("p",[e._v("At the very beginning, I was confused by above steps,why design in this manner, unforunately they don't provide any support and clarification, kept telling me I don't need to read that document..... curious driven, after google online,I guess the whole story might be that the platform holds platform-private-key and dispense platform-public-key to clients, while clients required to generate client-private-key and client-public-key,by uploading , platform keeps client-public-key also,this approach might intend to double secure, so work flow might be:")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Client post payment info which encrypt using client-private-key,")])]),e._v(" "),a("li",[a("p",[e._v("Platform receive post info, decrypt using client-public-key, validation and processing payment successfully")])]),e._v(" "),a("li",[a("p",[e._v("Platform encrypt payment result using platform-private-key, then notify Client")])]),e._v(" "),a("li",[a("p",[e._v("Client received notification, decrypt it using platform-public-key.....")])])]),e._v(" "),a("p",[e._v("Let me make introduction of all the formats mentioned above:")]),e._v(" "),a("p",[e._v("PEM Format")]),e._v(" "),a("p",[e._v("It is the most common format that Certificate Authorities issue certificates in. It contains the ‘—–BEGIN CERTIFICATE—–” and “—–END CERTIFICATE—–” statements.\nSeveral PEM certificates and even the Private key can be included in one file, one below the other. But most platforms(eg:- Apache) expects the certificates and Private key to be in separate files.")]),e._v(" "),a("blockquote",[a("p",[e._v("They are Base64 encoded ACII files")])]),e._v(" "),a("blockquote",[a("p",[e._v("They have extensions such as .pem, .crt, .cer, .key")])]),e._v(" "),a("blockquote",[a("p",[e._v("Apache and similar servers uses PEM format certificates")])]),e._v(" "),a("p",[e._v("PFX/PKCS#12")]),e._v(" "),a("p",[e._v("They are used for storing the Server certificate, any Intermediate certificates & Private key in one encryptable file.")]),e._v(" "),a("blockquote",[a("p",[e._v("They are Binary format files")])]),e._v(" "),a("blockquote",[a("p",[e._v("They have extensions .pfx, .p12")])]),e._v(" "),a("blockquote",[a("p",[e._v("Typically used on Windows OS to import and export certificates and Private keys")])]),e._v(" "),a("p",[e._v(".CER-\nstands for Microsoft X.509 certificate, certificate stored in the X.509 standard format. This certificate contains information about the certificate's owner... along with public and private keys.")]),e._v(" "),a("p",[e._v(".PVK-\nfiles are used to store private keys for code signing. You can also create a certificate based on .pvk private key file.")]),e._v(" "),a("p",[e._v(".PFX-\nstands for Personal Information Exchange format using a password-based symmetric key. It is used to exchange public and private objects in a single file. A pfx file can be created from .cer file. Can also be used to create a Software Publisher Certificate.")]),e._v(" "),a("p",[e._v(".SNK-\nstands for Assembly Signature Key Attribute, only contain the RSA key (public/private or public only)")]),e._v(" "),a("p",[e._v("there is also a coding approach to extract snk from pfx")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("///\n/// Converts .pfx file to .snk file.\n///\n///.pfx file data. ///.pfx file password. /// .snk file data.\npublic static byte[] Pfx2Snk(byte[] pfxData, string pfxPassword)\n{\n// load .pfx\nvar cert = new X509Certificate2(pfxData, pfxPassword, X509KeyStorageFlags.Exportable);\n// create .snk\nvar privateKey = (RSACryptoServiceProvider)cert.PrivateKey;\nreturn privateKey.ExportCspBlob(true);\n}\n")])])]),a("p",[e._v("Simple Example OpenSSL: Encrypt Data With an RSA Key With PHP\nhttps://rietta.com/blog/2013/06/13/openssl-encrypt-data-with-rsa-key-with/\nOpenSSL for Windows\nhttp://gnuwin32.sourceforge.net/packages/openssl.htm\nCommand Line Utilities\nhttps://wiki.openssl.org/index.php/Command_Line_Utilities\nphp实现MD5withRSA签名算法\nhttp://www.cnblogs.com/kennyhr/p/3746100.html\nMD5 with RSA in php\nhttp://stackoverflow.com/questions/22653640/md5-with-rsa-in-php\nDifference between MakeCert and OpenSSL wrt C# SslStream\nhttp://stackoverflow.com/questions/26186780/difference-between-makecert-and-openssl-wrt-c-sharp-sslstream\nwindows主机开启openssl的方法\nhttp://www.feichang56.com/openssl.html\nIIS6.0 + openssl执行版 + Windows2003--配置篇\nhttp://mixangel.blog.51cto.com/286311/135267")]),e._v(" "),a("h3",{attrs:{id:"failed-to-open-stream-no-suitable-wrapper-could-be-found"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#failed-to-open-stream-no-suitable-wrapper-could-be-found"}},[e._v("#")]),e._v(" ?#failed to open stream: no suitable wrapper could be found")]),e._v(" "),a("p",[e._v("https://stackoverflow.com/questions/6551379/file-get-contents-error")]),e._v(" "),a("h3",{attrs:{id:"php-parse-url-bad-practice"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#php-parse-url-bad-practice"}},[e._v("#")]),e._v(" ?#PHP parse_url bad practice")]),e._v(" "),a("p",[e._v("identified an issue when install OneBase.org php framework( which is based on Thinkphp 5.0)\nthe root cause is callling of php internal function parse_url, when your password includes special character like #, the parse_url function wrongly split the string,\nwork around is by adding a / at the tail of $url\nsmall issue, but may waste plenty of time investigating it because of layering and encapsulation")]),e._v(" "),a("h2",{attrs:{id:"php-code-snippets"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#php-code-snippets"}},[e._v("#")]),e._v(" PHP Code Snippets")]),e._v(" "),a("h3",{attrs:{id:"伪随机-mt-rand"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#伪随机-mt-rand"}},[e._v("#")]),e._v(" 伪随机 mt_rand()")]),e._v(" "),a("p",[e._v("https://www.cnblogs.com/zaqzzz/p/9997855.html")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<?php  \nmt_srand(12345);    //分发seed种子，\n//然后种子有了后，靠mt_rand()生成随机数\necho mt_rand()."<br/>"; //第一次\necho mt_rand()."<br/>"; //第二次\n....\necho mt_rand()."<br/>"; //第n次\n?>  \n任意执行上面程序，会发现每一次生成的“随机数”顺序都是一样的，第一次的永远是一样的，第二次的也是....\n原因： 生成伪随机数是线性的，你可以理解为y=ax,x就是种子，知道种子后，可以确定你输出伪随机数的序列。\n知道你的随机数序列，可以确定你的种子。当然实际上更复杂肯定。\n\n')])])]),a("p",[e._v("工具: php_mt_seed (PHP mt_rand() seed cracker)")]),e._v(" "),a("p",[e._v("https://www.openwall.com/php_mt_seed/")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("tar zxvf php_mt_seed-4.0.tar.gz\ncd php_mt_seed-4.0/\nmake\n./php_mt_seed <给个随机数> 可以算出seed\n")])])]),a("h3",{attrs:{id:"upload-large-files"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#upload-large-files"}},[e._v("#")]),e._v(" upload large files")]),e._v(" "),a("p",[e._v("upload images\nexport PDF tcpdf\nhttps://www.sitepoint.com/upload-large-files-in-php/")]),e._v(" "),a("p",[e._v("Strict Standards: Only variables should be passed by reference\nhttp://stackoverflow.com/questions/9848295/strict-standards-only-variables-should-be-passed-by-reference-error\nSMS\nXML PARSE")]),e._v(" "),a("h3",{attrs:{id:"illegal-string-offset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#illegal-string-offset"}},[e._v("#")]),e._v(" Illegal string-offset")]),e._v(" "),a("p",[e._v("PHP safe check\nfrom 5.3 upgrade to 5.4\nhttp://stackoverflow.com/questions/24017096/deploying-cakephp-to-php-5-4-16-gives-illegal-string-offset-in-cakephps-core\nAnd as it's working in PHP 5.3, it is not going to work in PHP 5.4 because as I have cast my array into a string, I should cast it back to an array (or to be more precise: use my previously created string from the array as an array) which gives this error/warning in PHP 5.4.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("foreach(array('_GET','_POST','_COOKIE','_REQUEST') as $key) {\nif (isset($$key)){\nforeach($$key as $_key => $_value){\n$$key[$_key] = safe_str($_value);\n}\n}\n}\n")])])]),a("p",[e._v("http://stackoverflow.com/questions/24151713/looping-variable-variables-illegal-string-offset")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("foreach(array('_GET','_POST','_COOKIE','_REQUEST') as $key) {\nif (isset($$key)){\n$temp=array();\nforeach($$key as $_key => $_value){\nif(is_array($$key)&&array_key_exists($_key,$$key)){\nif($_key=='PHPSESSID' || $_value==''){\n}else{\n$temp[$_key] = safe_str($_value);\n}\n}\n${$key}=$temp;\n}\n}\n")])])]),a("p",[e._v("http://stackoverflow.com/questions/23895204/php-5-5-12-illegal-string-offset-on-a-valid-array\nhttp://stackoverflow.com/questions/15361392/how-do-i-correct-this-illegal-string-offset")]),e._v(" "),a("p",[e._v("PHP magic_quotes_gpc的详细使用方法\nhttp://developer.51cto.com/art/200911/165392.htm\nhttp://php.net/manual/en/security.magicquotes.disabling.php\nstackoverflow.com/questions/6661406/best-method-of-disabling-php-magic-quotes-without-php-ini-or-htaccess")]),e._v(" "),a("p",[e._v("Notice: Undefined index:\nWays to deal with the issue:")]),e._v(" "),a("p",[e._v("Recommended: Declare your variables. Or use isset() to check if they are declared before referencing them, as in: $value = isset($_POST['value']) ? $_POST['value'] : '';.\nSet a custom error handler for E_NOTICE and redirect the messages away from the standard output (maybe to a log file). set_error_handler('myHandlerForMinorErrors', E_NOTICE | E_STRICT).\nDisable E_NOTICE from reporting. A quick way to exclude just E_NOTICE is error_reporting( error_reporting() & ~E_NOTICE ).\nSuppress the error with the @ operator.\nUninitialized string offset: 0\nis_array()\nNon-static method xxx:xxx() should not be called statically")]),e._v(" "),a("h3",{attrs:{id:"php-session-null"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#php-session-null"}},[e._v("#")]),e._v(" php session null")]),e._v(" "),a("p",[e._v("debug steps：\n1、create phpinfo.php :")]),e._v(" "),a("p",[e._v("open using browser and check session portion.\n2、cross domain issues: if set session.cookie_domain = A, session cookies is invalid in domain B.\nyou can set session.cookie_domain=\"\" in php.ini\n3、if set session.cookie_path = /abc/ in php.ini, only folder abc and its subdirectory is allowed to use session.in this case, set session.cookie_path = /\n4、misuse of session.cookie_path and session.save_path, session.cookie_path specifies path to set in the session cookie, while session.save_path defines the argument which is passed to the save handler. If you choose the default files handler, this is the path where the files are created.\n5、lack of write permission on session.save_path, or the path not exits, by default, windows uses '%SystemRoot%\\TEMP', unix uses '/tmp'\n6、when session.auto_start = on, execute session_start() will generate new session_id.and check whether session_start() at wrong position")]),e._v(" "),a("h3",{attrs:{id:"serialize-unserialize"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serialize-unserialize"}},[e._v("#")]),e._v(" serialize unserialize")]),e._v(" "),a("p",[e._v('a:2:{i:0;a:3:{s:2:"id";s:1:"1";s:3:"num";s:1:"3";s:4:"desc";s:3:"50%";}i:1;a:3:{s:2:"id";s:1:"3";s:3:"num";s:1:"4";s:4:"desc";s:32:"交通便利";}}\nhttp://blog.tanist.co.uk/files/unserialize/')]),e._v(" "),a("p",[e._v("How can I prevent SQL-injection in PHP?\nhttp://stackoverflow.com/questions/60174/how-can-i-prevent-sql-injection-in-php")]),e._v(" "),a("p",[e._v("Protect Against Malicious POST Requests\nhttps://perishablepress.com/protect-post-requests/")]),e._v(" "),a("p",[e._v('CURL\nCURL exec - Curl failed with error 0,\nhttp://stackoverflow.com/questions/8227909/curl-exec-always-returns-false\nUsing cURL in PHP to access HTTPS (SSL/TLS) protected sites\nReturn code is 0 SSL certificate problem: unable to get local issuer certificateCurl error: string(25) "Curl failed with error 0," NULL\nhttp://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/')]),e._v(" "),a("p",[e._v('Return code is 500 string(25) "Curl failed with error 0," NULL\nthis could be pramamter issues or other program handler problem.')]),e._v(" "),a("p",[e._v("refer：\nhttp://www.cnblogs.com/suihui/p/4365107.html")]),e._v(" "),a("disqus")],1)}),[],!1,null,null,null);t.default=n.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[323],{748:function(n,e,t){"use strict";t.r(e);var s=t(65),a=Object(s.a)({},(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h2",{attrs:{id:"基本语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本语法"}},[n._v("#")]),n._v(" 基本语法:")]),n._v(" "),t("p",[n._v("模块系统 Modules")]),n._v(" "),t("p",[n._v("事件 Event")]),n._v(" "),t("p",[n._v("函数 function")]),n._v(" "),t("p",[n._v("路由 route")]),n._v(" "),t("p",[n._v("全局对象 Global Object")]),n._v(" "),t("p",[n._v("event loop")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("console.log('script start')\n\nconst interval = setInterval(() => {\t1-TASK\n  console.log('setInterval')\n}, 0)\n\nsetTimeout(() => {\t\t\t\t\t\t1-TASK\n  console.log('setTimeout 1')\n  Promise.resolve().then(() => {\n    console.log('promise 3')\n  }).then(() => {\n    console.log('promise 4')\n  }).then(() => {\n    setTimeout(() => {\n      console.log('setTimeout 2')\n      Promise.resolve().then(() => {\n        console.log('promise 5')\n      }).then(() => {\n        console.log('promise 6')\n      }).then(() => {\n        clearInterval(interval)\n      })\n    }, 0)\n  })\n}, 0)\n\nPromise.resolve().then(() => {\t\t\t1-MICROTASK\n  console.log('promise 1')\n}).then(() => {\n  console.log('promise 2')\n})\n\nstack:\n\tscript start\n\t<STACK empty>\n\t<run 1-MICROTASK>\n\tpromise 1\n\tpromise 2\n\t<MICROTASK empty>\n\t<STACK empty>\n\t<run 1-TASK>\n\tsetInterval [ and schedule a new interval after timeout in 2-TASK queue]\n\t<MICROTASK empty>\n\t<run 1-TASK>\n\tsetTimeout 1 [ and schedule promise 3, promise 4 as micro task, and schedule timeout2 as 2-TASK after previous interval]\n\tpromise 3\n\tpromise 4\n\t<MICROTASK empty>\n\t<run 2-TASK>\n\tsetInterval [ and schedule a new interval after timeout in 3-TASK queue]\n\tsetTimeout 2\n\tpromise 5\n\tpromise 6\n\tclearInterval\n\t\n")])])]),t("p",[n._v("https://www.quora.com/What-is-the-difference-between-Node-js-front-end-and-Node-js-server-side")]),n._v(" "),t("p",[n._v("https://stackoverflow.com/questions/41247687/how-to-deploy-separated-frontend-and-backend")]),n._v(" "),t("p",[n._v("REACTJS")]),n._v(" "),t("p",[n._v("https://pro.ant.design/")]),n._v(" "),t("p",[n._v("Redux")]),n._v(" "),t("p",[n._v("Sass")]),n._v(" "),t("p",[n._v("Jsx")]),n._v(" "),t("p",[n._v("npm install geoip-lite")]),n._v(" "),t("p",[n._v("npm install smoothie")]),n._v(" "),t("p",[n._v("nodejs部署")]),n._v(" "),t("p",[n._v("process.env.PORT")]),n._v(" "),t("p",[n._v("https://github.com/tjanczuk/iisnode/issues/282")]),n._v(" "),t("p",[n._v("http://cnodejs.org/topic/5775d5af0b982e0450b74649")]),n._v(" "),t("p",[n._v("https://github.com/sheila1227/FE-blog/issues/1")]),n._v(" "),t("p",[n._v("https://yq.aliyun.com/articles/80217")]),n._v(" "),t("p",[n._v("https://segmentfault.com/a/1190000009368204")]),n._v(" "),t("h2",{attrs:{id:"online-install"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#online-install"}},[n._v("#")]),n._v(" online install")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.0/install.sh | bash\nnvm -v\nnvm install 17\n\n")])])]),t("h2",{attrs:{id:"offline-install"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#offline-install"}},[n._v("#")]),n._v(" offline install")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("tar xvf node-v16.17.0-linux-x64.tar.xz\nvim /etc/profile.d/nodejs.sh:\n#!/bin/sh\nexport PATH=/opt/node-v12.16.2-linux-s390x/bin:$PATH\n")])])]),t("h2",{attrs:{id:"pm2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pm2"}},[n._v("#")]),n._v(" PM2")]),n._v(" "),t("p",[n._v("PM2 is a production process manager for Node.js applications with a built-in load balancer. It allows you to keep applications alive forever, to reload them without downtime and to facilitate common system admin tasks.")]),n._v(" "),t("p",[n._v("https://pm2.keymetrics.io/docs/usage/application-declaration/")]),n._v(" "),t("h3",{attrs:{id:"install"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install"}},[n._v("#")]),n._v(" install")]),n._v(" "),t("p",[t("strong",[n._v("online:")])]),n._v(" "),t("p",[n._v("npm install pm2 -g")]),n._v(" "),t("p",[t("strong",[n._v("offline:")])]),n._v(" "),t("p",[n._v("Download pm2 package here: https://github.com/Unitech/pm2/releases (current used in production v4.4)")]),n._v(" "),t("p",[n._v("if install on offline vm, need to run 'npm install ' inside the pm2 folder first on a online machine to generate the node_modules, and then upload to the offline vm")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("Check npm install path:\nnpm config get prefix\n\ncopy the pm2 package to node_module path, unzip and create soft link:\ncp -p pm2.tar.gz /usr/local/lib/nodejs/node-v16.15.0-linux-x64/lib/node_modules/\ncd /usr/local/lib/nodejs/node-v16.15.0-linux-x64/lib/node_modules/ \ntar -xzvf pm2.tar.gz\nln -s /usr/local/lib/nodejs/node-v16.15.0-linux-x64/lib/node_modules/pm2/bin/pm2 /usr/bin/pm2\n\nTest if pm2 installed successfully:\nsu - express\npm2 -v\n## if use root to execute pm2 -v, there will be a pm2 process running under root\n")])])]),t("p",[t("strong",[n._v("Updating PM2")])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("# Install latest PM2 version\n$ npm install pm2@latest -g\n# Save process list, exit old PM2 & restore all processes\n$ pm2 update\n")])])]),t("h3",{attrs:{id:"run-app"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#run-app"}},[n._v("#")]),n._v(" run app")]),n._v(" "),t("h4",{attrs:{id:"basic"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#basic"}},[n._v("#")]),n._v(" Basic")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("// normal mode:\npm2 start app.js\n\n// cluster mode that will leverage all CPUs available:\n$ pm2 start api.js -i <processes> //<processes> can be 'max', -1 (all cpu minus 1) or a specified number of instances to start.\n\npm2 ls\n\n$ pm2 stop     <app_name|namespace|id|'all'|json_conf>\n$ pm2 restart  <app_name|namespace|id|'all'|json_conf>\n$ pm2 delete   <app_name|namespace|id|'all'|json_conf>\n\nHot Reload allows to update an application without any downtime:\n\n$ pm2 reload all\n\nTo have more details on a specific application:\n\n$ pm2 describe <id|app_name>\n\nStartup Scripts Generation\nPM2 can generate and configure a Startup Script to keep PM2 and your processes alive at every server restart.\n\nInit Systems Supported: systemd, upstart, launchd, rc.d\n\n# Generate Startup Script\n$ pm2 startup\n\n# Freeze your process list across server restart\n$ pm2 save\n\n# Remove Startup Script\n$ pm2 unstartup\n\n")])])]),t("h4",{attrs:{id:"config"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#config"}},[n._v("#")]),n._v(" Config")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('When managing multiple applications with PM2, use a JS configuration file to organize them.\n\nGenerate configuration\nTo generate a sample configuration file you can type this command:\n\n$ pm2 init simple\nThis will generate a sample ecosystem.config.js:\n\nmodule.exports = {\n  apps : [{\n    name   : "app1",\n    script : "./app.js"\n  }]\n}\nIf you are creating your own configuration file, make sure it ends with .config.js so PM2 is able to recognize it as a configuration file.\n\nActing on Configuration File\nSeamlessly than acting on an app you can start/stop/restart/delete all apps contained in a configuration file:\n\n# Start all applications\npm2 start ecosystem.config.js\n\npm2 startOrGracefulReload ecosystem.config.js --env test --update-env\n\n# Stop all\npm2 stop ecosystem.config.js\n\n# Restart all\npm2 restart ecosystem.config.js\n\n# Reload all\npm2 reload ecosystem.config.js\n\n# Delete all\npm2 delete ecosystem.config.js\nAct on a specific process\nYou can also act on a particular application by using its name and the option --only <app_name>:\n\npm2 start   ecosystem.config.js --only api-app\nNote: the --only option works for start/restart/stop/delete as well\n\nYou can even specify multiple apps to be acted on by specifying each app name separated by a comma:\n\npm2 start ecosystem.config.js --only "api-app,worker-app"\nSwitching environments\nYou can specify different environment variable set via the env_* option.\n\nExample:\n\nmodule.exports = {\n  apps : [{\n    name   : "app1",\n    script : "./app.js",\n    env_production: {\n       NODE_ENV: "production"\n    },\n    env_development: {\n       NODE_ENV: "development"\n    }\n  }]\n}\nNow to switch between variables in different environment, specify the --env [env name] option:\n\npm2 start process.json --env production\npm2 restart process.json --env development\n')])])]),t("h4",{attrs:{id:"monitor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#monitor"}},[n._v("#")]),n._v(" Monitor")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("To monitor logs, custom metrics, application information:\n$ pm2 monit\n\nPM2 allows to monitor your host/server vitals with a monitoring speedbar.\n\nTo enable host monitoring:\n\n$ pm2 set pm2:sysmonit true\n$ pm2 update\n\nTo consult logs just type the command:\n\n$ pm2 logs\n\nStandard, Raw, JSON and formated output are available.\n\nExamples:\n\n$ pm2 logs APP-NAME       # Display APP-NAME logs\n$ pm2 logs --json         # JSON output\n$ pm2 logs --format       # Formated output\n\n$ pm2 flush               # Flush all logs\n$ pm2 reloadLogs          # Reload all logs\nTo enable log rotation install the following module\n\n$ pm2 install pm2-logrotate\n")])])]),t("p",[t("a",{attrs:{href:"https://app.pm2.io/",target:"_blank",rel:"noopener noreferrer"}},[n._v("Discover the monitoring dashboard for PM2"),t("OutboundLink")],1)]),n._v(" "),t("h2",{attrs:{id:"nextjs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nextjs"}},[n._v("#")]),n._v(" NextJs")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("npx create-next-app@latest my-nextjs-app\n\nnpm install next\n\n/pages/api/test/index.js\n\nnpm run build\nnpm run start\n\n curl -s  http://127.0.0.1:3000/api/airdrop\n")])])]),t("h2",{attrs:{id:"troubleshooting"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting"}},[n._v("#")]),n._v(" troubleshooting")]),n._v(" "),t("h3",{attrs:{id:"nodejs-version-18-开始有改动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nodejs-version-18-开始有改动"}},[n._v("#")]),n._v(" nodejs version 18 开始有改动")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("$ node -v\nnode: /lib64/libm.so.6: version `GLIBC_2.27' not found (required by node)\nnode: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required by node)\nnode: /lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by node)\nnode: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by node)\nnode: /lib64/libc.so.6: version `GLIBC_2.28' not found (required by node)\nnode: /lib64/libc.so.6: version `GLIBC_2.25' not found (required by node)\n[rapidapi@vultr ~]$ strings /lib64/libc.so.6 | grep GLIBC\n\n")])])]),t("h3",{attrs:{id:"install-phantomjs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-phantomjs"}},[n._v("#")]),n._v(" install phantomjs")]),n._v(" "),t("p",[n._v("缘由是安装安全工具:webscreenshot和snapper,其实正确的指引就在")]),n._v(" "),t("p",[n._v("https://github.com/lyhistory/webscreenshot/wiki/PhantomJS-installation")]),n._v(" "),t("p",[n._v("刚开始没发现,所以经历下面过程:")]),n._v(" "),t("p",[n._v("https://www.npmjs.com/package/phantomjs")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("npm ERR! code 1\nnpm ERR! path /usr/local/lib/node_modules/phantomjs\nnpm ERR! command failed\nnpm ERR! command sh -c node install.js\nnpm ERR! Considering PhantomJS found at /usr/local/bin/phantomjs\nnpm ERR! Looks like an `npm install -g`\nnpm ERR! Error checking path, continuing Error: Cannot find module '/usr/local/lib/node_modules/phantomjs/lib/location'\nnpm ERR! Require stack:\nnpm ERR! - /usr/local/lib/node_modules/phantomjs/install.js\nnpm ERR!     at Function.Module._resolveFilename (internal/modules/cjs/loader.js:831:15)\nnpm ERR!     at Function.Module._load (internal/modules/cjs/loader.js:687:27)\nnpm ERR!     at Module.require (internal/modules/cjs/loader.js:903:19)\nnpm ERR!     at require (internal/modules/cjs/helpers.js:74:18)\nnpm ERR!     at getLocationInLibModuleIfMatching (/usr/local/lib/node_modules/phantomjs/install.js:332:19)\nnpm ERR!     at Promise._successFn (/usr/local/lib/node_modules/phantomjs/install.js:389:28)\nnpm ERR!     at nextTickCallback (/usr/local/lib/node_modules/phantomjs/node_modules/kew/kew.js:47:28)\nnpm ERR!     at processTicksAndRejections (internal/process/task_queues.js:79:11) {\nnpm ERR!   code: 'MODULE_NOT_FOUND',\nnpm ERR!   requireStack: [ '/usr/local/lib/node_modules/phantomjs/install.js' ]\nnpm ERR! }\nnpm ERR! Phantom installation failed TypeError [ERR_INVALID_ARG_TYPE]: The \"path\" argument must be of type string. Received undefined\nnpm ERR!     at validateString (internal/validators.js:120:11)\nnpm ERR!     at Object.join (path.js:1039:7)\nnpm ERR!     at findSuitableTempDirectory (/usr/local/lib/node_modules/phantomjs/install.js:127:30)\nnpm ERR!     at /usr/local/lib/node_modules/phantomjs/install.js:476:19\nnpm ERR!     at nextTickCallback (/usr/local/lib/node_modules/phantomjs/node_modules/kew/kew.js:47:28)\nnpm ERR!     at processTicksAndRejections (internal/process/task_queues.js:79:11) {\nnpm ERR!   code: 'ERR_INVALID_ARG_TYPE'\nnpm ERR! } TypeError [ERR_INVALID_ARG_TYPE]: The \"path\" argument must be of type string. Received undefined\nnpm ERR!     at validateString (internal/validators.js:120:11)\nnpm ERR!     at Object.join (path.js:1039:7)\nnpm ERR!     at findSuitableTempDirectory (/usr/local/lib/node_modules/phantomjs/install.js:127:30)\nnpm ERR!     at /usr/local/lib/node_modules/phantomjs/install.js:476:19\nnpm ERR!     at nextTickCallback (/usr/local/lib/node_modules/phantomjs/node_modules/kew/kew.js:47:28)\nnpm ERR!     at processTicksAndRejections (internal/process/task_queues.js:79:11)\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /root/.npm/_logs/2021-01-01T08_03_17_613Z-debug.log\n")])])]),t("p",[n._v("fix也没用")]),n._v(" "),t("p",[n._v("sudo npm audit fix")]),n._v(" "),t("p",[n._v("最后使用手动安装的方式,参考:")]),n._v(" "),t("p",[n._v("https://gist.github.com/julionc/7476620")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('sudo apt-get update\nsudo apt-get install build-essential chrpath libssl-dev libxft-dev\nsudo apt-get install libfreetype6 libfreetype6-dev\nsudo apt-get install libfontconfig1 libfontconfig1-dev\ncd ~\nexport PHANTOM_JS="phantomjs-1.9.8-linux-x86_64"\nwget https://bitbucket.org/ariya/phantomjs/downloads/$PHANTOM_JS.tar.bz2\nsudo tar xvjf $PHANTOM_JS.tar.bz2\nsudo mv $PHANTOM_JS /usr/local/share\nsudo ln -sf /usr/local/share/$PHANTOM_JS/bin/phantomjs /usr/local/bin\n')])])]),t("p",[n._v("测试 phantomjs --version 在kali上出现:")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("139743462616704:error:25066067:DSO support routines:DLFCN_LOAD:could not load the shared\n")])])]),t("p",[t("strong",[n._v("Solution:")])]),n._v(" "),t("p",[n._v("http://ubuntuhowtoo.blogspot.com/2019/05/linux-nodejs-phantomjs-error-loading.html")]),n._v(" "),t("p",[n._v("open "),t("code",[n._v("/etc/ssl/openssl.cnf")]),n._v(" and comment out the line under "),t("code",[n._v("[default_conf]")]),n._v(" (it is at the end of the config file):\n"),t("code",[n._v("#ssl_conf = ssl_sect")])]),n._v(" "),t("p",[n._v("http://www.w3cschool.cc/nodejs\nhttp://www.nodejs.org/\nhttp://www.nodebeginner.org/index-zh-cn.html\nhttps://channel9.msdn.com/Series/Building-Apps-with-Node-js?WT.mc_id=12833-DEV-sitepoint-othercontent")]),n._v(" "),t("p",[n._v("https://www.tutorialsteacher.com/nodejs/nodejs-tutorials")]),n._v(" "),t("disqus")],1)}),[],!1,null,null,null);e.default=a.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{274:function(n,a,t){"use strict";t.r(a);var e=t(0),s=Object(e.a)({},(function(){var n=this,a=n.$createElement,t=n._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h2",{attrs:{id:"jdk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jdk"}},[n._v("#")]),n._v(" jdk")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("查看系统安装的所有java版本\nupdate-alternatives --config java\n")])])]),t("p",[n._v("difference between JAVA_HOME and update-alternatives")]),n._v(" "),t("p",[n._v("https://unix.stackexchange.com/questions/123412/what-is-the-difference-between-java-home-and-update-alternatives")]),n._v(" "),t("p",[n._v("update-java-alternatives vs update-alternatives --config java")]),n._v(" "),t("p",[n._v("https://askubuntu.com/questions/315646/update-java-alternatives-vs-update-alternatives-config-java")]),n._v(" "),t("h2",{attrs:{id:"jdk-troubleshooting"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jdk-troubleshooting"}},[n._v("#")]),n._v(" jdk troubleshooting")]),n._v(" "),t("p",[n._v("验证码无法显示，需要输出完整的错误日志")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('使用的是log4j2\n\nlogger.error("exception: {} " , e.getMessage());\n改为\nlogger.error("exception: {} " , e);\n\nconfig加上 %ex{full}：\nPatternLayout:\n  pattern: "%-d{yyyy-MM-dd HH:mm:ss.SSS}-[%l]-[%p] ${PID:-} %m%n - %ex{full}"\n\n- java.lang.NullPointerException\n        at sun.awt.FontConfiguration.getVersion(FontConfiguration.java:1264)\n        at sun.awt.FontConfiguration.readFontConfigFile(FontConfiguration.java:219)\n        at sun.awt.FontConfiguration.init(FontConfiguration.java:107)\n        at sun.awt.X11FontManager.createFontConfiguration(X11FontManager.java:776)\n        at sun.font.SunFontManager$2.run(SunFontManager.java:431)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at sun.font.SunFontManager.<init>(SunFontManager.java:376)\n        at sun.awt.X11FontManager.<init>(X11FontManager.java:57)\n')])])]),t("p",[n._v("搜索openjdk sun.awt.FontConfiguration.getVersion nullpointer基本都是：")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("yum install fontconfig\nfc-cache --force\n")])])]),t("p",[n._v("去到openjdk官网")]),n._v(" "),t("p",[n._v("https://github.com/openjdk/jdk/search?q=FontConfiguration")]),n._v(" "),t("p",[n._v("没有人反应有问题，说明还是系统的问题")]),n._v(" "),t("p",[n._v("从")]),n._v(" "),t("p",[n._v("https://stackoverflow.com/questions/30626136/cannot-load-font-in-jre-8/50802170")]),n._v(" "),t("p",[n._v("得到启发")]),n._v(" "),t("p",[n._v("Also one might need to install at least one font ("),t("code",[n._v("dejavu")]),n._v(", "),t("code",[n._v("liberation")]),n._v(", etc).")]),n._v(" "),t("p",[n._v("应该是找不到系统上任何字体")]),n._v(" "),t("p",[n._v("对比了一个正常的环境，发现有")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("[sgkc2-devclr-v08@SG/home/clear]$ll /usr/share/fonts/\ntotal 4\ndrwxr-xr-x 2 root root 4096 Nov 25  2019 dejavu\n")])])]),t("p",[n._v("但是另外还有一个可以工作的正常环境，里面并没有上述任何字体，")]),n._v(" "),t("p",[n._v("然后又看到")]),n._v(" "),t("p",[n._v("https://docs.oracle.com/javase/9/intl/font-configuration-files.htm")]),n._v(" "),t("p",[n._v("https://docs.oracle.com/javase/8/docs/technotes/guides/intl/fontconfig.html")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('[sgkc2-devclr-v05@SG/root]#find / -name "fontconfig*"\n/var/cache/fontconfig\n/usr/lib64/girepository-1.0/fontconfig-2.0.typelib\n/usr/share/doc/fontconfig-2.10.95\n/usr/share/doc/fontconfig-2.10.95/fontconfig-user.html\n/usr/share/doc/fontconfig-2.10.95/fontconfig-user.txt\n/usr/share/fontconfig\n/usr/share/xml/fontconfig\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.RedHat.5.bfc\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.RedHat.5.properties.src\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.RedHat.6.bfc\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.RedHat.6.properties.src\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.SuSE.10.bfc\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.SuSE.10.properties.src\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.SuSE.11.bfc\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.SuSE.11.properties.src\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.Turbo.bfc\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.Turbo.properties.src\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.bfc\n/usr/java/jre1.8.0_221-amd64/lib/fontconfig.properties.src\n\n]#update-alternatives --config java\n\nThere are 3 programs which provide \'java\'.\n\n  Selection    Command\n-----------------------------------------------\n   1           /usr/java/jre1.8.0_221-amd64/bin/java\n   2           java-11-openjdk.x86_64 (/usr/lib/jvm/java-11-openjdk-11.0.5.10-0.el7_7.x86_64/bin/java)\n*+ 3           java-1.8.0-openjdk.x86_64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.232.b09-0.el7_7.x86_64/jre/bin/java)\n\n#echo $JAVA_HOME\n/apps/dependency/java-se-8u40-ri\n#echo $PATH\n/apps/dependency/java-se-8u40-ri/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin\n#which java\n/apps/dependency/java-se-8u40-ri/bin/java\n#java -version\nopenjdk version "1.8.0_40"\nOpenJDK Runtime Environment (build 1.8.0_40-b25)\nOpenJDK 64-Bit Server VM (build 25.40-b25, mixed mode)\n\n\n')])])]),t("p",[n._v("但是也不对，这个jre版本明显跟我们设置的JAVA_HOME版本不一样")]),n._v(" "),t("p",[n._v("最终找到如何在redhat配置fonts")]),n._v(" "),t("p",[n._v("https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/desktop_migration_and_administration_guide/configure-fonts")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("#fc-list : file\n/usr/share/X11/fonts/Type1/c0649bt_.pfb:\n/usr/share/X11/fonts/Type1/UTRG____.pfa:\n/usr/share/X11/fonts/Type1/c0611bt_.pfb:\n/usr/share/X11/fonts/Type1/c0419bt_.pfb:\n/usr/share/X11/fonts/Type1/UTI_____.pfa:\n/usr/share/X11/fonts/Type1/cursor.pfa:\n/usr/share/X11/fonts/Type1/c0633bt_.pfb:\n/usr/share/X11/fonts/Type1/UTB_____.pfa:\n/usr/share/X11/fonts/Type1/c0648bt_.pfb:\n/usr/share/X11/fonts/Type1/c0583bt_.pfb:\n/usr/share/X11/fonts/Type1/UTBI____.pfa:\n/usr/share/X11/fonts/Type1/c0632bt_.pfb:\n/usr/share/X11/fonts/Type1/c0582bt_.pfb:\n\n")])])]),t("p",[n._v("上面是在可以工作的机器上看到的结果，有问题的机器上输出是空，所以查了下redhat linux 7 install X11 fonts，发现这个字体叫做")]),n._v(" "),t("p",[n._v("xorg-x11-fonts ，继而搜索 linux install xorg-x11-fonts，得到")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("yum install xorg-x11-fonts-Type1\n")])])])])}),[],!1,null,null,null);a.default=s.exports}}]);
<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>计算机基础教程</title>
    <meta name="description" content="软件开发教程，白帽黑客入门教程，区块链入门教程，物联网，大数据">
    
    
    <link rel="preload" href="/docs/assets/css/0.styles.89d6372f.css" as="style"><link rel="preload" href="/docs/assets/js/app.d815c9d2.js" as="script"><link rel="preload" href="/docs/assets/js/2.464c3f4a.js" as="script"><link rel="preload" href="/docs/assets/js/33.b51c1996.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.5a84fda6.js"><link rel="prefetch" href="/docs/assets/js/100.f68c1b0c.js"><link rel="prefetch" href="/docs/assets/js/101.d3afa5c6.js"><link rel="prefetch" href="/docs/assets/js/102.7aed39cf.js"><link rel="prefetch" href="/docs/assets/js/103.f356f286.js"><link rel="prefetch" href="/docs/assets/js/104.bd4e4a86.js"><link rel="prefetch" href="/docs/assets/js/105.b0511e23.js"><link rel="prefetch" href="/docs/assets/js/106.74799b60.js"><link rel="prefetch" href="/docs/assets/js/107.953b71fc.js"><link rel="prefetch" href="/docs/assets/js/108.043b2138.js"><link rel="prefetch" href="/docs/assets/js/109.fbdbf625.js"><link rel="prefetch" href="/docs/assets/js/11.3939fa95.js"><link rel="prefetch" href="/docs/assets/js/110.98f1578b.js"><link rel="prefetch" href="/docs/assets/js/111.6185984b.js"><link rel="prefetch" href="/docs/assets/js/112.03f3fd33.js"><link rel="prefetch" href="/docs/assets/js/113.bf24067c.js"><link rel="prefetch" href="/docs/assets/js/114.2c0d9fdb.js"><link rel="prefetch" href="/docs/assets/js/115.00b80e63.js"><link rel="prefetch" href="/docs/assets/js/116.841dfe6a.js"><link rel="prefetch" href="/docs/assets/js/117.6155e98a.js"><link rel="prefetch" href="/docs/assets/js/118.48df4bac.js"><link rel="prefetch" href="/docs/assets/js/119.56c70877.js"><link rel="prefetch" href="/docs/assets/js/12.02b27ff9.js"><link rel="prefetch" href="/docs/assets/js/120.67ae4a99.js"><link rel="prefetch" href="/docs/assets/js/121.359051fd.js"><link rel="prefetch" href="/docs/assets/js/122.b63da323.js"><link rel="prefetch" href="/docs/assets/js/123.64e5970f.js"><link rel="prefetch" href="/docs/assets/js/124.72ce3ccb.js"><link rel="prefetch" href="/docs/assets/js/125.027ee4bb.js"><link rel="prefetch" href="/docs/assets/js/126.65ae17b5.js"><link rel="prefetch" href="/docs/assets/js/127.7b5674c4.js"><link rel="prefetch" href="/docs/assets/js/128.67c01be0.js"><link rel="prefetch" href="/docs/assets/js/129.c6781a92.js"><link rel="prefetch" href="/docs/assets/js/13.bda61cff.js"><link rel="prefetch" href="/docs/assets/js/130.57464546.js"><link rel="prefetch" href="/docs/assets/js/131.50d71536.js"><link rel="prefetch" href="/docs/assets/js/132.86a2c48a.js"><link rel="prefetch" href="/docs/assets/js/133.ee07c62a.js"><link rel="prefetch" href="/docs/assets/js/134.703170a0.js"><link rel="prefetch" href="/docs/assets/js/135.f31d9245.js"><link rel="prefetch" href="/docs/assets/js/136.d863a8d8.js"><link rel="prefetch" href="/docs/assets/js/137.7295c668.js"><link rel="prefetch" href="/docs/assets/js/138.c3fd141a.js"><link rel="prefetch" href="/docs/assets/js/139.bc99b452.js"><link rel="prefetch" href="/docs/assets/js/14.cd13faab.js"><link rel="prefetch" href="/docs/assets/js/140.992f3361.js"><link rel="prefetch" href="/docs/assets/js/141.0f5fb54e.js"><link rel="prefetch" href="/docs/assets/js/142.af180907.js"><link rel="prefetch" href="/docs/assets/js/143.a89e78a3.js"><link rel="prefetch" href="/docs/assets/js/144.86fac27a.js"><link rel="prefetch" href="/docs/assets/js/145.eb2f792a.js"><link rel="prefetch" href="/docs/assets/js/146.56e5bd97.js"><link rel="prefetch" href="/docs/assets/js/147.81818985.js"><link rel="prefetch" href="/docs/assets/js/148.7f05f247.js"><link rel="prefetch" href="/docs/assets/js/149.04549cde.js"><link rel="prefetch" href="/docs/assets/js/15.fdccbf5a.js"><link rel="prefetch" href="/docs/assets/js/150.b56cdc10.js"><link rel="prefetch" href="/docs/assets/js/151.b609ed30.js"><link rel="prefetch" href="/docs/assets/js/152.578fed7a.js"><link rel="prefetch" href="/docs/assets/js/153.efd0557a.js"><link rel="prefetch" href="/docs/assets/js/154.3d5c2c52.js"><link rel="prefetch" href="/docs/assets/js/155.551eaf42.js"><link rel="prefetch" href="/docs/assets/js/156.18ead78c.js"><link rel="prefetch" href="/docs/assets/js/157.c58461bd.js"><link rel="prefetch" href="/docs/assets/js/158.b83599a8.js"><link rel="prefetch" href="/docs/assets/js/159.79cb3871.js"><link rel="prefetch" href="/docs/assets/js/16.f76819a5.js"><link rel="prefetch" href="/docs/assets/js/160.c0047f99.js"><link rel="prefetch" href="/docs/assets/js/161.2fc7fb35.js"><link rel="prefetch" href="/docs/assets/js/162.484d90c2.js"><link rel="prefetch" href="/docs/assets/js/163.6b00e0a8.js"><link rel="prefetch" href="/docs/assets/js/164.099223c8.js"><link rel="prefetch" href="/docs/assets/js/165.dd9483e7.js"><link rel="prefetch" href="/docs/assets/js/166.9e969128.js"><link rel="prefetch" href="/docs/assets/js/167.8e99e360.js"><link rel="prefetch" href="/docs/assets/js/168.b7099d02.js"><link rel="prefetch" href="/docs/assets/js/169.ebcf8f3f.js"><link rel="prefetch" href="/docs/assets/js/17.66e4494f.js"><link rel="prefetch" href="/docs/assets/js/170.426b68db.js"><link rel="prefetch" href="/docs/assets/js/171.be1048d1.js"><link rel="prefetch" href="/docs/assets/js/172.d9468553.js"><link rel="prefetch" href="/docs/assets/js/173.98fd4e6b.js"><link rel="prefetch" href="/docs/assets/js/174.4e19a8b6.js"><link rel="prefetch" href="/docs/assets/js/175.11802833.js"><link rel="prefetch" href="/docs/assets/js/176.64fd9987.js"><link rel="prefetch" href="/docs/assets/js/177.7dfeee11.js"><link rel="prefetch" href="/docs/assets/js/178.1e03b599.js"><link rel="prefetch" href="/docs/assets/js/179.b9b82bff.js"><link rel="prefetch" href="/docs/assets/js/18.9119b46e.js"><link rel="prefetch" href="/docs/assets/js/180.03224077.js"><link rel="prefetch" href="/docs/assets/js/181.b77928cf.js"><link rel="prefetch" href="/docs/assets/js/182.926e0ecb.js"><link rel="prefetch" href="/docs/assets/js/183.2bdce803.js"><link rel="prefetch" href="/docs/assets/js/184.7091e456.js"><link rel="prefetch" href="/docs/assets/js/185.cbd30d1b.js"><link rel="prefetch" href="/docs/assets/js/186.b8ff5e4e.js"><link rel="prefetch" href="/docs/assets/js/187.c42b5cf0.js"><link rel="prefetch" href="/docs/assets/js/188.a4816c5b.js"><link rel="prefetch" href="/docs/assets/js/189.a555051e.js"><link rel="prefetch" href="/docs/assets/js/19.387e5136.js"><link rel="prefetch" href="/docs/assets/js/190.8df478d7.js"><link rel="prefetch" href="/docs/assets/js/191.05e5ac5e.js"><link rel="prefetch" href="/docs/assets/js/192.266305a9.js"><link rel="prefetch" href="/docs/assets/js/193.868b59fa.js"><link rel="prefetch" href="/docs/assets/js/194.f67d7c60.js"><link rel="prefetch" href="/docs/assets/js/195.09d6925a.js"><link rel="prefetch" href="/docs/assets/js/196.c11e844f.js"><link rel="prefetch" href="/docs/assets/js/197.fa658da9.js"><link rel="prefetch" href="/docs/assets/js/198.418df0f4.js"><link rel="prefetch" href="/docs/assets/js/199.75f10b6a.js"><link rel="prefetch" href="/docs/assets/js/20.f0a4e62d.js"><link rel="prefetch" href="/docs/assets/js/200.cb045cb5.js"><link rel="prefetch" href="/docs/assets/js/201.afe22f97.js"><link rel="prefetch" href="/docs/assets/js/202.7ce62661.js"><link rel="prefetch" href="/docs/assets/js/203.b53ce099.js"><link rel="prefetch" href="/docs/assets/js/204.782f7cc8.js"><link rel="prefetch" href="/docs/assets/js/21.851c716a.js"><link rel="prefetch" href="/docs/assets/js/22.90511895.js"><link rel="prefetch" href="/docs/assets/js/23.3a09ed98.js"><link rel="prefetch" href="/docs/assets/js/24.45c2eb4e.js"><link rel="prefetch" href="/docs/assets/js/25.ba449961.js"><link rel="prefetch" href="/docs/assets/js/26.fc0b996a.js"><link rel="prefetch" href="/docs/assets/js/27.6274e2a7.js"><link rel="prefetch" href="/docs/assets/js/28.41c54623.js"><link rel="prefetch" href="/docs/assets/js/29.9cf92b52.js"><link rel="prefetch" href="/docs/assets/js/3.1d6e810b.js"><link rel="prefetch" href="/docs/assets/js/30.575975e8.js"><link rel="prefetch" href="/docs/assets/js/31.07b4c41e.js"><link rel="prefetch" href="/docs/assets/js/32.955b0ba4.js"><link rel="prefetch" href="/docs/assets/js/34.41e4e916.js"><link rel="prefetch" href="/docs/assets/js/35.fad627d4.js"><link rel="prefetch" href="/docs/assets/js/36.c437e2ed.js"><link rel="prefetch" href="/docs/assets/js/37.4ef2f5bd.js"><link rel="prefetch" href="/docs/assets/js/38.289c9553.js"><link rel="prefetch" href="/docs/assets/js/39.a0f97e9f.js"><link rel="prefetch" href="/docs/assets/js/4.5fa9fa14.js"><link rel="prefetch" href="/docs/assets/js/40.0319808e.js"><link rel="prefetch" href="/docs/assets/js/41.eea50025.js"><link rel="prefetch" href="/docs/assets/js/42.4a82f5d7.js"><link rel="prefetch" href="/docs/assets/js/43.7d07c4ce.js"><link rel="prefetch" href="/docs/assets/js/44.0d55ec13.js"><link rel="prefetch" href="/docs/assets/js/45.46d4a93f.js"><link rel="prefetch" href="/docs/assets/js/46.a91ee837.js"><link rel="prefetch" href="/docs/assets/js/47.887df95b.js"><link rel="prefetch" href="/docs/assets/js/48.82a57592.js"><link rel="prefetch" href="/docs/assets/js/49.890e4d83.js"><link rel="prefetch" href="/docs/assets/js/5.28e3870f.js"><link rel="prefetch" href="/docs/assets/js/50.933b8ffb.js"><link rel="prefetch" href="/docs/assets/js/51.ec7e74ef.js"><link rel="prefetch" href="/docs/assets/js/52.cccf4a89.js"><link rel="prefetch" href="/docs/assets/js/53.9df88a54.js"><link rel="prefetch" href="/docs/assets/js/54.e6f8c1f4.js"><link rel="prefetch" href="/docs/assets/js/55.2f1d1a12.js"><link rel="prefetch" href="/docs/assets/js/56.02d64560.js"><link rel="prefetch" href="/docs/assets/js/57.879be59b.js"><link rel="prefetch" href="/docs/assets/js/58.7c92a76a.js"><link rel="prefetch" href="/docs/assets/js/59.fa933ec2.js"><link rel="prefetch" href="/docs/assets/js/6.7be585d9.js"><link rel="prefetch" href="/docs/assets/js/60.ca8b6677.js"><link rel="prefetch" href="/docs/assets/js/61.3ca2527d.js"><link rel="prefetch" href="/docs/assets/js/62.0b9e0e22.js"><link rel="prefetch" href="/docs/assets/js/63.4365d3a6.js"><link rel="prefetch" href="/docs/assets/js/64.12a262ca.js"><link rel="prefetch" href="/docs/assets/js/65.abddcb04.js"><link rel="prefetch" href="/docs/assets/js/66.c4bf8182.js"><link rel="prefetch" href="/docs/assets/js/67.7b8ac16f.js"><link rel="prefetch" href="/docs/assets/js/68.3728aed9.js"><link rel="prefetch" href="/docs/assets/js/69.abb156ab.js"><link rel="prefetch" href="/docs/assets/js/7.ca472afe.js"><link rel="prefetch" href="/docs/assets/js/70.d0d040b8.js"><link rel="prefetch" href="/docs/assets/js/71.310a6b5c.js"><link rel="prefetch" href="/docs/assets/js/72.d3683a63.js"><link rel="prefetch" href="/docs/assets/js/73.61f9bc48.js"><link rel="prefetch" href="/docs/assets/js/74.411de3e6.js"><link rel="prefetch" href="/docs/assets/js/75.e0fbdfbd.js"><link rel="prefetch" href="/docs/assets/js/76.ca865abf.js"><link rel="prefetch" href="/docs/assets/js/77.61257970.js"><link rel="prefetch" href="/docs/assets/js/78.e20379dd.js"><link rel="prefetch" href="/docs/assets/js/79.737501a2.js"><link rel="prefetch" href="/docs/assets/js/8.757dd096.js"><link rel="prefetch" href="/docs/assets/js/80.1f74602e.js"><link rel="prefetch" href="/docs/assets/js/81.b519631f.js"><link rel="prefetch" href="/docs/assets/js/82.1c9503a3.js"><link rel="prefetch" href="/docs/assets/js/83.70ddaea3.js"><link rel="prefetch" href="/docs/assets/js/84.04bc700f.js"><link rel="prefetch" href="/docs/assets/js/85.7450f995.js"><link rel="prefetch" href="/docs/assets/js/86.3cc51b3d.js"><link rel="prefetch" href="/docs/assets/js/87.6a485e5b.js"><link rel="prefetch" href="/docs/assets/js/88.edc54cf4.js"><link rel="prefetch" href="/docs/assets/js/89.17c2ac76.js"><link rel="prefetch" href="/docs/assets/js/9.07559e13.js"><link rel="prefetch" href="/docs/assets/js/90.d42fb375.js"><link rel="prefetch" href="/docs/assets/js/91.995fbcec.js"><link rel="prefetch" href="/docs/assets/js/92.59de9525.js"><link rel="prefetch" href="/docs/assets/js/93.a5e2e194.js"><link rel="prefetch" href="/docs/assets/js/94.dcdb693f.js"><link rel="prefetch" href="/docs/assets/js/95.a29e79a2.js"><link rel="prefetch" href="/docs/assets/js/96.ba27210d.js"><link rel="prefetch" href="/docs/assets/js/97.fa152a79.js"><link rel="prefetch" href="/docs/assets/js/98.ba00211d.js"><link rel="prefetch" href="/docs/assets/js/99.e7714c30.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.89d6372f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">计算机基础教程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">机器指令</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link">软件基础</a></div><div class="nav-item"><a href="/docs/coder2hacker/" class="nav-link">白帽黑客</a></div><div class="nav-item"><a href="/docs/blockchain/" class="nav-link router-link-active">区块链</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">机器指令</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link">软件基础</a></div><div class="nav-item"><a href="/docs/coder2hacker/" class="nav-link">白帽黑客</a></div><div class="nav-item"><a href="/docs/blockchain/" class="nav-link router-link-active">区块链</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/blockchain/btc/btc_indepth.html#_1-bitcoin-source-code" class="sidebar-link">1.bitcoin source code</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blockchain/btc/btc_indepth.html#_1-1-overview-architecture" class="sidebar-link">1.1 Overview architecture</a></li><li class="sidebar-sub-header"><a href="/docs/blockchain/btc/btc_indepth.html#_1-2-code-anatomy" class="sidebar-link">1.2 Code Anatomy</a></li></ul></li><li><a href="/docs/blockchain/btc/btc_indepth.html#_2-topic" class="sidebar-link">2. topic</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/blockchain/btc/btc_indepth.html#_2-1-atomic-transactions" class="sidebar-link">2.1 Atomic transactions</a></li><li class="sidebar-sub-header"><a href="/docs/blockchain/btc/btc_indepth.html#_2-2-transaction-malleability" class="sidebar-link">2.2 Transaction Malleability</a></li><li class="sidebar-sub-header"><a href="/docs/blockchain/btc/btc_indepth.html#_2-3-仲裁交易" class="sidebar-link">2.3 仲裁交易</a></li><li class="sidebar-sub-header"><a href="/docs/blockchain/btc/btc_indepth.html#_2-4-微支付通道-micropayment-channel" class="sidebar-link">2.4 微支付通道 Micropayment Channel</a></li><li class="sidebar-sub-header"><a href="/docs/blockchain/btc/btc_indepth.html#_2-5-闪电网络" class="sidebar-link">2.5 闪电网络</a></li><li class="sidebar-sub-header"><a href="/docs/blockchain/btc/btc_indepth.html#_2-6-segregated-witness" class="sidebar-link">2.6 segregated witness</a></li></ul></li><li><a href="/docs/blockchain/btc/btc_indepth.html#_3-知识碎片" class="sidebar-link">3. 知识碎片</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/blockchain/btc/btc_indepth.html#其他" class="sidebar-link">其他</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><a href="/docs/blockchain">回目录</a>  《比特币：深度解析》</p> <h2 id="_1-bitcoin-source-code"><a href="#_1-bitcoin-source-code" class="header-anchor">#</a> 1.bitcoin source code</h2> <p>Walk through Sourcecode 源码解读</p> <span style="color:red;">
refer: https://github.com/lyhistory/blockchain_btc/blob/master/basic/bitcoincore_v0.17.1_sourcecode.txt
</span> <p>Nobody Understands Bitcoin (And That’s OK)
https://blog.lopp.net/nobody-understands-bitcoin-and-thats-ok/</p> <h3 id="_1-1-overview-architecture"><a href="#_1-1-overview-architecture" class="header-anchor">#</a> 1.1 Overview architecture</h3> <p>Bitcoin Core architecture overview
http://diyhpl.us/wiki/transcripts/scalingbitcoin/tokyo-2018/edgedevplusplus/overview-bitcoin-core-architecture/</p> <p>Dev++ 02-22-EN | An overview of Bitcoin Core architecture - James O'Beirne | Platforms:
- slides: http://jameso.be/dev++2018/
- video: https://www.youtube.com/watch?v=L_sI_tXmy2U</p> <p><img src="/docs/docs_image/blockchain/btc/btc_indepth_sourcecode01.png" alt=""></p> <h3 id="_1-2-code-anatomy"><a href="#_1-2-code-anatomy" class="header-anchor">#</a> 1.2 Code Anatomy</h3> <p><img src="/docs/docs_image/blockchain/btc/btc_indepth_sourcecode02.png" alt=""></p> <p><a href="https://en.bitcoin.it/wiki/Bitcoin_Core_0.11_(ch_3):_Initialization_and_Startup" target="_blank" rel="noopener noreferrer">Bitcoin Core 0.11 (ch 3): Initialization and Startup<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://en.bitcoin.it/wiki/Bitcoin_Core_0.11_(ch_5):_Initial_Block_Download" target="_blank" rel="noopener noreferrer">Bitcoin Core 0.11 (ch 5): Initial Block Download<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>network sync: net_processing:</strong></p> <p>Header first IBD
https://bitcoin.org/en/glossary/headers-first-sync
https://bitcoin.org/en/glossary/initial-block-download
https://bitcoin.org/en/developer-guide#headers-first
https://bitcoin.stackexchange.com/questions/44400/can-there-be-stale-blocks-in-header-first-implementation</p> <p><strong>request management system</strong></p> <p><img src="/docs/docs_image/blockchain/btc/btc_indepth_sourcecode03.png" alt=""></p> <blockquote><p>To minimize information spread in the network,  messages are propagated in the Bitcoin network with the help of an advertisement-based request management system. Namely, if node A receives information about a new Bitcoin object (e.g., a transaction or a block)from another node,A will advertise this object to its other connections (e.g. nodeV) by sending them an inv message; these messages are much smaller in size than the actual objects, because they only contain the hash and the type of object which is advertised. Only if node V has not previously received the object advertised by the inv message,V will request the object from A with a getdata request.Following the Bitcoin protocol, nodeAwill subsequently respondwith a Bitcoin object, e.g., the contents of a transaction or a block.By doing so, inventory messages limit the amount of data broadcast in the network. Notice that in case the object advertised corresponds to a block, neighbor V first requests the block header before the actual block data.  Here, when a block header is advertised via a headers message, the receiving node internally stores the highest block known by the sending peer. The receiving node also validates any received header, by verifying its corresponding PoW. Transactions, on the other hand, are requested directly using a transaction inv message.
https://eprint.iacr.org/2015/578.pdf</p></blockquote> <h2 id="_2-topic"><a href="#_2-topic" class="header-anchor">#</a> 2. topic</h2> <h3 id="_2-1-atomic-transactions"><a href="#_2-1-atomic-transactions" class="header-anchor">#</a> 2.1 Atomic transactions</h3> <p>atomic transaction       	http://www.ofnumbers.com/2014/01/28/what-is-an-atomic-transaction/
Atomic cross-chain trading https://en.bitcoin.it/wiki/Atomic_cross-chain_trading
In short, when exchanging one cryptocoin with another (such as a Bitcoin for a Litecoin or colored coins), either the trade occurs or it does not.  Michael Goldstein explains this concisely over at Lex Cryptographia:
Two parties agree to exchange one cryptocurrency for another, and the transaction is done in such a way that neither side can execute their portion of the trade without releasing funds to the other party. The trade either happens in its entirety, or not at all, which means nobody can walk away empty-handed. The worse possible outcome is that no trade occurs at all and everybody keeps what they had.
The key is the nLockTime function described in Atomic cross-chain trading.  I also recommend looking through the Bitcointalk thread Alt chains and atomic transfers.</p> <h3 id="_2-2-transaction-malleability"><a href="#_2-2-transaction-malleability" class="header-anchor">#</a> 2.2 Transaction Malleability</h3> <pre><code>        	闪电网络解决方法 sighash no input
        	Segregate witness方法（transaction id不包含签名）
</code></pre> <h3 id="_2-3-仲裁交易"><a href="#_2-3-仲裁交易" class="header-anchor">#</a> 2.3 仲裁交易</h3> <h3 id="_2-4-微支付通道-micropayment-channel"><a href="#_2-4-微支付通道-micropayment-channel" class="header-anchor">#</a> 2.4 微支付通道 Micropayment Channel</h3> <h3 id="_2-5-闪电网络"><a href="#_2-5-闪电网络" class="header-anchor">#</a> 2.5 闪电网络</h3> <p>Revocable Sequence Maturity Contract
HLTC</p> <p>Ever wanted to run a c-lightning node without having to run bitcoind? Your problems are over: with the new <code>trustedcoin</code> plugin you can rely on block explorers for everything!
Still better than Paypal. And it works!</p> <p>More: https://github.com/fiatjaf/lightningd-gjson-rpc/tree/x1/cmd
Binary: https://github.com/fiatjaf/lightningd-gjson-rpc/releases/tag/x1</p> <p>手把手教你在树莓派上部署比特币闪电节点+全节点 https://www.weibo.com/ttarticle/p/show?id=2309404252965299998074</p> <h3 id="_2-6-segregated-witness"><a href="#_2-6-segregated-witness" class="header-anchor">#</a> 2.6 segregated witness</h3> <h2 id="_3-知识碎片"><a href="#_3-知识碎片" class="header-anchor">#</a> 3. 知识碎片</h2> <p><strong># Why Separate execution of unlocking and locking scripts</strong></p> <p>https://bitcointalk.org/index.php?topic=5095376.new#new
https://en.bitcoin.it/wiki/Common_Vulnerabilities_and_Exposures
Here you can see a list of all Bitcoin CVEs, including the one you are talking about.</p> <p>To understand what happened in CVE-2010-5141 you need to understand Script execution and OP_PUSHDATA. When validating a script, bitcoin-core used to use a stack and fusion script_sig with script_pubkey onto it, which led to a stack being :
Code:
&lt;OP_CODEs from scriptsig&gt;&lt;OP_CODEs from scriptpubkey&gt;
You could simply use an OP_PUSHDATA in script_sig, which would push the scriptpubkey onto the stack without executing it.
The scriptpubkey not executed resulting in conditions under which you can spend the output that are not set. Thus you could spend any output using OP_PUSHDATA. Now, the code executes script_sig on a stack, copy it (to stackCopy), then executes script_pubkey on stack (the first one).
Here is the link to the function evaluating the script.</p> <p><strong># Timelock Defense Against Fee Sniping ??? don’t understand</strong></p> <p><strong># chater 07 Complex Script Example</strong></p> <p>https://github.com/bitcoinbook/bitcoinbook/blob/develop/ch07.asciidoc
A few more things to consider when reading this example. See if you can find the answers:
●	Why can’t the lawyer redeem the third execution path at any time by selecting it with FALSE on the unlocking script?
●	How many execution paths can be used 5, 35, and 105 days, respectively, after the UTXO is mined?
●	Are the funds lost if the lawyer loses his key? Does your answer change if 91 days have elapsed?
●	How do the partners &quot;reset&quot; the clock every 29 or 89 days to prevent the lawyer from accessing the funds?
●	Why do some CHECKSIG opcodes in this script have the VERIFY suffix while others don’t?</p> <p><strong># chater 10</strong></p> <p>https://github.com/bitcoinbook/bitcoinbook/blob/develop/ch10.asciidoc</p> <p>In practice, a miner may intentionally mine a block taking less than the full reward. Such blocks have already been mined and more may be mined in the</p> <p>Raw transactions
https://bitcoin.stackexchange.com/questions/32628/redeeming-a-raw-transaction-step-by-step-example-required
https://bitcoin.stackexchange.com/questions/29955/how-to-sign-bitcoin-transaction-with-bitcoind-and-non-bitcoind-wallet-private
https://bitcoin.stackexchange.com/questions/30550/is-it-possible-to-create-a-transaction-in-pure-python-without-needing-to-run-bit</p> <p><strong>attack</strong></p> <p>Grinding attack</p> <p>https://en.bitcoin.it/wiki/Altcoin
There are also &quot;stake grinding&quot; attacks which require a trivial amount of currency. In a stake[2] grinding attack, the attacker has a small amount of stake and goes through the history of the blockchain and finds places where their stake wins a block. In order to consecutively win, they modify the next block header until some stake they own wins once again. This attack requires a bit of computation, but definately isn't impractical.
https://download.wpsoftware.net/bitcoin/alts.pdf
https://nxtforum.org/general/nxt-stake-grinding-attack/20/</p> <p>Deep Dive of the History Revision Attack
https://medium.com/@julianwlsn/why-the-history-revision-attack-in-chain-based-proof-of-stake-is-improbable-but-not-impossible-19f9da33847f</p> <h2 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h2> <p><a href="https://jimmysong.substack.com/people/1811560-jimmy-song" target="_blank" rel="noopener noreferrer">Bitcoin tech talk<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://zhuanlan.zhihu.com/p/62895584" target="_blank" rel="noopener noreferrer">比特币分叉历史<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><img src="/docs/docs_image/blockchain/btc/btc_indepth_fork01.png" alt=""></p> <p>Bitcoin Cold Storage Using a Bitcoin Core Wallet https://dev-notes.eu/2017/08/setup-and-manage-bitcoin-core-cold-storage-wallet/</p> <p><a href="http://www.erisian.com.au/bitcoin-core-dev/" target="_blank" rel="noopener noreferrer">比特币开发日志<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://en.bitcoin.it/wiki/Category:Technical" target="_blank" rel="noopener noreferrer">比特币背后的技术列表<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://embedded-design-vic.blogspot.com/2017/07/bitcoin-core-tutorial-and-source-code.html" target="_blank" rel="noopener noreferrer">Bitcoin core tutorial &amp; code walk through<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://cloud.tencent.com/developer/search/article-%E6%AF%94%E7%89%B9%E5%B8%81%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90" target="_blank" rel="noopener noreferrer">比特币源码分析<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://orientye.com/?s=bitcoin%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90" target="_blank" rel="noopener noreferrer">bitcoin源码分析<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://me.csdn.net/loy_184548" target="_blank" rel="noopener noreferrer">比特币学习<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.twblogs.net/a/5c840d32bd9eee35fc13cd84" target="_blank" rel="noopener noreferrer">比特幣源碼分析<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://blog.csdn.net/ztemt_sw2/article/details/81101717" target="_blank" rel="noopener noreferrer">比特币源码分析--深入理解比特币交易<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://blog.csdn.net/Ulord_123" target="_blank" rel="noopener noreferrer">从零开始学习比特币开发<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://so.csdn.net/so/search/s.do?q=%E6%AF%94%E7%89%B9%E5%B8%81%E6%BA%90%E7%A0%81&amp;t=blog&amp;u=ITleaks" target="_blank" rel="noopener noreferrer">比特币源码<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://so.csdn.net/so/search/s.do?q=%E6%AF%94%E7%89%B9%E5%B8%81%E6%BA%90%E7%A0%81&amp;t=blog&amp;u=Fly_hps" target="_blank" rel="noopener noreferrer">比特币源码研读<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.jianshu.com/u/1a445a76d25b" target="_blank" rel="noopener noreferrer">BTECH<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>https://zhuanlan.zhihu.com/p/25443501
https://github.com/cryptostu/blog/tree/master/source
https://www.jianshu.com/u/ef215107c407</p> <p>https://www.quora.com/How-do-I-read-Bitcoin-source-code
https://bitcoinedge.org/tutorials
https://bitcoin.stackexchange.com/questions/41692/how-to-understand-bitcoin-source-code
https://bitcointalk.org/index.php?topic=41718.0</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.d815c9d2.js" defer></script><script src="/docs/assets/js/2.464c3f4a.js" defer></script><script src="/docs/assets/js/33.b51c1996.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>简介 | 计算机基础教程</title>
    <meta name="description" content="软件开发教程，白帽黑客入门教程，区块链入门教程，物联网，大数据">
    
    
    <link rel="preload" href="/docs/assets/css/0.styles.89d6372f.css" as="style"><link rel="preload" href="/docs/assets/js/app.b015bf24.js" as="script"><link rel="preload" href="/docs/assets/js/2.dc5756d7.js" as="script"><link rel="preload" href="/docs/assets/js/75.54093e24.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.009358ac.js"><link rel="prefetch" href="/docs/assets/js/100.9585055b.js"><link rel="prefetch" href="/docs/assets/js/101.1c1bc510.js"><link rel="prefetch" href="/docs/assets/js/102.b8240a49.js"><link rel="prefetch" href="/docs/assets/js/103.4b36d126.js"><link rel="prefetch" href="/docs/assets/js/104.3a37e431.js"><link rel="prefetch" href="/docs/assets/js/105.d5d23d9f.js"><link rel="prefetch" href="/docs/assets/js/106.0f1f8bf0.js"><link rel="prefetch" href="/docs/assets/js/107.8c97de85.js"><link rel="prefetch" href="/docs/assets/js/108.9c1768b2.js"><link rel="prefetch" href="/docs/assets/js/109.11326621.js"><link rel="prefetch" href="/docs/assets/js/11.aedd1336.js"><link rel="prefetch" href="/docs/assets/js/110.65fe6c72.js"><link rel="prefetch" href="/docs/assets/js/111.7b2582ee.js"><link rel="prefetch" href="/docs/assets/js/112.73a0265f.js"><link rel="prefetch" href="/docs/assets/js/113.128b6917.js"><link rel="prefetch" href="/docs/assets/js/114.9c4e4fb6.js"><link rel="prefetch" href="/docs/assets/js/115.b61a5404.js"><link rel="prefetch" href="/docs/assets/js/116.b73acd2a.js"><link rel="prefetch" href="/docs/assets/js/117.de0fdf8c.js"><link rel="prefetch" href="/docs/assets/js/118.98a87af7.js"><link rel="prefetch" href="/docs/assets/js/119.8a2a68e3.js"><link rel="prefetch" href="/docs/assets/js/12.1acfc2a7.js"><link rel="prefetch" href="/docs/assets/js/120.0b793af4.js"><link rel="prefetch" href="/docs/assets/js/121.c1467d65.js"><link rel="prefetch" href="/docs/assets/js/122.c30b674b.js"><link rel="prefetch" href="/docs/assets/js/123.0fb3d28b.js"><link rel="prefetch" href="/docs/assets/js/124.87f55def.js"><link rel="prefetch" href="/docs/assets/js/125.5695c798.js"><link rel="prefetch" href="/docs/assets/js/126.eebc070a.js"><link rel="prefetch" href="/docs/assets/js/127.d122ce1b.js"><link rel="prefetch" href="/docs/assets/js/128.8411af45.js"><link rel="prefetch" href="/docs/assets/js/129.8ddcd9fb.js"><link rel="prefetch" href="/docs/assets/js/13.cb6bbe4a.js"><link rel="prefetch" href="/docs/assets/js/130.ff8444f6.js"><link rel="prefetch" href="/docs/assets/js/131.c3e7c7b5.js"><link rel="prefetch" href="/docs/assets/js/132.8ad4b670.js"><link rel="prefetch" href="/docs/assets/js/133.eb72cfd7.js"><link rel="prefetch" href="/docs/assets/js/134.a65d7a7e.js"><link rel="prefetch" href="/docs/assets/js/135.2e314eab.js"><link rel="prefetch" href="/docs/assets/js/136.6e93f12e.js"><link rel="prefetch" href="/docs/assets/js/137.b6dd1b5c.js"><link rel="prefetch" href="/docs/assets/js/138.00726996.js"><link rel="prefetch" href="/docs/assets/js/139.c48e0d89.js"><link rel="prefetch" href="/docs/assets/js/14.e95de8d7.js"><link rel="prefetch" href="/docs/assets/js/140.fb69fe10.js"><link rel="prefetch" href="/docs/assets/js/141.2e69969d.js"><link rel="prefetch" href="/docs/assets/js/142.e83b3e4d.js"><link rel="prefetch" href="/docs/assets/js/143.732981ff.js"><link rel="prefetch" href="/docs/assets/js/144.1ba969e8.js"><link rel="prefetch" href="/docs/assets/js/145.ea094c09.js"><link rel="prefetch" href="/docs/assets/js/146.3536e36d.js"><link rel="prefetch" href="/docs/assets/js/147.cbb48373.js"><link rel="prefetch" href="/docs/assets/js/148.50f40ae8.js"><link rel="prefetch" href="/docs/assets/js/149.90401971.js"><link rel="prefetch" href="/docs/assets/js/15.8ab2e168.js"><link rel="prefetch" href="/docs/assets/js/150.cf236173.js"><link rel="prefetch" href="/docs/assets/js/151.31e094c3.js"><link rel="prefetch" href="/docs/assets/js/152.a80761eb.js"><link rel="prefetch" href="/docs/assets/js/153.dba317ec.js"><link rel="prefetch" href="/docs/assets/js/154.28ef6e3c.js"><link rel="prefetch" href="/docs/assets/js/155.d55404a5.js"><link rel="prefetch" href="/docs/assets/js/156.ac5aa13d.js"><link rel="prefetch" href="/docs/assets/js/157.70af4df0.js"><link rel="prefetch" href="/docs/assets/js/158.cec2e687.js"><link rel="prefetch" href="/docs/assets/js/159.37210793.js"><link rel="prefetch" href="/docs/assets/js/16.8e3e454a.js"><link rel="prefetch" href="/docs/assets/js/160.2afc659e.js"><link rel="prefetch" href="/docs/assets/js/161.a5a36115.js"><link rel="prefetch" href="/docs/assets/js/162.e628a1c3.js"><link rel="prefetch" href="/docs/assets/js/163.7280ab68.js"><link rel="prefetch" href="/docs/assets/js/164.b045caad.js"><link rel="prefetch" href="/docs/assets/js/17.5603d183.js"><link rel="prefetch" href="/docs/assets/js/18.52d217c9.js"><link rel="prefetch" href="/docs/assets/js/19.cb7475da.js"><link rel="prefetch" href="/docs/assets/js/20.1501e782.js"><link rel="prefetch" href="/docs/assets/js/21.e09e4c61.js"><link rel="prefetch" href="/docs/assets/js/22.b16c67d9.js"><link rel="prefetch" href="/docs/assets/js/23.c2d14225.js"><link rel="prefetch" href="/docs/assets/js/24.909ce09b.js"><link rel="prefetch" href="/docs/assets/js/25.73971747.js"><link rel="prefetch" href="/docs/assets/js/26.74705119.js"><link rel="prefetch" href="/docs/assets/js/27.0fa8e1df.js"><link rel="prefetch" href="/docs/assets/js/28.f6fe18b4.js"><link rel="prefetch" href="/docs/assets/js/29.bf7f861e.js"><link rel="prefetch" href="/docs/assets/js/3.4a66f3ee.js"><link rel="prefetch" href="/docs/assets/js/30.81f03a3a.js"><link rel="prefetch" href="/docs/assets/js/31.7ff7f647.js"><link rel="prefetch" href="/docs/assets/js/32.b541ab54.js"><link rel="prefetch" href="/docs/assets/js/33.f373eba0.js"><link rel="prefetch" href="/docs/assets/js/34.0677801f.js"><link rel="prefetch" href="/docs/assets/js/35.4bb56847.js"><link rel="prefetch" href="/docs/assets/js/36.0aaa44ea.js"><link rel="prefetch" href="/docs/assets/js/37.597e00eb.js"><link rel="prefetch" href="/docs/assets/js/38.ecfe6a0b.js"><link rel="prefetch" href="/docs/assets/js/39.ac58eab3.js"><link rel="prefetch" href="/docs/assets/js/4.7d1e56e0.js"><link rel="prefetch" href="/docs/assets/js/40.f41d6ab2.js"><link rel="prefetch" href="/docs/assets/js/41.62d54f13.js"><link rel="prefetch" href="/docs/assets/js/42.f49db8d6.js"><link rel="prefetch" href="/docs/assets/js/43.d85f34fe.js"><link rel="prefetch" href="/docs/assets/js/44.0f754825.js"><link rel="prefetch" href="/docs/assets/js/45.392c5a0f.js"><link rel="prefetch" href="/docs/assets/js/46.d6d8f8ba.js"><link rel="prefetch" href="/docs/assets/js/47.b7a4c531.js"><link rel="prefetch" href="/docs/assets/js/48.ad5fa17b.js"><link rel="prefetch" href="/docs/assets/js/49.28728853.js"><link rel="prefetch" href="/docs/assets/js/5.540a7edc.js"><link rel="prefetch" href="/docs/assets/js/50.15c5b177.js"><link rel="prefetch" href="/docs/assets/js/51.69d32edb.js"><link rel="prefetch" href="/docs/assets/js/52.d3e83486.js"><link rel="prefetch" href="/docs/assets/js/53.0008ea69.js"><link rel="prefetch" href="/docs/assets/js/54.3aef4500.js"><link rel="prefetch" href="/docs/assets/js/55.fa31ca9c.js"><link rel="prefetch" href="/docs/assets/js/56.5e610ccb.js"><link rel="prefetch" href="/docs/assets/js/57.58bfc714.js"><link rel="prefetch" href="/docs/assets/js/58.30bce98c.js"><link rel="prefetch" href="/docs/assets/js/59.0b2a7cab.js"><link rel="prefetch" href="/docs/assets/js/6.e1b5eb00.js"><link rel="prefetch" href="/docs/assets/js/60.c716b08b.js"><link rel="prefetch" href="/docs/assets/js/61.9bdd4eb7.js"><link rel="prefetch" href="/docs/assets/js/62.a8465fbc.js"><link rel="prefetch" href="/docs/assets/js/63.6acfe33c.js"><link rel="prefetch" href="/docs/assets/js/64.8919994b.js"><link rel="prefetch" href="/docs/assets/js/65.baa9d6c1.js"><link rel="prefetch" href="/docs/assets/js/66.82611c2f.js"><link rel="prefetch" href="/docs/assets/js/67.1f706253.js"><link rel="prefetch" href="/docs/assets/js/68.22d0d616.js"><link rel="prefetch" href="/docs/assets/js/69.6c04fdc7.js"><link rel="prefetch" href="/docs/assets/js/7.0c0e690a.js"><link rel="prefetch" href="/docs/assets/js/70.6febe695.js"><link rel="prefetch" href="/docs/assets/js/71.84d036f3.js"><link rel="prefetch" href="/docs/assets/js/72.4f92b87e.js"><link rel="prefetch" href="/docs/assets/js/73.5f8725f1.js"><link rel="prefetch" href="/docs/assets/js/74.bc2be1c7.js"><link rel="prefetch" href="/docs/assets/js/76.27e343b4.js"><link rel="prefetch" href="/docs/assets/js/77.834fb22e.js"><link rel="prefetch" href="/docs/assets/js/78.68919345.js"><link rel="prefetch" href="/docs/assets/js/79.780e3bb0.js"><link rel="prefetch" href="/docs/assets/js/8.00e2d31b.js"><link rel="prefetch" href="/docs/assets/js/80.62b937b4.js"><link rel="prefetch" href="/docs/assets/js/81.fc50104d.js"><link rel="prefetch" href="/docs/assets/js/82.0bd33387.js"><link rel="prefetch" href="/docs/assets/js/83.08774d9f.js"><link rel="prefetch" href="/docs/assets/js/84.62d407aa.js"><link rel="prefetch" href="/docs/assets/js/85.10905711.js"><link rel="prefetch" href="/docs/assets/js/86.617cb2f5.js"><link rel="prefetch" href="/docs/assets/js/87.bd131ebc.js"><link rel="prefetch" href="/docs/assets/js/88.59963def.js"><link rel="prefetch" href="/docs/assets/js/89.235c17e4.js"><link rel="prefetch" href="/docs/assets/js/9.72fee2d0.js"><link rel="prefetch" href="/docs/assets/js/90.867fca8f.js"><link rel="prefetch" href="/docs/assets/js/91.9b32a48e.js"><link rel="prefetch" href="/docs/assets/js/92.ec8ea2e8.js"><link rel="prefetch" href="/docs/assets/js/93.d2a082a6.js"><link rel="prefetch" href="/docs/assets/js/94.dcfe033a.js"><link rel="prefetch" href="/docs/assets/js/95.27d02378.js"><link rel="prefetch" href="/docs/assets/js/96.4283f1e6.js"><link rel="prefetch" href="/docs/assets/js/97.50a130b0.js"><link rel="prefetch" href="/docs/assets/js/98.ec0bebcd.js"><link rel="prefetch" href="/docs/assets/js/99.9813c7d2.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.89d6372f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">计算机基础教程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">机器指令</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link router-link-active">软件基础</a></div><div class="nav-item"><a href="/docs/coder2hacker/" class="nav-link">白帽黑客</a></div><div class="nav-item"><a href="/docs/blockchain/" class="nav-link">区块链</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">机器指令</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link router-link-active">软件基础</a></div><div class="nav-item"><a href="/docs/coder2hacker/" class="nav-link">白帽黑客</a></div><div class="nav-item"><a href="/docs/blockchain/" class="nav-link">区块链</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/software/" class="sidebar-link">软件基础</a></li><li><a href="/docs/coder2hacker/" class="sidebar-link">黑客入门</a></li><li><a href="/docs/blockchain/" class="sidebar-link">区块链入门</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <p>Nginx 和 Apache 各有什么优缺点？ https://www.zhihu.com/question/19571087</p> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>https://docs.nginx.com/nginx/admin-guide/installing-nginx/installing-nginx-open-source/</p> <p>包安装：yum install apt install</p> <p>手动按照：</p> <p><a href="http://pcre.org/" target="_blank" rel="noopener noreferrer">PCRE<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> – Supports regular expressions. Required by the NGINX <a href="https://nginx.org/en/docs/ngx_core_module.html" target="_blank" rel="noopener noreferrer">Core<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://nginx.org/en/docs/http/ngx_http_rewrite_module.html" target="_blank" rel="noopener noreferrer">Rewrite<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> modules.</p> <div class="language- extra-class"><pre class="language-text"><code>$ wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.44.tar.gz
$ tar -zxf pcre-8.44.tar.gz
$ cd pcre-8.44
$ ./configure
$ make
$ sudo make install
</code></pre></div><p><a href="https://www.zlib.net/" target="_blank" rel="noopener noreferrer">zlib<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> – Supports header compression. Required by the NGINX <a href="https://nginx.org/en/docs/http/ngx_http_gzip_module.html" target="_blank" rel="noopener noreferrer">Gzip<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> module.</p> <div class="language- extra-class"><pre class="language-text"><code>$ wget http://zlib.net/zlib-1.2.11.tar.gz
$ tar -zxf zlib-1.2.11.tar.gz
$ cd zlib-1.2.11
$ ./configure
$ make
$ sudo make install
</code></pre></div><p><a href="https://www.openssl.org/" target="_blank" rel="noopener noreferrer">OpenSSL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> – Supports the HTTPS protocol. Required by the NGINX <a href="https://nginx.org/en/docs/http/ngx_http_ssl_module.html" target="_blank" rel="noopener noreferrer">SSL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> module and others.</p> <div class="language- extra-class"><pre class="language-text"><code>方法一：
$ wget http://www.openssl.org/source/openssl-1.1.1g.tar.gz
$ tar -zxf openssl-1.1.1g.tar.gz
$ cd openssl-1.1.1g
$ ./Configure darwin64-x86_64-cc --prefix=/usr
$ make
$ sudo make install

方法二：
yum -y install pcre  pcre-devel zlib  zlib-devel openssl openssl-devel
</code></pre></div><p>nginx</p> <div class="language- extra-class"><pre class="language-text"><code>$ wget https://nginx.org/download/nginx-1.18.0.tar.gz
$ tar zxf nginx-1.18.0.tar.gz
$ cd nginx-1.18.0

如果使用前面openssl方法一：
# ./configure --with-http_ssl_module --with-openssl=/opt/openssl-1.0.0s
方法二：
# ./configure --with-http_ssl_module

# make
# sudo make install

# vim /usr/local/nginx/conf/nginx.conf

worker_processes  8;
events {
    worker_connections  1024;
}
http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;

    server {
        listen       80;
        server_name  localhost;
        rewrite ^(.*)https://$server_name$1 permanent;
        location / {
            root   html;
            index  index.html index.htm;
        }
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }
    }
}

启动
$ /usr/local/nginx/sbin/nginx
停止
$ /usr/local/nginx/sbin/nginx -s quit
重启
$ /usr/local/nginx/sbin/nginx -s reload


Firewalls
sudo firewall-cmd --add-service=http
sudo firewall-cmd --add-service=https
sudo firewall-cmd --runtime-to-permanent
or
sudo iptables -I INPUT -p tcp -m tcp --dport 80 -j ACCEPT
sudo iptables -I INPUT -p tcp -m tcp --dport 443 -j ACCEPT


</code></pre></div><p>/usr/local/nginx/conf/nginx.conf</p> <p>/usr/local/nginx/html</p> <p>/usr/local/nginx/sbin/nginx</p> <h2 id="语法"><a href="#语法" class="header-anchor">#</a> 语法</h2> <div class="language- extra-class"><pre class="language-text"><code>--- 变量 Variables
https://nginx.org/en/docs/varindex.html
The $http_upgrade use the value from client header upgrade, in nginx conf, $http_HEADER get the HEADER from client.

--- map
map $args $foo {
    default 0;
    debug   1;
}
$args 是nginx内置变量，就是获取的请求 url 的参数。 如果 $args 匹配到 debug 那么 $foo 的值会被设为 1 ，如果 $args 一个都匹配不到 $foo 就是default 定义的值，在这里就是 0
https://www.cnblogs.com/cangqinglang/p/12174407.html
</code></pre></div><h2 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h2> <h3 id="https"><a href="#https" class="header-anchor">#</a> HTTPS</h3> <p>官方：</p> <p>https://nginx.org/en/docs/http/configuring_https_servers.html</p> <p>centos：</p> <p>https://www.digitalocean.com/community/tutorials/how-to-create-a-self-signed-ssl-certificate-for-nginx-on-centos-7</p> <p>Ubuntu：</p> <p>https://www.digitalocean.com/community/tutorials/how-to-create-a-self-signed-ssl-certificate-for-nginx-in-ubuntu-16-04</p> <p>如果前面安装的时候忘记添加openssl模块</p> <div class="language- extra-class"><pre class="language-text"><code> ./configure --with-http_ssl_module --with-openssl=/opt/openssl-1.0.0s
</code></pre></div><p>可以动态添加：</p> <p>https://www.cnblogs.com/zoulixiang/p/10196671.html</p> <p>即按照前面的方法安装openssl并执行 config，之后执行make，但是不要执行make install，直接覆盖新编译的nginx</p> <div class="language- extra-class"><pre class="language-text"><code>cp /usr/local/nginx/sbin/nginx nginx.bk
cp /nginx  /usr/local/nginx/sbin/nginx 
</code></pre></div><p>生成nginx秘钥（生产环境需要购买正版）</p> <div class="language- extra-class"><pre class="language-text"><code>---------------------------------------------------------------------------------
--- 这是一种方法
---------------------------------------------------------------------------------
First, you should have a non-root user configured with sudo privileges

sudo mkdir /etc/ssl/privatekey
sudo chmod 700 /etc/ssl/privatekey
 
sudo openssl req -x509 -nodes -days 3650 -newkey rsa:2048 -keyout /etc/ssl/privatekey/nginx-selfsigned.key -out /etc/ssl/certs/nginx-selfsigned.crt

Country Name (2 letter code) [XX]:SG
State or Province Name (full name) []:
Locality Name (eg, city) [Default City]:
Organization Name (eg, company) [Default Company Ltd]:APEX
Organizational Unit Name (eg, section) []:IT
Common Name (eg, your name or your server's hostname) []:10.136.100.48
Email Address []:tech-mgmt@asiapacificex.com

-nodes: This tells OpenSSL to skip the option to secure our certificate with a passphrase. We need Nginx to be able to read the file, without user intervention, when the server starts up. A passphrase would prevent this from happening because we would have to enter it after every restart.
-newkey rsa:2048: This specifies that we want to generate a new certificate and a new key at the same time. We did not create the key that is required to sign the certificate in a previous step, so we need to create it along with the certificate. The rsa:2048 portion tells it to make an RSA key that is 2048 bits long.

创建一个跟客户端进行key exchange协商的秘钥：
sudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048

---------------------------------------------------------------------------------
--- 这是另一种方法
---------------------------------------------------------------------------------

1. 使用root用户登录，生成一个ssl.key，命令如下
# openssl genrsa -des3 -out ssl.key 1024
2.输入密码，密码输入后再删除，命令如下
# mv ssl.key xxx.key
# openssl rsa -in xxx.key -out ssl.key
# rm xxx.key
3.根据生成的ssl.key再生成证书请求文件，命令如下
# openssl req -new -key ssl.key -out ssl.csr
4.按提示输入信息，可随便输入
5.根据这两个文件生成最终的crt证书文件，命令如下
# openssl x509 -req -days 3650 -in ssl.csr -signkey ssl.key -out ssl.crt
6.拷贝文件至/usr/local/nginx/conf目录中
# cp ssl.key /usr/local/nginx/conf
# cp ssl.crt /usr/local/nginx/conf

</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>sudo vim /usr/local/nginx/conf/nginx.conf:
include /usr/local/nginx/conf/ssl.conf

sudo vim /usr/local/nginx/conf/ssl.conf:

---------------------------------------------------------------------------------
--- 同时支持http https
---------------------------------------------------------------------------------

server {
	listen       80;
    listen 443 http2 ssl;
    listen [::]:443 http2 ssl;

    server_name server_IP_address;

    ssl_certificate /etc/ssl/certs/nginx-selfsigned.crt;
    ssl_certificate_key /etc/ssl/privatekey/nginx-selfsigned.key;
    ssl_dhparam /etc/ssl/certs/dhparam.pem;
}

---------------------------------------------------------------------------------
--- 强制 enforce https
---------------------------------------------------------------------------------
一种方法
server {
        listen       80;
        server_name  test.local;
		rewrite ^/(.*) https://$server_name$request_uri? permanent;
	}
	
另一种方法
the default Nginx configuration file allows us to easily add directives to the default port 80 server block by adding files in the /etc/nginx/default.d directory. Create a new file called ssl-redirect.conf

vim /etc/nginx/default.d/ssl-redirect.conf：
return 301 https://$host$request_uri/;

sudo /usr/local/nginx/sbin/nginx -t
</code></pre></div><h3 id="wss"><a href="#wss" class="header-anchor">#</a> WSS</h3> <p>https://nginx.org/en/docs/http/websocket.html</p> <p>By default, the connection will be closed if the proxied server does not transmit any data within 60 seconds. This timeout can be increased with the <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_read_timeout" target="_blank" rel="noopener noreferrer">proxy_read_timeout<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> directive. Alternatively, the proxied server can be configured to periodically send WebSocket ping frames to reset the timeout and check if the connection is still alive.</p> <div class="language- extra-class"><pre class="language-text"><code>--------------------------------------------------------------
--- 标准设置
--------------------------------------------------------------
location /chat/ {
    proxy_pass http://backend;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection &quot;upgrade&quot;;
}

--------------------------------------------------------------
--- 自定义变量
--------------------------------------------------------------
http {
    map $http_upgrade $connection_upgrade {
        default upgrade; //如果client发生request的header含有Upgrade，则赋值变量connection_upgrade=upgrade
        ''      close;	 //否则则赋值变量connection_upgrade=close
    }

    server {
        ...

        location /chat/ {
            proxy_pass http://backend;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection $connection_upgrade; //使用上面map的变量
        }
    }
    
</code></pre></div><h3 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h3> <p>enable list files : autoindex on 注意location写法</p> <div class="language- extra-class"><pre class="language-text"><code>server {
        listen        80;
        server_name  ctf.local;
        root   &quot;E:/workspace/WWW/ctf.local&quot;;
        location / {
            index index.php index.html error/index.html;
            error_page 400 /error/400.html;
            error_page 403 /error/403.html;
            error_page 404 /error/404.html;
            autoindex  off;
        }
        location ~ \.php(.*)$ {
            fastcgi_pass   127.0.0.1:9000;
            fastcgi_index  index.php;
            fastcgi_split_path_info  ^((?U).+\.php)(/?.+)$;
            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
            fastcgi_param  PATH_INFO  $fastcgi_path_info;
            fastcgi_param  PATH_TRANSLATED  $document_root$fastcgi_path_info;
            include        fastcgi_params;
        }
        location ~ /.* {
            autoindex on;
        }
}

</code></pre></div><p>internal</p> <p>https://www.cnblogs.com/lowmanisbusy/p/11718345.html</p> <p>Nginx常见基本配置---upstream 使用指南</p> <p>https://blog.csdn.net/LL845876425/article/details/97621365</p> <p>what is the difference between proxy_request_buffering and proxy_buffering on nginx?</p> <p>https://serverfault.com/questions/741610/what-is-the-difference-between-proxy-request-buffering-and-proxy-buffering-on-ng</p> <p><strong>切换 root路径 从默认的相对路径 到 绝对路径</strong></p> <p>出现 (13: permission denied)</p> <p>https://stackoverflow.com/questions/25774999/nginx-stat-failed-13-permission-denied</p> <p>方法一 更改默认用户为root</p> <div class="language- extra-class"><pre class="language-text"><code>user  root;
worker_processes  1;
</code></pre></div><p>方法二 添加文件权限给这个用户nobody或者将用户加到相应group</p> <div class="language- extra-class"><pre class="language-text"><code>user  nobody;
worker_processes  1;
</code></pre></div><p>windows path</p> <div class="language- extra-class"><pre class="language-text"><code>location /test {
			alias &quot;C:/Workspace/task/setup/nginx-1.17.6/conf/test/&quot;;
		}
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.b015bf24.js" defer></script><script src="/docs/assets/js/2.dc5756d7.js" defer></script><script src="/docs/assets/js/75.54093e24.js" defer></script>
  </body>
</html>

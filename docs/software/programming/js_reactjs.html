<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>计算机基础教程</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="软件开发教程，白帽黑客入门教程，区块链入门教程，物联网，大数据">
    
    <link rel="preload" href="/docs/assets/css/0.styles.229beafb.css" as="style"><link rel="preload" href="/docs/assets/js/app.130e9873.js" as="script"><link rel="preload" href="/docs/assets/js/2.bddb4f68.js" as="script"><link rel="preload" href="/docs/assets/js/180.d6990530.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.7acf718b.js"><link rel="prefetch" href="/docs/assets/js/100.c6a55bb5.js"><link rel="prefetch" href="/docs/assets/js/101.e7d410fd.js"><link rel="prefetch" href="/docs/assets/js/102.33361721.js"><link rel="prefetch" href="/docs/assets/js/103.ca09c23f.js"><link rel="prefetch" href="/docs/assets/js/104.b25a24d0.js"><link rel="prefetch" href="/docs/assets/js/105.29ab0789.js"><link rel="prefetch" href="/docs/assets/js/106.65be0a06.js"><link rel="prefetch" href="/docs/assets/js/107.a75d674b.js"><link rel="prefetch" href="/docs/assets/js/108.d2715b5e.js"><link rel="prefetch" href="/docs/assets/js/109.144f2422.js"><link rel="prefetch" href="/docs/assets/js/11.538e488f.js"><link rel="prefetch" href="/docs/assets/js/110.4acc06bb.js"><link rel="prefetch" href="/docs/assets/js/111.c892c2db.js"><link rel="prefetch" href="/docs/assets/js/112.2a336598.js"><link rel="prefetch" href="/docs/assets/js/113.f00918c9.js"><link rel="prefetch" href="/docs/assets/js/114.69523c3c.js"><link rel="prefetch" href="/docs/assets/js/115.445069b1.js"><link rel="prefetch" href="/docs/assets/js/116.0c93d04e.js"><link rel="prefetch" href="/docs/assets/js/117.89711911.js"><link rel="prefetch" href="/docs/assets/js/118.7835684c.js"><link rel="prefetch" href="/docs/assets/js/119.8e1b4edd.js"><link rel="prefetch" href="/docs/assets/js/12.cadcd96f.js"><link rel="prefetch" href="/docs/assets/js/120.48bc171b.js"><link rel="prefetch" href="/docs/assets/js/121.08276eee.js"><link rel="prefetch" href="/docs/assets/js/122.4b0f064f.js"><link rel="prefetch" href="/docs/assets/js/123.f348b437.js"><link rel="prefetch" href="/docs/assets/js/124.1258aad7.js"><link rel="prefetch" href="/docs/assets/js/125.16407c39.js"><link rel="prefetch" href="/docs/assets/js/126.22353714.js"><link rel="prefetch" href="/docs/assets/js/127.854b3da1.js"><link rel="prefetch" href="/docs/assets/js/128.8a61a5e6.js"><link rel="prefetch" href="/docs/assets/js/129.63001357.js"><link rel="prefetch" href="/docs/assets/js/13.563b17b1.js"><link rel="prefetch" href="/docs/assets/js/130.119651a4.js"><link rel="prefetch" href="/docs/assets/js/131.5e589886.js"><link rel="prefetch" href="/docs/assets/js/132.857e8c20.js"><link rel="prefetch" href="/docs/assets/js/133.acfbbb07.js"><link rel="prefetch" href="/docs/assets/js/134.083b98f2.js"><link rel="prefetch" href="/docs/assets/js/135.8cc6db7b.js"><link rel="prefetch" href="/docs/assets/js/136.c52372d9.js"><link rel="prefetch" href="/docs/assets/js/137.ef7925c6.js"><link rel="prefetch" href="/docs/assets/js/138.547500cb.js"><link rel="prefetch" href="/docs/assets/js/139.9c540e02.js"><link rel="prefetch" href="/docs/assets/js/14.7b53c73e.js"><link rel="prefetch" href="/docs/assets/js/140.108b18a7.js"><link rel="prefetch" href="/docs/assets/js/141.6761d1ca.js"><link rel="prefetch" href="/docs/assets/js/142.ddd5a3fc.js"><link rel="prefetch" href="/docs/assets/js/143.dcfbc6f6.js"><link rel="prefetch" href="/docs/assets/js/144.27607f82.js"><link rel="prefetch" href="/docs/assets/js/145.32b4999a.js"><link rel="prefetch" href="/docs/assets/js/146.b52cab25.js"><link rel="prefetch" href="/docs/assets/js/147.66fe7247.js"><link rel="prefetch" href="/docs/assets/js/148.d5cd649a.js"><link rel="prefetch" href="/docs/assets/js/149.617dbc9a.js"><link rel="prefetch" href="/docs/assets/js/15.d41d4c58.js"><link rel="prefetch" href="/docs/assets/js/150.223bd521.js"><link rel="prefetch" href="/docs/assets/js/151.6c938386.js"><link rel="prefetch" href="/docs/assets/js/152.b113bd72.js"><link rel="prefetch" href="/docs/assets/js/153.2163596d.js"><link rel="prefetch" href="/docs/assets/js/154.640e9f13.js"><link rel="prefetch" href="/docs/assets/js/155.350c46f1.js"><link rel="prefetch" href="/docs/assets/js/156.b5098a85.js"><link rel="prefetch" href="/docs/assets/js/157.47a21bcc.js"><link rel="prefetch" href="/docs/assets/js/158.534e8413.js"><link rel="prefetch" href="/docs/assets/js/159.896f14e3.js"><link rel="prefetch" href="/docs/assets/js/16.93811e51.js"><link rel="prefetch" href="/docs/assets/js/160.1b73e3c3.js"><link rel="prefetch" href="/docs/assets/js/161.1ab3f41a.js"><link rel="prefetch" href="/docs/assets/js/162.5bb76621.js"><link rel="prefetch" href="/docs/assets/js/163.f1409099.js"><link rel="prefetch" href="/docs/assets/js/164.92151671.js"><link rel="prefetch" href="/docs/assets/js/165.1d4d0afd.js"><link rel="prefetch" href="/docs/assets/js/166.ac5064d0.js"><link rel="prefetch" href="/docs/assets/js/167.703b599b.js"><link rel="prefetch" href="/docs/assets/js/168.d6eeebaa.js"><link rel="prefetch" href="/docs/assets/js/169.547cd010.js"><link rel="prefetch" href="/docs/assets/js/17.2c5847be.js"><link rel="prefetch" href="/docs/assets/js/170.42cc5669.js"><link rel="prefetch" href="/docs/assets/js/171.6d949854.js"><link rel="prefetch" href="/docs/assets/js/172.18b279a3.js"><link rel="prefetch" href="/docs/assets/js/173.1e032874.js"><link rel="prefetch" href="/docs/assets/js/174.fb892301.js"><link rel="prefetch" href="/docs/assets/js/175.49064e17.js"><link rel="prefetch" href="/docs/assets/js/176.36248684.js"><link rel="prefetch" href="/docs/assets/js/177.ab68e38a.js"><link rel="prefetch" href="/docs/assets/js/178.a07641d6.js"><link rel="prefetch" href="/docs/assets/js/179.fe3e7e03.js"><link rel="prefetch" href="/docs/assets/js/18.a7d8eac9.js"><link rel="prefetch" href="/docs/assets/js/181.7b2aec14.js"><link rel="prefetch" href="/docs/assets/js/182.3b631abe.js"><link rel="prefetch" href="/docs/assets/js/183.ac45559a.js"><link rel="prefetch" href="/docs/assets/js/184.0b0f0132.js"><link rel="prefetch" href="/docs/assets/js/185.e835ed39.js"><link rel="prefetch" href="/docs/assets/js/186.92248453.js"><link rel="prefetch" href="/docs/assets/js/187.e60f8856.js"><link rel="prefetch" href="/docs/assets/js/188.b60e86b5.js"><link rel="prefetch" href="/docs/assets/js/189.e6df83ec.js"><link rel="prefetch" href="/docs/assets/js/19.d34a5021.js"><link rel="prefetch" href="/docs/assets/js/190.71c5f9bc.js"><link rel="prefetch" href="/docs/assets/js/191.89769c30.js"><link rel="prefetch" href="/docs/assets/js/192.f334710d.js"><link rel="prefetch" href="/docs/assets/js/193.24439cc0.js"><link rel="prefetch" href="/docs/assets/js/194.158e1013.js"><link rel="prefetch" href="/docs/assets/js/195.5bac60bf.js"><link rel="prefetch" href="/docs/assets/js/196.2091784e.js"><link rel="prefetch" href="/docs/assets/js/197.a0af65ef.js"><link rel="prefetch" href="/docs/assets/js/198.5a38f777.js"><link rel="prefetch" href="/docs/assets/js/199.a3388a97.js"><link rel="prefetch" href="/docs/assets/js/20.02ff9fa6.js"><link rel="prefetch" href="/docs/assets/js/200.fee51bd5.js"><link rel="prefetch" href="/docs/assets/js/201.599a2e19.js"><link rel="prefetch" href="/docs/assets/js/202.94b08328.js"><link rel="prefetch" href="/docs/assets/js/21.3180a144.js"><link rel="prefetch" href="/docs/assets/js/22.47c65b0f.js"><link rel="prefetch" href="/docs/assets/js/23.40a4aa8d.js"><link rel="prefetch" href="/docs/assets/js/24.77bc4cb3.js"><link rel="prefetch" href="/docs/assets/js/25.eb0fc3a1.js"><link rel="prefetch" href="/docs/assets/js/26.2ad414f9.js"><link rel="prefetch" href="/docs/assets/js/27.9cb3770a.js"><link rel="prefetch" href="/docs/assets/js/28.97c9cc07.js"><link rel="prefetch" href="/docs/assets/js/29.59a2a256.js"><link rel="prefetch" href="/docs/assets/js/3.1094adfb.js"><link rel="prefetch" href="/docs/assets/js/30.10734795.js"><link rel="prefetch" href="/docs/assets/js/31.76c9e872.js"><link rel="prefetch" href="/docs/assets/js/32.bd2d8592.js"><link rel="prefetch" href="/docs/assets/js/33.eecd1c81.js"><link rel="prefetch" href="/docs/assets/js/34.75d6a116.js"><link rel="prefetch" href="/docs/assets/js/35.fcb2983a.js"><link rel="prefetch" href="/docs/assets/js/36.24e4fe34.js"><link rel="prefetch" href="/docs/assets/js/37.3cc8811a.js"><link rel="prefetch" href="/docs/assets/js/38.b37d57e7.js"><link rel="prefetch" href="/docs/assets/js/39.8d421fd5.js"><link rel="prefetch" href="/docs/assets/js/4.c99db662.js"><link rel="prefetch" href="/docs/assets/js/40.ee335e2e.js"><link rel="prefetch" href="/docs/assets/js/41.79517d30.js"><link rel="prefetch" href="/docs/assets/js/42.b0dd61b4.js"><link rel="prefetch" href="/docs/assets/js/43.9313bdf1.js"><link rel="prefetch" href="/docs/assets/js/44.b5da51f7.js"><link rel="prefetch" href="/docs/assets/js/45.e1616162.js"><link rel="prefetch" href="/docs/assets/js/46.98b6644c.js"><link rel="prefetch" href="/docs/assets/js/47.74cb3c70.js"><link rel="prefetch" href="/docs/assets/js/48.7a3c62da.js"><link rel="prefetch" href="/docs/assets/js/49.d350760d.js"><link rel="prefetch" href="/docs/assets/js/5.8bd15b0e.js"><link rel="prefetch" href="/docs/assets/js/50.893cb91a.js"><link rel="prefetch" href="/docs/assets/js/51.dbd3427e.js"><link rel="prefetch" href="/docs/assets/js/52.23c35182.js"><link rel="prefetch" href="/docs/assets/js/53.ac2d0f30.js"><link rel="prefetch" href="/docs/assets/js/54.6d26b484.js"><link rel="prefetch" href="/docs/assets/js/55.91fa33e7.js"><link rel="prefetch" href="/docs/assets/js/56.c508579b.js"><link rel="prefetch" href="/docs/assets/js/57.ce0fe65e.js"><link rel="prefetch" href="/docs/assets/js/58.833ca645.js"><link rel="prefetch" href="/docs/assets/js/59.6f7965ef.js"><link rel="prefetch" href="/docs/assets/js/6.93025fc4.js"><link rel="prefetch" href="/docs/assets/js/60.b18f1e54.js"><link rel="prefetch" href="/docs/assets/js/61.8ee23215.js"><link rel="prefetch" href="/docs/assets/js/62.aa29e256.js"><link rel="prefetch" href="/docs/assets/js/63.178caf85.js"><link rel="prefetch" href="/docs/assets/js/64.7ec73701.js"><link rel="prefetch" href="/docs/assets/js/65.3eb6f247.js"><link rel="prefetch" href="/docs/assets/js/66.2251be55.js"><link rel="prefetch" href="/docs/assets/js/67.332ced90.js"><link rel="prefetch" href="/docs/assets/js/68.08f3254a.js"><link rel="prefetch" href="/docs/assets/js/69.2f4be146.js"><link rel="prefetch" href="/docs/assets/js/7.56f39dff.js"><link rel="prefetch" href="/docs/assets/js/70.782950ac.js"><link rel="prefetch" href="/docs/assets/js/71.9fb1012e.js"><link rel="prefetch" href="/docs/assets/js/72.dfa84596.js"><link rel="prefetch" href="/docs/assets/js/73.ae254788.js"><link rel="prefetch" href="/docs/assets/js/74.94fdd719.js"><link rel="prefetch" href="/docs/assets/js/75.41f0a450.js"><link rel="prefetch" href="/docs/assets/js/76.3919cd4f.js"><link rel="prefetch" href="/docs/assets/js/77.464b34dd.js"><link rel="prefetch" href="/docs/assets/js/78.02deb7d2.js"><link rel="prefetch" href="/docs/assets/js/79.9783078c.js"><link rel="prefetch" href="/docs/assets/js/8.84e1c7ea.js"><link rel="prefetch" href="/docs/assets/js/80.c218ea90.js"><link rel="prefetch" href="/docs/assets/js/81.7ee011a6.js"><link rel="prefetch" href="/docs/assets/js/82.7f0dfa2b.js"><link rel="prefetch" href="/docs/assets/js/83.1626861d.js"><link rel="prefetch" href="/docs/assets/js/84.02c79094.js"><link rel="prefetch" href="/docs/assets/js/85.c278d45d.js"><link rel="prefetch" href="/docs/assets/js/86.4a22ef7b.js"><link rel="prefetch" href="/docs/assets/js/87.5d5173d5.js"><link rel="prefetch" href="/docs/assets/js/88.3547945a.js"><link rel="prefetch" href="/docs/assets/js/89.0313ff5a.js"><link rel="prefetch" href="/docs/assets/js/9.9abbdd3c.js"><link rel="prefetch" href="/docs/assets/js/90.5ed32e78.js"><link rel="prefetch" href="/docs/assets/js/91.0f0f0dd2.js"><link rel="prefetch" href="/docs/assets/js/92.cb01ca28.js"><link rel="prefetch" href="/docs/assets/js/93.a2fe9f49.js"><link rel="prefetch" href="/docs/assets/js/94.c3013f9b.js"><link rel="prefetch" href="/docs/assets/js/95.54f3cf3e.js"><link rel="prefetch" href="/docs/assets/js/96.0c5063ca.js"><link rel="prefetch" href="/docs/assets/js/97.ca9c6a17.js"><link rel="prefetch" href="/docs/assets/js/98.1470fbd2.js"><link rel="prefetch" href="/docs/assets/js/99.4758150f.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.229beafb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">计算机基础教程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  机器指令
</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link router-link-active">
  软件基础
</a></div><div class="nav-item"><a href="/docs/coder2hacker/" class="nav-link">
  白帽黑客
</a></div><div class="nav-item"><a href="/docs/blockchain/" class="nav-link">
  区块链
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  机器指令
</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link router-link-active">
  软件基础
</a></div><div class="nav-item"><a href="/docs/coder2hacker/" class="nav-link">
  白帽黑客
</a></div><div class="nav-item"><a href="/docs/blockchain/" class="nav-link">
  区块链
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/software/" aria-current="page" class="sidebar-link">软件基础</a></li><li><a href="/docs/coder2hacker/" class="sidebar-link">黑客入门</a></li><li><a href="/docs/blockchain/" class="sidebar-link">区块链入门</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>refer: 《programming/js_dev_overview》</p> <h2 id="_1-基本概念"><a href="#_1-基本概念" class="header-anchor">#</a> 1. 基本概念</h2> <p>https://reactjs.org/docs/glossary.html</p> <h3 id="_1-1-reacjs-application"><a href="#_1-1-reacjs-application" class="header-anchor">#</a> 1.1 Reacjs Application</h3> <p><strong>Single-page Applicaiton</strong></p> <p>Though you may build a single-page application in React, it is not a requirement. React can also be used for enhancing small parts of existing websites with additional interactivity. Code written in React can coexist peacefully with markup rendered on the server by something like PHP, or with other client-side libraries. In fact, this is exactly how React is being used at Facebook.</p> <p>通过 react router可以实现多页面：</p> <p><code>import { Router, BrowserRouter, Redirect, Route, Switch } from 'react-router-dom'</code></p> <p>页面切换的时候url变化，相应触发页面的WillUnmount生命周期</p> <p><strong>CDN</strong></p> <p>CDN stands for Content Delivery Network. CDNs deliver cached, static content from a network of servers across the globe.</p> <h3 id="_1-2-es6-es2015-es2016-etc"><a href="#_1-2-es6-es2015-es2016-etc" class="header-anchor">#</a> 1.2 ES6, ES2015, ES2016, etc</h3> <p>These acronyms all refer to the most recent versions of the ECMAScript Language Specification standard, which the JavaScript language is an implementation of. The ES6 version (also known as ES2015) includes many additions to the previous versions such as: arrow functions, classes, template literals, <code>let</code> and <code>const</code> statements. You can learn more about specific versions <a href="https://en.wikipedia.org/wiki/ECMAScript#Versions" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="_1-3-compilers"><a href="#_1-3-compilers" class="header-anchor">#</a> 1.3 Compilers</h3> <p>有的称之为 transpiling</p> <p>A JavaScript compiler takes JavaScript code, transforms it and returns JavaScript code in a different format. The most common use case is to take ES6 syntax and transform it into syntax that older browsers are capable of interpreting. <a href="https://babeljs.io/" target="_blank" rel="noopener noreferrer">Babel<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is the compiler most commonly used with React.</p> <h3 id="_1-4-bundlers"><a href="#_1-4-bundlers" class="header-anchor">#</a> 1.4 Bundlers</h3> <p>又称 minimize？</p> <p>Bundlers take JavaScript and CSS code written as separate modules (often hundreds of them), and combine them together into a few files better optimized for the browsers. Some bundlers commonly used in React applications include <a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer">Webpack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="http://browserify.org/" target="_blank" rel="noopener noreferrer">Browserify<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="_1-5-package-managers"><a href="#_1-5-package-managers" class="header-anchor">#</a> 1.5 Package Managers</h3> <p>Package managers are tools that allow you to manage dependencies in your project. <a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">npm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://yarnpkg.com/" target="_blank" rel="noopener noreferrer">Yarn<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> are two package managers commonly used in React applications. Both of them are clients for the same npm package registry.</p> <h3 id="_1-6-jsx"><a href="#_1-6-jsx" class="header-anchor">#</a> 1.6 JSX</h3> <p>JSX is a syntax extension to JavaScript. It is similar to a template language, but it has full power of JavaScript. JSX gets compiled to <code>React.createElement()</code> calls which return plain JavaScript objects called “React elements”.</p> <p>JSX is a special syntax developed by Facebook to support in-line templates for react components.</p> <p>JSX是一个JavaScript语法扩展，类似于XML。你可以使用React，可以进行JSX语法到JavaScript的转换</p> <p>react不是必须使用JSX。你可以使用普通的JS。然而，我们建议使用JSX因为它定义树结构（dom）简洁而且是我们熟悉的语法。简明的代码结构更利于开发和维护。 XML有着开闭标签，在构建复杂的树形结构时，比函数调用和对象字面量更易读。</p> <p><strong>jsx中原有的javascript的保留字都不能使用，例如：class,for必须使用className,htmlFor;</strong></p> <p><strong>JSX并不是新语言，也没有改变JavaScript的语法，只是对JavaScript的拓展。</strong></p> <p>jsx是类似于html但是不完全相同，但是还是有不同的地方</p> <h3 id="_1-7-reactjs"><a href="#_1-7-reactjs" class="header-anchor">#</a> 1.7 ReactJS</h3> <h4 id="_1-7-1-elements"><a href="#_1-7-1-elements" class="header-anchor">#</a> 1.7.1 Elements</h4> <p>first-class JavaScript objects
https://reactjs.org/docs/react-api.html#createelement</p> <p>components的building block: React elements are the building blocks of React applications. One might confuse elements with a more widely known concept of “components”. An element describes what you want to see on the screen. React elements are immutable.</p> <p><code>const element = &lt;h1&gt;Hello, world&lt;/h1&gt;;</code></p> <p>Typically, elements are not used directly, but get returned from components.</p> <p>Unlike browser DOM elements, React elements are plain objects. React DOM takes care of updating the DOM to match the React elements.</p> <p>To render a React element into a root DOM node, pass both to <a href="https://reactjs.org/docs/react-dom.html#render" target="_blank" rel="noopener noreferrer"><code>ReactDOM.render()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <h4 id="_1-7-2-component-props-state-lifecycle-methods"><a href="#_1-7-2-component-props-state-lifecycle-methods" class="header-anchor">#</a> 1.7.2 Component&amp;props|State&amp;Lifecycle Methods</h4> <p>https://reactjs.org/docs/react-component.html</p> <p>https://reactjs.org/docs/components-and-props.html</p> <h5 id="component-props"><a href="#component-props" class="header-anchor">#</a> <strong>component&amp;props</strong></h5> <p>React components are small, reusable pieces of code that return a React element to be rendered to the page.</p> <div class="language- extra-class"><pre class="language-text"><code>//The simplest version of React component is a plain JavaScript function that returns a React element
function Welcome(props) {
  return &lt;h1&gt;Hello, {props.name}&lt;/h1&gt;;
}
//Components can also be ES6 classes:
class Welcome extends React.Component {
  render() {
    return &lt;h1&gt;Hello, {this.props.name}&lt;/h1&gt;;
  }
}
</code></pre></div><p>Conceptually, components are like JavaScript functions. They accept arbitrary inputs (called “props”) and return React elements describing what should appear on the screen.</p> <ul><li>function components: are a simpler way to write components that only contain a render method and don’t have their own state</li> <li>class componenets:
<ul><li>controlled components: by lift up state</li> <li>pure components: by using immutable</li></ul></li></ul> <p>从react的角度，function component和class component是等价的，只是ES6的角度写法不同</p> <p><strong>All React components must act like pure functions with respect to their props.</strong></p> <div class="language- extra-class"><pre class="language-text"><code>pure function不改变输入：
function sum(a, b) {
  return a + b;
}
非 pure function：
function withdraw(account, amount) {
  account.total -= amount;
}
</code></pre></div><p>readonly <code>props</code> are inputs to a React component. They are data passed down from a parent component to a child component.</p> <div class="language- extra-class"><pre class="language-text"><code>//`props.children` is available on every component. It contains the content between the opening and closing tags of a component. For example:

&lt;Welcome&gt;Hello world!&lt;/Welcome&gt;
function Welcome(props) {
  return &lt;p&gt;{props.children}&lt;/p&gt;;
}
class Welcome extends React.Component {
  render() {
    return &lt;p&gt;{this.props.children}&lt;/p&gt;;
  }
}
</code></pre></div><p>The most important difference between <code>state</code> and <code>props</code> is that <code>props</code> are passed from a parent component, but <code>state</code> is managed by the component itself. A component cannot change its <code>props</code>, but it can change its <code>state</code>.</p> <p>For each particular piece of changing data, there should be just one component that “owns” it in its state. Don’t try to synchronize states of two different components. Instead, <a href="https://reactjs.org/docs/lifting-state-up.html" target="_blank" rel="noopener noreferrer">lift it up<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to their closest shared ancestor, and pass it down as props to both of them.</p> <p>除了props和state，对于component来说可以定义任意的fields，比如</p> <div class="language- extra-class"><pre class="language-text"><code>componentDidMount() {
    this.timerID = setInterval(
      () =&gt; this.tick(),
      1000
    );
  }
  While `this.props` is set up by React itself and `this.state` has a special meaning, you are free to add additional fields to the class manually if you need to store something that doesn’t participate in the data flow 
</code></pre></div><h5 id="state-lifecycle-methods"><a href="#state-lifecycle-methods" class="header-anchor">#</a> State &amp; Lifecycle Methods</h5> <p>Lifecycle methods are custom functionality that gets executed during the different phases of a component. There are methods available when the component gets created and inserted into the DOM (<a href="https://reactjs.org/docs/react-component.html#mounting" target="_blank" rel="noopener noreferrer">mounting<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>), when the component updates, and when the component gets unmounted or removed from the DOM.</p> <p>componentDidMount</p> <p>componentWillUnmount</p> <div class="language- extra-class"><pre class="language-text"><code>// Wrong
this.state.comment = 'Hello';
// Correct
this.setState({comment: 'Hello'});

#特别小心：State Updates May Be Asynchronous
Because this.props and this.state may be updated asynchronously, you should not rely on their values for calculating the next state.

// Wrong
this.setState({
  counter: this.state.counter + this.props.increment,
});
// Correct
this.setState((state, props) =&gt; ({
  counter: state.counter + props.increment
}));
// Correct
this.setState(function(state, props) {
  return {
    counter: state.counter + props.increment
  };
});

Neither parent nor child components can know if a certain component is stateful or stateless, and they shouldn’t care whether it is defined as a function or a class.
</code></pre></div><h4 id="_1-7-3-controlled-vs-uncontrolled-components-很重要的概念"><a href="#_1-7-3-controlled-vs-uncontrolled-components-很重要的概念" class="header-anchor">#</a> 1.7.3 Controlled vs. Uncontrolled Components 很重要的概念</h4> <h5 id="_1-controlled"><a href="#_1-controlled" class="header-anchor">#</a> 1. Controlled</h5> <p>https://reactjs.org/docs/forms.html#controlled-components</p> <p>https://reactjs.org/docs/forms.html</p> <p>HTML form elements work a little bit differently from other DOM elements in React, because form elements naturally keep some internal state,  such as <code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code>, and <code>&lt;select&gt;</code> typically maintain their own state and update it based on user input.</p> <p>The form has the default HTML form behavior of browsing to a new page when the user submits the form. If you want this behavior in React, it just works. But in most cases, it’s convenient to have a JavaScript function that handles the submission of the form and has access to the data that the user entered into the form. The standard way to achieve this is with a technique called “controlled components”.</p> <p>In React, mutable state is typically kept in the state property of components, and only updated with <a href="https://reactjs.org/docs/react-component.html#setstate" target="_blank" rel="noopener noreferrer"><code>setState()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>We can combine the two by making the React state be the “single source of truth”. Then the React component that renders a form also controls what happens in that form on subsequent user input. An input form element whose value is controlled by React in this way is called a “controlled component”.</p> <div class="language-react extra-class"><pre class="language-text"><code>class Reservation extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      isGoing: true,
      numberOfGuests: 2
    };
	this.handleSubmit = this.handleSubmit.bind(this);
    this.handleInputChange = this.handleInputChange.bind(this);
  }
  handleSubmit(event) {
    alert('A name was submitted: ' + this.state.value);
    event.preventDefault();
  }
  handleInputChange(event) {
    const target = event.target;
    const value = target.type === 'checkbox' ? target.checked : target.value;
    const name = target.name;

    this.setState({
      [name]: value
    });
  }

  render() {
    return (
      &lt;form onSubmit={this.handleSubmit}&gt;
        &lt;label&gt;
          Is going:
          &lt;input
            name=&quot;isGoing&quot;
            type=&quot;checkbox&quot;
            checked={this.state.isGoing}
            onChange={this.handleInputChange} /&gt;
        &lt;/label&gt;
        &lt;br /&gt;
        &lt;label&gt;
          Number of guests:
          &lt;input
            name=&quot;numberOfGuests&quot;
            type=&quot;number&quot;
            value={this.state.numberOfGuests}
            onChange={this.handleInputChange} /&gt;
        &lt;/label&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;
      &lt;/form&gt;
    );
  }
}
</code></pre></div><p>完整解决方案/框架：</p> <p>If you’re looking for a complete solution including validation, keeping track of the visited fields, and handling form submission, <a href="https://jaredpalmer.com/formik" target="_blank" rel="noopener noreferrer">Formik<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (is one of the popular choices. However, it is built on the same principles of controlled components and managing state)</p> <p>antd</p> <h5 id="_2-uncontrolled"><a href="#_2-uncontrolled" class="header-anchor">#</a> 2. Uncontrolled</h5> <p>where form data is handled by the DOM itself. To write an uncontrolled component, instead of writing an event handler for every state update, you can <a href="https://reactjs.org/docs/refs-and-the-dom.html" target="_blank" rel="noopener noreferrer">use a ref<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to get form values from the DOM.</p> <div class="language-react extra-class"><pre class="language-text"><code>class NameForm extends React.Component {
  constructor(props) {
    super(props);
    this.handleSubmit = this.handleSubmit.bind(this);
    this.input = React.createRef();
  }
  handleSubmit(event) {
    alert('A name was submitted: ' + this.input.current.value);
    event.preventDefault();
  }
  render() {
    return (
      &lt;form onSubmit={this.handleSubmit}&gt;
        &lt;label&gt;
          Name:
          &lt;input type=&quot;text&quot; ref={this.input} /&gt;
        &lt;/label&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;
      &lt;/form&gt;
    );
  }
}

In the React rendering lifecycle, the value attribute on form elements will override the value in the DOM. With an uncontrolled component, you often want React to specify the initial value, but leave subsequent updates uncontrolled. To handle this case, you can specify a defaultValue attribute instead of value.
Likewise, &lt;input type=&quot;checkbox&quot;&gt; and &lt;input type=&quot;radio&quot;&gt; support defaultChecked, and &lt;select&gt; and &lt;textarea&gt; supports defaultValue.
In React, an &lt;input type=&quot;file&quot; /&gt; is always an uncontrolled component because its value can only be set by a user, and not programmatically.
</code></pre></div><h4 id="_1-7-4-handling-events"><a href="#_1-7-4-handling-events" class="header-anchor">#</a> 1.7.4 Handling Events</h4> <p>https://reactjs.org/docs/handling-events.html</p> <p>Handling events with React elements is very similar to handling events on DOM elements but has some syntactic differences:</p> <ul><li>React event handlers are named using camelCase, rather than lowercase.</li> <li>With JSX you pass a function as the event handler, rather than a string.</li></ul> <p>SyntheticEvent: https://reactjs.org/docs/events.html</p> <p>When you define a component using an <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes" target="_blank" rel="noopener noreferrer">ES6 class<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, a common pattern is for an event handler to be a method on the class.</p> <div class="language- extra-class"><pre class="language-text"><code>https://stackoverflow.com/questions/6348494/addeventlistener-vs-onclick#:~:text=Summary%3A,can%20stop%20the%20event%20propagation.

## html
&lt;button onclick=&quot;activateLasers()&quot;&gt;
  Activate Lasers
&lt;/button&gt;
OR
element.addEventListener('click', function() { /* do stuff here*/ }, false);

When using React, you generally don’t need to call addEventListener to add listeners to a DOM element after it is created. Instead, just provide a listener when the element is initially rendered.

## react
function ActionLink() {
  function handleClick(e) {
    e.preventDefault();
    console.log('The link was clicked.');
  }
  return (
    &lt;a href=&quot;#&quot; onClick={handleClick}&gt;
      Click me
    &lt;/a&gt;
  );
}

class Toggle extends React.Component {
  constructor(props) {
    super(props);
    this.state = {isToggleOn: true};

    // This binding is necessary to make `this` work in the callback
    this.handleClick = this.handleClick.bind(this);
  }

  handleClick() {
    this.setState(state =&gt; ({
      isToggleOn: !state.isToggleOn
    }));
  }

  render() {
    return (
      &lt;button onClick={this.handleClick}&gt;
        {this.state.isToggleOn ? 'ON' : 'OFF'}
      &lt;/button&gt;
    );
  }
}


class LoggingButton extends React.Component {
  // This syntax ensures `this` is bound within handleClick.
  // Warning: this is *experimental* syntax.
  handleClick = () =&gt; {
    console.log('this is:', this);
  }

  render() {
    return (
      &lt;button onClick={this.handleClick}&gt;
        Click me
      &lt;/button&gt;
    );
  }
}

class LoggingButton extends React.Component {
  handleClick() {
    console.log('this is:', this);
  }

  render() {
    // This syntax ensures `this` is bound within handleClick
    //The problem with this syntax is that a different callback is created each time the LoggingButton renders. In most cases, this is fine. However, if this callback is passed as a prop to lower components, those components might do an extra re-rendering. We generally recommend binding in the constructor or using the class fields syntax, to avoid this sort of performance problem.
    return (
      &lt;button onClick={() =&gt; this.handleClick()}&gt;
        Click me
      &lt;/button&gt;
    );
  }
}

</code></pre></div><h4 id="_1-7-5-conditional-rendering"><a href="#_1-7-5-conditional-rendering" class="header-anchor">#</a> 1.7.5 Conditional Rendering</h4> <div class="language- extra-class"><pre class="language-text"><code>// if else
function Greeting(props) {
  const isLoggedIn = props.isLoggedIn;
  if (isLoggedIn) {
    return &lt;UserGreeting /&gt;;
  }
  return &lt;GuestGreeting /&gt;;
}

ReactDOM.render(
  // Try changing to isLoggedIn={true}:
  &lt;Greeting isLoggedIn={false} /&gt;,
  document.getElementById('root')
);

//Inline If with Logical &amp;&amp; Operator (embed expressions in JSX)
function Mailbox(props) {
  const unreadMessages = props.unreadMessages;
  return (
    &lt;div&gt;
      &lt;h1&gt;Hello!&lt;/h1&gt;
      {unreadMessages.length &gt; 0 &amp;&amp;
        &lt;h2&gt;
          You have {unreadMessages.length} unread messages.
        &lt;/h2&gt;
      }
    &lt;/div&gt;
  );
}
const messages = ['React', 'Re: React', 'Re:Re: React'];
ReactDOM.render(
  &lt;Mailbox unreadMessages={messages} /&gt;,
  document.getElementById('root')
);

//Inline If-Else with Conditional Operator
render() {
  const isLoggedIn = this.state.isLoggedIn;
  return (
    &lt;div&gt;
      The user is &lt;b&gt;{isLoggedIn ? 'currently' : 'not'}&lt;/b&gt; logged in.
    &lt;/div&gt;
  );
}

// Return null to prevent rendering
// Returning null from a component’s render method does not affect the firing of the component’s lifecycle methods. For instance componentDidUpdate will still be called.

function WarningBanner(props) {
  if (!props.warn) {
    return null;
  }

  return (
    &lt;div className=&quot;warning&quot;&gt;
      Warning!
    &lt;/div&gt;
  );
}

</code></pre></div><h4 id="_1-7-6-lists-keys"><a href="#_1-7-6-lists-keys" class="header-anchor">#</a> 1.7.6 Lists &amp; Keys</h4> <p>https://reactjs.org/docs/lists-and-keys.html</p> <p>Don’t pass something like <code>Math.random()</code> to keys. It is important that keys have a “stable identity” across re-renders so that React can determine when items are added, removed, or re-ordered. Ideally, keys should correspond to unique and stable identifiers coming from your data, such as <code>post.id</code>.</p> <p>Keys only make sense in the context of the surrounding array.</p> <div class="language- extra-class"><pre class="language-text"><code>## wrong:
function ListItem(props) {
  const value = props.value;
  return (
    // Wrong! There is no need to specify the key here:
    &lt;li key={value.toString()}&gt;
      {value}
    &lt;/li&gt;
  );
}
function NumberList(props) {
  const numbers = props.numbers;
  const listItems = numbers.map((number) =&gt;
    // Wrong! The key should have been specified here:
    &lt;ListItem value={number} /&gt;
  );
  return (
    &lt;ul&gt;
      {listItems}
    &lt;/ul&gt;
  );
}

const numbers = [1, 2, 3, 4, 5];
ReactDOM.render(
  &lt;NumberList numbers={numbers} /&gt;,
  document.getElementById('root')
);

##correct:

function ListItem(props) {
  // Correct! There is no need to specify the key here:
  return &lt;li&gt;{props.value}&lt;/li&gt;;
}
function NumberList(props) {
  const numbers = props.numbers;
  const listItems = numbers.map((number) =&gt;
    // Correct! Key should be specified inside the array.
    &lt;ListItem key={number.toString()} value={number} /&gt;
  );
  return (
    &lt;ul&gt;
      {listItems}
    &lt;/ul&gt;
  );
}
const numbers = [1, 2, 3, 4, 5];
ReactDOM.render(
  &lt;NumberList numbers={numbers} /&gt;,
  document.getElementById('root')
);

# JSX allows embedding any expression in curly braces so we could inline the map() result:
function NumberList(props) {
  const numbers = props.numbers;
  return (
    &lt;ul&gt;
      {numbers.map((number) =&gt;
        &lt;ListItem key={number.toString()}
                  value={number} /&gt;
      )}
    &lt;/ul&gt;
  );
}

</code></pre></div><h4 id="_1-7-7-components设计思想"><a href="#_1-7-7-components设计思想" class="header-anchor">#</a> 1.7.7 Components设计思想</h4> <h5 id="thinking-in-react-基本封装"><a href="#thinking-in-react-基本封装" class="header-anchor">#</a> Thinking in React 基本封装</h5> <p>判断什么是state：</p> <ol><li>Is it passed in from a parent via props? If so, it probably isn’t state.</li> <li>Does it remain unchanged over time? If so, it probably isn’t state.</li> <li>Can you compute it based on any other state or props in your component? If so, it isn’t state.</li></ol> <p>谁是state拥有者：</p> <p>React is all about one-way data flow down the component hierarchy. It may not be immediately clear which component should own what state. For each piece of state in your application:</p> <ul><li>Identify every component that renders something based on that state.</li> <li>Find a common owner component (a single component above all the components that need the state in the hierarchy).</li> <li>Either the common owner or another component higher up in the hierarchy should own the state.</li> <li>If you can’t find a component where it makes sense to own the state, create a new component solely for holding the state and add it somewhere in the hierarchy above the common owner component.</li></ul> <h5 id="lifting-state-up-联动类组件"><a href="#lifting-state-up-联动类组件" class="header-anchor">#</a> Lifting State Up 联动类组件</h5> <p>If something can be derived from either props or state, it probably shouldn’t be in the state. For example, instead of storing both <code>celsiusValue</code> and <code>fahrenheitValue</code>, we store just the last edited <code>temperature</code> and its <code>scale</code>. The value of the other input can always be calculated from them in the <code>render()</code> method.</p> <p>When you see something wrong in the UI, you can use <a href="https://github.com/facebook/react/tree/master/packages/react-devtools" target="_blank" rel="noopener noreferrer">React Developer Tools<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to inspect the props and move up the tree until you find the component responsible for updating the state. This lets you trace the bugs to their source</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> scaleNames <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token string">'Celsius'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token string">'Fahrenheit'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">toCelsius</span><span class="token punctuation">(</span><span class="token parameter">fahrenheit</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>fahrenheit <span class="token operator">-</span> <span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">/</span> <span class="token number">9</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">toFahrenheit</span><span class="token punctuation">(</span><span class="token parameter">celsius</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>celsius <span class="token operator">*</span> <span class="token number">9</span> <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">32</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">tryConvert</span><span class="token punctuation">(</span><span class="token parameter">temperature<span class="token punctuation">,</span> convert</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> input <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>temperature<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> output <span class="token operator">=</span> <span class="token function">convert</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> rounded <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>output <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> rounded<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">BoilingVerdict</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>celsius <span class="token operator">&gt;=</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>The water would boil<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>The water would not boil<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">TemperatureInput</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onTemperatureChange</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> temperature <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>temperature<span class="token punctuation">;</span>
    <span class="token keyword">const</span> scale <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>scale<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>fieldset<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>legend<span class="token operator">&gt;</span>Enter temperature <span class="token keyword">in</span> <span class="token punctuation">{</span>scaleNames<span class="token punctuation">[</span>scale<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>legend<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>temperature<span class="token punctuation">}</span>
               onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>fieldset<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Calculator</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleCelsiusChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleCelsiusChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleFahrenheitChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleFahrenheitChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">temperature</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">scale</span><span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleCelsiusChange</span><span class="token punctuation">(</span><span class="token parameter">temperature</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">scale</span><span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span> temperature<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleFahrenheitChange</span><span class="token punctuation">(</span><span class="token parameter">temperature</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">scale</span><span class="token operator">:</span> <span class="token string">'f'</span><span class="token punctuation">,</span> temperature<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> scale <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>scale<span class="token punctuation">;</span>
    <span class="token keyword">const</span> temperature <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>temperature<span class="token punctuation">;</span>
    <span class="token keyword">const</span> celsius <span class="token operator">=</span> scale <span class="token operator">===</span> <span class="token string">'f'</span> <span class="token operator">?</span> <span class="token function">tryConvert</span><span class="token punctuation">(</span>temperature<span class="token punctuation">,</span> toCelsius<span class="token punctuation">)</span> <span class="token operator">:</span> temperature<span class="token punctuation">;</span>
    <span class="token keyword">const</span> fahrenheit <span class="token operator">=</span> scale <span class="token operator">===</span> <span class="token string">'c'</span> <span class="token operator">?</span> <span class="token function">tryConvert</span><span class="token punctuation">(</span>temperature<span class="token punctuation">,</span> toFahrenheit<span class="token punctuation">)</span> <span class="token operator">:</span> temperature<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>TemperatureInput
          scale<span class="token operator">=</span><span class="token string">&quot;c&quot;</span>
          temperature<span class="token operator">=</span><span class="token punctuation">{</span>celsius<span class="token punctuation">}</span>
          onTemperatureChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleCelsiusChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>TemperatureInput
          scale<span class="token operator">=</span><span class="token string">&quot;f&quot;</span>
          temperature<span class="token operator">=</span><span class="token punctuation">{</span>fahrenheit<span class="token punctuation">}</span>
          onTemperatureChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleFahrenheitChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>BoilingVerdict
          celsius<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>celsius<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Calculator <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="containment-容器类组件-弹窗类和布局类"><a href="#containment-容器类组件-弹窗类和布局类" class="header-anchor">#</a> Containment 容器类组件(弹窗类和布局类)</h5> <div class="language- extra-class"><pre class="language-text"><code>--- 弹窗类
Some components don’t know their children ahead of time. This is especially common for components like `Sidebar` or `Dialog` that represent generic “boxes”. We recommend that such components use the special `children` prop to pass children elements directly into their output:

function FancyBorder(props) {
  return (
    &lt;div className={'FancyBorder FancyBorder-' + props.color}&gt;
      {props.children}
    &lt;/div&gt;
  );
}
function WelcomeDialog() {
  return (
    &lt;FancyBorder color=&quot;blue&quot;&gt;
      &lt;h1 className=&quot;Dialog-title&quot;&gt;
        Welcome
      &lt;/h1&gt;
      &lt;p className=&quot;Dialog-message&quot;&gt;
        Thank you for visiting our spacecraft!
      &lt;/p&gt;
    &lt;/FancyBorder&gt;
  );
}

--- 布局类
sometimes you might need multiple “holes” in a component. In such cases you may come up with your own convention instead of using children:

function SplitPane(props) {
  return (
    &lt;div className=&quot;SplitPane&quot;&gt;
      &lt;div className=&quot;SplitPane-left&quot;&gt;
        {props.left}
      &lt;/div&gt;
      &lt;div className=&quot;SplitPane-right&quot;&gt;
        {props.right}
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

function App() {
  return (
    &lt;SplitPane
      left={
        &lt;Contacts /&gt;
      }
      right={
        &lt;Chat /&gt;
      } /&gt;
  );
}
</code></pre></div><h5 id="specialization-通用到定制"><a href="#specialization-通用到定制" class="header-anchor">#</a> Specialization 通用到定制</h5> <p>a more “specific” component renders a more “generic” one and configures it with props</p> <div class="language- extra-class"><pre class="language-text"><code>function Dialog(props) {
  return (
    &lt;FancyBorder color=&quot;blue&quot;&gt;
      &lt;h1 className=&quot;Dialog-title&quot;&gt;
        {props.title}
      &lt;/h1&gt;
      &lt;p className=&quot;Dialog-message&quot;&gt;
        {props.message}
      &lt;/p&gt;
      {props.children}
    &lt;/FancyBorder&gt;
  );
}

function WelcomeDialog() {
  return (
    &lt;Dialog
      title=&quot;Welcome&quot;
      message=&quot;Thank you for visiting our spacecraft!&quot; /&gt;
  );
}

class SignUpDialog extends React.Component {
  constructor(props) {
    super(props);
    this.handleChange = this.handleChange.bind(this);
    this.handleSignUp = this.handleSignUp.bind(this);
    this.state = {login: ''};
  }

  render() {
    return (
      &lt;Dialog title=&quot;Mars Exploration Program&quot;
              message=&quot;How should we refer to you?&quot;&gt;
        &lt;input value={this.state.login}
               onChange={this.handleChange} /&gt;
        &lt;button onClick={this.handleSignUp}&gt;
          Sign Me Up!
        &lt;/button&gt;
      &lt;/Dialog&gt;
    );
  }

  handleChange(e) {
    this.setState({login: e.target.value});
  }

  handleSignUp() {
    alert(`Welcome aboard, ${this.state.login}!`);
  }
}
</code></pre></div><h5 id="more"><a href="#more" class="header-anchor">#</a> More</h5> <p>If you want to reuse non-UI functionality between components, we suggest extracting it into a separate JavaScript module. The components may import it and use that function, object, or a class, without extending it.</p> <h4 id="_1-7-8-refs"><a href="#_1-7-8-refs" class="header-anchor">#</a> 1.7.8 Refs</h4> <p>https://reactjs.org/docs/refs-and-the-dom.html</p> <p>In the typical React dataflow, <a href="https://reactjs.org/docs/components-and-props.html" target="_blank" rel="noopener noreferrer">props<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> are the only way that parent components interact with their children. To modify a child, you re-render it with new props. However, there are a few cases where you need to imperatively modify a child outside of the typical dataflow. The child to be modified could be an instance of a React component, or it could be a DOM element. For both of these cases, React provides an escape hatch.</p> <p>React supports a special attribute that you can attach to any component. The <code>ref</code> attribute can be an object created by <a href="https://reactjs.org/docs/react-api.html#reactcreateref" target="_blank" rel="noopener noreferrer"><code>React.createRef()</code> function<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or a callback function, or a string (in legacy API). When the <code>ref</code> attribute is a callback function, the function receives the underlying DOM element or class instance (depending on the type of element) as its argument. This allows you to have direct access to the DOM element or component instance.</p> <p>Use refs sparingly. If you find yourself often using refs to “make things happen” in your app, consider getting more familiar with <a href="https://reactjs.org/docs/lifting-state-up.html" target="_blank" rel="noopener noreferrer">top-down data flow<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>可以在html element或者class component上面用ref，但是不可以在function component上面使用！ because they don’t have instances</p> <p>使用方式：</p> <p>推荐：When a ref is passed to an element in <code>render</code>, a reference to the node becomes accessible at the <code>current</code> attribute of the ref.</p> <p>即将移除：If you worked with React before, you might be familiar with an older API where the <code>ref</code> attribute is a string, like <code>&quot;textInput&quot;</code>, and the DOM node is accessed as <code>this.refs.textInput</code>. We advise against it because string refs have <a href="https://github.com/facebook/react/pull/8333#issuecomment-271648615" target="_blank" rel="noopener noreferrer">some issues<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, are considered legacy, and <strong>are likely to be removed in one of the future releases</strong>.</p> <p>使用场景：</p> <p>There are a few good use cases for refs:</p> <ul><li>Managing focus, text selection, or media playback.</li> <li>Triggering imperative animations.</li> <li>Integrating with third-party DOM libraries.</li></ul> <p>比如有些情况下，确实需要通过拿到dom元素来获取其clientheight，scrollheight之类的，虽然读取需要ref，但是set还是尽量用state来更新，而不是直接通过dom去改变；</p> <p>但是不好的做法：没有设计好parent child，所以造成有时候只好偷懒通过ref直接操作child的dom或方法，其实可以 Avoid using refs for anything that can be done declaratively 通过在parent维护state 然后传给child prop，然后在handler里面去更改state来解决：例如, instead of exposing <code>open()</code> and <code>close()</code> methods on a <code>Dialog</code> component, pass an <code>isOpen</code> prop to it.</p> <h4 id="_1-7-9-reconciliation"><a href="#_1-7-9-reconciliation" class="header-anchor">#</a> 1.7.9 Reconciliation</h4> <p>https://reactjs.org/docs/reconciliation.html</p> <p>When a component’s props or state change, React decides whether an actual DOM update is necessary by comparing the newly returned element with the previously rendered one. When they are not equal, React will update the DOM. This process is called “reconciliation”.</p> <h2 id="_2-深入解读"><a href="#_2-深入解读" class="header-anchor">#</a> 2. 深入解读</h2> <p>https://reactjs.org/docs/hello-world.html
https://reactjs.org/tutorial/tutorial.html</p> <h3 id="jsx-emac-script-es5-es6-reactjs"><a href="#jsx-emac-script-es5-es6-reactjs" class="header-anchor">#</a> JSX?EMAC SCRIPT(ES5 ES6)?REACTJS</h3> <p>说白了ecma script就是javascript</p> <p>语法全在这里：</p> <p>https://developer.mozilla.org/en-US/docs/Web/JavaScript</p> <p>如reactjs常用的 import export</p> <p>reacjts就是基于javascript搞的前端框架，提供了众多api和组件</p> <p>jsx是Facebook搞的，为了给reactjs简化in-line模板</p> <p>直观可以这么看：</p> <p><strong>react without es6</strong></p> <div class="language- extra-class"><pre class="language-text"><code>The API of ES6 classes is similar to createReactClass() with a few exceptions.

with es6:
class Greeting extends React.Component {
  onstructor(props) {
    super(props);
    this.state = {count: props.initialCount};
    // This line is important!
    this.handleClick = this.handleClick.bind(this);
  }
  handleClick() {
    alert(this.state.message);
  }
  render() {
    return &lt;h1 onClick={this.handleClick}&gt;Hello, {this.props.name}&lt;/h1&gt;;
  }
}
Greeting.defaultProps = {
  name: 'Mary'
};

without es6:
var createReactClass = require('create-react-class');
var Greeting = createReactClass({
  getDefaultProps: function() {
    return {
      name: 'Mary'
    };
  },
  getInitialState: function() {
    return {count: this.props.initialCount};
  },
  handleClick: function() {
    alert(this.state.message);
  },
  render: function() {
    return &lt;h1 onClick={this.handleClick}&gt;Hello, {this.props.name}&lt;/h1&gt;;
  }
});
</code></pre></div><p>react without JSX</p> <div class="language- extra-class"><pre class="language-text"><code>with JSX:
class Hello extends React.Component {
  render() {
    return &lt;div&gt;Hello {this.props.toWhat}&lt;/div&gt;;
  }
}

ReactDOM.render(
  &lt;Hello toWhat=&quot;World&quot; /&gt;,
  document.getElementById('root')
);

without JSX:
class Hello extends React.Component {
  render() {
    return React.createElement('div', null, `Hello ${this.props.toWhat}`);
  }
}

ReactDOM.render(
  React.createElement(Hello, {toWhat: 'World'}, null),
  document.getElementById('root')
);
</code></pre></div><h3 id="reactjs"><a href="#reactjs" class="header-anchor">#</a> Reactjs</h3> <ul><li><p>Forms</p> <p><a href="https://reactjs.org/docs/lifting-state-up.html" target="_blank" rel="noopener noreferrer">Lifting state up 联动<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>Composition vs Inheritance</p></li> <li><p>Fragment</p></li> <li><p>HOCs: Higher-Order Components</p> <p>For Cross-Cutting Concerns  主要是为了重用一些重复的逻辑（比如订阅datasource）</p></li> <li><p>Hooks</p> <p>为了替换HOCs，为了重用一些“有状态的 stateful”逻辑</p></li></ul> <p>Component:</p> <ol><li>class App extends React.Component{…​} is the method that creates a React component.</li> <li>componentDidMount is the API invoked after React renders a component in the DOM.</li> <li>render is the API that “draws” the component on the screen.</li></ol> <p>top level api: https://reactjs.org/docs/react-api.html</p> <h4 id="生命周期排查"><a href="#生命周期排查" class="header-anchor">#</a> 生命周期排查</h4> <p>某个项目，由于需求是高度定制化的类似Excel的表格，市面没有现成产品，所以某高人通过模仿antd写了一套原生的表格组件，层层嵌套，大概是windowtable下面包了一层table叫Seperatetable</p> <p>县看下普通组件生命周期</p> <p><img src="/docs/docs_image/software/programming/reactjs_lifecycle_01.png" alt=""></p> <p>实际项目中，会将api调用获取数据逻辑放在didmount里面（为什么不放在willmount？好像有问题），所以获取数据后必然会触发setSate数据变动操作，从而有一次引发render，这都是正常的，但是因为高人哥们包装的不算太好，造成render完之后Seperatetable又多了一次render，然后windowtable接着触发render，由此循环几次才结束，分析如下</p> <p><img src="/docs/docs_image/software/programming/reactjs_lifecycle_02.png" alt=""></p> <p>此问题还在研究中</p> <p>willunmount已经被干掉了 https://reactjs.org/docs/react-component.html#componentwillunmount</p> <h3 id="es6"><a href="#es6" class="header-anchor">#</a> ES6</h3> <h4 id="解构属性"><a href="#解构属性" class="header-anchor">#</a> 解构属性</h4> <p>https://es6.ruanyifeng.com/#docs/destructuring</p> <div class="language- extra-class"><pre class="language-text"><code>spread attributes:
https://stackoverflow.com/questions/28452358/what-is-the-meaning-of-this-props-in-reactjs
&lt;Component x={} y={} z={} /&gt;
=&gt;
var props = { x: 1, y: 1, z:1 };
&lt;Component {...props} /&gt;
</code></pre></div><h4 id="autobinding"><a href="#autobinding" class="header-anchor">#</a> AutoBinding</h4> <p>https://blog.csdn.net/qq_42817227/article/details/82689047</p> <p>https://www.cnblogs.com/daidechong/p/11586448.html</p> <p>In React components declared as ES6 classes, methods follow the same semantics as regular ES6 classes. This means that they don’t automatically bind <code>this</code> to the instance. You’ll have to explicitly use <code>.bind(this)</code> in the constructor:</p> <p>This means writing ES6 classes comes with a little more boilerplate code <code>this.handleClick = this.handleClick.bind(this);</code> for event handlers, but the upside is slightly better performance in large applications.</p> <p>If the boilerplate code is too unattractive to you, you may enable the <strong>experimental</strong> <a href="https://babeljs.io/docs/plugins/transform-class-properties/" target="_blank" rel="noopener noreferrer">Class Properties<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> syntax proposal with Babel:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">SayHello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'Hello!'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// This line is important!</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
    
<span class="token operator">===</span><span class="token operator">&gt;</span>
    
  <span class="token comment">// WARNING: this syntax is experimental!</span>
  <span class="token comment">// Using an arrow here binds the method:</span>
  <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

Please note that the syntax above is experimental and the syntax may change<span class="token punctuation">,</span> or the proposal might not make it into the language<span class="token punctuation">.</span>

If you’d rather play it safe<span class="token punctuation">,</span> you have a few options<span class="token operator">:</span>

<span class="token number">1</span><span class="token punctuation">)</span> Bind methods <span class="token keyword">in</span> the constructor<span class="token punctuation">.</span>即用第一种方法
<span class="token number">2</span><span class="token punctuation">)</span> Use arrow functions<span class="token punctuation">,</span> e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">.</span> 这种也不错
<span class="token number">3</span><span class="token punctuation">)</span> Keep using createReactClass<span class="token punctuation">.</span> 这个就是说用原生reactjs without <span class="token constant">ES6</span>
</code></pre></div><h4 id="export"><a href="#export" class="header-anchor">#</a> export</h4> <p>基本</p> <div class="language- extra-class"><pre class="language-text"><code>named export vs default export:
https://developer.mozilla.org/en-US/docs/web/javascript/reference/statements/export

普通模式：
export defalt new BirdStore();
导出class? export defalt &lt;classname&gt;;
单例模式
const store = new BirdStore();
export default store;

import store from '../xxx/store'
class TestStore {
  imported_store = store
  mystore = new MyStore()
}
export default new TestStore()


</code></pre></div><p>逻辑代码中调用UI,如弹窗</p> <div class="language- extra-class"><pre class="language-text"><code>## 
import Modal from '/mymodal' //默认是寻找到/mymodal/index.js

## /mymodal/index.js
import Modal from './Modal'
import { close, open, information, withInfo, withSuccess, withError, withWarn, withConfirm } from './fake'
import './modal.less'

Modal.open = open
Modal.close = close
Modal.info = function infoFn (props) {
  return information(withInfo(props))
}
Modal.error = function errorFn (props) {
  return information(withError(props))
}
export default Modal

## fake.js
function createDiv (props) {
  const { id } = props
  let div = getDiv(props.id)
  if (div) {
    return div
  }
  div = document.createElement('div')
  document.body.appendChild(div)
  // div.className = 'modal'

  containers[id] = { div }

  return div
}
export const open = (props, isPortal = false) =&gt; {
  const { content, onClose } = props
  const div = createDiv(props)

  const scrollWidth = window.innerWidth - document.body.clientWidth
  const doc = document.body.parentNode
  doc.style.overflow = 'hidden'
  doc.style.paddingRight = `${scrollWidth}px`

  const handleClose = () =&gt; {
    if (onClose) {
      onClose()
    }
    close(props)
  }

  const modal = (
    &lt;Panel
      visible={true}
      {...props}
      onClose={handleClose}&gt;
      {content}
    &lt;/Panel&gt;
  )
  ReactDOM.render(modal, div)
  return null
}

export const information = (props, isPortal = false) =&gt; {
  const { content, onClose } = props
  const div = createDiv(props)

  const scrollWidth = window.innerWidth - document.body.clientWidth
  const doc = document.body.parentNode
  doc.style.overflow = 'hidden'
  doc.style.paddingRight = `${scrollWidth}px`

  const handleClose = () =&gt; {
    if (onClose) {
      onClose()
    }
    close(props)
  }

  const modal = (
    &lt;div&gt;
      &lt;div className=&quot;ant-modal-mask&quot;/&gt;
      &lt;div className={'ant-modal-wrap '} role={'dialog'}&gt;
        &lt;div role=&quot;document&quot; className=&quot;ant-modal ant-modal-confirm ant-modal-confirm-confirm&quot;
          style={{ display: 'block', width: 416 }}&gt;
          &lt;div className={'ant-modal-content'}&gt;
            &lt;div className=&quot;ant-modal-body&quot;&gt;
              &lt;div className=&quot;ant-modal-confirm-body-wrapper&quot;&gt;
                &lt;div className=&quot;ant-modal-confirm-body&quot;&gt;
                  {props.icon}
                  &lt;span className=&quot;ant-modal-confirm-title&quot;&gt;{props.title || ''}&lt;/span&gt;
                  &lt;div className=&quot;ant-modal-confirm-content&quot;&gt;{props.content || ''}&lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;ant-modal-confirm-btns&quot;&gt;
                  {props.okCancel &amp;&amp; &lt;button type=&quot;button&quot; className=&quot;ant-btn&quot; onClick={() =&gt; {
                    handleClose()
                    props.onCancel &amp;&amp; props.onCancel()
                  }}&gt;&lt;span&gt;{props.cancelText || 'cancel'}&lt;/span&gt;&lt;/button&gt;}
                  &lt;button type=&quot;button&quot; className=&quot;ant-btn ant-btn-primary&quot; onClick={() =&gt; {
                    handleClose()
                    props.onOk &amp;&amp; props.onOk()
                  }}&gt;&lt;span&gt;{props.okText || 'confirm'}&lt;/span&gt;&lt;/button&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  )
  ReactDOM.render(modal, div)
  return null
}

</code></pre></div><h4 id="其他常用语法"><a href="#其他常用语法" class="header-anchor">#</a> 其他常用语法</h4> <div class="language- extra-class"><pre class="language-text"><code>we used the ES6 computed property name syntax to update the state key
https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Object_initializer#Computed_property_names
this.setState({
  [name]: value
});
equivalent to this ES5 code:
var partialState = {};
partialState[name] = value;
this.setState(partialState);

import时候 {}
const { BirdStore } = this.props;
==
const BirdStore = this.props.BirdStore;

</code></pre></div><h3 id="jsx"><a href="#jsx" class="header-anchor">#</a> JSX</h3> <p>为什么用JSX?</p> <ol><li><p>React embraces the fact that rendering logic is inherently coupled with other UI logic: how events are handled, how the state changes over time, and how the data is prepared for display.</p></li> <li><p>Prevents Injection Attacks</p></li></ol> <p>By default, React DOM escape any values embedded in JSX before rendering them. Thus it ensures that you can never inject anything that’s not explicitly written in your application. Everything is converted to a string before being rendered. This helps prevent <a href="https://en.wikipedia.org/wiki/Cross-site_scripting" target="_blank" rel="noopener noreferrer">XSS (cross-site-scripting)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> attacks.</p> <div class="language- extra-class"><pre class="language-text"><code>const title = response.potentiallyMaliciousInput;
// This is safe:
const element = &lt;h1&gt;{title}&lt;/h1&gt;;
</code></pre></div><ul><li><p>Each JSX element is just syntactic sugar for calling <code>React.createElement(component, props, ...children)</code>. So, anything you can do with JSX can also be done with just plain JavaScript, If you’re curious to see more examples of how JSX is converted to JavaScript, you can try out <a href="https://babeljs.io/repl/#?presets=react&amp;code_lz=GYVwdgxgLglg9mABACwKYBt1wBQEpEDeAUIogE6pQhlIA8AJjAG4B8AEhlogO5xnr0AhLQD0jVgG4iAXyJA" target="_blank" rel="noopener noreferrer">the online Babel compiler<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Babel compiles JSX down to <code>React.createElement()</code> calls.</p></li> <li><p>React DOM uses camelCase property naming convention instead of HTML attribute names. For example, <code>tabindex</code> becomes <code>tabIndex</code> in JSX. The attribute <code>class</code> is also written as <code>className</code> since <code>class</code> is a reserved word in JavaScript</p></li></ul> <p><a href="https://reactjs.org/docs/jsx-in-depth.html" target="_blank" rel="noopener noreferrer">in-depth tutorial on JSX<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language- extra-class"><pre class="language-text"><code>-------------------------------------------------------------
--- react使用首字母大小写的惯例区分本地组件和html标签
-------------------------------------------------------------
&lt;Person/&gt;(这是react组件)
&lt;p&gt;这是html标签&lt;/p&gt;

-------------------------------------------------------------
--- jsx transform
-------------------------------------------------------------
React JSX从类似于xml的语法转换成javascript。xml的元素，属性和子节点转换成参数传入React.createElement方法
//使用JSX
React.render(
    &lt;label className=&quot;xxx&quot; htmlFor=&quot;input&quot;&gt;content&lt;/label&gt;,
    document.getElementById('example')
);

//不使用JSX
React.render(
    React.createElement('label', {className: 'xxx', htmlFor: 'input'}, 'content'),
    document.getElementById('example')
);

var Nav, Profile;
// 输入(JSX):
var app = &lt;Nav color=&quot;blue&quot;&gt;&lt;Profile&gt;click&lt;/Profile&gt;&lt;/Nav&gt;;
// 转换后(JS):
var app = React.createElement(
  Nav,
  {color:&quot;blue&quot;},
  React.createElement(Profile, null, &quot;click&quot;)
);
-------------------------------------------------------------
--- JavaScript 表达式
-------------------------------------------------------------
使用JavaScript表达式为一个属性值，将表达式写在一对花括号（{}）中代替双引号（“”）。

// Input (JSX):
var person = &lt;Person name={window.isLoggedIn ? window.name : ''} /&gt;;
// Output (JS):
var person = React.createElement(
  Person,
  {name: window.isLoggedIn ? window.name : ''}
);

-------------------------------------------------------------
--- 布尔型属性
-------------------------------------------------------------
// These two are equivalent in JSX for disabling a button
&lt;input type=&quot;button&quot; disabled /&gt;;
&lt;input type=&quot;button&quot; disabled={true} /&gt;;

// And these two are equivalent in JSX for not disabling a button
&lt;input type=&quot;button&quot; /&gt;;
&lt;input type=&quot;button&quot; disabled={false} /&gt;;

-------------------------------------------------------------
--- 子表达式
-------------------------------------------------------------	
// Input (JSX):
var content = &lt;Container&gt;{window.isLoggedIn ? &lt;Nav /&gt; : &lt;Login /&gt;}&lt;/Container&gt;;
// Output (JS):
var content = React.createElement(
  Container,
  null,
  window.isLoggedIn ? React.createElement(Nav) : React.createElement(Login)
);

-------------------------------------------------------------
--- 注释
-------------------------------------------------------------
在JSX添加注释是很容易的；他们只是JS表达式。当你在一个标签区域内，你只需要小心地把{ }放在注释的周围

var content = (
  &lt;Nav&gt;
    {/* 我是注释, 使用{} 包围着*/}
    &lt;Person
      /* 我是
         多行
         注释*/
      name={window.isLoggedIn ? window.name : ''} //结尾处注释
    /&gt;
  &lt;/Nav&gt;
);

-------------------------------------------------------------
--- JSX解构赋值
-------------------------------------------------------------
如果提前就知道了组件的属性的话，写起来很容易。例如component组件有两个动态的属性foo和bar
var component = &lt;Component foo={x} bar={y} /&gt;;
而实际上，有些属性可能是后续添加的，我们没办法一开始就确定，我们可能会写出下面不好的代码：
var component = &lt;Component /&gt;;
component.props.foo = x; // bad
component.props.bar = y; // also bad
这样写是错误的，因为我们手动直接添加的属性React后续没办法检查到属性类型错误，也就是说，当我们手动添加的属性发生类型错误时，在控制台是看不到错误信息的。
在React的设定中，初始化完props后，props是不可变的。改变props会引起无法想象的后果。
为了解决这个问题，React引入了解构属性，其实就是es6的语法实现具体看
https://es6.ruanyifeng.com/#docs/destructuring

var props = {};
props.foo = x;
props.bar = y;
var component = &lt;Component {...props} /&gt;;

你可以使用结构赋值方式和普通的方式混合使用，但如果碰到同名的属性的时候后者覆盖前者的属性如下
 var props = { foo: 'default' };
 var component = &lt;Component {...props} foo={'override'} /&gt;;
 console.log(component.props.foo); // 'override'
 
-------------------------------------------------------------
--- JSX踩坑
-------------------------------------------------------------
1. HTML 实体需要采用
使用unicode编码；
String.fromCharCode(183)；
使用属性：dangerouslySetInnerHTML如：&lt;div dangerouslySetInnerHTML={{__html: 'First &amp;middot; Second'}} /&gt;
否则：
｛/*
正常显示
First · Second
*/｝
&lt;div&gt;First &amp;middot; Second&lt;/div&gt;
｛/*
显示异常
First &amp;middot; Second
*/｝
&lt;div&gt;{'First &amp;middot; Second'}&lt;/div&gt;

2.自定义HTML属性
如果在编写React过程中使用了自定义属性，React不会渲染的
React.createClass({
	render: function(){
		return (
		&lt;input type=&quot;text&quot; placeholder=&quot;test&quot; dd=&quot;test&quot;/&gt;
		)
	}
})
要想使用请在属性前面添加data-

3.style属性
在React中写行内样式时，需要写在双大括号中（{{}}），不能采用引号的书写方式

</code></pre></div><p>style举例：</p> <div class="language- extra-class"><pre class="language-text"><code>render () {
    const { appInfoStore } = this.props
    return (
      &lt;Modal
        visible={appInfoStore.notificationBell.isShowDetailsModal}
        title=&quot;Notification List&quot;
        cancelButtonText={CommonItem.getLocalLang('close')}
        onClose={this.onCancelClick}
        onCancelClick={this.onCancelClick}
        width={ 800 }&gt;
        &lt;div&gt;
          &lt;Table
            fixed=&quot;both&quot;
            isModalTable={true}
            onGridItemClick={this.onGridItemClick}
            columns={toJS(appInfoStore.notificationTableColumns)}
            data={toJS(appInfoStore.notificationBell.data)}
            style={{ marginLeft: 18, marginBottom: 15 }}/&gt;
        &lt;/div&gt;
      &lt;/Modal&gt;
    )
  }
  
## width={ 800 }
import React, { createRef, PureComponent } from 'react'
import { Scrollbars } from 'react-custom-scrollbars'

import './modal.less'
import { CloseOutlined, LoadingOutlined } from '@ant-design/icons'

class Panel extends PureComponent {
  static defaultProps = {
    visible: false,
    cancelLoadingVisible: false,
    confirmLoadingVisible: false,
    hideCloseButton: false,
    title: '',
    width: 'auto',
    cancelButtonText: 'Cancel',
    confirmButtonText: 'Confirm',
    footerButtons: null,
    onClose: () =&gt; {},
    onCancelClick: null,
    onConfirmClick: null
  }

  render () {
    debugger
    const {
      visible, title, width,
      cancelButtonText, confirmButtonText,
      onClose, onCancelClick, onConfirmClick, hideCloseButton,
      footerButtons, children, cancelLoadingVisible, confirmLoadingVisible
    } = this.props
    if (!visible) {
      return null
    }
    return (
      &lt;div className=&quot;modal&quot;&gt;
        &lt;div
          style={{ width }}	等同于 style={{ width: width }} 同名可以被简写
          className=&quot;modal-inner&quot;&gt;
		...............
        &lt;/div&gt;
      &lt;/div&gt;
    )
  }
}


## style={{ marginLeft: 18, marginBottom: 15 }}
class Table extends PureComponent {

  render () {
    const {
      height,
      columns,
      value,
      children,
      data,
      style,
      fixed,
      width,
      loadingVisible,
      loadingContent,
      verticalAlign,
      isModalTable,
      ...others
    } = this.props

    const { scrollLeft, scrollRight } = this.state
    const className = classnames(
      'so-table',
      'so-table-bordered',
      'so-table-fixed',
      scrollLeft &gt; 0 &amp;&amp; 'so-table-left-float',
      scrollRight &lt; 0 &amp;&amp; 'so-table-right-float',
      `so-table-vertical-${verticalAlign}`,
      this.props.className
    )

    const props = {
      ...others,
      children,
      fixed,
      loadingVisible,
      rowsInView: this.getRowsInView(),
      height,
      isModalTable,
      width,
      data,
      columns
    }
    const newStyle = Object.assign({}, style)
    debugger // newStyle: {marginLeft: 18, marginBottom: 15}
    return (
      &lt;div
        className={className}
        ref={this.bindTable}
        style={newStyle}&gt;
        &lt;SeperateTable {...props} height={newStyle.height}/&gt;
        &lt;Loading content={loadingContent || 'Loading...'} visible={loadingVisible}/&gt;
      &lt;/div&gt;
    )
  }
}
</code></pre></div><h3 id="code-bundling-splitting"><a href="#code-bundling-splitting" class="header-anchor">#</a> Code Bundling&amp;Splitting</h3> <p>Effective Code Splitting in React: A Practical Guide: https://hackernoon.com/effective-code-splitting-in-react-a-practical-guide-2195359d5d49</p> <p><strong>Bundling</strong></p> <p>Most React apps will have their files “bundled” using tools like <a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer">Webpack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://rollupjs.org/" target="_blank" rel="noopener noreferrer">Rollup<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or <a href="http://browserify.org/" target="_blank" rel="noopener noreferrer">Browserify<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Bundling is the process of following imported files and merging them into a single file: a “bundle”. This bundle can then be included on a webpage to load an entire app at once.</p> <p>If you’re using <a href="https://create-react-app.dev/" target="_blank" rel="noopener noreferrer">Create React App<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://nextjs.org/" target="_blank" rel="noopener noreferrer">Next.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://www.gatsbyjs.org/" target="_blank" rel="noopener noreferrer">Gatsby<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, or a similar tool, you will have a Webpack setup out of the box to bundle your app.</p> <p>If you aren’t, you’ll need to setup bundling yourself. For example, see the <a href="https://webpack.js.org/guides/installation/" target="_blank" rel="noopener noreferrer">Installation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://webpack.js.org/guides/getting-started/" target="_blank" rel="noopener noreferrer">Getting Started<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> guides on the Webpack docs.</p> <div class="language- extra-class"><pre class="language-text"><code>// math.js
export function add(a, b) {
  return a + b;
}

// app.js
import { add } from './math.js';

console.log(add(16, 26)); // 42

//bundle result:
function add(a, b) {
  return a + b;
}
console.log(add(16, 26)); // 42

</code></pre></div><p><strong>Splitting</strong></p> <p>Bundling is great, but as your app grows, your bundle will grow too. Especially if you are including large third-party libraries.</p> <p>To avoid winding up with a large bundle, it’s good to get ahead of the problem and start “splitting” your bundle. Code-Splitting is a feature supported by bundlers like <a href="https://webpack.js.org/guides/code-splitting/" target="_blank" rel="noopener noreferrer">Webpack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://rollupjs.org/guide/en/#code-splitting" target="_blank" rel="noopener noreferrer">Rollup<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and Browserify (via <a href="https://github.com/browserify/factor-bundle" target="_blank" rel="noopener noreferrer">factor-bundle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) which can create multiple bundles that can be dynamically loaded at runtime.</p> <p>Code-splitting your app can help you “lazy-load” just the things that are currently needed by the user, which can dramatically improve the performance of your app.</p> <p>If you’re using Create React App, this is already configured for you and you can <a href="https://facebook.github.io/create-react-app/docs/code-splitting" target="_blank" rel="noopener noreferrer">start using it<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> immediately. It’s also supported out of the box in <a href="https://nextjs.org/docs/advanced-features/dynamic-import" target="_blank" rel="noopener noreferrer">Next.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>If you’re setting up Webpack yourself, you’ll probably want to read Webpack’s <a href="https://webpack.js.org/guides/code-splitting/" target="_blank" rel="noopener noreferrer">guide on code splitting<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Your Webpack config should look vaguely <a href="https://gist.github.com/gaearon/ca6e803f5c604d37468b0091d9959269" target="_blank" rel="noopener noreferrer">like this<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>When using <a href="https://babeljs.io/" target="_blank" rel="noopener noreferrer">Babel<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, you’ll need to make sure that Babel can parse the dynamic import syntax but is not transforming it. For that you will need <a href="https://yarnpkg.com/en/package/babel-plugin-syntax-dynamic-import" target="_blank" rel="noopener noreferrer">babel-plugin-syntax-dynamic-import<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language- extra-class"><pre class="language-text"><code>import(&quot;./math&quot;).then(math =&gt; {
  console.log(math.add(16, 26));
});
</code></pre></div><p><strong>Lazy Loadding</strong></p> <div class="language- extra-class"><pre class="language-text"><code>before:
import OtherComponent from './OtherComponent';

after:
const OtherComponent = React.lazy(() =&gt; import('./OtherComponent'));
This will automatically load the bundle containing the OtherComponent when this component is first rendered.

The lazy component should then be rendered inside a Suspense component, which allows us to show some fallback content (such as a loading indicator) while we’re waiting for the lazy component to load.

import React, { Suspense } from 'react';

const OtherComponent = React.lazy(() =&gt; import('./OtherComponent'));

function MyComponent() {
  return (
    &lt;div&gt;
      &lt;Suspense fallback={&lt;div&gt;Loading...&lt;/div&gt;}&gt;
        &lt;OtherComponent /&gt;
      &lt;/Suspense&gt;
    &lt;/div&gt;
  );
}

Deciding where in your app to introduce code splitting can be a bit tricky. You want to make sure you choose places that will split bundles evenly, but won’t disrupt the user experience.A good place to start is with routes. 

import React, { Suspense, lazy } from 'react';
import { BrowserRouter as Router, Route, Switch } from 'react-router-dom';

const Home = lazy(() =&gt; import('./routes/Home'));
const About = lazy(() =&gt; import('./routes/About'));

const App = () =&gt; (
  &lt;Router&gt;
    &lt;Suspense fallback={&lt;div&gt;Loading...&lt;/div&gt;}&gt;
      &lt;Switch&gt;
        &lt;Route exact path=&quot;/&quot; component={Home}/&gt;
        &lt;Route path=&quot;/about&quot; component={About}/&gt;
      &lt;/Switch&gt;
    &lt;/Suspense&gt;
  &lt;/Router&gt;
);

React.lazy currently only supports default exports. If the module you want to import uses named exports, you can create an intermediate module that reexports it as the default. This ensures that tree shaking keeps working and that you don’t pull in unused components.

// ManyComponents.js
export const MyComponent = /* ... */;
export const MyUnusedComponent = /* ... */;
// MyComponent.js
export { MyComponent as default } from &quot;./ManyComponents.js&quot;;
// MyApp.js
import React, { lazy } from 'react';
const MyComponent = lazy(() =&gt; import(&quot;./MyComponent.js&quot;));
</code></pre></div><h3 id="typescript"><a href="#typescript" class="header-anchor">#</a> TypeScript</h3> <p>从 React 迁移到 TypeScript：忍受了 15 年的 JavaScript 错误从此走远</p> <p>https://mp.weixin.qq.com/s/EvOkI-g3VCzzzuh0Cc4AkA</p> <h2 id="_3-troubleshooting"><a href="#_3-troubleshooting" class="header-anchor">#</a> 3. Troubleshooting</h2> <p><strong>?# Attempted import error: '' is not exported from</strong></p> <div class="language- extra-class"><pre class="language-text"><code>since it's a default export, and not a named export.
import { combineReducers } from '../../store/reducers';
should be
import combineReducers from '../../store/reducers';
</code></pre></div><p>https://stackoverflow.com/questions/53328408/receiving-attempted-import-error-in-react-app</p> <p><strong>?# 非单例模式（不同实例）引起的一次问题排查</strong></p> <div class="language-react extra-class"><pre class="language-text"><code>------------------------------------------
folderA/TableA:
------------------------------------------
import ViewDetail from '../folderB/ViewDetail'

@inject('aStore')
@observer
class TableA extends Component {
onXXClick = (controlData) =&gt; {
    const { aStore } = this.props
	aStore.bAnotherStore.displayDetailsModal(controlData)
}
render () {
    const { aStore } = this.props
    return [
		&lt;ViewDetail key=&quot;details&quot;/&gt;,
		xxxx
   ]
  }
}
------------------------------------------
folderA/AStore:
------------------------------------------
import { BAnotherStore } from '../folderB/BAnotherStore'
class AStore {
  bAnotherStore = new BAnotherStore()
}
export default new AStore()

------------------------------------------
folderB/TableB:
------------------------------------------
import ViewDetail from './ViewDetail'
@inject('bStore')
@observer
class TableB extends React.Component {
render () {
    const { bStore } = this.props
    return [
		&lt;ViewDetail key=&quot;details&quot;/&gt;,
		xxxx
   ]
  }
}
export default TableB

------------------------------------------
folderB/bStore:
------------------------------------------
import { BAnotherStore } from './bAnotherStore'
class BStore {
	bAnotherStore
	constructor () {
    	this.bAnotherStore = new BAnotherStore()
    }
}
export default new BStore()

------------------------------------------
folderB/bAnotherStore:
------------------------------------------
export class BAnotherStore {
	@observable isVisible = false
	@observable detailsData = {}
	@action.bound
	displayDetailsModal (controlData) {
    	this.isVisible = !this.isVisible
    	if (this.isVisible) {
      		this.detailsData = JSON.parse(controlData.content)
    }
  }
}
------------------------------------------
folderB/ViewDetail:
------------------------------------------
@inject('bStore')
@observer
class ViewDetail extends Component {
render () {
      const { bStore } = this.props
      if (!bStore.bAnotherStore.isVisible) {
        return null
      }
      const entity = bStore.bAnotherStore.detailsData
      return (
        &lt;Modal
          visible={true}
          &lt;DetailPart title={'Basic Information'} partArray={[
            { title: 'Name', value: entity.name },
            { title: 'Status', value: entity.status }
          ]}/&gt;
        &lt;/Modal&gt;
      )
    }
}

export default Form.create({ name: 'details' })(ViewDetail)


index.js:
import aStore from '../folderA/aStore'
import bStore from '../folderB/bStore'
ReactDOM.render(
  &lt;Provider
  	aStore={aStore}
    bStore={bStore}
        &lt;App/&gt;
  &lt;/Provider&gt;,
  document.getElementById('root')
)

App.jsx:
import TableA from '../folderA/TableA'
import TableB from '../folderB/TableB'
class App extends Component {
    render () {
    	&lt;TableA/&gt;
		&lt;TableB/&gt;
    }
}

      
问题就是：
TableA引用的页面是folderB/ViewDetail，folderB/ViewDetail所inject的bStore实例是index.js传入的bStore，index.js的bStore是通过import folderB/bStore而来的一个单例，
但是 TableA 调用的aStore.bAnotherStore并不是前面的实例bStore的成员变量，而是自己在构造aStore的时候自己new的！
所以换言之，ViewDetail页面渲染用的实例 和 TableA更改状态的实例是两回事！
更改方法很简单：
folderA/AStore:
import { BAnotherStore } from '../folderB/BAnotherStore' //注意这里加大括号是因为BAnotherStore是name export的class
class AStore {
  bAnotherStore = new BAnotherStore()
}
=&gt;
import bStore from '../folderB/bStore' //注意这里不能加大括号，因为是Default export的实例
class AStore {
  bStore = bStore
}
以及：           
folderA/TableA:
onXXClick = (controlData) =&gt; {
    const { aStore } = this.props
	aStore.bAnotherStore.displayDetailsModal(controlData)
}
=&gt;
onXXClick = (controlData) =&gt; {
    const { aStore } = this.props
	aStore.bStore.bAnotherStore.displayDetailsModal(controlData)
}              
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.130e9873.js" defer></script><script src="/docs/assets/js/2.bddb4f68.js" defer></script><script src="/docs/assets/js/180.d6990530.js" defer></script>
  </body>
</html>

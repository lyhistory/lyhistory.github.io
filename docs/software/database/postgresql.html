<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>计算机基础教程</title>
    <meta name="description" content="软件开发教程，白帽黑客入门教程，区块链入门教程，物联网，大数据">
    
    
    <link rel="preload" href="/docs/assets/css/0.styles.89d6372f.css" as="style"><link rel="preload" href="/docs/assets/js/app.b8b16357.js" as="script"><link rel="preload" href="/docs/assets/js/2.dc5756d7.js" as="script"><link rel="preload" href="/docs/assets/js/91.901e0c05.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.53c6c83c.js"><link rel="prefetch" href="/docs/assets/js/100.14fb00f6.js"><link rel="prefetch" href="/docs/assets/js/101.e15f6015.js"><link rel="prefetch" href="/docs/assets/js/102.33a7bbcb.js"><link rel="prefetch" href="/docs/assets/js/103.c855f5ea.js"><link rel="prefetch" href="/docs/assets/js/104.9d976283.js"><link rel="prefetch" href="/docs/assets/js/105.e6b5d007.js"><link rel="prefetch" href="/docs/assets/js/106.32e9e2cf.js"><link rel="prefetch" href="/docs/assets/js/107.a29b249e.js"><link rel="prefetch" href="/docs/assets/js/108.8af882c8.js"><link rel="prefetch" href="/docs/assets/js/109.c768228d.js"><link rel="prefetch" href="/docs/assets/js/11.106f60b3.js"><link rel="prefetch" href="/docs/assets/js/110.808ccb4f.js"><link rel="prefetch" href="/docs/assets/js/111.99bffc7d.js"><link rel="prefetch" href="/docs/assets/js/112.cae4737e.js"><link rel="prefetch" href="/docs/assets/js/113.6bea0c26.js"><link rel="prefetch" href="/docs/assets/js/114.5f9cd659.js"><link rel="prefetch" href="/docs/assets/js/115.c1d0b506.js"><link rel="prefetch" href="/docs/assets/js/116.42217eb4.js"><link rel="prefetch" href="/docs/assets/js/117.0ef21ad8.js"><link rel="prefetch" href="/docs/assets/js/118.85fe7dff.js"><link rel="prefetch" href="/docs/assets/js/119.08d24903.js"><link rel="prefetch" href="/docs/assets/js/12.1a6d6a33.js"><link rel="prefetch" href="/docs/assets/js/120.c3a04038.js"><link rel="prefetch" href="/docs/assets/js/121.571b1863.js"><link rel="prefetch" href="/docs/assets/js/122.3fa09fff.js"><link rel="prefetch" href="/docs/assets/js/123.51c81f2a.js"><link rel="prefetch" href="/docs/assets/js/124.0ba923b0.js"><link rel="prefetch" href="/docs/assets/js/125.01af1f19.js"><link rel="prefetch" href="/docs/assets/js/126.5ae6446e.js"><link rel="prefetch" href="/docs/assets/js/127.428245bd.js"><link rel="prefetch" href="/docs/assets/js/128.2c9f36f3.js"><link rel="prefetch" href="/docs/assets/js/129.1be8fdc9.js"><link rel="prefetch" href="/docs/assets/js/13.c9ff4195.js"><link rel="prefetch" href="/docs/assets/js/130.502df750.js"><link rel="prefetch" href="/docs/assets/js/131.1ac151d5.js"><link rel="prefetch" href="/docs/assets/js/132.e6b1fab1.js"><link rel="prefetch" href="/docs/assets/js/133.b6227309.js"><link rel="prefetch" href="/docs/assets/js/134.3bb21878.js"><link rel="prefetch" href="/docs/assets/js/135.a1080c94.js"><link rel="prefetch" href="/docs/assets/js/136.bfdce872.js"><link rel="prefetch" href="/docs/assets/js/137.5442aaa1.js"><link rel="prefetch" href="/docs/assets/js/138.e971bf2b.js"><link rel="prefetch" href="/docs/assets/js/139.b477ed55.js"><link rel="prefetch" href="/docs/assets/js/14.5018b2fb.js"><link rel="prefetch" href="/docs/assets/js/140.72c258dd.js"><link rel="prefetch" href="/docs/assets/js/141.3f8d5cea.js"><link rel="prefetch" href="/docs/assets/js/142.6e7aa426.js"><link rel="prefetch" href="/docs/assets/js/143.05b06d50.js"><link rel="prefetch" href="/docs/assets/js/144.368e9496.js"><link rel="prefetch" href="/docs/assets/js/145.0996e522.js"><link rel="prefetch" href="/docs/assets/js/146.a2ff4f16.js"><link rel="prefetch" href="/docs/assets/js/147.e7e64166.js"><link rel="prefetch" href="/docs/assets/js/148.8b652bb2.js"><link rel="prefetch" href="/docs/assets/js/149.d2603a85.js"><link rel="prefetch" href="/docs/assets/js/15.b4178977.js"><link rel="prefetch" href="/docs/assets/js/150.1a6beedc.js"><link rel="prefetch" href="/docs/assets/js/151.75a6fa5f.js"><link rel="prefetch" href="/docs/assets/js/152.6a002fb9.js"><link rel="prefetch" href="/docs/assets/js/153.e941cee5.js"><link rel="prefetch" href="/docs/assets/js/154.2c5fbce8.js"><link rel="prefetch" href="/docs/assets/js/155.7a299f87.js"><link rel="prefetch" href="/docs/assets/js/156.31e2348f.js"><link rel="prefetch" href="/docs/assets/js/157.d31ec08f.js"><link rel="prefetch" href="/docs/assets/js/158.9833d6a3.js"><link rel="prefetch" href="/docs/assets/js/159.437c346f.js"><link rel="prefetch" href="/docs/assets/js/16.3a637cc0.js"><link rel="prefetch" href="/docs/assets/js/160.59a7de32.js"><link rel="prefetch" href="/docs/assets/js/161.0e18c30c.js"><link rel="prefetch" href="/docs/assets/js/162.860bb798.js"><link rel="prefetch" href="/docs/assets/js/163.4faa096f.js"><link rel="prefetch" href="/docs/assets/js/164.90b974b7.js"><link rel="prefetch" href="/docs/assets/js/165.7884f174.js"><link rel="prefetch" href="/docs/assets/js/166.15ef3c67.js"><link rel="prefetch" href="/docs/assets/js/167.406167f5.js"><link rel="prefetch" href="/docs/assets/js/168.9ff29ddb.js"><link rel="prefetch" href="/docs/assets/js/169.85735700.js"><link rel="prefetch" href="/docs/assets/js/17.f9e0ec48.js"><link rel="prefetch" href="/docs/assets/js/18.00a65683.js"><link rel="prefetch" href="/docs/assets/js/19.4e8e00ba.js"><link rel="prefetch" href="/docs/assets/js/20.d6b95804.js"><link rel="prefetch" href="/docs/assets/js/21.e7175170.js"><link rel="prefetch" href="/docs/assets/js/22.02f1960c.js"><link rel="prefetch" href="/docs/assets/js/23.f558d59b.js"><link rel="prefetch" href="/docs/assets/js/24.d384c27d.js"><link rel="prefetch" href="/docs/assets/js/25.a89c8175.js"><link rel="prefetch" href="/docs/assets/js/26.589e200e.js"><link rel="prefetch" href="/docs/assets/js/27.cb2ace8b.js"><link rel="prefetch" href="/docs/assets/js/28.5ac04c88.js"><link rel="prefetch" href="/docs/assets/js/29.cc6284e4.js"><link rel="prefetch" href="/docs/assets/js/3.b8306f6a.js"><link rel="prefetch" href="/docs/assets/js/30.5a6c3e3d.js"><link rel="prefetch" href="/docs/assets/js/31.0d145fec.js"><link rel="prefetch" href="/docs/assets/js/32.8e2f34c7.js"><link rel="prefetch" href="/docs/assets/js/33.ce50732b.js"><link rel="prefetch" href="/docs/assets/js/34.9f99b468.js"><link rel="prefetch" href="/docs/assets/js/35.9ae180b9.js"><link rel="prefetch" href="/docs/assets/js/36.1221e541.js"><link rel="prefetch" href="/docs/assets/js/37.ff501b31.js"><link rel="prefetch" href="/docs/assets/js/38.134be101.js"><link rel="prefetch" href="/docs/assets/js/39.1b5f9932.js"><link rel="prefetch" href="/docs/assets/js/4.7d1e56e0.js"><link rel="prefetch" href="/docs/assets/js/40.379a5b34.js"><link rel="prefetch" href="/docs/assets/js/41.db8c435f.js"><link rel="prefetch" href="/docs/assets/js/42.cb177455.js"><link rel="prefetch" href="/docs/assets/js/43.b37e768a.js"><link rel="prefetch" href="/docs/assets/js/44.7bb2c77d.js"><link rel="prefetch" href="/docs/assets/js/45.0b2b22b3.js"><link rel="prefetch" href="/docs/assets/js/46.e30ac577.js"><link rel="prefetch" href="/docs/assets/js/47.f2be3de0.js"><link rel="prefetch" href="/docs/assets/js/48.f4d24492.js"><link rel="prefetch" href="/docs/assets/js/49.4207578f.js"><link rel="prefetch" href="/docs/assets/js/5.c2840be0.js"><link rel="prefetch" href="/docs/assets/js/50.2f2f44d0.js"><link rel="prefetch" href="/docs/assets/js/51.46b0b79e.js"><link rel="prefetch" href="/docs/assets/js/52.64130fcf.js"><link rel="prefetch" href="/docs/assets/js/53.549d9b23.js"><link rel="prefetch" href="/docs/assets/js/54.571dd0cd.js"><link rel="prefetch" href="/docs/assets/js/55.84b4b70d.js"><link rel="prefetch" href="/docs/assets/js/56.9be56906.js"><link rel="prefetch" href="/docs/assets/js/57.62da18dd.js"><link rel="prefetch" href="/docs/assets/js/58.ee67977d.js"><link rel="prefetch" href="/docs/assets/js/59.46448da6.js"><link rel="prefetch" href="/docs/assets/js/6.c1b91db9.js"><link rel="prefetch" href="/docs/assets/js/60.854d82c4.js"><link rel="prefetch" href="/docs/assets/js/61.93670891.js"><link rel="prefetch" href="/docs/assets/js/62.47479299.js"><link rel="prefetch" href="/docs/assets/js/63.ad4dc5d6.js"><link rel="prefetch" href="/docs/assets/js/64.3dc3c806.js"><link rel="prefetch" href="/docs/assets/js/65.5c7e2f23.js"><link rel="prefetch" href="/docs/assets/js/66.88f1b003.js"><link rel="prefetch" href="/docs/assets/js/67.a716de64.js"><link rel="prefetch" href="/docs/assets/js/68.675f7e26.js"><link rel="prefetch" href="/docs/assets/js/69.827184c7.js"><link rel="prefetch" href="/docs/assets/js/7.47d5938c.js"><link rel="prefetch" href="/docs/assets/js/70.02add794.js"><link rel="prefetch" href="/docs/assets/js/71.5b6f3745.js"><link rel="prefetch" href="/docs/assets/js/72.c921bd2c.js"><link rel="prefetch" href="/docs/assets/js/73.f5170225.js"><link rel="prefetch" href="/docs/assets/js/74.1f5ea12a.js"><link rel="prefetch" href="/docs/assets/js/75.ef556ebf.js"><link rel="prefetch" href="/docs/assets/js/76.982279e4.js"><link rel="prefetch" href="/docs/assets/js/77.24580168.js"><link rel="prefetch" href="/docs/assets/js/78.79eb034e.js"><link rel="prefetch" href="/docs/assets/js/79.4cffb393.js"><link rel="prefetch" href="/docs/assets/js/8.1727e8be.js"><link rel="prefetch" href="/docs/assets/js/80.8a87e623.js"><link rel="prefetch" href="/docs/assets/js/81.0621db93.js"><link rel="prefetch" href="/docs/assets/js/82.e155f3ae.js"><link rel="prefetch" href="/docs/assets/js/83.e5f0f8d0.js"><link rel="prefetch" href="/docs/assets/js/84.0f2985ac.js"><link rel="prefetch" href="/docs/assets/js/85.f26b219c.js"><link rel="prefetch" href="/docs/assets/js/86.0fbc4473.js"><link rel="prefetch" href="/docs/assets/js/87.a212be7b.js"><link rel="prefetch" href="/docs/assets/js/88.bea3796b.js"><link rel="prefetch" href="/docs/assets/js/89.9ca438ef.js"><link rel="prefetch" href="/docs/assets/js/9.679afbf4.js"><link rel="prefetch" href="/docs/assets/js/90.d2aac9a2.js"><link rel="prefetch" href="/docs/assets/js/92.f94b790c.js"><link rel="prefetch" href="/docs/assets/js/93.86aa862c.js"><link rel="prefetch" href="/docs/assets/js/94.278f86da.js"><link rel="prefetch" href="/docs/assets/js/95.007d40ba.js"><link rel="prefetch" href="/docs/assets/js/96.d544078d.js"><link rel="prefetch" href="/docs/assets/js/97.5e2fb7f0.js"><link rel="prefetch" href="/docs/assets/js/98.ac9bf5a6.js"><link rel="prefetch" href="/docs/assets/js/99.a3e920c8.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.89d6372f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">计算机基础教程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">机器指令</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link router-link-active">软件基础</a></div><div class="nav-item"><a href="/docs/coder2hacker/" class="nav-link">白帽黑客</a></div><div class="nav-item"><a href="/docs/blockchain/" class="nav-link">区块链</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">机器指令</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link router-link-active">软件基础</a></div><div class="nav-item"><a href="/docs/coder2hacker/" class="nav-link">白帽黑客</a></div><div class="nav-item"><a href="/docs/blockchain/" class="nav-link">区块链</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/software/database/postgresql.html#_1-setup" class="sidebar-link">1. Setup</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/software/database/postgresql.html#_1-1-baisc-setup" class="sidebar-link">1.1 Baisc Setup</a></li><li class="sidebar-sub-header"><a href="/docs/software/database/postgresql.html#_1-2-high-availability" class="sidebar-link">1.2 High Availability</a></li></ul></li><li><a href="/docs/software/database/postgresql.html#_2-gaps-between-oracle-plsql-and-postgresql" class="sidebar-link">2. Gaps between Oracle PLSQL and PostgreSQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/software/database/postgresql.html#_2-1-oracle-keep-dense-rank-change-in-postgresql" class="sidebar-link">2.1 oracle keep dense_rank CHANGE in postgresql</a></li><li class="sidebar-sub-header"><a href="/docs/software/database/postgresql.html#_2-2-oracle-is-record-is-table-change-in-postgresql" class="sidebar-link">2.2 oracle is record, is table CHANGE in postgresql</a></li></ul></li><li><a href="/docs/software/database/postgresql.html#基本概念" class="sidebar-link">基本概念</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/software/database/postgresql.html#_3-gramma" class="sidebar-link">3. Gramma</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/software/database/postgresql.html#_3-1-basic" class="sidebar-link">3.1 Basic</a></li><li class="sidebar-sub-header"><a href="/docs/software/database/postgresql.html#_3-2-crud" class="sidebar-link">3.2 CRUD</a></li><li class="sidebar-sub-header"><a href="/docs/software/database/postgresql.html#_3-3-functions-stored-procedure" class="sidebar-link">3.3 Functions &amp; Stored Procedure</a></li><li class="sidebar-sub-header"><a href="/docs/software/database/postgresql.html#_3-4-advanced" class="sidebar-link">3.4 Advanced</a></li></ul></li><li><a href="/docs/software/database/postgresql.html#_4-drivers" class="sidebar-link">4. Drivers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/software/database/postgresql.html#_4-1-net-npgsql" class="sidebar-link">4.1 .NET npgsql</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><a href="/docs/software">回目录</a>  《postgresql实用基础》</p> <h2 id="_1-setup"><a href="#_1-setup" class="header-anchor">#</a> 1. Setup</h2> <h3 id="_1-1-baisc-setup"><a href="#_1-1-baisc-setup" class="header-anchor">#</a> 1.1 Baisc Setup</h3> <h4 id="_1-1-1-install"><a href="#_1-1-1-install" class="header-anchor">#</a> 1.1.1 install</h4> <h4 id="_1-1-2-client连接"><a href="#_1-1-2-client连接" class="header-anchor">#</a> 1.1.2 client连接</h4> <p>直接psql连接是不行的，要切换成os root用户 sudo su</p> <p>然后执行  su - postgres</p> <p>进入bash，输入psql就进入到plsql命令窗口，执行\l就可以看到所有db</p> <div class="language- extra-class"><pre class="language-text"><code>为啥默认角色:postgres呢，执行：
\du
                                   List of roles
 Role name |                         Attributes                         | Member of
-----------+------------------------------------------------------------+-----------
 _gvm      |                                                            | {dba}
 dba       | Superuser, No inheritance, Cannot login                    | {}
 postgres  | Superuser, Create role, Create DB, Replication, Bypass RLS | {}

可以创建更多角色
sudo -u postgres createuser owning_user
sudo -u postgres createdb -O owning_user dbname
</code></pre></div><p>理解一下posgresql的用户概念</p> <p>the <code>postgres</code> PostgreSQL user account already exists and is configured to be accessible via <code>peer</code> authentication for unix sockets in <code>pg_hba.conf</code></p> <p>https://www.liquidweb.com/kb/what-is-the-default-password-for-postgresql/</p> <p>本机如果直接通过plsql连接，可以修改local用户(默认用户postgres)：</p> <p>https://www.hostinger.com/tutorials/how-to-install-postgresql-on-centos-7/</p> <div class="language- extra-class"><pre class="language-text"><code>psql -d template1 -c &quot;ALTER USER postgres WITH PASSWORD 'NewPassword';&quot;
</code></pre></div><p>https://stackoverflow.com/questions/18664074/getting-error-peer-authentication-failed-for-user-postgres-when-trying-to-ge</p> <p><strong>开启远程连接：</strong></p> <p>https://blog.csdn.net/zhangzeyuaaa/article/details/77941039</p> <p>step 1：开启监听：</p> <p>/var/lib/pgsql/12/data/postgresql.conf</p> <p><code>listen_addresses = '*' # what IP address(es) to listen on;</code></p> <p>step 2：修改访问规则</p> <p>md5方式：</p> <p>vim /var/lib/pgsql/12/data/pg_hba.conf</p> <p><code>host all all 0.0.0.0/0 md5</code></p> <hr> <p>https://www.tutorialspoint.com/postgresql/index.htm
https://serverfault.com/questions/110154/whats-the-default-superuser-username-password-for-postgres-after-a-new-install</p> <p>Postgresql
https://serverfault.com/questions/110154/whats-the-default-superuser-username-password-for-postgres-after-a-new-install</p> <p>Server based database
Replication</p> <p>su - postgres
psql</p> <p>Client
Offical: Pgadmin 4    https://www.pgadmin.org/download/
Pgadmin3 LTS by BigSQL (don’t support 11g)
DBeaver (not good)</p> <p>CLI
C# 连接 PostgreSQL --- Npgsql的安装和使用 https://blog.csdn.net/chencglt/article/details/77706226</p> <p>删除“重复”的function或stored procedure，比如：bpchar和varchar：
<img src="/docs/docs_image/software/postgresql/postgresql01.png" alt=""></p> <h3 id="_1-2-high-availability"><a href="#_1-2-high-availability" class="header-anchor">#</a> 1.2 High Availability</h3> <blockquote><p>Database servers can work together to allow a second server to take over quickly if the primary server fails (high availability), or to allow several computers to serve the same data (load balancing). Ideally, database servers could work together seamlessly. Web servers serving static web pages can be combined quite easily by merely load-balancing web requests to multiple machines. In fact, read-only database servers can be combined relatively easily too. Unfortunately, most database servers have a read/write mix of requests, and read/write servers are much harder to combine. This is because though read-only data needs to be placed on each server only once, a write to any server has to be propagated to all servers so that future read requests to those servers return consistent results.</p> <p>This synchronization problem is the fundamental difficulty for servers working together. Because there is no single solution that eliminates the impact of the sync problem for all use cases, there are multiple solutions. Each solution addresses this problem in a different way, and minimizes its impact for a specific workload.</p> <p>https://www.postgresql.org/docs/current/high-availability.html</p></blockquote> <h4 id="_1-2-1-replication不同方案："><a href="#_1-2-1-replication不同方案：" class="header-anchor">#</a> 1.2.1 Replication不同方案：</h4> <p>https://www.postgresql.org/docs/current/different-replication-solutions.html</p> <ul><li>Shared Disk Failover：</li></ul> <p>​	Shared hardware functionality is common in network storage devices.</p> <ul><li>File System (Block Device) Replication</li></ul> <p>A modified version of shared hardware functionality</p> <p>DRBD is a popular file system replication solution for Linux.</p> <ul><li>Write-Ahead Log Shipping</li></ul> <p>A standby server can be implemented using file-based log shipping (<a href="https://www.postgresql.org/docs/current/warm-standby.html" target="_blank" rel="noopener noreferrer">Section 26.2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>) or streaming replication (see <a href="https://www.postgresql.org/docs/current/warm-standby.html#STREAMING-REPLICATION" target="_blank" rel="noopener noreferrer">Section 26.2.5<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>), or a combination of both. For information on hot standby, see <a href="https://www.postgresql.org/docs/current/hot-standby.html" target="_blank" rel="noopener noreferrer">Section 26.5<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <ul><li>Logical Replication</li></ul> <p>Allows a database server to send a stream of data modifications to another server.  <a href="https://www.postgresql.org/docs/current/logical-replication.html" target="_blank" rel="noopener noreferrer">Chapter 30<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.(<a href="https://www.postgresql.org/docs/current/logicaldecoding.html" target="_blank" rel="noopener noreferrer">Chapter 48<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>Trigger-Based Master-Standby Replication</li></ul> <p>The standby can answer read-only queries while the master server is running. The standby server is ideal for data warehouse queries.Slony-I is an example of this type of replication, with per-table granularity, and support for multiple standby servers. Because it updates the standby server asynchronously (in batches), there is possible data loss during fail over.</p> <ul><li>Statement-Based Replication Middleware</li></ul> <p>ach server operates independently. Read-write queries must be sent to all servers, so that every server receives any changes. But read-only queries can be sent to just one server, allowing the read workload to be distributed among them.Care must also be taken that all transactions either commit or abort on all servers, perhaps using two-phase commit (<a href="https://www.postgresql.org/docs/current/sql-prepare-transaction.html" target="_blank" rel="noopener noreferrer">PREPARE TRANSACTION<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://www.postgresql.org/docs/current/sql-commit-prepared.html" target="_blank" rel="noopener noreferrer">COMMIT PREPARED<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>). Pgpool-II and Continuent Tungsten are examples of this type of replication.</p> <ul><li>Asynchronous Multimaster Replication</li></ul> <p>each server works independently, and periodically communicates with the other servers to identify conflicting transactions. The conflicts can be resolved by users or conflict resolution rules. Bucardo is an example of this type of replication.</p> <ul><li>Synchronous Multimaster Replication</li></ul> <p>PostgreSQL does not offer this type of replication</p> <ul><li><p>Commercial Solutions</p></li> <li><p>Data Partitioning</p></li></ul> <p>Data partitioning splits tables into data sets. Each set can be modified by only one server. For example, data can be partitioned by offices, e.g., London and Paris,</p> <ul><li>Multiple-Server Parallel Query Execution</li></ul> <p>Many of the above solutions allow multiple servers to handle multiple queries, but none allow a single query to use multiple servers to complete faster. This solution allows multiple servers to work concurrently on a single query. It is usually accomplished by splitting the data among servers and having each server execute its part of the query and return results to a central server where they are combined and returned to the user.</p> <h4 id="_1-2-2-具体方案1：warm-standby-or-log-shipping"><a href="#_1-2-2-具体方案1：warm-standby-or-log-shipping" class="header-anchor">#</a> 1.2.2 具体方案1：warm standby or log shipping</h4> <p>https://www.postgresql.org/docs/current/warm-standby.html</p> <p>The primary server operates in continuous archiving mode, while each standby server operates in continuous recovery mode, reading the WAL(write ahead logging) files from the primary(Directly moving WAL records from one database server to another is typically described as log shipping).</p> <h4 id="_1-2-3-具体方案2：hot-standby"><a href="#_1-2-3-具体方案2：hot-standby" class="header-anchor">#</a> 1.2.3 具体方案2：hot standby</h4> <p>https://www.postgresql.org/docs/current/hot-standby.html</p> <h4 id="_1-2-4-具体配置-温备-热备"><a href="#_1-2-4-具体配置-温备-热备" class="header-anchor">#</a> 1.2.4 具体配置 温备/热备</h4> <p>http://www.mamicode.com/info-detail-2466322.html</p> <h2 id="_2-gaps-between-oracle-plsql-and-postgresql"><a href="#_2-gaps-between-oracle-plsql-and-postgresql" class="header-anchor">#</a> 2. Gaps between Oracle PLSQL and PostgreSQL</h2> <p>https://github.com/digoal/blog/blob/master/201607/20160714_01.md</p> <p>https://wiki.postgresql.org/wiki/Oracle_to_Postgres_Conversion</p> <h3 id="_2-1-oracle-keep-dense-rank-change-in-postgresql"><a href="#_2-1-oracle-keep-dense-rank-change-in-postgresql" class="header-anchor">#</a> 2.1 oracle keep dense_rank CHANGE in postgresql</h3> <p>https://www.eversql.com/rank-vs-dense_rank-vs-row_number-in-postgresql/</p> <h3 id="_2-2-oracle-is-record-is-table-change-in-postgresql"><a href="#_2-2-oracle-is-record-is-table-change-in-postgresql" class="header-anchor">#</a> 2.2 oracle is record, is table CHANGE in postgresql</h3> <div class="language- extra-class"><pre class="language-text"><code>type rec_tk is record(
	tkno VARCHAR2(100),
	cg_zdj number(12, 0) := 0,
	cg_jsf number(12, 0) := 0
);
type tklist is table of rec_tk index by binary_integer;
</code></pre></div><p>修改为</p> <div class="language- extra-class"><pre class="language-text"><code>create type rec_tk as(
tkno VARCHAR(100),
cg_zdj numeric(12,0),
cg_jsf numeric(12,0)
);

#函数外执行创建类型的SQL
create type rec_cjr as(
cjrid varchar(30),
tk rec_tk[]
);
#函数内对table的使用修改为数组的使用，数组的下标从1开始
p_cjrs rec_cjr[];
</code></pre></div><h2 id="基本概念"><a href="#基本概念" class="header-anchor">#</a> 基本概念</h2> <p>psql命令</p> <p>https://www.postgresql.org/docs/10/app-psql.html</p> <div class="language- extra-class"><pre class="language-text"><code>\list
\c [DATABASE]
\d
\du
</code></pre></div><p>表空间</p> <p>postgres=# select * from pg_tablespace;
oid  |  spcname   | spcowner | spcacl | spcoptions
------+------------+----------+--------+------------
1663 | pg_default |       10 |        |
1664 | pg_global  |       10 |        |
(2 rows)</p> <p>https://www.tutorialspoint.com/postgresql/index.htm</p> <h2 id="_3-gramma"><a href="#_3-gramma" class="header-anchor">#</a> 3. Gramma</h2> <p>Assign null or empty ‘’ to numberic,  to_number(‘’) throw exception, use if else instead
Bigint default value is NULL not 0</p> <h3 id="_3-1-basic"><a href="#_3-1-basic" class="header-anchor">#</a> 3.1 Basic</h3> <p><strong>format</strong>:
https://www.postgresql.org/docs/7.4/static/functions-formatting.html
Oracle to_char(param)
postgresql 	to_char(parma1, ‘999’)
Oracle to_date(str, ‘yyyy-mm-dd hh24:mi:ss’)
Postgresql to_timestamp(str, ‘yyyy-mm-dd hh24:mi:ss’)
<strong>Datetime</strong>
https://www.postgresql.org/docs/9.1/static/functions-datetime.html
select extract (day from timestamp '2011-01-01 01:01:01' - timestamp '2001-01-01 01:01:01');
<strong>System</strong>
Oracle rownum / now(), sysdate	
postgresql: limit / now(), CURRENT_DATE
https://thebuild.com/blog/2018/08/07/does-anyone-really-know-what-time-it-is/
<strong>Concat</strong>
Character string connector (||) will fail in postgresql when there is ‘’ or null
concat()
Format	v_sql := format($$select * from table where col1=%s$$,’test’)
<strong>NULL and empty string</strong>
Assign null or empty ‘’ to numberic,  to_number(‘’) throw exception, use if else instead
Bigint default value is NULL not 0
Oracle NVL()
PGSQL coalesce()
<strong>Returning into</strong>
https://stackoverflow.com/questions/7191902/cannot-select-from-update-returning-clause-in-postgres
Oracle: SQL%ROWCOUNT
PG: GET DIAGNOSTICS integer_var = ROW_COUNT;</p> <p><strong>Tables and Views</strong>
The new query must generate the same columns that were generated by the existing view query (that is, the same column names in the same order and with the same data types) (...)</p> <h3 id="_3-2-crud"><a href="#_3-2-crud" class="header-anchor">#</a> 3.2 CRUD</h3> <div class="language- extra-class"><pre class="language-text"><code>Oracle bulk collect into
Pgsql Offset 
/*CREATE TYPE t_my AS (
    col1    numeric(16,6),
    col2    numeric,
    col3 bpchar(36)
    );*/
    
do $$DECLARE   
c cursor(os int) for select * from table limit 5 offset os;
r record;
v_name varchar(100)[];
recs t_my[];
BEGIN

    select array (select row(0, col, 'aaa') from table1 limit 5 offset 10 ) into recs;
    --v_games:= array_to_string(v_name,',');
    raise notice '%', recs[1].col1;
END
$$;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>Oracle merge into
Pgsql insert into
https://www.postgresql.org/docs/9.5/static/sql-insert.html
insert into table1 as t1(col1,col2, col3)
select col1, col2,col3
from ( select col1,col2, max(col3) as col3
 from table2
 where col3 &gt;= date'2012-01-01'
 and col3 &lt;date'2013-01-01'
 and col1 is not null
 and col2 is not null
 group by col1, col2 ) a
on conflict(col1, col2) do
update set col3 = excluded.col3,
   	 col2 = case when excluded.col2 is null then t1.col2 else excluded.col2 end

</code></pre></div><p>For update</p> <h3 id="_3-3-functions-stored-procedure"><a href="#_3-3-functions-stored-procedure" class="header-anchor">#</a> 3.3 Functions &amp; Stored Procedure</h3> <p>Use the right type, character to numeric
v_product := to_number(p_walletcode);</p> <p>Dont use FROM DUAL in procedrue</p> <p>Json</p> <p>Json array
https://stackoverflow.com/questions/24006291/postgresql-return-result-set-as-json-array/24006432</p> <p>PostgreSQL Error Codes:
array_length(array[1,2,3], 1) https://www.postgresql.org/docs/9.1/static/functions-array.html</p> <p><strong>Transaction</strong></p> <p>Cursor:
https://www.postgresql.org/docs/11/static/sql-call.html</p> <p>cannot commit while a subtransaction is active to_json</p> <p>https://hashrocket.com/blog/posts/faster-json-generation-with-postgresql
select row_to_json(t) from ( select id, text from words ) t</p> <p><strong>Functions</strong></p> <p>Perform function
https://stackoverflow.com/questions/18315633/calling-functions-with-exec-instead-of-select</p> <p><strong>Dynamic sql</strong>
https://stackoverflow.com/questions/12780275/dynamic-sql-query-in-postgres
execute immediate v_sql into v_count;</p> <p><strong>Cursor and fetch</strong>
https://www.postgresql.org/docs/9.3/static/sql-fetch.html
https://www.postgresql.org/docs/9.3/static/plpgsql-cursors.html
<img src="/docs/docs_image/software/postgresql/postgresql02.png" alt=""></p> <p><strong>Exception handling</strong>
https://www.postgresql.org/docs/8.2/static/plpgsql-statements.html
No data found
Select into strict</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT * INTO myrec FROM emp WHERE empname = myname;
IF NOT FOUND THEN
	RAISE EXCEPTION 'employee % not found', myname;
END IF;
</code></pre></div><p>If the STRICT option is specified, the query must return exactly one row or a run-time error will be reported, either NO_DATA_FOUND (no rows) or TOO_MANY_ROWS (more than one row). You can use an exception block if you wish to catch the error, for example:</p> <div class="language- extra-class"><pre class="language-text"><code>BEGIN
    SELECT * INTO STRICT myrec FROM emp WHERE empname = myname;
    EXCEPTION
        WHEN NO_DATA_FOUND THEN
            RAISE EXCEPTION 'employee % not found', myname;
        WHEN TOO_MANY_ROWS THEN
            RAISE EXCEPTION 'employee % not unique', myname;
END;
</code></pre></div><h3 id="_3-4-advanced"><a href="#_3-4-advanced" class="header-anchor">#</a> 3.4 Advanced</h3> <p><strong>Temp table</strong>
https://github.com/yallie/pg_global_temp_tables
<img src="/docs/docs_image/software/postgresql/postgresql03.png" alt=""></p> <p><strong>Sequence</strong>
https://www.postgresql.org/docs/8.2/static/functions-sequence.html</p> <p><strong>Customized Types</strong></p> <p>https://www.postgresql.org/docs/9.6/static/sql-createtype.html</p> <p>CREATE TYPE “XYZ” AS TABLE OF VARCHAR2(104) in postgresql https://stackoverflow.com/questions/24017175/create-type-xyz-as-table-of-varchar2104-in-postgresql</p> <p>Array[] as input
https://www.postgresql.org/docs/9.1/static/arrays.html
https://stackoverflow.com/questions/570393/postgres-integer-arrays-as-parameters</p> <p>https://stackoverflow.com/questions/3660787/how-to-list-custom-types-using-postgres-information-schema</p> <p><strong>Analysis</strong>
Window function
https://www.postgresql.org/docs/11/static/tutorial-window.html
https://gist.github.com/dialogbox/454380d6a68344556350bb8dbf1d64e5</p> <div class="language- extra-class"><pre class="language-text"><code>select  col1, col2, min(col3)  points
 from (select t1.col1, t1.col2,
        	first_value(col3) over w as col3  
        	from table1  t1
        	where t1.date &gt;= to_date('2018-01-01','yyyy-mm-dd')
        	and t1.date&lt;to_date('2018-07-01','yyyy-mm-dd')
        	window w AS(
   			 partition by col1,col2
   			 order by date desc
   		 )      	 
) t group by col1, col2
order by 1,2;
</code></pre></div><p><strong>Dynamic cursor</strong></p> <div class="language- extra-class"><pre class="language-text"><code>In sp pg_test:
	INOUT results refcursor)
	results := 'cur';
_query_:=’select * from table’;
perform pg_dyncursor('cur', _query_);
Then in plsql:
	Begin
		Call pg_test();
	End;
FETCH ALL IN cur;
close cur;

CREATE OR REPLACE FUNCTION pg_dyncursor(cursor_name text, query text)
	RETURNS void
	LANGUAGE plpgsql
AS $function$
DECLARE
BEGIN 
	EXECUTE 'DECLARE' || quote_ident(cursor_name) || ' CURSOR WITH HOLD FOR ' || query;
END 
$function$
</code></pre></div><p><strong>Scheduler</strong></p> <p>https://github.com/citusdata/pg_cron
https://crontab.guru/</p> <p>SELECT cron.schedule('0 2 * * *', $$TODO$$);
<img src="/docs/docs_image/software/postgresql/postgresql04.png" alt="">
https://www.pgadmin.org/docs/pgadmin3/1.22/pgagent.html</p> <p><strong>Message Flow / Protocol Flow</strong>
https://www.postgresql.org/docs/11/static/protocol-flow.html
Simple query:
Recommended practice is to code frontends in a state-machine style that will accept any message type at any time that it could make sense, rather than wiring in assumptions about the exact sequence of messages
Extended query:</p> <h2 id="_4-drivers"><a href="#_4-drivers" class="header-anchor">#</a> 4. Drivers</h2> <h3 id="_4-1-net-npgsql"><a href="#_4-1-net-npgsql" class="header-anchor">#</a> 4.1 .NET npgsql</h3> <p>https://github.com/npgsql</p> <p><strong>about composite array</strong>
Normal Array</p> <p>Array of Composite Type (custom type)
Feature added in 4.0
http://www.npgsql.org/doc/release-notes/4.0.html
https://github.com/npgsql/npgsql/blob/fc1e183103ac6246bcb5d7ceacbf509e18248583/test/Npgsql.Tests/Types/CompositeTests.cs
https://github.com/npgsql/npgsql/commit/fc1e183103ac6246bcb5d7ceacbf509e18248583</p> <p>Composite
https://github.com/npgsql/npgsql/issues/1678</p> <p>Why do I get “Invalid attempt to call HasRows when reader is closed” with an open connection? https://stackoverflow.com/questions/13968342/why-do-i-get-invalid-attempt-to-call-hasrows-when-reader-is-closed-with-an-ope</p> <p><strong>about inout parameters in stored procedure</strong>
这个问题是我测试当时最新版本的postgresql并且用了最新的npgsql driver的时候遇到一个问题，
就是存储过程的inout参数拿不到返回结果，经过研究发现奇怪的行为：
1.通过更改npgsql的代码采用simple query这种不安全的协议就可以拿到结果；
2.但是用ngpsql自身默认的extend协议就拿不到；
后来跟ngpsql作者沟通，npgsql作者又跟pgsql的团队沟通，证明确实是pgsql的一个bug，沟通见下面我提的ticket：
INOUT parameters from Procedure
https://github.com/npgsql/npgsql/issues/2078
https://github.com/npgsql/npgsql/issues/2006</p> <p>下面是我思考并研究的大致过程，
大致思路就是我发现用某些pgsql客户端调用这种存储过程有返回，有些没有返回，比如pgadmin有返回，dbeaver没有返回，
所以就抓包pgadmin，对比通过npgsql调用的包，最后发现pgadmin是用simple query方式调用，
所以最终修改了npgsql驱动让其支持simple query，因为本身simple query就不安全，所以我没有给出代码，
当然如果有人感兴趣可以联系我</p> <p>Test Scripts</p> <div class="language- extra-class"><pre class="language-text"><code>call pg_test('9cc4afef-aab7-4c35-bdcd-a9f3d0152eb4','');

begin
call pg_test2('9cc4afef-aab7-4c35-bdcd-a9f3d0152eb4','');
fetch all in cur;
commit;
end

-- PROCEDURE: sgc2.pg_test(character varying, text)

-- DROP PROCEDURE sgc2.pg_test(character varying, text);

CREATE OR REPLACE PROCEDUREpg_test(
	userid character varying,
	INOUT results text)
LANGUAGE 'plpgsql'

AS $BODY$
DECLARE

BEGIN
	
	select cast(999 as decimal) as result;

END;
$BODY$;
</code></pre></div><p>c# code:</p> <div class="language- extra-class"><pre class="language-text"><code>public string Execute2(string spName, IEnumerable&lt;NpgsqlParameter&gt; parameters)
       {
           string result;
           try
           {
               using (var conn = new NpgsqlConnection(_connectionString))
               {
                   conn.Open();
                   List&lt;NpgsqlParameter&gt; _params = parameters.ToList();
                   using (var cmd = conn.CreateCommand())
                   {
                       _params.Add(new NpgsqlParameter(&quot;&quot;, &quot;&quot;)); // Add empty string for refcursor param
                       cmd.CommandText = BuildQuery(spName, _params);
                       //cmd.Parameters.Add(new NpgsqlParameter() { ParameterName = &quot;results&quot;, Direction = ParameterDirection.InputOutput, Value = &quot;&quot; });
                       var res = cmd.ExecuteScalar();
                       result = res?.ToString();
                  
                   }
                   //string sql = &quot;select pg_test3('9cc4afef-aab7-4c35-bdcd-a9f3d0152eb4');&quot;;
                   //var cmd2 = new NpgsqlCommand(sql, conn);
                   //var result2 = cmd2.ExecuteScalar();
                   //var test = JsonConvert.DeserializeObject&lt;ResultModel&gt;(result);
                   conn.Close();
               }
           }
           catch (Exception e)
           {
               _log.Exception(e);
               throw;
           }
           return result;
       }

</code></pre></div><p>debug output:
Check from Immediate window
System.Text.Encoding.Default.GetString(Buffer)</p> <p><img src="/docs/docs_image/software/postgresql/postgresql05.png" alt=""></p> <p>然后用wireshark抓包请求call sp之后的返回
<img src="/docs/docs_image/software/postgresql/postgresql06.png" alt=""></p> <p>Failed idea: Compare with SP which has return value(refcursor)
Not what I want!
<img src="/docs/docs_image/software/postgresql/postgresql07.png" alt=""></p> <p>Idea: compare with pgadmin4, because pgadmin4 works!
<img src="/docs/docs_image/software/postgresql/postgresql08.png" alt=""></p> <p>改源码 simple query
<img src="/docs/docs_image/software/postgresql/postgresql09.png" alt="">
有返回，离成功近了</p> <p>但是npg抛错
<img src="/docs/docs_image/software/postgresql/postgresql10.png" alt=""></p> <p>Idea: Compare with simple function( and procedure) to observer the result
<img src="/docs/docs_image/software/postgresql/postgresql11.png" alt=""></p> <p>最终
<img src="/docs/docs_image/software/postgresql/postgresql12.png" alt=""></p> <p>Nuget
Update-Package –reinstall
https://docs.microsoft.com/en-us/nuget/consume-packages/reinstalling-and-updating-packages</p> <p>Simple query
https://www.postgresql.org/docs/10/static/protocol-flow.html#id-1.10.5.7.4
Message flow
https://www.postgresql.org/docs/10/static/protocol-flow.html</p> <p>Explain
https://www.postgresql.org/docs/9.5/static/sql-explain.html</p> <p>Refer
https://www.asciitable.com</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.b8b16357.js" defer></script><script src="/docs/assets/js/2.dc5756d7.js" defer></script><script src="/docs/assets/js/91.901e0c05.js" defer></script>
  </body>
</html>

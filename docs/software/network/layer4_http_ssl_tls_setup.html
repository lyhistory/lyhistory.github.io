<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>计算机基础教程</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script async="true" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9742852210287449" crossorigin="anonymous"></script>
    <script>
			(function() { // DON'T EDIT BELOW THIS LINE
			
			})();
		 </script>
    <meta name="description" content="软件开发教程，白帽黑客入门教程，区块链入门教程，物联网，大数据">
    
    <link rel="preload" href="/docs/assets/css/0.styles.229beafb.css" as="style"><link rel="preload" href="/docs/assets/js/app.1f079c1e.js" as="script"><link rel="preload" href="/docs/assets/js/2.19baf9f4.js" as="script"><link rel="preload" href="/docs/assets/js/201.f47516e0.js" as="script"><link rel="preload" href="/docs/assets/js/11.0d0890d4.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.544f9778.js"><link rel="prefetch" href="/docs/assets/js/100.03a3f4ed.js"><link rel="prefetch" href="/docs/assets/js/101.6ffb7d3f.js"><link rel="prefetch" href="/docs/assets/js/102.42e2e429.js"><link rel="prefetch" href="/docs/assets/js/103.3ce0e03f.js"><link rel="prefetch" href="/docs/assets/js/104.b75e7328.js"><link rel="prefetch" href="/docs/assets/js/105.6d116bc7.js"><link rel="prefetch" href="/docs/assets/js/106.ec54975c.js"><link rel="prefetch" href="/docs/assets/js/107.70114e94.js"><link rel="prefetch" href="/docs/assets/js/108.2f828758.js"><link rel="prefetch" href="/docs/assets/js/109.aaec9dc1.js"><link rel="prefetch" href="/docs/assets/js/110.17dbefc4.js"><link rel="prefetch" href="/docs/assets/js/111.13106b71.js"><link rel="prefetch" href="/docs/assets/js/112.4b3b80a3.js"><link rel="prefetch" href="/docs/assets/js/113.793bebfd.js"><link rel="prefetch" href="/docs/assets/js/114.a364a71b.js"><link rel="prefetch" href="/docs/assets/js/115.47d2fedc.js"><link rel="prefetch" href="/docs/assets/js/116.46644f82.js"><link rel="prefetch" href="/docs/assets/js/117.a33a6315.js"><link rel="prefetch" href="/docs/assets/js/118.d72ef26d.js"><link rel="prefetch" href="/docs/assets/js/119.e9894622.js"><link rel="prefetch" href="/docs/assets/js/12.eec9a325.js"><link rel="prefetch" href="/docs/assets/js/120.4263c647.js"><link rel="prefetch" href="/docs/assets/js/121.f52022d7.js"><link rel="prefetch" href="/docs/assets/js/122.e754836c.js"><link rel="prefetch" href="/docs/assets/js/123.35d1ac54.js"><link rel="prefetch" href="/docs/assets/js/124.49c4106a.js"><link rel="prefetch" href="/docs/assets/js/125.27d06beb.js"><link rel="prefetch" href="/docs/assets/js/126.d32ecc9f.js"><link rel="prefetch" href="/docs/assets/js/127.4640c340.js"><link rel="prefetch" href="/docs/assets/js/128.816ac85e.js"><link rel="prefetch" href="/docs/assets/js/129.1581491e.js"><link rel="prefetch" href="/docs/assets/js/13.82a6a883.js"><link rel="prefetch" href="/docs/assets/js/130.2478dc8a.js"><link rel="prefetch" href="/docs/assets/js/131.fe84caa1.js"><link rel="prefetch" href="/docs/assets/js/132.796f57eb.js"><link rel="prefetch" href="/docs/assets/js/133.3e0a5511.js"><link rel="prefetch" href="/docs/assets/js/134.29566217.js"><link rel="prefetch" href="/docs/assets/js/135.523218fd.js"><link rel="prefetch" href="/docs/assets/js/136.c548121c.js"><link rel="prefetch" href="/docs/assets/js/137.a44e7b81.js"><link rel="prefetch" href="/docs/assets/js/138.1d75c334.js"><link rel="prefetch" href="/docs/assets/js/139.111f0cc7.js"><link rel="prefetch" href="/docs/assets/js/14.617538a8.js"><link rel="prefetch" href="/docs/assets/js/140.531cad92.js"><link rel="prefetch" href="/docs/assets/js/141.140e9f39.js"><link rel="prefetch" href="/docs/assets/js/142.c148ec29.js"><link rel="prefetch" href="/docs/assets/js/143.636ad218.js"><link rel="prefetch" href="/docs/assets/js/144.d3fdea64.js"><link rel="prefetch" href="/docs/assets/js/145.2e81bbe9.js"><link rel="prefetch" href="/docs/assets/js/146.acb2a77f.js"><link rel="prefetch" href="/docs/assets/js/147.8718d591.js"><link rel="prefetch" href="/docs/assets/js/148.12da1cd0.js"><link rel="prefetch" href="/docs/assets/js/149.3e3903e1.js"><link rel="prefetch" href="/docs/assets/js/15.1cb9e1ea.js"><link rel="prefetch" href="/docs/assets/js/150.70b3e5b8.js"><link rel="prefetch" href="/docs/assets/js/151.5c030095.js"><link rel="prefetch" href="/docs/assets/js/152.29623bd0.js"><link rel="prefetch" href="/docs/assets/js/153.93447902.js"><link rel="prefetch" href="/docs/assets/js/154.36f0c68d.js"><link rel="prefetch" href="/docs/assets/js/155.289f8064.js"><link rel="prefetch" href="/docs/assets/js/156.20b31054.js"><link rel="prefetch" href="/docs/assets/js/157.40c91872.js"><link rel="prefetch" href="/docs/assets/js/158.8848ea68.js"><link rel="prefetch" href="/docs/assets/js/159.8e1aad41.js"><link rel="prefetch" href="/docs/assets/js/16.363b25ef.js"><link rel="prefetch" href="/docs/assets/js/160.c967d256.js"><link rel="prefetch" href="/docs/assets/js/161.590a7cb2.js"><link rel="prefetch" href="/docs/assets/js/162.766d411e.js"><link rel="prefetch" href="/docs/assets/js/163.5d1d9c53.js"><link rel="prefetch" href="/docs/assets/js/164.cc5f1ecd.js"><link rel="prefetch" href="/docs/assets/js/165.3d2d2fa1.js"><link rel="prefetch" href="/docs/assets/js/166.2222bf3d.js"><link rel="prefetch" href="/docs/assets/js/167.adc59322.js"><link rel="prefetch" href="/docs/assets/js/168.2f644e03.js"><link rel="prefetch" href="/docs/assets/js/169.21a022ef.js"><link rel="prefetch" href="/docs/assets/js/17.30fe1cbb.js"><link rel="prefetch" href="/docs/assets/js/170.3d8ffa01.js"><link rel="prefetch" href="/docs/assets/js/171.07b8bd51.js"><link rel="prefetch" href="/docs/assets/js/172.bf8d62c9.js"><link rel="prefetch" href="/docs/assets/js/173.323c767f.js"><link rel="prefetch" href="/docs/assets/js/174.cf8568be.js"><link rel="prefetch" href="/docs/assets/js/175.577e55db.js"><link rel="prefetch" href="/docs/assets/js/176.c33484e6.js"><link rel="prefetch" href="/docs/assets/js/177.7734eacb.js"><link rel="prefetch" href="/docs/assets/js/178.f2ce64a5.js"><link rel="prefetch" href="/docs/assets/js/179.a42d50ff.js"><link rel="prefetch" href="/docs/assets/js/18.7260a392.js"><link rel="prefetch" href="/docs/assets/js/180.a9f4c2ef.js"><link rel="prefetch" href="/docs/assets/js/181.4d21133d.js"><link rel="prefetch" href="/docs/assets/js/182.8b74829d.js"><link rel="prefetch" href="/docs/assets/js/183.23edfaff.js"><link rel="prefetch" href="/docs/assets/js/184.a0dcb62a.js"><link rel="prefetch" href="/docs/assets/js/185.2e5179a5.js"><link rel="prefetch" href="/docs/assets/js/186.b043d257.js"><link rel="prefetch" href="/docs/assets/js/187.0d566ce2.js"><link rel="prefetch" href="/docs/assets/js/188.3bd3e866.js"><link rel="prefetch" href="/docs/assets/js/189.534b7cc6.js"><link rel="prefetch" href="/docs/assets/js/19.3ed3b7a5.js"><link rel="prefetch" href="/docs/assets/js/190.842880c7.js"><link rel="prefetch" href="/docs/assets/js/191.aea7dc01.js"><link rel="prefetch" href="/docs/assets/js/192.35197710.js"><link rel="prefetch" href="/docs/assets/js/193.a247bb2b.js"><link rel="prefetch" href="/docs/assets/js/194.51127504.js"><link rel="prefetch" href="/docs/assets/js/195.e35732b6.js"><link rel="prefetch" href="/docs/assets/js/196.76851fe1.js"><link rel="prefetch" href="/docs/assets/js/197.241ed2f8.js"><link rel="prefetch" href="/docs/assets/js/198.966e9cc5.js"><link rel="prefetch" href="/docs/assets/js/199.9f55d2b1.js"><link rel="prefetch" href="/docs/assets/js/20.42217007.js"><link rel="prefetch" href="/docs/assets/js/200.5f3f81fe.js"><link rel="prefetch" href="/docs/assets/js/202.5d98b881.js"><link rel="prefetch" href="/docs/assets/js/203.8a0d5709.js"><link rel="prefetch" href="/docs/assets/js/204.4473c6d6.js"><link rel="prefetch" href="/docs/assets/js/205.d181cfca.js"><link rel="prefetch" href="/docs/assets/js/206.ba7b5a2b.js"><link rel="prefetch" href="/docs/assets/js/207.ace7093d.js"><link rel="prefetch" href="/docs/assets/js/208.91becc64.js"><link rel="prefetch" href="/docs/assets/js/209.cd8e9389.js"><link rel="prefetch" href="/docs/assets/js/21.8bed638d.js"><link rel="prefetch" href="/docs/assets/js/210.be51c127.js"><link rel="prefetch" href="/docs/assets/js/211.c33f5752.js"><link rel="prefetch" href="/docs/assets/js/212.5ab75cc0.js"><link rel="prefetch" href="/docs/assets/js/213.676586e8.js"><link rel="prefetch" href="/docs/assets/js/214.605ee8b8.js"><link rel="prefetch" href="/docs/assets/js/215.357406dd.js"><link rel="prefetch" href="/docs/assets/js/216.f970c81e.js"><link rel="prefetch" href="/docs/assets/js/217.d4a029b1.js"><link rel="prefetch" href="/docs/assets/js/218.e322a0fa.js"><link rel="prefetch" href="/docs/assets/js/219.8815973d.js"><link rel="prefetch" href="/docs/assets/js/22.394283da.js"><link rel="prefetch" href="/docs/assets/js/220.2b1d1aff.js"><link rel="prefetch" href="/docs/assets/js/221.29a535c9.js"><link rel="prefetch" href="/docs/assets/js/222.e4d63a45.js"><link rel="prefetch" href="/docs/assets/js/223.af52dde2.js"><link rel="prefetch" href="/docs/assets/js/224.4fde7c29.js"><link rel="prefetch" href="/docs/assets/js/225.a77c4042.js"><link rel="prefetch" href="/docs/assets/js/226.c61cfdba.js"><link rel="prefetch" href="/docs/assets/js/227.6a14eb4e.js"><link rel="prefetch" href="/docs/assets/js/228.f1e628d9.js"><link rel="prefetch" href="/docs/assets/js/229.083e894f.js"><link rel="prefetch" href="/docs/assets/js/23.ab75810c.js"><link rel="prefetch" href="/docs/assets/js/230.ccede3a7.js"><link rel="prefetch" href="/docs/assets/js/231.f4d24e2c.js"><link rel="prefetch" href="/docs/assets/js/232.67a4a80c.js"><link rel="prefetch" href="/docs/assets/js/233.7d0c2563.js"><link rel="prefetch" href="/docs/assets/js/234.ec5bc77e.js"><link rel="prefetch" href="/docs/assets/js/235.fc10e161.js"><link rel="prefetch" href="/docs/assets/js/236.279ac6a0.js"><link rel="prefetch" href="/docs/assets/js/237.0c38a103.js"><link rel="prefetch" href="/docs/assets/js/238.7fdb24d6.js"><link rel="prefetch" href="/docs/assets/js/239.8b6fb58d.js"><link rel="prefetch" href="/docs/assets/js/24.b95986d3.js"><link rel="prefetch" href="/docs/assets/js/240.512a98ac.js"><link rel="prefetch" href="/docs/assets/js/241.00771f50.js"><link rel="prefetch" href="/docs/assets/js/242.00db2861.js"><link rel="prefetch" href="/docs/assets/js/243.e056e942.js"><link rel="prefetch" href="/docs/assets/js/244.5b2ce29d.js"><link rel="prefetch" href="/docs/assets/js/245.2a9df990.js"><link rel="prefetch" href="/docs/assets/js/246.ee067738.js"><link rel="prefetch" href="/docs/assets/js/247.ddacfa64.js"><link rel="prefetch" href="/docs/assets/js/248.304568cc.js"><link rel="prefetch" href="/docs/assets/js/249.b243953d.js"><link rel="prefetch" href="/docs/assets/js/25.b7e0ea71.js"><link rel="prefetch" href="/docs/assets/js/250.519750e7.js"><link rel="prefetch" href="/docs/assets/js/251.99d6131e.js"><link rel="prefetch" href="/docs/assets/js/252.23447b0d.js"><link rel="prefetch" href="/docs/assets/js/253.3f0dcdda.js"><link rel="prefetch" href="/docs/assets/js/254.69d5e19f.js"><link rel="prefetch" href="/docs/assets/js/255.e66a991d.js"><link rel="prefetch" href="/docs/assets/js/256.18886ad6.js"><link rel="prefetch" href="/docs/assets/js/257.c4b83097.js"><link rel="prefetch" href="/docs/assets/js/258.5839a0b0.js"><link rel="prefetch" href="/docs/assets/js/259.e9b0fb42.js"><link rel="prefetch" href="/docs/assets/js/26.f614caba.js"><link rel="prefetch" href="/docs/assets/js/260.0ce17f06.js"><link rel="prefetch" href="/docs/assets/js/261.c4c0d63b.js"><link rel="prefetch" href="/docs/assets/js/262.4a32f81b.js"><link rel="prefetch" href="/docs/assets/js/263.c059d55c.js"><link rel="prefetch" href="/docs/assets/js/264.37a18342.js"><link rel="prefetch" href="/docs/assets/js/265.6fe2ac24.js"><link rel="prefetch" href="/docs/assets/js/266.c4192efd.js"><link rel="prefetch" href="/docs/assets/js/267.b5a1b064.js"><link rel="prefetch" href="/docs/assets/js/268.f986b9c5.js"><link rel="prefetch" href="/docs/assets/js/269.edc3e921.js"><link rel="prefetch" href="/docs/assets/js/27.b7dca4d4.js"><link rel="prefetch" href="/docs/assets/js/270.c876468e.js"><link rel="prefetch" href="/docs/assets/js/28.4bb509a9.js"><link rel="prefetch" href="/docs/assets/js/29.a59f72df.js"><link rel="prefetch" href="/docs/assets/js/3.278a0ca3.js"><link rel="prefetch" href="/docs/assets/js/30.357c9933.js"><link rel="prefetch" href="/docs/assets/js/31.df19dde8.js"><link rel="prefetch" href="/docs/assets/js/32.f6f855d4.js"><link rel="prefetch" href="/docs/assets/js/33.c3fc3b9b.js"><link rel="prefetch" href="/docs/assets/js/34.62d68bfe.js"><link rel="prefetch" href="/docs/assets/js/35.63979666.js"><link rel="prefetch" href="/docs/assets/js/36.23c11583.js"><link rel="prefetch" href="/docs/assets/js/37.7ad0f89e.js"><link rel="prefetch" href="/docs/assets/js/38.1d011454.js"><link rel="prefetch" href="/docs/assets/js/39.e5243ab8.js"><link rel="prefetch" href="/docs/assets/js/4.c909c434.js"><link rel="prefetch" href="/docs/assets/js/40.8e0b1211.js"><link rel="prefetch" href="/docs/assets/js/41.209a12f4.js"><link rel="prefetch" href="/docs/assets/js/42.b17bd247.js"><link rel="prefetch" href="/docs/assets/js/43.3aae42c9.js"><link rel="prefetch" href="/docs/assets/js/44.2764d82b.js"><link rel="prefetch" href="/docs/assets/js/45.c230cfc4.js"><link rel="prefetch" href="/docs/assets/js/46.fd6388e0.js"><link rel="prefetch" href="/docs/assets/js/47.f45b0153.js"><link rel="prefetch" href="/docs/assets/js/48.bf001bf3.js"><link rel="prefetch" href="/docs/assets/js/49.ca3f4d8e.js"><link rel="prefetch" href="/docs/assets/js/5.7c6ccbcd.js"><link rel="prefetch" href="/docs/assets/js/50.4a5306c6.js"><link rel="prefetch" href="/docs/assets/js/51.cd5f2996.js"><link rel="prefetch" href="/docs/assets/js/52.f4dc0e82.js"><link rel="prefetch" href="/docs/assets/js/53.5f6a46f0.js"><link rel="prefetch" href="/docs/assets/js/54.1eff7e9a.js"><link rel="prefetch" href="/docs/assets/js/55.45164749.js"><link rel="prefetch" href="/docs/assets/js/56.4ceded91.js"><link rel="prefetch" href="/docs/assets/js/57.ba3ce984.js"><link rel="prefetch" href="/docs/assets/js/58.68b6b467.js"><link rel="prefetch" href="/docs/assets/js/59.852de89f.js"><link rel="prefetch" href="/docs/assets/js/6.6a50661d.js"><link rel="prefetch" href="/docs/assets/js/60.47c8dcc1.js"><link rel="prefetch" href="/docs/assets/js/61.0d4f83be.js"><link rel="prefetch" href="/docs/assets/js/62.945553d9.js"><link rel="prefetch" href="/docs/assets/js/63.caa64e21.js"><link rel="prefetch" href="/docs/assets/js/64.a3f31339.js"><link rel="prefetch" href="/docs/assets/js/65.49af5843.js"><link rel="prefetch" href="/docs/assets/js/66.664f226e.js"><link rel="prefetch" href="/docs/assets/js/67.f83e9a44.js"><link rel="prefetch" href="/docs/assets/js/68.f152ad6a.js"><link rel="prefetch" href="/docs/assets/js/69.e2a3906b.js"><link rel="prefetch" href="/docs/assets/js/7.a2539bba.js"><link rel="prefetch" href="/docs/assets/js/70.12c929f3.js"><link rel="prefetch" href="/docs/assets/js/71.ddf662aa.js"><link rel="prefetch" href="/docs/assets/js/72.0209dac3.js"><link rel="prefetch" href="/docs/assets/js/73.30a36344.js"><link rel="prefetch" href="/docs/assets/js/74.d83cf5ae.js"><link rel="prefetch" href="/docs/assets/js/75.4336989c.js"><link rel="prefetch" href="/docs/assets/js/76.c3b01393.js"><link rel="prefetch" href="/docs/assets/js/77.7b5d5dd3.js"><link rel="prefetch" href="/docs/assets/js/78.625b6220.js"><link rel="prefetch" href="/docs/assets/js/79.5d2edc43.js"><link rel="prefetch" href="/docs/assets/js/8.4da06558.js"><link rel="prefetch" href="/docs/assets/js/80.a7f5136e.js"><link rel="prefetch" href="/docs/assets/js/81.9a8e0ff8.js"><link rel="prefetch" href="/docs/assets/js/82.cd2b29fa.js"><link rel="prefetch" href="/docs/assets/js/83.427a0be3.js"><link rel="prefetch" href="/docs/assets/js/84.4161cebd.js"><link rel="prefetch" href="/docs/assets/js/85.263fa11c.js"><link rel="prefetch" href="/docs/assets/js/86.f1b20c4c.js"><link rel="prefetch" href="/docs/assets/js/87.9ab7cea8.js"><link rel="prefetch" href="/docs/assets/js/88.7e90fda8.js"><link rel="prefetch" href="/docs/assets/js/89.b3047296.js"><link rel="prefetch" href="/docs/assets/js/9.d2c64cad.js"><link rel="prefetch" href="/docs/assets/js/90.dce18174.js"><link rel="prefetch" href="/docs/assets/js/91.62929a57.js"><link rel="prefetch" href="/docs/assets/js/92.1f3631e5.js"><link rel="prefetch" href="/docs/assets/js/93.a1cac9c4.js"><link rel="prefetch" href="/docs/assets/js/94.25ade759.js"><link rel="prefetch" href="/docs/assets/js/95.a9ab0e07.js"><link rel="prefetch" href="/docs/assets/js/96.6807a46a.js"><link rel="prefetch" href="/docs/assets/js/97.866991cd.js"><link rel="prefetch" href="/docs/assets/js/98.17d93b1c.js"><link rel="prefetch" href="/docs/assets/js/99.cc7da6ec.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.229beafb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">计算机基础教程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  机器指令
</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link router-link-active">
  软件基础
</a></div><div class="nav-item"><a href="/docs/coder2hacker/" class="nav-link">
  白帽黑客
</a></div><div class="nav-item"><a href="/docs/blockchain/" class="nav-link">
  区块链
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  机器指令
</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link router-link-active">
  软件基础
</a></div><div class="nav-item"><a href="/docs/coder2hacker/" class="nav-link">
  白帽黑客
</a></div><div class="nav-item"><a href="/docs/blockchain/" class="nav-link">
  区块链
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#ssl-tls-certificate-证书类型" class="sidebar-link">SSL/TLS Certificate 证书类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#self-sgined-certificate" class="sidebar-link">self-sgined certificate</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#三方免费证书" class="sidebar-link">三方免费证书</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#let-s-encrypt" class="sidebar-link" style="padding-left:3rem;">let's encrypt</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#cloudflare-dns解析提供商免费证书" class="sidebar-link" style="padding-left:3rem;">cloudflare dns解析提供商免费证书</a></li></ul></li><li><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#supporting-https" class="sidebar-link">Supporting https</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#browser" class="sidebar-link">browser</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#js-http-client" class="sidebar-link">js http client</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#nginx" class="sidebar-link">nginx</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#jdk-java-client" class="sidebar-link">jdk java client</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#springboot-mvc" class="sidebar-link">springboot mvc</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#netty" class="sidebar-link">netty</a></li></ul></li><li><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#案例-use-case-1-client-server" class="sidebar-link">案例 Use Case 1: client-server</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#案例-use-case-2-client-cdn-server" class="sidebar-link">案例 Use Case 2: client-cdn-server</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#配置例子-client-cloudflare-server-full-strict模式并开启authenticated-origin-pulls" class="sidebar-link">配置例子：client-cloudflare-server, full strict模式并开启authenticated origin pulls</a></li></ul></li><li><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#案例-use-case-2-separated-frontend-backend前后端分离" class="sidebar-link">案例 Use Case 2: separated frontend/backend前后端分离</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#troubleshooting" class="sidebar-link">Troubleshooting</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#查看服务器支持的tls版本" class="sidebar-link">查看服务器支持的TLS版本</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#查看服务器支持的cipher-suite" class="sidebar-link">查看服务器支持的cipher suite</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#net-err-cert-common-name-invalid" class="sidebar-link">NET::ERRCERTCOMMONNAMEINVALID</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#ssl-ctx-use-privatekey-failed" class="sidebar-link">SSLCTXuse_PrivateKey failed</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#服务端cert过期导致handshake请求失败" class="sidebar-link">服务端cert过期导致Handshake请求失败</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#jdk版本bug导致handshake失败" class="sidebar-link">jdk版本bug导致Handshake失败</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#进行debug输出更详细的handshake握手内容" class="sidebar-link" style="padding-left:3rem;">进行debug输出更详细的handshake握手内容</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#对比下dev环境成功的输出" class="sidebar-link" style="padding-left:3rem;">对比下dev环境成功的输出</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#注意到" class="sidebar-link" style="padding-left:3rem;">注意到</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#查看一下服务器支持的tls版本类型" class="sidebar-link" style="padding-left:3rem;">查看一下服务器支持的TLS版本类型：</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#dev上用的java跟生产上的不同" class="sidebar-link" style="padding-left:3rem;">dev上用的java跟生产上的不同</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#java-security" class="sidebar-link" style="padding-left:3rem;">java.security</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#jdk9也不行" class="sidebar-link" style="padding-left:3rem;">jdk9也不行</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#openjdk8-update" class="sidebar-link" style="padding-left:3rem;">openjdk8 update</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#解决之后研究原因" class="sidebar-link" style="padding-left:3rem;">解决之后研究原因</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#certificateexception-no-subject-alternative-names-present" class="sidebar-link">CertificateException: No subject alternative names present</a></li><li class="sidebar-sub-header"><a href="/docs/software/network/layer4_http_ssl_tls_setup.html#一些有意思的问题" class="sidebar-link">一些有意思的问题</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>The SSL protocol runs above the TCP/IP and below higher-level protocols such as HTTP. It uses TCP/IP on behalf of the higher-level protocols.</p> <p>The TLS handshake happens after the TCP handshake. For the TCP or for the transport layer, everything in the TLS handshake is just application data. Once the TCP handshake is completed the TLS layer will initiate the TLS handshake.</p> <p>https secure http</p> <p>wss secure websocket</p> <p>refer to 《network.md/tls》</p> <h2 id="ssl-tls-certificate-证书类型"><a href="#ssl-tls-certificate-证书类型" class="header-anchor">#</a> SSL/TLS Certificate 证书类型</h2> <p>工具：keytool openssl</p> <p>证书可以单纯只是包含ca认证的证书链（CA的签名）或自签名，以及公钥，也可以同时包含私钥，私钥当然可以独立于证书生成单独存储；</p> <p>带密码：spring boot mvc程序，这样好处是双重保护，因为需要同时需要密码和私钥才可以</p> <p>不带密码：ngnix，私钥或者是含有私钥的证书一定要控制读取权限</p> <p>按照生成方式分为：</p> <h3 id="self-sgined-certificate"><a href="#self-sgined-certificate" class="header-anchor">#</a> self-sgined certificate</h3> <div class="language- extra-class"><pre class="language-text"><code>------------------------------------------------------------
--- use openssl 不带密码
------------------------------------------------------------
sudo mkdir /etc/ssl/privatekey
sudo chmod 700 /etc/ssl/privatekey
sudo openssl req -x509 -nodes -days 3650 -newkey rsa:2048 -keyout /etc/ssl/privatekey/nginx-selfsigned.key -out /etc/ssl/certs/nginx-selfsigned.crt

vim nginx-selfsigned.crt
	-----BEGIN CERTIFICATE-----
	-----END CERTIFICATE-----

vim /etc/ssl/privatekey/nginx-selfsigned.key
	-----BEGIN PRIVATE KEY-----
	-----END PRIVATE KEY-----

openssl x509 -in nginx-selfsigned.crt -text -noout
keytool -printcert -file /etc/ssl/certs/nginx-selfsigned.crt

检查crt跟private key是否匹配：
openssl x509 -noout -modulus -in test.crt | openssl md5
openssl rsa -noout -modulus -in test.key | openssl md5
两者输出的 Modulus 应该一致（RSA素数乘积，用来生成key pair）
------------------------------------------------------------
--- use keytool 带密码
------------------------------------------------------------
-- Generate a Java keystore and key pair
keytool -genkey -alias mydomain -keyalg RSA -keystore keystore.jks  -keysize 2048
-- Generate a certificate signing request (CSR) for an existing Java keystore
keytool -certreq -alias mydomain -keystore keystore.jks -file mydomain.csr
-- Import a root or intermediate CA certificate to an existing Java keystore
keytool -import -trustcacerts -alias root -file Thawte.crt -keystore keystore.jks
-- Import a signed primary certificate to an existing Java keystore
keytool -import -trustcacerts -alias mydomain -file mydomain.crt -keystore keystore.jks
-- Generate a keystore and self-signed certificate
keytool -genkey -keyalg RSA -alias selfsigned -keystore keystore.jks -storepass password -validity 360 -keysize 2048
-- Export a certificate from a keystore
keytool -export -alias selfsigned -file selfsigned.crt -keystore keystore.jks

keytool -genkey -alias secure_netty -keysize 2048 -validity 365 -keyalg RSA -dname &quot;CN=localhost&quot; -keypass 123456 -storepass 123456 -keystore selfsigned.jks
keytool -export -alias secure_netty -keystore selfsigned.jks -storepass 123456 -file selfsigned.cer


keytool -genkey -alias secure_tomcat -keysize 1024 -validity 365 -keyalg RSA -keypass 123456 -storepass 123456 -keystore selfsigned.keystore 
keytool -list -v -keystore selfsigned.keystore
	打印信息包含 Entry type: PrivateKeyEntry
keytool -export -alias secure_tomcat -keystore selfsigned.keystore -file selfsigned.cer

example:
java import self-signed certificate
keytool.exe -import -trustcacerts -keystore ../lib/security/cacerts  -storepass changeit -noprompt -alias myownaliasformysystem -file &quot;\saved-certs\ca.cert&quot;
https://stackoverflow.com/questions/11617210/how-to-properly-import-a-selfsigned-certificate-into-java-keystore-that-is-avail

tomcat:
https://support.microfocus.com/kb/doc.php?id=7022204
</code></pre></div><h3 id="三方免费证书"><a href="#三方免费证书" class="header-anchor">#</a> 三方免费证书</h3> <h4 id="let-s-encrypt"><a href="#let-s-encrypt" class="header-anchor">#</a> let's encrypt</h4> <div class="language- extra-class"><pre class="language-text"><code>//自动化工具
wget https://dl.eff.org/certbot-auto
chmod a+x certbot-auto
./certbot-auto certonly --standalone -d  www.demoProject.com   # www.demoProject.com为你想要配置https的域名
ls /etc/letsencrypt/live/

//证书定时自动更新
crontab -e    #编辑crontab
30 2 * * 1 /root/certbot-auto renew --pre-hook &quot;systemctl stop nginx&quot; --post-hook &quot;systemctl start nginx&quot; &gt;&gt; /var/log/le-renew.log 2&gt;&amp;1 &amp;
root/certbot-auto renew --pre-hook &quot;systemctl stop nginx&quot; --post-hook &quot;systemctl start nginx&quot;

</code></pre></div><h4 id="cloudflare-dns解析提供商免费证书"><a href="#cloudflare-dns解析提供商免费证书" class="header-anchor">#</a> cloudflare dns解析提供商免费证书</h4> <p><a href="https://www.cloudflare.com/learning/dns/dns-over-tls/" target="_blank" rel="noopener noreferrer">cloudflare比较特殊，它提供给了所谓 dns over tls，添加网站到cloudflare并且替换域名商的dns解析为cloudflare之后，dns的解析会被云朵点亮代表收到cloudflare保护<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>；
<a href="#%E6%A1%88%E4%BE%8B-use-case-2-client-cdn-server">然后cloudflare提供了几种加密模式，具体参考下面</a></p> <h2 id="supporting-https"><a href="#supporting-https" class="header-anchor">#</a> Supporting https</h2> <h3 id="browser"><a href="#browser" class="header-anchor">#</a> browser</h3> <p>浏览器自然是全面支持https的，不过不同浏览器的特性不同，比如</p> <p>chrome是采用了操作系统本身的CA证书链，</p> <p>而firefox是有完整自己的一套证书，所以对于渗透测试者来说，firefox是首选，因为不需要改变操作系统本身的证书，只需要安装给firefox本身就行了，当然firefox还有个特性是支持proxy，chrome还得装插件才行；</p> <p>注意：如果是自签证书，浏览器会提示，可以手动信任，之后就可以正常访问，但是下面的js http client则不同</p> <p>访问后端的时候需要注意cors也就是same origin的问题，比如reactjs项目本地测试默认开启nodejs服务：http://localhost:3000，这样访问后端服务，如果后端服务没有设置allow origin，因为后端服务端口一般不会刚好是3000，如果是其他端口，即使也是localhost服务，因为端口不同，不属于same origin，无法请求</p> <h3 id="js-http-client"><a href="#js-http-client" class="header-anchor">#</a> js http client</h3> <p>注意：跟上面不同的是，这里是没有用户交互的，而是js代码自动请求到后端，如果是自签证书，浏览器是不信任的，解决办法就是想办法手动从浏览器地址栏访问一次后端，然后手动加信任，之后应该就可以了，或者另外一种方式是</p> <div class="language- extra-class"><pre class="language-text"><code>import axios from 'axios'
import https from 'https'
const result = await axios.post(
    `https://${url}/login`,
    body,
    {
      httpsAgent: new https.Agent({
        rejectUnauthorized: false
      })
    }
  )
</code></pre></div><p>这样会完全忽略证书验证，不太好，所以更好的方法是：</p> <p>https://stackoverflow.com/questions/51363855/how-to-configure-axios-to-use-ssl-certificate</p> <div class="language- extra-class"><pre class="language-text"><code>const httpsAgent = new https.Agent({ ca: MY_CA_BUNDLE });
</code></pre></div><h3 id="nginx"><a href="#nginx" class="header-anchor">#</a> nginx</h3> <p>refer to 《buildingblock/nginx.md》</p> <div class="language- extra-class"><pre class="language-text"><code>
nginx.conf:
 server {
        listen       80;
        listen 443 ssl;
        listen [::]:443 ssl;
        server_name  localhost;

        ssl_certificate /etc/ssl/certs/nginx-selfsigned.crt;
        ssl_certificate_key /etc/ssl/privatekey/nginx-selfsigned.key;
        ssl_dhparam /etc/ssl/certs/dhparam.pem;
</code></pre></div><h3 id="jdk-java-client"><a href="#jdk-java-client" class="header-anchor">#</a> jdk java client</h3> <p>Cacerts are default Trust store provided by every JVM vendor. We will see this cacerts file under JRE/lib/security folder.</p> <p>如果不导入证书输出错误：
trustAnchors parameter must be non-empty
or
javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No name matching found</p> <p>keystore 默认密码 changeit</p> <p>查看/验证</p> <div class="language- extra-class"><pre class="language-text"><code>C:\Program Files\Java\jdk1.8.0_231\bin

C:\Program Files\Java\jdk1.8.0_231\jre\lib\security\cacerts


C:\WINDOWS\system32&gt;keytool.exe -list -v -keystore &quot;C:\Program Files\Java\jdk1.8.0_231\jre\lib\security\cacerts&quot;
Enter keystore password:
Keystore type: JKS
Keystore provider: SUN

Your keystore contains XX entries

Alias name: verisignclass2g2ca [jdk]
Creation date: 25 Aug 2016
Entry type: trustedCertEntry

Owner: OU=VeriSign Trust Network, OU=&quot;(c) 1998 VeriSign, Inc. - For authorized use only&quot;, OU=Class 2 Public Primary Certification Authority - G2, O=&quot;VeriSign, Inc.&quot;, C=US
Issuer: OU=VeriSign Trust Network, OU=&quot;(c) 1998 VeriSign, Inc. - For authorized use only&quot;, OU=Class 2 Public Primary Certification Authority - G2, O=&quot;VeriSign, Inc.&quot;, C=US
Serial number: b92f60cc889fa17a4609b85b706c8aaf
Valid from: Mon May 18 08:00:00 SRET 1998 until: Wed Aug 02 07:59:59 SRET 2028
Certificate fingerprints:
Signature algorithm name: SHA1withRSA
Subject Public Key Algorithm: 1024-bit RSA key
Version: 1


*******************************************
*******************************************


Alias name: test-selfsigned
Creation date: 25 Oct 2022
Entry type: trustedCertEntry

Owner: CN=test.local, OU=LYHISTORY, O=LYHISTORY, L=SG, ST=SG, C=SG
Issuer: CN=test.local, OU=LYHISTORY, O=LYHISTORY, L=SG, ST=SG, C=SG
Serial number: c79bfcff9e2a5aa77fd103e685f650a825346b9
Valid from: Tue Oct 18 10:50:58 SRET 2022 until: Fri Oct 15 10:50:58 SRET 2032
Certificate fingerprints:
         
Signature algorithm name: SHA256withRSA
Subject Public Key Algorithm: 2048-bit RSA key
Version: 3

</code></pre></div><p>导入</p> <div class="language- extra-class"><pre class="language-text"><code>C:\Program Files\Java\jdk1.8.0_231\bin&gt;keytool.exe -importcert -file test-selfsigned.crt -keystore &quot;C:\Program Files\Java\jdk1.8.0_231\jre\lib\security\cacerts&quot; -alias &quot;test-selfsigned&quot;
Enter keystore password:
Owner: CN=test.local, OU=LYHISTORY, O=LYHISTORY, L=SG, ST=SG, C=SG
Issuer: CN=test.local, OU=LYHISTORY, O=LYHISTORY, L=SG, ST=SG, C=SG
Serial number: c79bfcff9e2a5aa77fd103e685f650a825346b9
Valid from: Tue Oct 18 10:50:58 SGT 2022 until: Fri Oct 15 10:50:58 SGT 2032
Certificate fingerprints:

Signature algorithm name: SHA256withRSA
Subject Public Key Algorithm: 2048-bit RSA key
Version: 3

Extensions:

Trust this certificate? [no]:  yes
Certificate was added to keystore

</code></pre></div><h3 id="springboot-mvc"><a href="#springboot-mvc" class="header-anchor">#</a> springboot mvc</h3> <p>首先MVC有自己的端口比如10001，内置的tomcat默认的http端口是8080，</p> <p>所有请求到spring mvc这个后台的都是通过 http://IP:10001 过来的，然后内部再交由tomcat 8080端口处理，</p> <p>如果设置https比如8443，如下：</p> <div class="language- extra-class"><pre class="language-text"><code>yml：
#debug: true
server:
  servlet:
    context-path: /test
  port:
    10001
  ssl:
    key-store: selfsigned.keystore
    key-store-password: 123456
    keyStoreType: JKS
    keyAlias: secure_tomcat
    
@EnableAsync
@SpringBootApplication
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }

    @Bean
    public RestTemplate restTemplate() {
        return new RestTemplate();
    }

    /**
     * http重定向到https
     * @return
     */
    @Bean
    public TomcatServletWebServerFactory servletContainer() {
        TomcatServletWebServerFactory tomcat = new TomcatServletWebServerFactory() {
            @Override
            protected void postProcessContext(Context context) {
                SecurityConstraint constraint = new SecurityConstraint();
                constraint.setUserConstraint(&quot;CONFIDENTIAL&quot;);
                SecurityCollection collection = new SecurityCollection();
                collection.addPattern(&quot;/*&quot;);
                constraint.addCollection(collection);
                context.addConstraint(constraint);
            }
        };
        //这里tomcat.getPort拿到的就是8080
        tomcat.addAdditionalTomcatConnectors(httpConnector(tomcat.getPort()));
        return tomcat;
    }

    @Bean
    public Connector httpConnector(int port) {
        Connector connector = new Connector(&quot;org.apache.coyote.http11.Http11NioProtocol&quot;);
        connector.setScheme(&quot;http&quot;);
        //Connector监听的http的端口号
        connector.setPort(port);
        connector.setSecure(false);
        //监听到http的端口号后转向到的https的端口号
        connector.setRedirectPort(8443);
        return connector;
    }
}

</code></pre></div><p>注意到上面server本身就监听10001（应该是内置tomcat监听），然后为了https，需要创建tomcatfatory又出现一个http端口8080，为什么不可以直接扩展或override postProcessContext方法，可能是跟整个spring mvc的生命周期启动过程相关：</p> <p>https://zhuanlan.zhihu.com/p/81807865</p> <h3 id="netty"><a href="#netty" class="header-anchor">#</a> netty</h3> <p>https://blog.csdn.net/invadersf/article/details/80337380</p> <p>https://www.cnblogs.com/zhjh256/p/6488668.html</p> <div class="language- extra-class"><pre class="language-text"><code>import io.netty.handler.ssl.SslHandler;
public class SslChannelInitializer extends ChannelInitializer&lt;Channel&gt; {
    private final SslContext context;

    public SslChannelInitializer(SslContext context) { 
        this.context = context;
    }

    @Override
    protected void initChannel(Channel ch) throws Exception {
        SSLEngine engine = context.newEngine(ch.alloc());
        engine.setUseClientMode(false);
        ch.pipeline().addFirst(&quot;ssl&quot;, new SslHandler(engine));
        ChannelPipeline pipeline = ch.pipeline(); 
        pipeline.addLast(&quot;frameDecoder&quot;, new LengthFieldBasedFrameDecoder(Integer.MAX_VALUE, 0, 4, 0, 4));  
        pipeline.addLast(&quot;frameEncoder&quot;, new LengthFieldPrepender(4));                
        pipeline.addLast(&quot;decoder&quot;, new StringDecoder(Charset.forName(&quot;UTF-8&quot;)));  
        pipeline.addLast(&quot;encoder&quot;, new StringEncoder(Charset.forName(&quot;UTF-8&quot;)));  
        pipeline.addLast(&quot;spiderServerBusiHandler&quot;, new SpiderServerBusiHandler());
    }
}

bossGroup = new NioEventLoopGroup(1);
workerGroup = new NioEventLoopGroup(WORKER_GROUP_SIZE);
channelClass = NioServerSocketChannel.class;
logger.info(&quot;workerGroup size:&quot; + WORKER_GROUP_SIZE);
logger.info(&quot;preparing to start spider server...&quot;);
b.group(bossGroup, workerGroup);  
b.channel(channelClass);
KeyManagerFactory keyManagerFactory = null;
KeyStore keyStore = KeyStore.getInstance(&quot;JKS&quot;);
keyStore.load(new FileInputStream(&quot;selfsigned.jks&quot;), &quot;sNetty&quot;.toCharArray());
keyManagerFactory = KeyManagerFactory.getInstance(&quot;SunX509&quot;);
keyManagerFactory.init(keyStore,&quot;123456&quot;.toCharArray());
SslContext sslContext = SslContextBuilder.forServer(keyManagerFactory).build();
b.childHandler(new SslChannelInitializer(sslContext)); 
</code></pre></div><h2 id="案例-use-case-1-client-server"><a href="#案例-use-case-1-client-server" class="header-anchor">#</a> 案例 Use Case 1: client-server</h2> <p>这里的client就是浏览器或手机端，</p> <p>这里的server指的是前后端代码集成一起的后端服务，</p> <p>比较直白，只有两方参与，浏览器不需要什么设置，后端服务如果是self host则需要其本身实现https，比如spring mvc，如果不是self host，而是host在比如nginx或iis中，则需要对nginx或iis配置https支持即可；</p> <h2 id="案例-use-case-2-client-cdn-server"><a href="#案例-use-case-2-client-cdn-server" class="header-anchor">#</a> 案例 Use Case 2: client-cdn-server</h2> <p>example: 网站使用cloudflare的证书</p> <p>Cloudflare 提供几种模式 Encryption modes：</p> <ul><li>flexible
allows HTTPS connections between your visitor and Cloudflare, but all connections between Cloudflare and your origin are made through HTTP. As a result, an SSL certificate is not required on your origin.
这种模式 server端无需配置tls</li> <li>full
Cloudflare allows HTTPS connections between your visitor and Cloudflare and makes connections to the origin using the scheme requested by the visitor. If your visitor uses http, then Cloudflare connects to the origin using plaintext HTTP and vice versa.
这种模式 server端可以配置
<ul><li>self-signed 自签证书</li> <li>Cloudflare Origin CA,<a href="https://community.cloudflare.com/t/https-certificate-not-trusted/3610/11" target="_blank" rel="noopener noreferrer">Cloudflare Origin Certificate 是一个只被 Cloudflare 信任的证书，不被浏览器所信任，所以使用「Cloudflare Origin Certificate」就必须在前面使用 Cloudflare 添加 DNS 记录时将云朵点亮，即 ☁ Proxied。如果不点亮云朵，您的网站将无法安全访问，同时代理也会无法正常连接。<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>or purchased from a Certificate Authority)</li></ul></li> <li>full(strict)
Cloudflare does everything in Full mode but also enforces more stringent requirements for origin certificates.
这种模式server端需要使用cloudflare认可的证书：
<ul><li>Issued by a <a href="https://github.com/cloudflare/cfssl_trust" target="_blank" rel="noopener noreferrer">publicly trusted certificate authority <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>or <a href="https://developers.cloudflare.com/ssl/origin-configuration/origin-ca/" target="_blank" rel="noopener noreferrer">Cloudflare’s Origin CA, The “Cloudflare Origin Certificate” is a certificate that is only trusted by Cloudflare, not by browsers.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <h3 id="配置例子-client-cloudflare-server-full-strict模式并开启authenticated-origin-pulls"><a href="#配置例子-client-cloudflare-server-full-strict模式并开启authenticated-origin-pulls" class="header-anchor">#</a> 配置例子：client-cloudflare-server, full strict模式并开启authenticated origin pulls</h3> <ol><li><p>Cloudflare’s Origin CA生成：
cloudflare管理页面=&gt;SSL/TLS=&gt;Origin Server点击生成证书；
保存证书至 /etc/ssl/cloudflare_cert.pem
保存key至 /etc/ssl/cloudflare_key.pem</p></li> <li><p>SSL/TLS 加密模式改为 Full (strict)</p></li> <li><p>Edge Certificates=&gt;Minimum TLS Version」改为「TLS 1.2」</p></li> <li><p>Enable authenticated origin pulls
如果在 Nginx 服务器上设置了「Authenticated Origin Pulls」，就可以确保它只接受来自 Cloudflare 服务器的请求，防止任何其他人直接连接到 Nginx 服务器,
cloudflare管理页面=&gt;SSL/TLS=&gt;Origin Server,打开「Authenticated Origin Pulls」 。</p> <p>然后<a href="https://developers.cloudflare.com/ssl/origin-configuration/authenticated-origin-pull/set-up/zone-level/" target="_blank" rel="noopener noreferrer">访问该页面<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,可以找到下载client证书链接:
<a href="https://developers.cloudflare.com/ssl/static/authenticated_origin_pull_ca.pem" target="_blank" rel="noopener noreferrer">download authenticated_origin_pull_ca.pem<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
将证书 authenticated_origin_pull_ca.pem 的内容写入到服务器的 /etc/ssl/cloudflare_client.crt 中</p></li> <li><p>nginx 配置:</p> <div class="language- extra-class"><pre class="language-text"><code>server {
   listen 443 ssl http2;
   listen [::]:443 ssl http2;

   ssl_certificate /etc/ssl/cert.pem;
   ssl_certificate_key /etc/ssl/key.pem;
   ssl_client_certificate /etc/ssl/cloudflare.crt;
   ssl_verify_client on;
   ssl_session_timeout 1d;
   ssl_session_cache shared:MozSSL:10m;  # about 40000 sessions
   ssl_session_tickets off;

   # intermediate configuration
   ssl_protocols TLSv1.2 TLSv1.3;
   ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;
   ssl_prefer_server_ciphers off;

   # HSTS (ngx_http_headers_module is required) (63072000 seconds)
   add_header Strict-Transport-Security &quot;max-age=63072000&quot; always;
</code></pre></div></li></ol> <h2 id="案例-use-case-2-separated-frontend-backend前后端分离"><a href="#案例-use-case-2-separated-frontend-backend前后端分离" class="header-anchor">#</a> 案例 Use Case 2: separated frontend/backend前后端分离</h2> <p>举例前后端分离项目：
1.(user interact ) browser request nginx for frontend resource
create self-signed cert and config nignx, so browser will talk to nginx through https (unsafe warning will be alert as it's self signed)</p> <p>2.(no user interact) js codes will make http call to backend service to retrieve data through nginx, nginx forward http request to backend service
backend service has to implement and support https, and nginx also have to act as a https client to handshake with the backend service</p> <p>3.(no user interact) js codes will connect to websocket server directly</p> <p>假设前端项目用的是create-reactjs-app脚手架，npm run start会开启一个nodejs服务，如下</p> <p><img src="/docs/docs_image/software/network/ssl_local_env01.png" alt=""></p> <p>这种情况下显然是不可行的，首先：</p> <p>1.默认情况下，origin是https://127.0.0.1:3000，axios http client请求的host是 https://127.0.0.1:10001 ，会被same origin policy阻挡，</p> <p>注意如果是<code>&lt;img src=https://127.0.0.1:3000/verifycode</code> 这种图片src的验证码是不会被block住的，因为img link script等标签不会受制于same origin policy</p> <p>2.浏览器用户互动的部分请求到的host是nodejs，而非用户互动的axios请求到的host是spring mvc，因为开发环境肯定都是自签证书，即使给nodejs设置好了自签证书，浏览器第一次会提醒用户不安全，用户选择继续访问后浏览器则记住该证书，但是axios请求的是spring mvc程序的证书，跟nodejs一般是不同的，这种情况下就会有问题</p> <p>1的一个解决办法是通过设置chrome浏览器，允许其跨域： https://segmentfault.com/a/1190000021711445</p> <p>2的一个解决方法是nodejs跟spring mvc用相同的证书，或者手动给浏览器安装证书：https://qastack.cn/superuser/27268/how-do-i-disable-the-warning-chrome-gives-if-a-security-certificate-is-not-trusted</p> <p>但是其实更完美的解决方法是加一个nginx，nginx作为proxy转发两者的流量到nodejs和springmvc，这样浏览器本身和其中的js代码axios http client只需要跟nginx进行handshake即可，而且origin和host都是test.local，不存在跨域问题，参考下面这张图：</p> <p><img src="/docs/docs_image/software/network/ssl_local_env02.png" alt=""></p> <p>注意，关于websocket有两点：</p> <ol><li><p>如果网站使用了https，默认必须使用wss，ws会被浏览器block住，另外注意到，这里前端跟nginx之间是使用wss的，nginx跟真正的服务端仍然是明文ws通信，这个很正常，本来nginx就是反向代理，客户端不需要直接跟被代理的服务端连接，所以实际上同理后端的服务也可以只用http跟nginx通信；</p></li> <li><p>如果是本地测试 127.0.0.1，特别要小心，如图域名使用test.local会出现问题：provisional headers are shown</p> <p>解决办法是，nginx将server_name改为localhost即可</p></li></ol> <p>而最终部署到服务器上则会简化，因为就不需要nodejs开发环境了：</p> <p><img src="/docs/docs_image/software/network/ssl_product_env.png" alt=""></p> <p>测试完https后，想回去测试http，chrome经常会强制使用https，解决办法：</p> <p>https://superuser.com/questions/565409/how-to-stop-an-automatic-redirect-from-http-to-https-in-chrome</p> <ol><li>Go to <code>chrome://net-internals/#hsts</code>. Enter <em>3rdrevolution.com</em> under <strong>Delete domain security policies</strong> and press the Delete button.</li> <li>Now go to <code>chrome://settings/clearBrowserData</code>, tick the box <em>Cached images and files</em> and press click the button <em>Clear data</em>.</li></ol> <h2 id="troubleshooting"><a href="#troubleshooting" class="header-anchor">#</a> Troubleshooting</h2> <h3 id="查看服务器支持的tls版本"><a href="#查看服务器支持的tls版本" class="header-anchor">#</a> 查看服务器支持的TLS版本</h3> <div class="language- extra-class"><pre class="language-text"><code>nmap -p 443 --script ssl-enum-ciphers &lt;TARGET&gt;

openssl s_client -host api.compass-ft.com -port 443
</code></pre></div><h3 id="查看服务器支持的cipher-suite"><a href="#查看服务器支持的cipher-suite" class="header-anchor">#</a> 查看服务器支持的cipher suite</h3> <div class="language- extra-class"><pre class="language-text"><code>To get a list of all cipher suites supported by your installation of OpenSSL, use the openssl command with the ciphers subcommand as follows:
$ openssl ciphers -v 'ALL:COMPLEMENTOFALL'
to only list suites that are defined as belonging to the HIGH group, use the following command:
$ openssl ciphers -v 'HIGH'


https://www.keyfactor.com/blog/cipher-suites-explained/
TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384
Key Exchange - Authentication - Cipher(algorithm, strength, mode) - Hash or MAC
</code></pre></div><h3 id="net-err-cert-common-name-invalid"><a href="#net-err-cert-common-name-invalid" class="header-anchor">#</a> NET::ERR_CERT_COMMON_NAME_INVALID</h3> <p>如果是设置，基本就是域名跟证书不一致，比如证书中的：</p> <div class="language- extra-class"><pre class="language-text"><code>openssl x509 -noout -text -in test.crt
Subject: CN = *.test.com
nginx配置的server_name就需要是其子域名
</code></pre></div><p>如果是访问其他网站遇到，可能是dns解析问题：</p> <p>https://blog.csdn.net/zerooffdate/article/details/80513730</p> <h3 id="ssl-ctx-use-privatekey-failed"><a href="#ssl-ctx-use-privatekey-failed" class="header-anchor">#</a> SSL_CTX_use_PrivateKey failed</h3> <p>emerg] SSL_CTX_use_PrivateKey failed (SSL: error:0B080074:x509 certificate routines:X509_check_private_key:key values mismatch)</p> <p>私钥和证书不匹配，验证</p> <div class="language- extra-class"><pre class="language-text"><code>openssl x509 -noout -modulus -in certificate.crt | openssl md5
openssl rsa -noout -modulus -in privateKey.key | openssl md5
</code></pre></div><h3 id="服务端cert过期导致handshake请求失败"><a href="#服务端cert过期导致handshake请求失败" class="header-anchor">#</a> 服务端cert过期导致Handshake请求失败</h3> <p>sprintboot访问一个https的api遇到问题：</p> <div class="language- extra-class"><pre class="language-text"><code>2022-01-25 16:18:05.175 ^[[31mERROR^[[m ^[[35m30604GG^[[m [scheduling-1] ^[[36mc.a.m.f.u.HttpClientUtil^[[m : Get Exception Remote host closed connection during handshake

javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake
        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:980)
        at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1363)
        at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:735)
        at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:123)
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
        at org.apache.commons.httpclient.HttpConnection.flushRequestOutputStream(HttpConnection.java:828)
        at org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2116)
        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096)
        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)
        at com.lyhistory.middleware.fundingrate.util.HttpClientUtil.sendGet(HttpClientUtil.java:64)
        at com.lyhistory.middleware.fundingrate.service.impl.CompassftServiceImpl.sendRequest(CompassftServiceImpl.java:25)
        at com.lyhistory.middleware.fundingrate.job.CompassftJob.crawlData(CompassftJob.java:33)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:497)
        at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
        at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
Caused by: java.io.EOFException: SSL peer shut down incorrectly
        at sun.security.ssl.InputRecord.read(InputRecord.java:505)
        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:961)
        ... 28 more
</code></pre></div><p>但是此前在另外一台服务器上测试没有问题，确定了浏览器访问该api没有问题，然后在这台机器上curl一下</p> <div class="language- extra-class"><pre class="language-text"><code>#curl https://api.compass-ft.com/v1/indexes/CCRTBTC/history?access_token=
curl: (60) The certificate issuer's certificate has expired.  Check your system date and time.
More details here: http://curl.haxx.se/docs/sslcerts.html

curl performs SSL certificate verification by default, using a &quot;bundle&quot;
 of Certificate Authority (CA) public keys (CA certs). If the default
 bundle file isn't adequate, you can specify an alternate file
 using the --cacert option.
If this HTTPS server uses a certificate signed by a CA represented in
 the bundle, the certificate verification probably failed due to a
 problem with the certificate (it might be expired, or the name might
 not match the domain name in the URL).
If you'd like to turn off curl's verification of the certificate, use
 the -k (or --insecure) option.
</code></pre></div><p>说是证书过期，浏览器查看一下果然过期了几天，可能是浏览器不会那么频繁的验证，在此前另外一台装好的机器上curl没问题，估计是首次访问才验证，后续就验证了或者定期检查，</p> <p>通知api提供商，提供商迅速更新了证书，浏览器看了下，确实更新了，postman也能访问，但是这台机器上仍然无法访问，curl也是一样的提示，</p> <p>根据curl的提示查看</p> <p>https://curl.se/docs/sslcerts.html</p> <ul><li><code>openssl s_client -showcerts -servername server -connect server:443 &gt; cacert.pem</code></li> <li>type &quot;quit&quot;, followed by the &quot;ENTER&quot; key</li> <li>The certificate will have &quot;BEGIN CERTIFICATE&quot; and &quot;END CERTIFICATE&quot; markers.</li> <li>If you want to see the data in the certificate, you can do: &quot;openssl x509 -inform PEM -in certfile -text -out certdata&quot; where certfile is the cert you extracted from logfile. Look in certdata.</li></ul> <p>结合这个帖子 https://stackoverflow.com/questions/24992976/openssl-telling-certificate-has-expired-when-it-has-not</p> <div class="language- extra-class"><pre class="language-text"><code>openssl s_client -showcerts -servername api.compass-ft.com -connect api.compass-ft.com:443
CONNECTED(00000003)
depth=3 O = Digital Signature Trust Co., CN = DST Root CA X3
verify error:num=10:certificate has expired
notAfter=Sep 30 14:01:15 2021 GMT
verify return:0
---
Certificate chain
 0 s:/CN=api.compass-ft.com
   i:/C=US/O=Let's Encrypt/CN=R3
-----BEGIN CERTIFICATE-----

#openssl s_client -servername api.compass-ft.com -connect api.compass-ft.com:443
CONNECTED(00000003)
depth=3 O = Digital Signature Trust Co., CN = DST Root CA X3
verify error:num=10:certificate has expired
notAfter=Sep 30 14:01:15 2021 GMT
verify return:0
---
Certificate chain
 0 s:/CN=api.compass-ft.com
   i:/C=US/O=Let's Encrypt/CN=R3
 1 s:/C=US/O=Let's Encrypt/CN=R3
   i:/C=US/O=Internet Security Research Group/CN=ISRG Root X1
 2 s:/C=US/O=Internet Security Research Group/CN=ISRG Root X1
   i:/O=Digital Signature Trust Co./CN=DST Root CA X3
---
Server certificate
-----BEGIN CERTIFICATE-----

openssl s_client -servername api.compass-ft.com -connect api.compass-ft.com:443 2&gt;/dev/null | openssl x509 -noout -dates
</code></pre></div><p>又从浏览器观察了这三级的证书链，都是正常的，所以怀疑是os上的根证书链中哪个可能过期了但一直没更新！</p> <div class="language- extra-class"><pre class="language-text"><code>]#find / -type d -name &quot;certs&quot;
/etc/pki/CA/certs
/etc/pki/tls/certs
/etc/openldap/certs

#openssl x509 -in ca-bundle.crt -text

openssl x509 -enddate -noout -in


#curl -v https://api.compass-ft.com/v1/indexes/
* About to connect() to api.compass-ft.com port 443 (#0)
*   Trying 54.216.252.255...
* Connected to api.compass-ft.com (54.216.252.255) port 443 (#0)
* Initializing NSS with certpath: sql:/etc/pki/nssdb
*   CAfile: /etc/pki/tls/certs/ca-bundle.crt
  CApath: none
* Server certificate:
*       subject: CN=api.compass-ft.com
*       start date: Dec 09 23:25:14 2021 GMT
*       expire date: Mar 09 23:25:13 2022 GMT
*       common name: api.compass-ft.com
*       issuer: CN=R3,O=Let's Encrypt,C=US
* NSS error -8162 (SEC_ERROR_EXPIRED_ISSUER_CERTIFICATE)
* The certificate issuer's certificate has expired.  Check your system date and time.
* Closing connection 0
curl: (60) The certificate issuer's certificate has expired.  Check your system date and time.
More details here: http://curl.haxx.se/docs/sslcerts.html

curl performs SSL certificate verification by default, using a &quot;bundle&quot;
 of Certificate Authority (CA) public keys (CA certs). If the default
 bundle file isn't adequate, you can specify an alternate file
 using the --cacert option.
If this HTTPS server uses a certificate signed by a CA represented in
 the bundle, the certificate verification probably failed due to a
 problem with the certificate (it might be expired, or the name might
 not match the domain name in the URL).
If you'd like to turn off curl's verification of the certificate, use
 the -k (or --insecure) option.

</code></pre></div><p>搜索得知：</p> <p><em>For TLS certificates issued by Let’s Encrypt, the root certificate (DST Root CA X3) in the default chain expires on</em> ***September 30, 2021***<em>.</em></p> <p>https://blog.devgenius.io/rhel-centos-7-fix-for-lets-encrypt-change-8af2de587fe4</p> <p>插曲：开始还一度怀疑是不是os支持的tls Protocol跟api服务商支持的不同</p> <div class="language- extra-class"><pre class="language-text"><code>openssl ciphers -v | awk '{print $2}' | sort | uniq
</code></pre></div><h3 id="jdk版本bug导致handshake失败"><a href="#jdk版本bug导致handshake失败" class="header-anchor">#</a> jdk版本bug导致Handshake失败</h3> <p>跟前面一样dev上可以，生产上失败，错误输出也一样</p> <div class="language- extra-class"><pre class="language-text"><code>2022-01-27 17:45:29.928 ^[[31mERROR^[[m ^[[35m25521GG^[[m [scheduling-1] ^[[36mc.a.m.f.u.HttpClientUtil^[[m : Get Exception Remote host closed connection during handshake

javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake
        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:980)
        at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1363)
        at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:735)
        at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:123)
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
        at org.apache.commons.httpclient.HttpConnection.flushRequestOutputStream(HttpConnection.java:828)
        at org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2116)
        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096)
        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)
        at com.lyhistory.middleware.fundingrate.util.HttpClientUtil.sendGet(HttpClientUtil.java:64)
        at com.lyhistory.middleware.fundingrate.service.impl.CompassftServiceImpl.sendRequest(CompassftServiceImpl.java:25)
        at com.lyhistory.middleware.fundingrate.job.CompassftJob.crawlData(CompassftJob.java:33)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:497)
        at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
        at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
Caused by: java.io.EOFException: SSL peer shut down incorrectly
        at sun.security.ssl.InputRecord.read(InputRecord.java:505)
        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:961)
        ... 28 more

</code></pre></div><p>通过这个帖子的提示https://stackoverflow.com/questions/21245796/javax-net-ssl-sslhandshakeexception-remote-host-closed-connection-during-handsh</p> <h4 id="进行debug输出更详细的handshake握手内容"><a href="#进行debug输出更详细的handshake握手内容" class="header-anchor">#</a> 进行debug输出更详细的handshake握手内容</h4> <div class="language- extra-class"><pre class="language-text"><code>[root@sgtcs-mdw-v02 funding-rate-datasource]# java -jar -Djavax.net.debug=all funding-rate-datasource.jar
2022-01-28 09:11:49,757 main INFO Log4j appears to be running in a Servlet environment, but there's no log4j-web module available. If you want better web container support, please add the log4j-web JAR to your web archive or server lib directory.
2022-01-28 09:11:49,766 main INFO jar:file:/opt/funding-rate-datasource/funding-rate-datasource.jar!/BOOT-INF/classes!/log4j2.yml does not support dynamic reconfiguration

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.5)

2022-01-28 09:11:49.871  INFO 23127GG [kground-preinit] o.h.v.i.u.Version : HV000001: Hibernate Validator 6.1.7.Final
2022-01-28 09:11:49.918  INFO 23127GG [main] o.s.b.StartupInfoLogger : Starting FundingRateMain v0.0.1-SNAPSHOT using Java 1.8.0_40 on sgtcs-mdw-v02 with PID 23127 (/opt/funding-rate-datasource/funding-rate-datasource.jar started by root in /opt/funding-rate-datasource)
2022-01-28 09:11:49.926  INFO 23127GG [main] o.s.b.SpringApplication : The following profiles are active: datasource
2022-01-28 09:11:51.084  INFO 23127GG [main] o.s.b.w.e.t.TomcatWebServer : Tomcat initialized with port(s): 10999 (http)
2022-01-28 09:11:51.109  INFO 23127GG [main] o.a.j.l.DirectJDKLog : Initializing ProtocolHandler [&quot;http-nio-10999&quot;]
2022-01-28 09:11:51.110  INFO 23127GG [main] o.a.j.l.DirectJDKLog : Starting service [Tomcat]
2022-01-28 09:11:51.110  INFO 23127GG [main] o.a.j.l.DirectJDKLog : Starting Servlet engine: [Apache Tomcat/9.0.45]
2022-01-28 09:11:51.170  INFO 23127GG [main] o.a.j.l.DirectJDKLog : Initializing Spring embedded WebApplicationContext
2022-01-28 09:11:51.171  INFO 23127GG [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1197 ms
2022-01-28 09:11:51.658  INFO 23127GG [main] o.s.s.c.ExecutorConfigurationSupport : Initializing ExecutorService 'applicationTaskExecutor'
2022-01-28 09:11:51.853  INFO 23127GG [main] o.s.s.c.ExecutorConfigurationSupport : Initializing ExecutorService 'taskScheduler'
2022-01-28 09:11:51.884  INFO 23127GG [main] o.a.j.l.DirectJDKLog : Starting ProtocolHandler [&quot;http-nio-10999&quot;]
2022-01-28 09:11:51.907  INFO 23127GG [main] o.s.b.w.e.t.TomcatWebServer : Tomcat started on port(s): 10999 (http) with context path '/middleware'
2022-01-28 09:11:51.922  INFO 23127GG [scheduling-1] c.a.m.f.j.CompassftJob : CompassftJob crawlData, start time is 09:11:51
2022-01-28 09:11:51.924  INFO 23127GG [main] o.s.b.StartupInfoLogger : Started FundingRateMain in 2.449 seconds (JVM running for 3.494)
keyStore is :
keyStore type is : jks
keyStore provider is :
init keystore
init keymanager of type SunX509
trustStore is: /apps/3rd-party/java-se-8u40-ri/jre/lib/security/cacerts
trustStore type is : jks
trustStore provider is :
init truststore
trigger seeding of SecureRandom
done seeding SecureRandom
Ignoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_GCM_SHA384
Ignoring unavailable cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_GCM_SHA384
Ignoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
Ignoring unavailable cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256
Ignoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384
Ignoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_RSA_WITH_AES_256_GCM_SHA384
Ignoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384
Ignoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256
Ignoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256
Ignoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
Allow unsafe renegotiation: false
Allow legacy hello messages: true
Is initial handshake: true
Is secure renegotiation: false
scheduling-1, setSoTimeout(0) called
scheduling-1, setSoTimeout(60000) called
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256 for TLSv1.1
%% No cached client session
*** ClientHello, TLSv1.2
RandomCookie:  GMT: 1626554840 bytes = { 233, 246, 57, 123, 111, 81, 50, 152, 19, 185, 227, 133, 240, 86, 55, 133, 151, 4, 29, 231, 232, 156, 23, 144, 11, 15, 125, 61 }
Session ID:  {}
Cipher Suites: [TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_ECDSA_WITH_RC4_128_SHA, TLS_ECDHE_RSA_WITH_RC4_128_SHA, SSL_RSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_RC4_128_SHA, TLS_ECDH_RSA_WITH_RC4_128_SHA, SSL_RSA_WITH_RC4_128_MD5, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]
Compression Methods:  { 0 }
Extension elliptic_curves, curve names: {secp256r1, sect163k1, sect163r2, secp192r1, secp224r1, sect233k1, sect233r1, sect283k1, sect283r1, secp384r1, sect409k1, sect409r1, secp521r1, sect571k1, sect571r1, secp160k1, secp160r1, secp160r2, sect163r1, secp192k1, sect193r1, sect193r2, secp224k1, sect239k1, secp256k1}
Extension ec_point_formats, formats: [uncompressed]
Extension signature_algorithms, signature_algorithms: SHA512withECDSA, SHA512withRSA, SHA384withECDSA, SHA384withRSA, SHA256withECDSA, SHA256withRSA, SHA224withECDSA, SHA224withRSA, SHA1withECDSA, SHA1withRSA, SHA1withDSA, MD5withRSA
***
[write] MD5 and SHA1 hashes:  len = 207
0000: 01 00 00 CB 03 03 61 F3   42 D8 E9 F6 39 7B 6F 51  ......a.B...9.oQ
0010: 32 98 13 B9 E3 85 F0 56   37 85 97 04 1D E7 E8 9C  2......V7.......
0020: 17 90 0B 0F 7D 3D 00 00   46 C0 23 C0 27 00 3C C0  .....=..F.#.'.&lt;.
0030: 25 C0 29 00 67 00 40 C0   09 C0 13 00 2F C0 04 C0  %.).g.@...../...
0040: 0E 00 33 00 32 C0 2B C0   2F 00 9C C0 2D C0 31 00  ..3.2.+./...-.1.
0050: 9E 00 A2 C0 08 C0 12 00   0A C0 03 C0 0D 00 16 00  ................
0060: 13 C0 07 C0 11 00 05 C0   02 C0 0C 00 04 00 FF 01  ................
0070: 00 00 5C 00 0A 00 34 00   32 00 17 00 01 00 03 00  ..\...4.2.......
0080: 13 00 15 00 06 00 07 00   09 00 0A 00 18 00 0B 00  ................
0090: 0C 00 19 00 0D 00 0E 00   0F 00 10 00 11 00 02 00  ................
00A0: 12 00 04 00 05 00 14 00   08 00 16 00 0B 00 02 01  ................
00B0: 00 00 0D 00 1A 00 18 06   03 06 01 05 03 05 01 04  ................
00C0: 03 04 01 03 03 03 01 02   03 02 01 02 02 01 01     ...............
scheduling-1, WRITE: TLSv1.2 Handshake, length = 207
[Raw write]: length = 212
0000: 16 03 03 00 CF 01 00 00   CB 03 03 61 F3 42 D8 E9  ...........a.B..
0010: F6 39 7B 6F 51 32 98 13   B9 E3 85 F0 56 37 85 97  .9.oQ2......V7..
0020: 04 1D E7 E8 9C 17 90 0B   0F 7D 3D 00 00 46 C0 23  ..........=..F.#
0030: C0 27 00 3C C0 25 C0 29   00 67 00 40 C0 09 C0 13  .'.&lt;.%.).g.@....
0040: 00 2F C0 04 C0 0E 00 33   00 32 C0 2B C0 2F 00 9C  ./.....3.2.+./..
0050: C0 2D C0 31 00 9E 00 A2   C0 08 C0 12 00 0A C0 03  .-.1............
0060: C0 0D 00 16 00 13 C0 07   C0 11 00 05 C0 02 C0 0C  ................
0070: 00 04 00 FF 01 00 00 5C   00 0A 00 34 00 32 00 17  .......\...4.2..
0080: 00 01 00 03 00 13 00 15   00 06 00 07 00 09 00 0A  ................
0090: 00 18 00 0B 00 0C 00 19   00 0D 00 0E 00 0F 00 10  ................
00A0: 00 11 00 02 00 12 00 04   00 05 00 14 00 08 00 16  ................
00B0: 00 0B 00 02 01 00 00 0D   00 1A 00 18 06 03 06 01  ................
00C0: 05 03 05 01 04 03 04 01   03 03 03 01 02 03 02 01  ................
00D0: 02 02 01 01                                        ....
scheduling-1, received EOFException: error
scheduling-1, handling exception: javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake
scheduling-1, SEND TLSv1.2 ALERT:  fatal, description = handshake_failure
scheduling-1, WRITE: TLSv1.2 Alert, length = 2
[Raw write]: length = 7
0000: 15 03 03 00 02 02 28                               ......(
scheduling-1, called closeSocket()
scheduling-1, called close()
scheduling-1, called closeInternal(true)
scheduling-1, called close()
scheduling-1, called closeInternal(true)
scheduling-1, called close()
scheduling-1, called closeInternal(true)
2022-01-28 09:11:52.563 ERROR 23127GG [scheduling-1] c.a.m.f.u.HttpClientUtil : Get Exception Remote host closed connection during handshake

javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake
        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:980)
        at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1363)
        at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:735)
        at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:123)
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
        at org.apache.commons.httpclient.HttpConnection.flushRequestOutputStream(HttpConnection.java:828)
        at org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2116)
        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096)
        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)
        at com.lyhistory.middleware.fundingrate.util.HttpClientUtil.sendGet(HttpClientUtil.java:64)
        at com.lyhistory.middleware.fundingrate.service.impl.CompassftServiceImpl.sendRequest(CompassftServiceImpl.java:25)
        at com.lyhistory.middleware.fundingrate.job.CompassftJob.crawlData(CompassftJob.java:33)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:497)
        at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
        at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
Caused by: java.io.EOFException: SSL peer shut down incorrectly
        at sun.security.ssl.InputRecord.read(InputRecord.java:505)
        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:961)
        ... 28 more

2022-01-28 09:11:52.565  WARN 23127GG [scheduling-1] c.a.m.f.s.i.CompassftServiceImpl : Failed http request to https://api.compass-ft.com/v1/indexes/CCRTBTC/history?access_token=
2022-01-28 09:11:52.565  INFO 23127GG [scheduling-1] c.a.m.f.j.CompassftJob : CompassftJob crawlData, end time is 09:11:52
^C2022-01-28 09:11:57.032  INFO 23127GG [extShutdownHook] o.s.s.c.ExecutorConfigurationSupport : Shutting down ExecutorService 'taskScheduler'
2022-01-28 09:11:57.033  INFO 23127GG [extShutdownHook] o.s.s.c.ExecutorConfigurationSupport : Shutting down ExecutorService 'applicationTaskExecutor'
2022-01-28 09:11:57.034  INFO 23127GG [extShutdownHook] c.a.d.p.DruidDataSource : {dataSource-0} closing ...

</code></pre></div><h4 id="对比下dev环境成功的输出"><a href="#对比下dev环境成功的输出" class="header-anchor">#</a> 对比下dev环境成功的输出</h4> <div class="language- extra-class"><pre class="language-text"><code>[root@os-node3 funding-rate-datasource]# java -jar -Djavax.net.debug=all funding-rate-datasource.jar
2022-01-28 10:45:45,321 main INFO Log4j appears to be running in a Servlet environment, but there's no log4j-web module available. If you want better web container support, please add the log4j-web JAR to your web archive or server lib directory.
2022-01-28 10:45:45,337 main INFO jar:file:/opt/funding-rate-datasource/funding-rate-datasource.jar!/BOOT-INF/classes!/log4j2.yml does not support dynamic reconfiguration

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.5)

2022-01-28 10:45:45.398  INFO 7939GG [kground-preinit] o.h.v.i.u.Version : HV000001: Hibernate Validator 6.1.7.Final
2022-01-28 10:45:45.449  INFO 7939GG [main] o.s.b.StartupInfoLogger : Starting FundingRateMain v0.0.1-SNAPSHOT using Java 1.8.0_191 on os-node3 with PID 7939 (/opt/funding-rate-datasource/funding-rate-datasource.jar started by root in /opt/funding-rate-datasource)
2022-01-28 10:45:45.453  INFO 7939GG [main] o.s.b.SpringApplication : The following profiles are active: datasource
2022-01-28 10:45:46.738  INFO 7939GG [main] o.s.b.w.e.t.TomcatWebServer : Tomcat initialized with port(s): 10999 (http)
2022-01-28 10:45:46.759  INFO 7939GG [main] o.a.j.l.DirectJDKLog : Initializing ProtocolHandler [&quot;http-nio-10999&quot;]
2022-01-28 10:45:46.759  INFO 7939GG [main] o.a.j.l.DirectJDKLog : Starting service [Tomcat]
2022-01-28 10:45:46.760  INFO 7939GG [main] o.a.j.l.DirectJDKLog : Starting Servlet engine: [Apache Tomcat/9.0.45]
2022-01-28 10:45:46.814  INFO 7939GG [main] o.a.j.l.DirectJDKLog : Initializing Spring embedded WebApplicationContext
2022-01-28 10:45:46.815  INFO 7939GG [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1311 ms
2022-01-28 10:45:47.171  INFO 7939GG [main] o.s.s.c.ExecutorConfigurationSupport : Initializing ExecutorService 'applicationTaskExecutor'
2022-01-28 10:45:47.355  INFO 7939GG [main] o.s.s.c.ExecutorConfigurationSupport : Initializing ExecutorService 'taskScheduler'
2022-01-28 10:45:47.383  INFO 7939GG [main] o.a.j.l.DirectJDKLog : Starting ProtocolHandler [&quot;http-nio-10999&quot;]
2022-01-28 10:45:47.402  INFO 7939GG [main] o.s.b.w.e.t.TomcatWebServer : Tomcat started on port(s): 10999 (http) with context path '/middleware'
2022-01-28 10:45:47.414  INFO 7939GG [scheduling-1] c.a.m.f.j.CompassftJob : CompassftJob crawlData, start time is 10:45:47
2022-01-28 10:45:47.417  INFO 7939GG [main] o.s.b.StartupInfoLogger : Started FundingRateMain in 2.496 seconds (JVM running for 8.733)
Ignoring disabled cipher suite: SSL_RSA_WITH_DES_CBC_SHA
Ignoring disabled cipher suite: SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA
Ignoring disabled cipher suite: TLS_KRB5_WITH_DES_CBC_MD5
Ignoring disabled cipher suite: SSL_DH_anon_EXPORT_WITH_RC4_40_MD5
Ignoring disabled cipher suite: SSL_DH_anon_WITH_DES_CBC_SHA
Ignoring disabled cipher suite: TLS_KRB5_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: TLS_KRB5_WITH_DES_CBC_SHA
Ignoring disabled cipher suite: TLS_KRB5_EXPORT_WITH_DES_CBC_40_MD5
Ignoring disabled cipher suite: TLS_ECDHE_ECDSA_WITH_RC4_128_SHA
Ignoring disabled cipher suite: SSL_DHE_RSA_WITH_DES_CBC_SHA
Ignoring disabled cipher suite: TLS_KRB5_WITH_3DES_EDE_CBC_MD5
Ignoring disabled cipher suite: SSL_DH_anon_WITH_RC4_128_MD5
Ignoring disabled cipher suite: SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: SSL_DH_anon_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: SSL_RSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA
Ignoring disabled cipher suite: TLS_ECDH_anon_WITH_RC4_128_SHA
Ignoring disabled cipher suite: SSL_DHE_DSS_WITH_DES_CBC_SHA
Ignoring disabled cipher suite: TLS_KRB5_EXPORT_WITH_RC4_40_SHA
Ignoring disabled cipher suite: SSL_RSA_EXPORT_WITH_DES40_CBC_SHA
Ignoring disabled cipher suite: TLS_KRB5_WITH_RC4_128_SHA
Ignoring disabled cipher suite: SSL_RSA_EXPORT_WITH_RC4_40_MD5
Ignoring disabled cipher suite: TLS_KRB5_EXPORT_WITH_DES_CBC_40_SHA
Ignoring disabled cipher suite: TLS_KRB5_EXPORT_WITH_RC4_40_MD5
Ignoring disabled cipher suite: TLS_ECDH_ECDSA_WITH_RC4_128_SHA
Ignoring disabled cipher suite: TLS_KRB5_WITH_RC4_128_MD5
Ignoring disabled cipher suite: TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: SSL_RSA_WITH_RC4_128_SHA
Ignoring disabled cipher suite: TLS_ECDH_anon_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: TLS_ECDH_RSA_WITH_RC4_128_SHA
Ignoring disabled cipher suite: SSL_DH_anon_EXPORT_WITH_DES40_CBC_SHA
Ignoring disabled cipher suite: SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: TLS_ECDHE_RSA_WITH_RC4_128_SHA
Ignoring disabled cipher suite: SSL_RSA_WITH_RC4_128_MD5
Ignoring disabled cipher suite: TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: SSL_RSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: SSL_RSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA
Ignoring disabled cipher suite: SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA
trustStore is: /etc/pki/java/cacerts
trustStore type is : jks
trustStore provider is : 
init truststore
adding as trusted cert:
  Subject: CN=Hongkong Post Root CA 1, O=Hongkong Post, C=HK
  Issuer:  CN=Hongkong Post Root CA 1, O=Hongkong Post, C=HK
  Algorithm: RSA; Serial number: 0x3e8
  Valid from Thu May 15 13:13:14 SGT 2003 until Mon May 15 12:52:29 SGT 2023

adding as trusted cert:
  Subject: CN=SecureTrust CA, O=SecureTrust Corporation, C=US
  Issuer:  CN=SecureTrust CA, O=SecureTrust Corporation, C=US
  Algorithm: RSA; Serial number: 0xcf08e5c0816a5ad427ff0eb271859d0
  Valid from Wed Nov 08 03:31:18 SGT 2006 until Tue Jan 01 03:40:55 SGT 2030

adding as trusted cert:
  Subject: CN=Entrust Root Certification Authority - EC1, OU=&quot;(c) 2012 Entrust, Inc. - for authorized use only&quot;, OU=See www.entrust.net/legal-terms, O=&quot;Entrust, Inc.&quot;, C=US
  Issuer:  CN=Entrust Root Certification Authority - EC1, OU=&quot;(c) 2012 Entrust, Inc. - for authorized use only&quot;, OU=See www.entrust.net/legal-terms, O=&quot;Entrust, Inc.&quot;, C=US
  Algorithm: EC; Serial number: 0xa68b79290000000050d091f9
  Valid from Tue Dec 18 23:25:36 SGT 2012 until Fri Dec 18 23:55:36 SGT 2037

adding as trusted cert:
  Subject: CN=DigiCert Global Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
  Issuer:  CN=DigiCert Global Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
  Algorithm: RSA; Serial number: 0x83be056904246b1a1756ac95991c74a
  Valid from Fri Nov 10 08:00:00 SGT 2006 until Mon Nov 10 08:00:00 SGT 2031

adding as trusted cert:
  Subject: OU=Security Communication RootCA1, O=SECOM Trust.net, C=JP
  Issuer:  OU=Security Communication RootCA1, O=SECOM Trust.net, C=JP
  Algorithm: RSA; Serial number: 0x0
  Valid from Tue Sep 30 12:20:49 SGT 2003 until Sat Sep 30 12:20:49 SGT 2023

adding as trusted cert:
  Subject: CN=QuoVadis Root CA 2 G3, O=QuoVadis Limited, C=BM
  Issuer:  CN=QuoVadis Root CA 2 G3, O=QuoVadis Limited, C=BM
  Algorithm: RSA; Serial number: 0x445734245b81899b35f2ceb82b3b5ba726f07528
  Valid from Fri Jan 13 02:59:32 SGT 2012 until Mon Jan 13 02:59:32 SGT 2042

adding as trusted cert:
  Subject: CN=Hellenic Academic and Research Institutions RootCA 2015, O=Hellenic Academic and Research Institutions Cert. Authority, L=Athens, C=GR
  Issuer:  CN=Hellenic Academic and Research Institutions RootCA 2015, O=Hellenic Academic and Research Institutions Cert. Authority, L=Athens, C=GR
  Algorithm: RSA; Serial number: 0x0
  Valid from Tue Jul 07 18:11:21 SGT 2015 until Sat Jun 30 18:11:21 SGT 2040

adding as trusted cert:
  Subject: CN=DigiCert Trusted Root G4, OU=www.digicert.com, O=DigiCert Inc, C=US
  Issuer:  CN=DigiCert Trusted Root G4, OU=www.digicert.com, O=DigiCert Inc, C=US
  Algorithm: RSA; Serial number: 0x59b1b579e8e2132e23907bda777755c
  Valid from Thu Aug 01 20:00:00 SGT 2013 until Fri Jan 15 20:00:00 SGT 2038

adding as trusted cert:
  Subject: CN=Hellenic Academic and Research Institutions ECC RootCA 2015, O=Hellenic Academic and Research Institutions Cert. Authority, L=Athens, C=GR
  Issuer:  CN=Hellenic Academic and Research Institutions ECC RootCA 2015, O=Hellenic Academic and Research Institutions Cert. Authority, L=Athens, C=GR
  Algorithm: EC; Serial number: 0x0
  Valid from Tue Jul 07 18:37:12 SGT 2015 until Sat Jun 30 18:37:12 SGT 2040

adding as trusted cert:
  Subject: CN=GeoTrust Primary Certification Authority, O=GeoTrust Inc., C=US
  Issuer:  CN=GeoTrust Primary Certification Authority, O=GeoTrust Inc., C=US
  Algorithm: RSA; Serial number: 0x18acb56afd69b6153a636cafdafac4a1
  Valid from Mon Nov 27 08:00:00 SGT 2006 until Thu Jul 17 07:59:59 SGT 2036

adding as trusted cert:
  Subject: CN=OpenTrust Root CA G1, O=OpenTrust, C=FR
  Issuer:  CN=OpenTrust Root CA G1, O=OpenTrust, C=FR
  Algorithm: RSA; Serial number: 0x1120b39055397d7f366d64c2a79f6b638e67
  Valid from Mon May 26 16:45:50 SGT 2014 until Fri Jan 15 08:00:00 SGT 2038

adding as trusted cert:
  Subject: OU=Security Communication RootCA2, O=&quot;SECOM Trust Systems CO.,LTD.&quot;, C=JP
  Issuer:  OU=Security Communication RootCA2, O=&quot;SECOM Trust Systems CO.,LTD.&quot;, C=JP
  Algorithm: RSA; Serial number: 0x0
  Valid from Fri May 29 13:00:39 SGT 2009 until Tue May 29 13:00:39 SGT 2029

adding as trusted cert:
  Subject: OU=ePKI Root Certification Authority, O=&quot;Chunghwa Telecom Co., Ltd.&quot;, C=TW
  Issuer:  OU=ePKI Root Certification Authority, O=&quot;Chunghwa Telecom Co., Ltd.&quot;, C=TW
  Algorithm: RSA; Serial number: 0x15c8bd65475cafb897005ee406d2bc9d
  Valid from Mon Dec 20 10:31:27 SGT 2004 until Wed Dec 20 10:31:27 SGT 2034

adding as trusted cert:
  Subject: CN=AffirmTrust Commercial, O=AffirmTrust, C=US
  Issuer:  CN=AffirmTrust Commercial, O=AffirmTrust, C=US
  Algorithm: RSA; Serial number: 0x7777062726a9b17c
  Valid from Fri Jan 29 22:06:06 SGT 2010 until Tue Dec 31 22:06:06 SGT 2030

adding as trusted cert:
  Subject: CN=Certum Trusted Network CA, OU=Certum Certification Authority, O=Unizeto Technologies S.A., C=PL
  Issuer:  CN=Certum Trusted Network CA, OU=Certum Certification Authority, O=Unizeto Technologies S.A., C=PL
  Algorithm: RSA; Serial number: 0x444c0
  Valid from Wed Oct 22 20:07:37 SGT 2008 until Mon Dec 31 20:07:37 SGT 2029

adding as trusted cert:
  Subject: CN=XRamp Global Certification Authority, O=XRamp Security Services Inc, OU=www.xrampsecurity.com, C=US
  Issuer:  CN=XRamp Global Certification Authority, O=XRamp Security Services Inc, OU=www.xrampsecurity.com, C=US
  Algorithm: RSA; Serial number: 0x50946cec18ead59c4dd597ef758fa0ad
  Valid from Tue Nov 02 01:14:04 SGT 2004 until Mon Jan 01 13:37:19 SGT 2035

adding as trusted cert:
  Subject: CN=EC-ACC, OU=Jerarquia Entitats de Certificacio Catalanes, OU=Vegeu https://www.catcert.net/verarrel (c)03, OU=Serveis Publics de Certificacio, O=Agencia Catalana de Certificacio (NIF Q-0801176-I), C=ES
  Issuer:  CN=EC-ACC, OU=Jerarquia Entitats de Certificacio Catalanes, OU=Vegeu https://www.catcert.net/verarrel (c)03, OU=Serveis Publics de Certificacio, O=Agencia Catalana de Certificacio (NIF Q-0801176-I), C=ES
  Algorithm: RSA; Serial number: 0x-11d4c2142bde21eb579d53fb0c223bff
  Valid from Wed Jan 08 07:00:00 SGT 2003 until Wed Jan 08 06:59:59 SGT 2031

adding as trusted cert:
  Subject: CN=Sonera Class2 CA, O=Sonera, C=FI
  Issuer:  CN=Sonera Class2 CA, O=Sonera, C=FI
  Algorithm: RSA; Serial number: 0x1d
  Valid from Fri Apr 06 15:29:40 SGT 2001 until Tue Apr 06 15:29:40 SGT 2021

adding as trusted cert:
  Subject: CN=GeoTrust Primary Certification Authority - G2, OU=(c) 2007 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US
  Issuer:  CN=GeoTrust Primary Certification Authority - G2, OU=(c) 2007 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US
  Algorithm: EC; Serial number: 0x3cb2f4480a00e2feeb243b5e603ec36b
  Valid from Mon Nov 05 08:00:00 SGT 2007 until Tue Jan 19 07:59:59 SGT 2038

adding as trusted cert:
  Subject: CN=Certinomis - Root CA, OU=0002 433998903, O=Certinomis, C=FR
  Issuer:  CN=Certinomis - Root CA, OU=0002 433998903, O=Certinomis, C=FR
  Algorithm: RSA; Serial number: 0x1
  Valid from Mon Oct 21 17:17:18 SGT 2013 until Fri Oct 21 17:17:18 SGT 2033

adding as trusted cert:
  Subject: CN=COMODO ECC Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB
  Issuer:  CN=COMODO ECC Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB
  Algorithm: EC; Serial number: 0x1f47afaa62007050544c019e9b63992a
  Valid from Thu Mar 06 08:00:00 SGT 2008 until Tue Jan 19 07:59:59 SGT 2038

adding as trusted cert:
  Subject: CN=ISRG Root X1, O=Internet Security Research Group, C=US
  Issuer:  CN=ISRG Root X1, O=Internet Security Research Group, C=US
  Algorithm: RSA; Serial number: 0x8210cfb0d240e3594463e0bb63828b00
  Valid from Thu Jun 04 19:04:38 SGT 2015 until Mon Jun 04 19:04:38 SGT 2035

adding as trusted cert:
  Subject: CN=DigiCert High Assurance EV Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
  Issuer:  CN=DigiCert High Assurance EV Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
  Algorithm: RSA; Serial number: 0x2ac5c266a0b409b8f0b79f2ae462577
  Valid from Fri Nov 10 08:00:00 SGT 2006 until Mon Nov 10 08:00:00 SGT 2031

adding as trusted cert:
  Subject: CN=TrustCor RootCert CA-1, OU=TrustCor Certificate Authority, O=TrustCor Systems S. de R.L., L=Panama City, ST=Panama, C=PA
  Issuer:  CN=TrustCor RootCert CA-1, OU=TrustCor Certificate Authority, O=TrustCor Systems S. de R.L., L=Panama City, ST=Panama, C=PA
  Algorithm: RSA; Serial number: 0xda9bec71f303b019
  Valid from Thu Feb 04 20:32:16 SGT 2016 until Tue Jan 01 01:23:16 SGT 2030

adding as trusted cert:
  Subject: CN=GeoTrust Universal CA, O=GeoTrust Inc., C=US
  Issuer:  CN=GeoTrust Universal CA, O=GeoTrust Inc., C=US
  Algorithm: RSA; Serial number: 0x1
  Valid from Thu Mar 04 13:00:00 SGT 2004 until Sun Mar 04 13:00:00 SGT 2029

adding as trusted cert:
  Subject: CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R3
  Issuer:  CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R3
  Algorithm: RSA; Serial number: 0x4000000000121585308a2
  Valid from Wed Mar 18 18:00:00 SGT 2009 until Sun Mar 18 18:00:00 SGT 2029

adding as trusted cert:
  Subject: CN=GeoTrust Universal CA 2, O=GeoTrust Inc., C=US
  Issuer:  CN=GeoTrust Universal CA 2, O=GeoTrust Inc., C=US
  Algorithm: RSA; Serial number: 0x1
  Valid from Thu Mar 04 13:00:00 SGT 2004 until Sun Mar 04 13:00:00 SGT 2029

adding as trusted cert:
  Subject: CN=Baltimore CyberTrust Root, OU=CyberTrust, O=Baltimore, C=IE
  Issuer:  CN=Baltimore CyberTrust Root, OU=CyberTrust, O=Baltimore, C=IE
  Algorithm: RSA; Serial number: 0x20000b9
  Valid from Sat May 13 02:46:00 SGT 2000 until Tue May 13 07:59:00 SGT 2025

adding as trusted cert:
  Subject: CN=AAA Certificate Services, O=Comodo CA Limited, L=Salford, ST=Greater Manchester, C=GB
  Issuer:  CN=AAA Certificate Services, O=Comodo CA Limited, L=Salford, ST=Greater Manchester, C=GB
  Algorithm: RSA; Serial number: 0x1
  Valid from Thu Jan 01 08:00:00 SGT 2004 until Mon Jan 01 07:59:59 SGT 2029

adding as trusted cert:
  Subject: OU=Starfield Class 2 Certification Authority, O=&quot;Starfield Technologies, Inc.&quot;, C=US
  Issuer:  OU=Starfield Class 2 Certification Authority, O=&quot;Starfield Technologies, Inc.&quot;, C=US
  Algorithm: RSA; Serial number: 0x0
  Valid from Wed Jun 30 01:39:16 SGT 2004 until Fri Jun 30 01:39:16 SGT 2034

adding as trusted cert:
  Subject: CN=OpenTrust Root CA G2, O=OpenTrust, C=FR
  Issuer:  CN=OpenTrust Root CA G2, O=OpenTrust, C=FR
  Algorithm: RSA; Serial number: 0x1120a1691bbfbdb9bd52968f23e848bf2611
  Valid from Mon May 26 08:00:00 SGT 2014 until Fri Jan 15 08:00:00 SGT 2038

adding as trusted cert:
  Subject: CN=VeriSign Class 3 Public Primary Certification Authority - G3, OU=&quot;(c) 1999 VeriSign, Inc. - For authorized use only&quot;, OU=VeriSign Trust Network, O=&quot;VeriSign, Inc.&quot;, C=US
  Issuer:  CN=VeriSign Class 3 Public Primary Certification Authority - G3, OU=&quot;(c) 1999 VeriSign, Inc. - For authorized use only&quot;, OU=VeriSign Trust Network, O=&quot;VeriSign, Inc.&quot;, C=US
  Algorithm: RSA; Serial number: 0x9b7e0649a33e62b9d5ee90487129ef57
  Valid from Fri Oct 01 08:00:00 SGT 1999 until Thu Jul 17 07:59:59 SGT 2036

adding as trusted cert:
  Subject: OU=AC RAIZ FNMT-RCM, O=FNMT-RCM, C=ES
  Issuer:  OU=AC RAIZ FNMT-RCM, O=FNMT-RCM, C=ES
  Algorithm: RSA; Serial number: 0x5d938d306736c8061d1ac754846907
  Valid from Wed Oct 29 23:59:56 SGT 2008 until Tue Jan 01 08:00:00 SGT 2030

adding as trusted cert:
  Subject: CN=GlobalSign Root CA, OU=Root CA, O=GlobalSign nv-sa, C=BE
  Issuer:  CN=GlobalSign Root CA, OU=Root CA, O=GlobalSign nv-sa, C=BE
  Algorithm: RSA; Serial number: 0x40000000001154b5ac394
  Valid from Tue Sep 01 20:00:00 SGT 1998 until Fri Jan 28 20:00:00 SGT 2028

adding as trusted cert:
  Subject: CN=OpenTrust Root CA G3, O=OpenTrust, C=FR
  Issuer:  CN=OpenTrust Root CA G3, O=OpenTrust, C=FR
  Algorithm: EC; Serial number: 0x1120e6f84cfc24b0be0540acda831b34603f
  Valid from Mon May 26 08:00:00 SGT 2014 until Fri Jan 15 08:00:00 SGT 2038

adding as trusted cert:
  Subject: CN=TÜRKTRUST Elektronik Sertifika Hizmet Sağlayıcısı H5, O=TÜRKTRUST Bilgi İletişim ve Bilişim Güvenliği Hizmetleri A.Ş., L=Ankara, C=TR
  Issuer:  CN=TÜRKTRUST Elektronik Sertifika Hizmet Sağlayıcısı H5, O=TÜRKTRUST Bilgi İletişim ve Bilişim Güvenliği Hizmetleri A.Ş., L=Ankara, C=TR
  Algorithm: RSA; Serial number: 0x8e17fe242081
  Valid from Tue Apr 30 16:07:01 SGT 2013 until Fri Apr 28 16:07:01 SGT 2023

adding as trusted cert:
  Subject: CN=AffirmTrust Networking, O=AffirmTrust, C=US
  Issuer:  CN=AffirmTrust Networking, O=AffirmTrust, C=US
  Algorithm: RSA; Serial number: 0x7c4f04391cd4992d
  Valid from Fri Jan 29 22:08:24 SGT 2010 until Tue Dec 31 22:08:24 SGT 2030

adding as trusted cert:
  Subject: CN=TWCA Global Root CA, OU=Root CA, O=TAIWAN-CA, C=TW
  Issuer:  CN=TWCA Global Root CA, OU=Root CA, O=TAIWAN-CA, C=TW
  Algorithm: RSA; Serial number: 0xcbe
  Valid from Wed Jun 27 14:28:33 SGT 2012 until Tue Dec 31 23:59:59 SGT 2030

adding as trusted cert:
  Subject: CN=AffirmTrust Premium, O=AffirmTrust, C=US
  Issuer:  CN=AffirmTrust Premium, O=AffirmTrust, C=US
  Algorithm: RSA; Serial number: 0x6d8c1446b1a60aee
  Valid from Fri Jan 29 22:10:36 SGT 2010 until Mon Dec 31 22:10:36 SGT 2040

adding as trusted cert:
  Subject: O=Government Root Certification Authority, C=TW
  Issuer:  O=Government Root Certification Authority, C=TW
  Algorithm: RSA; Serial number: 0x1f9d595ad72fc20644a5800869e35ef6
  Valid from Thu Dec 05 21:23:33 SGT 2002 until Sun Dec 05 21:23:33 SGT 2032

adding as trusted cert:
  Subject: CN=GeoTrust Primary Certification Authority - G3, OU=(c) 2008 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US
  Issuer:  CN=GeoTrust Primary Certification Authority - G3, OU=(c) 2008 GeoTrust Inc. - For authorized use only, O=GeoTrust Inc., C=US
  Algorithm: RSA; Serial number: 0x15ac6e9419b2794b41f627a9c3180f1f
  Valid from Wed Apr 02 08:00:00 SGT 2008 until Wed Dec 02 07:59:59 SGT 2037

adding as trusted cert:
  Subject: CN=TWCA Root Certification Authority, OU=Root CA, O=TAIWAN-CA, C=TW
  Issuer:  CN=TWCA Root Certification Authority, OU=Root CA, O=TAIWAN-CA, C=TW
  Algorithm: RSA; Serial number: 0x1
  Valid from Thu Aug 28 15:24:33 SGT 2008 until Tue Dec 31 23:59:59 SGT 2030

adding as trusted cert:
  Subject: CN=LuxTrust Global Root 2, O=LuxTrust S.A., C=LU
  Issuer:  CN=LuxTrust Global Root 2, O=LuxTrust S.A., C=LU
  Algorithm: RSA; Serial number: 0xa7ea6df4b449eda6a24859ee6b815d3167fbbb1
  Valid from Thu Mar 05 21:21:57 SGT 2015 until Mon Mar 05 21:21:57 SGT 2035

adding as trusted cert:
  Subject: CN=Chambers of Commerce Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU
  Issuer:  CN=Chambers of Commerce Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU
  Algorithm: RSA; Serial number: 0xa3da427ea4b1aeda
  Valid from Fri Aug 01 20:29:50 SGT 2008 until Sat Jul 31 20:29:50 SGT 2038

adding as trusted cert:
  Subject: C=DE, O=Atos, CN=Atos TrustedRoot 2011
  Issuer:  C=DE, O=Atos, CN=Atos TrustedRoot 2011
  Algorithm: RSA; Serial number: 0x5c33cb622c5fb332
  Valid from Thu Jul 07 22:58:30 SGT 2011 until Wed Jan 01 07:59:59 SGT 2031

adding as trusted cert:
  Subject: CN=SSL.com EV Root Certification Authority RSA R2, O=SSL Corporation, L=Houston, ST=Texas, C=US
  Issuer:  CN=SSL.com EV Root Certification Authority RSA R2, O=SSL Corporation, L=Houston, ST=Texas, C=US
  Algorithm: RSA; Serial number: 0x56b629cd34bc78f6
  Valid from Thu Jun 01 02:14:37 SGT 2017 until Sat May 31 02:14:37 SGT 2042

adding as trusted cert:
  Subject: CN=SwissSign Silver CA - G2, O=SwissSign AG, C=CH
  Issuer:  CN=SwissSign Silver CA - G2, O=SwissSign AG, C=CH
  Algorithm: RSA; Serial number: 0x4f1bd42f54bb2f4b
  Valid from Wed Oct 25 16:32:46 SGT 2006 until Sat Oct 25 16:32:46 SGT 2036

adding as trusted cert:
  Subject: CN=SecureSign RootCA11, O=&quot;Japan Certification Services, Inc.&quot;, C=JP
  Issuer:  CN=SecureSign RootCA11, O=&quot;Japan Certification Services, Inc.&quot;, C=JP
  Algorithm: RSA; Serial number: 0x1
  Valid from Wed Apr 08 12:56:47 SGT 2009 until Sun Apr 08 12:56:47 SGT 2029

adding as trusted cert:
  Subject: CN=SSL.com Root Certification Authority ECC, O=SSL Corporation, L=Houston, ST=Texas, C=US
  Issuer:  CN=SSL.com Root Certification Authority ECC, O=SSL Corporation, L=Houston, ST=Texas, C=US
  Algorithm: EC; Serial number: 0x75e6dfcbc1685ba8
  Valid from Sat Feb 13 02:14:03 SGT 2016 until Wed Feb 13 02:14:03 SGT 2041

adding as trusted cert:
  Subject: CN=Entrust Root Certification Authority - G2, OU=&quot;(c) 2009 Entrust, Inc. - for authorized use only&quot;, OU=See www.entrust.net/legal-terms, O=&quot;Entrust, Inc.&quot;, C=US
  Issuer:  CN=Entrust Root Certification Authority - G2, OU=&quot;(c) 2009 Entrust, Inc. - for authorized use only&quot;, OU=See www.entrust.net/legal-terms, O=&quot;Entrust, Inc.&quot;, C=US
  Algorithm: RSA; Serial number: 0x4a538c28
  Valid from Wed Jul 08 01:25:54 SGT 2009 until Sun Dec 08 01:55:54 SGT 2030

adding as trusted cert:
  Subject: CN=DigiCert Assured ID Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
  Issuer:  CN=DigiCert Assured ID Root CA, OU=www.digicert.com, O=DigiCert Inc, C=US
  Algorithm: RSA; Serial number: 0xce7e0e517d846fe8fe560fc1bf03039
  Valid from Fri Nov 10 08:00:00 SGT 2006 until Mon Nov 10 08:00:00 SGT 2031

adding as trusted cert:
  Subject: OU=Go Daddy Class 2 Certification Authority, O=&quot;The Go Daddy Group, Inc.&quot;, C=US
  Issuer:  OU=Go Daddy Class 2 Certification Authority, O=&quot;The Go Daddy Group, Inc.&quot;, C=US
  Algorithm: RSA; Serial number: 0x0
  Valid from Wed Jun 30 01:06:20 SGT 2004 until Fri Jun 30 01:06:20 SGT 2034

adding as trusted cert:
  Subject: CN=TrustCor RootCert CA-2, OU=TrustCor Certificate Authority, O=TrustCor Systems S. de R.L., L=Panama City, ST=Panama, C=PA
  Issuer:  CN=TrustCor RootCert CA-2, OU=TrustCor Certificate Authority, O=TrustCor Systems S. de R.L., L=Panama City, ST=Panama, C=PA
  Algorithm: RSA; Serial number: 0x25a1dfca33cb5902
  Valid from Thu Feb 04 20:32:23 SGT 2016 until Mon Jan 01 01:26:39 SGT 2035

adding as trusted cert:
  Subject: CN=TUBITAK Kamu SM SSL Kok Sertifikasi - Surum 1, OU=Kamu Sertifikasyon Merkezi - Kamu SM, O=Turkiye Bilimsel ve Teknolojik Arastirma Kurumu - TUBITAK, L=Gebze - Kocaeli, C=TR
  Issuer:  CN=TUBITAK Kamu SM SSL Kok Sertifikasi - Surum 1, OU=Kamu Sertifikasyon Merkezi - Kamu SM, O=Turkiye Bilimsel ve Teknolojik Arastirma Kurumu - TUBITAK, L=Gebze - Kocaeli, C=TR
  Algorithm: RSA; Serial number: 0x1
  Valid from Mon Nov 25 16:25:55 SGT 2013 until Sun Oct 25 16:25:55 SGT 2043

adding as trusted cert:
  Subject: CN=Secure Global CA, O=SecureTrust Corporation, C=US
  Issuer:  CN=Secure Global CA, O=SecureTrust Corporation, C=US
  Algorithm: RSA; Serial number: 0x75622a4e8d48a894df413c8f0f8eaa5
  Valid from Wed Nov 08 03:42:28 SGT 2006 until Tue Jan 01 03:52:06 SGT 2030

adding as trusted cert:
  Subject: CN=AddTrust External CA Root, OU=AddTrust External TTP Network, O=AddTrust AB, C=SE
  Issuer:  CN=AddTrust External CA Root, OU=AddTrust External TTP Network, O=AddTrust AB, C=SE
  Algorithm: RSA; Serial number: 0x1
  Valid from Tue May 30 18:48:38 SGT 2000 until Sat May 30 18:48:38 SGT 2020

adding as trusted cert:
  Subject: CN=T-TeleSec GlobalRoot Class 3, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE
  Issuer:  CN=T-TeleSec GlobalRoot Class 3, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE
  Algorithm: RSA; Serial number: 0x1
  Valid from Wed Oct 01 18:29:56 SGT 2008 until Sun Oct 02 07:59:59 SGT 2033

adding as trusted cert:
  Subject: CN=DigiCert Global Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US
  Issuer:  CN=DigiCert Global Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US
  Algorithm: EC; Serial number: 0x55556bcf25ea43535c3a40fd5ab4572
  Valid from Thu Aug 01 20:00:00 SGT 2013 until Fri Jan 15 20:00:00 SGT 2038

adding as trusted cert:
  Subject: CN=TrustCor ECA-1, OU=TrustCor Certificate Authority, O=TrustCor Systems S. de R.L., L=Panama City, ST=Panama, C=PA
  Issuer:  CN=TrustCor ECA-1, OU=TrustCor Certificate Authority, O=TrustCor Systems S. de R.L., L=Panama City, ST=Panama, C=PA
  Algorithm: RSA; Serial number: 0x84822c5f1c62d040
  Valid from Thu Feb 04 20:32:33 SGT 2016 until Tue Jan 01 01:28:07 SGT 2030

adding as trusted cert:
  Subject: CN=Class 2 Primary CA, O=Certplus, C=FR
  Issuer:  CN=Class 2 Primary CA, O=Certplus, C=FR
  Algorithm: RSA; Serial number: 0x85bd4bf3d8dae369f694d75fc3a54423
  Valid from Thu Jul 08 01:05:00 SGT 1999 until Sun Jul 07 07:59:59 SGT 2019

adding as trusted cert:
  Subject: CN=OISTE WISeKey Global Root GA CA, OU=OISTE Foundation Endorsed, OU=Copyright (c) 2005, O=WISeKey, C=CH
  Issuer:  CN=OISTE WISeKey Global Root GA CA, OU=OISTE Foundation Endorsed, OU=Copyright (c) 2005, O=WISeKey, C=CH
  Algorithm: RSA; Serial number: 0x413d72c7f46b1f81437df1d22854df9a
  Valid from Mon Dec 12 00:03:44 SGT 2005 until Sat Dec 12 00:09:51 SGT 2037

adding as trusted cert:
  Subject: CN=GeoTrust Global CA, O=GeoTrust Inc., C=US
  Issuer:  CN=GeoTrust Global CA, O=GeoTrust Inc., C=US
  Algorithm: RSA; Serial number: 0x23456
  Valid from Tue May 21 12:00:00 SGT 2002 until Sat May 21 12:00:00 SGT 2022

adding as trusted cert:
  Subject: CN=Network Solutions Certificate Authority, O=Network Solutions L.L.C., C=US
  Issuer:  CN=Network Solutions Certificate Authority, O=Network Solutions L.L.C., C=US
  Algorithm: RSA; Serial number: 0x57cb336fc25c16e6471617e3903168e0
  Valid from Fri Dec 01 08:00:00 SGT 2006 until Tue Jan 01 07:59:59 SGT 2030

adding as trusted cert:
  Subject: CN=CFCA EV ROOT, O=China Financial Certification Authority, C=CN
  Issuer:  CN=CFCA EV ROOT, O=China Financial Certification Authority, C=CN
  Algorithm: RSA; Serial number: 0x184accd6
  Valid from Wed Aug 08 11:07:01 SGT 2012 until Mon Dec 31 11:07:01 SGT 2029

adding as trusted cert:
  Subject: CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R5
  Issuer:  CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R5
  Algorithm: EC; Serial number: 0x605949e0262ebb55f90a778a71f94ad86c
  Valid from Tue Nov 13 08:00:00 SGT 2012 until Tue Jan 19 11:14:07 SGT 2038

adding as trusted cert:
  Subject: CN=Hellenic Academic and Research Institutions RootCA 2011, O=Hellenic Academic and Research Institutions Cert. Authority, C=GR
  Issuer:  CN=Hellenic Academic and Research Institutions RootCA 2011, O=Hellenic Academic and Research Institutions Cert. Authority, C=GR
  Algorithm: RSA; Serial number: 0x0
  Valid from Tue Dec 06 21:49:52 SGT 2011 until Mon Dec 01 21:49:52 SGT 2031

adding as trusted cert:
  Subject: CN=Certum Trusted Network CA 2, OU=Certum Certification Authority, O=Unizeto Technologies S.A., C=PL
  Issuer:  CN=Certum Trusted Network CA 2, OU=Certum Certification Authority, O=Unizeto Technologies S.A., C=PL
  Algorithm: RSA; Serial number: 0x21d6d04a4f250fc93237fcaa5e128de9
  Valid from Thu Oct 06 16:39:56 SGT 2011 until Sat Oct 06 16:39:56 SGT 2046

adding as trusted cert:
  Subject: CN=Starfield Root Certificate Authority - G2, O=&quot;Starfield Technologies, Inc.&quot;, L=Scottsdale, ST=Arizona, C=US
  Issuer:  CN=Starfield Root Certificate Authority - G2, O=&quot;Starfield Technologies, Inc.&quot;, L=Scottsdale, ST=Arizona, C=US
  Algorithm: RSA; Serial number: 0x0
  Valid from Tue Sep 01 08:00:00 SGT 2009 until Fri Jan 01 07:59:59 SGT 2038

adding as trusted cert:
  Subject: CN=IdenTrust Public Sector Root CA 1, O=IdenTrust, C=US
  Issuer:  CN=IdenTrust Public Sector Root CA 1, O=IdenTrust, C=US
  Algorithm: RSA; Serial number: 0xa0142800000014523cf467c00000002
  Valid from Fri Jan 17 01:53:32 SGT 2014 until Tue Jan 17 01:53:32 SGT 2034

adding as trusted cert:
  Subject: CN=Entrust.net Certification Authority (2048), OU=(c) 1999 Entrust.net Limited, OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.), O=Entrust.net
  Issuer:  CN=Entrust.net Certification Authority (2048), OU=(c) 1999 Entrust.net Limited, OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.), O=Entrust.net
  Algorithm: RSA; Serial number: 0x3863def8
  Valid from Sat Dec 25 01:50:51 SGT 1999 until Tue Jul 24 22:15:12 SGT 2029

adding as trusted cert:
  Subject: CN=Staat der Nederlanden Root CA - G3, O=Staat der Nederlanden, C=NL
  Issuer:  CN=Staat der Nederlanden Root CA - G3, O=Staat der Nederlanden, C=NL
  Algorithm: RSA; Serial number: 0x98a239
  Valid from Thu Nov 14 19:28:42 SGT 2013 until Tue Nov 14 07:00:00 SGT 2028

adding as trusted cert:
  Subject: CN=TeliaSonera Root CA v1, O=TeliaSonera
  Issuer:  CN=TeliaSonera Root CA v1, O=TeliaSonera
  Algorithm: RSA; Serial number: 0x95be16a0f72e46f17b398272fa8bcd96
  Valid from Thu Oct 18 20:00:50 SGT 2007 until Mon Oct 18 20:00:50 SGT 2032

adding as trusted cert:
  Subject: CN=thawte Primary Root CA, OU=&quot;(c) 2006 thawte, Inc. - For authorized use only&quot;, OU=Certification Services Division, O=&quot;thawte, Inc.&quot;, C=US
  Issuer:  CN=thawte Primary Root CA, OU=&quot;(c) 2006 thawte, Inc. - For authorized use only&quot;, OU=Certification Services Division, O=&quot;thawte, Inc.&quot;, C=US
  Algorithm: RSA; Serial number: 0x344ed55720d5edec49f42fce37db2b6d
  Valid from Fri Nov 17 08:00:00 SGT 2006 until Thu Jul 17 07:59:59 SGT 2036

adding as trusted cert:
  Subject: CN=Go Daddy Root Certificate Authority - G2, O=&quot;GoDaddy.com, Inc.&quot;, L=Scottsdale, ST=Arizona, C=US
  Issuer:  CN=Go Daddy Root Certificate Authority - G2, O=&quot;GoDaddy.com, Inc.&quot;, L=Scottsdale, ST=Arizona, C=US
  Algorithm: RSA; Serial number: 0x0
  Valid from Tue Sep 01 08:00:00 SGT 2009 until Fri Jan 01 07:59:59 SGT 2038

adding as trusted cert:
  Subject: CN=Visa eCommerce Root, OU=Visa International Service Association, O=VISA, C=US
  Issuer:  CN=Visa eCommerce Root, OU=Visa International Service Association, O=VISA, C=US
  Algorithm: RSA; Serial number: 0x1386354d1d3f06f2c1f96505d5901c62
  Valid from Wed Jun 26 10:18:36 SGT 2002 until Fri Jun 24 08:16:12 SGT 2022

adding as trusted cert:
  Subject: CN=VeriSign Class 3 Public Primary Certification Authority - G4, OU=&quot;(c) 2007 VeriSign, Inc. - For authorized use only&quot;, OU=VeriSign Trust Network, O=&quot;VeriSign, Inc.&quot;, C=US
  Issuer:  CN=VeriSign Class 3 Public Primary Certification Authority - G4, OU=&quot;(c) 2007 VeriSign, Inc. - For authorized use only&quot;, OU=VeriSign Trust Network, O=&quot;VeriSign, Inc.&quot;, C=US
  Algorithm: EC; Serial number: 0x2f80fe238c0e220f486712289187acb3
  Valid from Mon Nov 05 08:00:00 SGT 2007 until Tue Jan 19 07:59:59 SGT 2038

adding as trusted cert:
  Subject: CN=Staat der Nederlanden EV Root CA, O=Staat der Nederlanden, C=NL
  Issuer:  CN=Staat der Nederlanden EV Root CA, O=Staat der Nederlanden, C=NL
  Algorithm: RSA; Serial number: 0x98968d
  Valid from Wed Dec 08 19:19:29 SGT 2010 until Thu Dec 08 19:10:28 SGT 2022

adding as trusted cert:
  Subject: CN=Entrust Root Certification Authority, OU=&quot;(c) 2006 Entrust, Inc.&quot;, OU=www.entrust.net/CPS is incorporated by reference, O=&quot;Entrust, Inc.&quot;, C=US
  Issuer:  CN=Entrust Root Certification Authority, OU=&quot;(c) 2006 Entrust, Inc.&quot;, OU=www.entrust.net/CPS is incorporated by reference, O=&quot;Entrust, Inc.&quot;, C=US
  Algorithm: RSA; Serial number: 0x456b5054
  Valid from Tue Nov 28 04:23:42 SGT 2006 until Sat Nov 28 04:53:42 SGT 2026

adding as trusted cert:
  Subject: CN=DigiCert Assured ID Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US
  Issuer:  CN=DigiCert Assured ID Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US
  Algorithm: RSA; Serial number: 0xb931c3ad63967ea6723bfc3af9af44b
  Valid from Thu Aug 01 20:00:00 SGT 2013 until Fri Jan 15 20:00:00 SGT 2038

adding as trusted cert:
  Subject: CN=SSL.com Root Certification Authority RSA, O=SSL Corporation, L=Houston, ST=Texas, C=US
  Issuer:  CN=SSL.com Root Certification Authority RSA, O=SSL Corporation, L=Houston, ST=Texas, C=US
  Algorithm: RSA; Serial number: 0x7b2c9bd316803299
  Valid from Sat Feb 13 01:39:39 SGT 2016 until Wed Feb 13 01:39:39 SGT 2041

adding as trusted cert:
  Subject: CN=Amazon Root CA 4, O=Amazon, C=US
  Issuer:  CN=Amazon Root CA 4, O=Amazon, C=US
  Algorithm: EC; Serial number: 0x66c9fd7c1bb104c2943e5717b7b2cc81ac10e
  Valid from Tue May 26 08:00:00 SGT 2015 until Sat May 26 08:00:00 SGT 2040

adding as trusted cert:
  Subject: CN=CA Disig Root R2, O=Disig a.s., L=Bratislava, C=SK
  Issuer:  CN=CA Disig Root R2, O=Disig a.s., L=Bratislava, C=SK
  Algorithm: RSA; Serial number: 0x92b888dbb08ac163
  Valid from Thu Jul 19 17:15:30 SGT 2012 until Sat Jul 19 17:15:30 SGT 2042

adding as trusted cert:
  Subject: CN=DST Root CA X3, O=Digital Signature Trust Co.
  Issuer:  CN=DST Root CA X3, O=Digital Signature Trust Co.
  Algorithm: RSA; Serial number: 0x44afb080d6a327ba893039862ef8406b
  Valid from Sun Oct 01 05:12:19 SGT 2000 until Thu Sep 30 22:01:15 SGT 2021

adding as trusted cert:
  Subject: CN=Buypass Class 2 Root CA, O=Buypass AS-983163327, C=NO
  Issuer:  CN=Buypass Class 2 Root CA, O=Buypass AS-983163327, C=NO
  Algorithm: RSA; Serial number: 0x2
  Valid from Tue Oct 26 16:38:03 SGT 2010 until Fri Oct 26 16:38:03 SGT 2040

adding as trusted cert:
  Subject: CN=D-TRUST Root Class 3 CA 2 EV 2009, O=D-Trust GmbH, C=DE
  Issuer:  CN=D-TRUST Root Class 3 CA 2 EV 2009, O=D-Trust GmbH, C=DE
  Algorithm: RSA; Serial number: 0x983f4
  Valid from Thu Nov 05 16:50:46 SGT 2009 until Mon Nov 05 16:50:46 SGT 2029

adding as trusted cert:
  Subject: CN=DigiCert Assured ID Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US
  Issuer:  CN=DigiCert Assured ID Root G3, OU=www.digicert.com, O=DigiCert Inc, C=US
  Algorithm: EC; Serial number: 0xba15afa1ddfa0b54944afcd24a06cec
  Valid from Thu Aug 01 20:00:00 SGT 2013 until Fri Jan 15 20:00:00 SGT 2038

adding as trusted cert:
  Subject: CN=SwissSign Gold CA - G2, O=SwissSign AG, C=CH
  Issuer:  CN=SwissSign Gold CA - G2, O=SwissSign AG, C=CH
  Algorithm: RSA; Serial number: 0xbb401c43f55e4fb0
  Valid from Wed Oct 25 16:30:35 SGT 2006 until Sat Oct 25 16:30:35 SGT 2036

adding as trusted cert:
  Subject: CN=USERTrust ECC Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US
  Issuer:  CN=USERTrust ECC Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US
  Algorithm: EC; Serial number: 0x5c8b99c55a94c5d27156decd8980cc26
  Valid from Mon Feb 01 08:00:00 SGT 2010 until Tue Jan 19 07:59:59 SGT 2038

adding as trusted cert:
  Subject: OU=certSIGN ROOT CA, O=certSIGN, C=RO
  Issuer:  OU=certSIGN ROOT CA, O=certSIGN, C=RO
  Algorithm: RSA; Serial number: 0x200605167002
  Valid from Wed Jul 05 01:20:04 SGT 2006 until Sat Jul 05 01:20:04 SGT 2031

adding as trusted cert:
  Subject: CN=QuoVadis Root CA 2, O=QuoVadis Limited, C=BM
  Issuer:  CN=QuoVadis Root CA 2, O=QuoVadis Limited, C=BM
  Algorithm: RSA; Serial number: 0x509
  Valid from Sat Nov 25 02:27:00 SGT 2006 until Tue Nov 25 02:23:33 SGT 2031

adding as trusted cert:
  Subject: CN=IdenTrust Commercial Root CA 1, O=IdenTrust, C=US
  Issuer:  CN=IdenTrust Commercial Root CA 1, O=IdenTrust, C=US
  Algorithm: RSA; Serial number: 0xa0142800000014523c844b500000002
  Valid from Fri Jan 17 02:12:23 SGT 2014 until Tue Jan 17 02:12:23 SGT 2034

adding as trusted cert:
  Subject: CN=Deutsche Telekom Root CA 2, OU=T-TeleSec Trust Center, O=Deutsche Telekom AG, C=DE
  Issuer:  CN=Deutsche Telekom Root CA 2, OU=T-TeleSec Trust Center, O=Deutsche Telekom AG, C=DE
  Algorithm: RSA; Serial number: 0x26
  Valid from Fri Jul 09 20:11:00 SGT 1999 until Wed Jul 10 07:59:00 SGT 2019

adding as trusted cert:
  Subject: CN=D-TRUST Root Class 3 CA 2 2009, O=D-Trust GmbH, C=DE
  Issuer:  CN=D-TRUST Root Class 3 CA 2 2009, O=D-Trust GmbH, C=DE
  Algorithm: RSA; Serial number: 0x983f3
  Valid from Thu Nov 05 16:35:58 SGT 2009 until Mon Nov 05 16:35:58 SGT 2029

adding as trusted cert:
  Subject: CN=QuoVadis Root CA 1 G3, O=QuoVadis Limited, C=BM
  Issuer:  CN=QuoVadis Root CA 1 G3, O=QuoVadis Limited, C=BM
  Algorithm: RSA; Serial number: 0x78585f2ead2c194be3370735341328b596d46593
  Valid from Fri Jan 13 01:27:44 SGT 2012 until Mon Jan 13 01:27:44 SGT 2042

adding as trusted cert:
  Subject: CN=USERTrust RSA Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US
  Issuer:  CN=USERTrust RSA Certification Authority, O=The USERTRUST Network, L=Jersey City, ST=New Jersey, C=US
  Algorithm: RSA; Serial number: 0x1fd6d30fca3ca51a81bbc640e35032d
  Valid from Mon Feb 01 08:00:00 SGT 2010 until Tue Jan 19 07:59:59 SGT 2038

adding as trusted cert:
  Subject: CN=Izenpe.com, O=IZENPE S.A., C=ES
  Issuer:  CN=Izenpe.com, O=IZENPE S.A., C=ES
  Algorithm: RSA; Serial number: 0xb0b75a16485fbfe1cbf58bd719e67d
  Valid from Thu Dec 13 21:08:28 SGT 2007 until Sun Dec 13 16:27:25 SGT 2037

adding as trusted cert:
  Subject: CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R2
  Issuer:  CN=GlobalSign, O=GlobalSign, OU=GlobalSign Root CA - R2
  Algorithm: RSA; Serial number: 0x400000000010f8626e60d
  Valid from Fri Dec 15 16:00:00 SGT 2006 until Wed Dec 15 16:00:00 SGT 2021

adding as trusted cert:
  Subject: CN=VeriSign Class 3 Public Primary Certification Authority - G5, OU=&quot;(c) 2006 VeriSign, Inc. - For authorized use only&quot;, OU=VeriSign Trust Network, O=&quot;VeriSign, Inc.&quot;, C=US
  Issuer:  CN=VeriSign Class 3 Public Primary Certification Authority - G5, OU=&quot;(c) 2006 VeriSign, Inc. - For authorized use only&quot;, OU=VeriSign Trust Network, O=&quot;VeriSign, Inc.&quot;, C=US
  Algorithm: RSA; Serial number: 0x18dad19e267de8bb4a2158cdcc6b3b4a
  Valid from Wed Nov 08 08:00:00 SGT 2006 until Thu Jul 17 07:59:59 SGT 2036

adding as trusted cert:
  Subject: CN=QuoVadis Root CA 3, O=QuoVadis Limited, C=BM
  Issuer:  CN=QuoVadis Root CA 3, O=QuoVadis Limited, C=BM
  Algorithm: RSA; Serial number: 0x5c6
  Valid from Sat Nov 25 03:11:23 SGT 2006 until Tue Nov 25 03:06:44 SGT 2031

adding as trusted cert:
  Subject: CN=Starfield Services Root Certificate Authority - G2, O=&quot;Starfield Technologies, Inc.&quot;, L=Scottsdale, ST=Arizona, C=US
  Issuer:  CN=Starfield Services Root Certificate Authority - G2, O=&quot;Starfield Technologies, Inc.&quot;, L=Scottsdale, ST=Arizona, C=US
  Algorithm: RSA; Serial number: 0x0
  Valid from Tue Sep 01 08:00:00 SGT 2009 until Fri Jan 01 07:59:59 SGT 2038

adding as trusted cert:
  Subject: CN=OISTE WISeKey Global Root GB CA, OU=OISTE Foundation Endorsed, O=WISeKey, C=CH
  Issuer:  CN=OISTE WISeKey Global Root GB CA, OU=OISTE Foundation Endorsed, O=WISeKey, C=CH
  Algorithm: RSA; Serial number: 0x76b1205274f0858746b3f8231af6c2c0
  Valid from Mon Dec 01 23:00:32 SGT 2014 until Thu Dec 01 23:10:31 SGT 2039

adding as trusted cert:
  Subject: CN=Amazon Root CA 3, O=Amazon, C=US
  Issuer:  CN=Amazon Root CA 3, O=Amazon, C=US
  Algorithm: EC; Serial number: 0x66c9fd5749736663f3b0b9ad9e89e7603f24a
  Valid from Tue May 26 08:00:00 SGT 2015 until Sat May 26 08:00:00 SGT 2040

adding as trusted cert:
  Subject: CN=QuoVadis Root CA 3 G3, O=QuoVadis Limited, C=BM
  Issuer:  CN=QuoVadis Root CA 3 G3, O=QuoVadis Limited, C=BM
  Algorithm: RSA; Serial number: 0x2ef59b0228a7db7affd5a3a9eebd03a0cf126a1d
  Valid from Fri Jan 13 04:26:32 SGT 2012 until Mon Jan 13 04:26:32 SGT 2042

adding as trusted cert:
  Subject: EMAILADDRESS=info@e-szigno.hu, CN=Microsec e-Szigno Root CA 2009, O=Microsec Ltd., L=Budapest, C=HU
  Issuer:  EMAILADDRESS=info@e-szigno.hu, CN=Microsec e-Szigno Root CA 2009, O=Microsec Ltd., L=Budapest, C=HU
  Algorithm: RSA; Serial number: 0xc27e43044e473f19
  Valid from Tue Jun 16 19:30:18 SGT 2009 until Sun Dec 30 19:30:18 SGT 2029

adding as trusted cert:
  Subject: CN=NetLock Arany (Class Gold) Főtanúsítvány, OU=Tanúsítványkiadók (Certification Services), O=NetLock Kft., L=Budapest, C=HU
  Issuer:  CN=NetLock Arany (Class Gold) Főtanúsítvány, OU=Tanúsítványkiadók (Certification Services), O=NetLock Kft., L=Budapest, C=HU
  Algorithm: RSA; Serial number: 0x49412ce40010
  Valid from Thu Dec 11 23:08:21 SGT 2008 until Wed Dec 06 23:08:21 SGT 2028

adding as trusted cert:
  Subject: CN=Actalis Authentication Root CA, O=Actalis S.p.A./03358520967, L=Milan, C=IT
  Issuer:  CN=Actalis Authentication Root CA, O=Actalis S.p.A./03358520967, L=Milan, C=IT
  Algorithm: RSA; Serial number: 0x570a119742c4e3cc
  Valid from Thu Sep 22 19:22:02 SGT 2011 until Sun Sep 22 19:22:02 SGT 2030

adding as trusted cert:
  Subject: CN=Autoridad de Certificacion Firmaprofesional CIF A62634068, C=ES
  Issuer:  CN=Autoridad de Certificacion Firmaprofesional CIF A62634068, C=ES
  Algorithm: RSA; Serial number: 0x53ec3beefbb2485f
  Valid from Wed May 20 16:38:15 SGT 2009 until Tue Dec 31 16:38:15 SGT 2030

adding as trusted cert:
  Subject: CN=Certplus Root CA G1, O=Certplus, C=FR
  Issuer:  CN=Certplus Root CA G1, O=Certplus, C=FR
  Algorithm: RSA; Serial number: 0x11205583e42d3e5456852d8337b72cdc4611
  Valid from Mon May 26 08:00:00 SGT 2014 until Fri Jan 15 08:00:00 SGT 2038

adding as trusted cert:
  Subject: CN=Certigna, O=Dhimyotis, C=FR
  Issuer:  CN=Certigna, O=Dhimyotis, C=FR
  Algorithm: RSA; Serial number: 0xfedce3010fc948ff
  Valid from Fri Jun 29 23:13:05 SGT 2007 until Tue Jun 29 23:13:05 SGT 2027

adding as trusted cert:
  Subject: CN=E-Tugra Certification Authority, OU=E-Tugra Sertifikasyon Merkezi, O=E-Tuğra EBG Bilişim Teknolojileri ve Hizmetleri A.Ş., L=Ankara, C=TR
  Issuer:  CN=E-Tugra Certification Authority, OU=E-Tugra Sertifikasyon Merkezi, O=E-Tuğra EBG Bilişim Teknolojileri ve Hizmetleri A.Ş., L=Ankara, C=TR
  Algorithm: RSA; Serial number: 0x6a683e9c519bcb53
  Valid from Tue Mar 05 20:09:48 SGT 2013 until Fri Mar 03 20:09:48 SGT 2023

adding as trusted cert:
  Subject: C=ES, O=ACCV, OU=PKIACCV, CN=ACCVRAIZ1
  Issuer:  C=ES, O=ACCV, OU=PKIACCV, CN=ACCVRAIZ1
  Algorithm: RSA; Serial number: 0x5ec3b7a6437fa4e0
  Valid from Thu May 05 17:37:37 SGT 2011 until Tue Dec 31 17:37:37 SGT 2030

adding as trusted cert:
  Subject: CN=QuoVadis Root Certification Authority, OU=Root Certification Authority, O=QuoVadis Limited, C=BM
  Issuer:  CN=QuoVadis Root Certification Authority, OU=Root Certification Authority, O=QuoVadis Limited, C=BM
  Algorithm: RSA; Serial number: 0x3ab6508b
  Valid from Tue Mar 20 02:33:33 SGT 2001 until Thu Mar 18 02:33:33 SGT 2021

adding as trusted cert:
  Subject: CN=SSL.com EV Root Certification Authority ECC, O=SSL Corporation, L=Houston, ST=Texas, C=US
  Issuer:  CN=SSL.com EV Root Certification Authority ECC, O=SSL Corporation, L=Houston, ST=Texas, C=US
  Algorithm: EC; Serial number: 0x2c299c5b16ed0595
  Valid from Sat Feb 13 02:15:23 SGT 2016 until Wed Feb 13 02:15:23 SGT 2041

adding as trusted cert:
  Subject: CN=Buypass Class 3 Root CA, O=Buypass AS-983163327, C=NO
  Issuer:  CN=Buypass Class 3 Root CA, O=Buypass AS-983163327, C=NO
  Algorithm: RSA; Serial number: 0x2
  Valid from Tue Oct 26 16:28:58 SGT 2010 until Fri Oct 26 16:28:58 SGT 2040

adding as trusted cert:
  Subject: CN=thawte Primary Root CA - G2, OU=&quot;(c) 2007 thawte, Inc. - For authorized use only&quot;, O=&quot;thawte, Inc.&quot;, C=US
  Issuer:  CN=thawte Primary Root CA - G2, OU=&quot;(c) 2007 thawte, Inc. - For authorized use only&quot;, O=&quot;thawte, Inc.&quot;, C=US
  Algorithm: EC; Serial number: 0x35fc265cd9844fc93d263d579baed756
  Valid from Mon Nov 05 08:00:00 SGT 2007 until Tue Jan 19 07:59:59 SGT 2038

adding as trusted cert:
  Subject: CN=VeriSign Universal Root Certification Authority, OU=&quot;(c) 2008 VeriSign, Inc. - For authorized use only&quot;, OU=VeriSign Trust Network, O=&quot;VeriSign, Inc.&quot;, C=US
  Issuer:  CN=VeriSign Universal Root Certification Authority, OU=&quot;(c) 2008 VeriSign, Inc. - For authorized use only&quot;, OU=VeriSign Trust Network, O=&quot;VeriSign, Inc.&quot;, C=US
  Algorithm: RSA; Serial number: 0x401ac46421b31321030ebbe4121ac51d
  Valid from Wed Apr 02 08:00:00 SGT 2008 until Wed Dec 02 07:59:59 SGT 2037

adding as trusted cert:
  Subject: CN=Cybertrust Global Root, O=&quot;Cybertrust, Inc&quot;
  Issuer:  CN=Cybertrust Global Root, O=&quot;Cybertrust, Inc&quot;
  Algorithm: RSA; Serial number: 0x400000000010f85aa2d48
  Valid from Fri Dec 15 16:00:00 SGT 2006 until Wed Dec 15 16:00:00 SGT 2021

adding as trusted cert:
  Subject: CN=Amazon Root CA 1, O=Amazon, C=US
  Issuer:  CN=Amazon Root CA 1, O=Amazon, C=US
  Algorithm: RSA; Serial number: 0x66c9fcf99bf8c0a39e2f0788a43e696365bca
  Valid from Tue May 26 08:00:00 SGT 2015 until Sun Jan 17 08:00:00 SGT 2038

adding as trusted cert:
  Subject: OU=Trustis FPS Root CA, O=Trustis Limited, C=GB
  Issuer:  OU=Trustis FPS Root CA, O=Trustis Limited, C=GB
  Algorithm: RSA; Serial number: 0x1b1fadb620f924d3366bf7c7f18ca059
  Valid from Tue Dec 23 20:14:06 SGT 2003 until Sun Jan 21 19:36:54 SGT 2024

adding as trusted cert:
  Subject: CN=GDCA TrustAUTH R5 ROOT, O=&quot;GUANG DONG CERTIFICATE AUTHORITY CO.,LTD.&quot;, C=CN
  Issuer:  CN=GDCA TrustAUTH R5 ROOT, O=&quot;GUANG DONG CERTIFICATE AUTHORITY CO.,LTD.&quot;, C=CN
  Algorithm: RSA; Serial number: 0x7d0997fef047ea7a
  Valid from Wed Nov 26 13:13:15 SGT 2014 until Mon Dec 31 23:59:59 SGT 2040

adding as trusted cert:
  Subject: CN=Amazon Root CA 2, O=Amazon, C=US
  Issuer:  CN=Amazon Root CA 2, O=Amazon, C=US
  Algorithm: RSA; Serial number: 0x66c9fd29635869f0a0fe58678f85b26bb8a37
  Valid from Tue May 26 08:00:00 SGT 2015 until Sat May 26 08:00:00 SGT 2040

adding as trusted cert:
  Subject: CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R4
  Issuer:  CN=GlobalSign, O=GlobalSign, OU=GlobalSign ECC Root CA - R4
  Algorithm: EC; Serial number: 0x2a38a41c960a04de42b228a50be8349802
  Valid from Tue Nov 13 08:00:00 SGT 2012 until Tue Jan 19 11:14:07 SGT 2038

adding as trusted cert:
  Subject: CN=COMODO Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB
  Issuer:  CN=COMODO Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB
  Algorithm: RSA; Serial number: 0x4e812d8a8265e00b02ee3e350246e53d
  Valid from Fri Dec 01 08:00:00 SGT 2006 until Tue Jan 01 07:59:59 SGT 2030

adding as trusted cert:
  Subject: EMAILADDRESS=pki@sk.ee, CN=EE Certification Centre Root CA, O=AS Sertifitseerimiskeskus, C=EE
  Issuer:  EMAILADDRESS=pki@sk.ee, CN=EE Certification Centre Root CA, O=AS Sertifitseerimiskeskus, C=EE
  Algorithm: RSA; Serial number: 0x5480f9a073ed3f004cca89d8e371e64a
  Valid from Sat Oct 30 18:10:30 SGT 2010 until Wed Dec 18 07:59:59 SGT 2030

adding as trusted cert:
  Subject: CN=Global Chambersign Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU
  Issuer:  CN=Global Chambersign Root - 2008, O=AC Camerfirma S.A., SERIALNUMBER=A82743287, L=Madrid (see current address at www.camerfirma.com/address), C=EU
  Algorithm: RSA; Serial number: 0xc9cdd3e9d57d23ce
  Valid from Fri Aug 01 20:31:40 SGT 2008 until Sat Jul 31 20:31:40 SGT 2038

adding as trusted cert:
  Subject: CN=COMODO RSA Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB
  Issuer:  CN=COMODO RSA Certification Authority, O=COMODO CA Limited, L=Salford, ST=Greater Manchester, C=GB
  Algorithm: RSA; Serial number: 0x4caaf9cadb636fe01ff74ed85b03869d
  Valid from Tue Jan 19 08:00:00 SGT 2010 until Tue Jan 19 07:59:59 SGT 2038

adding as trusted cert:
  Subject: CN=thawte Primary Root CA - G3, OU=&quot;(c) 2008 thawte, Inc. - For authorized use only&quot;, OU=Certification Services Division, O=&quot;thawte, Inc.&quot;, C=US
  Issuer:  CN=thawte Primary Root CA - G3, OU=&quot;(c) 2008 thawte, Inc. - For authorized use only&quot;, OU=Certification Services Division, O=&quot;thawte, Inc.&quot;, C=US
  Algorithm: RSA; Serial number: 0x600197b746a7eab4b49ad64b2ff790fb
  Valid from Wed Apr 02 08:00:00 SGT 2008 until Wed Dec 02 07:59:59 SGT 2037

adding as trusted cert:
  Subject: CN=Certplus Root CA G2, O=Certplus, C=FR
  Issuer:  CN=Certplus Root CA G2, O=Certplus, C=FR
  Algorithm: EC; Serial number: 0x1120d991ceaea3e8c5e7ffe902afcf73bc55
  Valid from Mon May 26 08:00:00 SGT 2014 until Fri Jan 15 08:00:00 SGT 2038

adding as trusted cert:
  Subject: CN=AffirmTrust Premium ECC, O=AffirmTrust, C=US
  Issuer:  CN=AffirmTrust Premium ECC, O=AffirmTrust, C=US
  Algorithm: EC; Serial number: 0x7497258ac73f7a54
  Valid from Fri Jan 29 22:20:24 SGT 2010 until Mon Dec 31 22:20:24 SGT 2040

adding as trusted cert:
  Subject: CN=T-TeleSec GlobalRoot Class 2, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE
  Issuer:  CN=T-TeleSec GlobalRoot Class 2, OU=T-Systems Trust Center, O=T-Systems Enterprise Services GmbH, C=DE
  Algorithm: RSA; Serial number: 0x1
  Valid from Wed Oct 01 18:40:14 SGT 2008 until Sun Oct 02 07:59:59 SGT 2033

adding as trusted cert:
  Subject: CN=Staat der Nederlanden Root CA - G2, O=Staat der Nederlanden, C=NL
  Issuer:  CN=Staat der Nederlanden Root CA - G2, O=Staat der Nederlanden, C=NL
  Algorithm: RSA; Serial number: 0x98968c
  Valid from Wed Mar 26 19:18:17 SGT 2008 until Wed Mar 25 19:03:10 SGT 2020

adding as trusted cert:
  Subject: CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US
  Issuer:  CN=DigiCert Global Root G2, OU=www.digicert.com, O=DigiCert Inc, C=US
  Algorithm: RSA; Serial number: 0x33af1e6a711a9a0bb2864b11d09fae5
  Valid from Thu Aug 01 20:00:00 SGT 2013 until Fri Jan 15 20:00:00 SGT 2038

adding as trusted cert:
  Subject: CN=SZAFIR ROOT CA2, O=Krajowa Izba Rozliczeniowa S.A., C=PL
  Issuer:  CN=SZAFIR ROOT CA2, O=Krajowa Izba Rozliczeniowa S.A., C=PL
  Algorithm: RSA; Serial number: 0x3e8a5d07ec55d232d5b7e3b65f01eb2ddce4d6e4
  Valid from Mon Oct 19 15:43:30 SGT 2015 until Fri Oct 19 15:43:30 SGT 2035

keyStore is : 
keyStore type is : jks
keyStore provider is : 
init keystore
init keymanager of type SunX509
trigger seeding of SecureRandom
done seeding SecureRandom
Allow unsafe renegotiation: false
Allow legacy hello messages: true
Is initial handshake: true
Is secure renegotiation: false
scheduling-1, setSoTimeout(0) called
scheduling-1, setSoTimeout(60000) called
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384 for TLSv1
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384 for TLSv1
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384 for TLSv1
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384 for TLSv1
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384 for TLSv1.1
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384 for TLSv1.1
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384 for TLSv1.1
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384 for TLSv1.1
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256 for TLSv1.1
%% No cached client session
update handshake state: client_hello[1]
upcoming handshake states: server_hello[2]
*** ClientHello, TLSv1.2
RandomCookie:  GMT: 1626560475 bytes = { 112, 239, 236, 239, 122, 212, 244, 10, 144, 127, 175, 230, 81, 156, 57, 128, 83, 111, 76, 99, 217, 111, 179, 84, 241, 81, 103, 94 }
Session ID:  {}
Cipher Suites: [TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384, TLS_RSA_WITH_AES_256_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384, TLS_DHE_RSA_WITH_AES_256_CBC_SHA256, TLS_DHE_DSS_WITH_AES_256_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384, TLS_RSA_WITH_AES_256_GCM_SHA384, TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384, TLS_DHE_RSA_WITH_AES_256_GCM_SHA384, TLS_DHE_DSS_WITH_AES_256_GCM_SHA384, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]
Compression Methods:  { 0 }
Extension elliptic_curves, curve names: {secp256r1, secp384r1, secp521r1}
Extension ec_point_formats, formats: [uncompressed]
Extension signature_algorithms, signature_algorithms: SHA512withECDSA, SHA512withRSA, SHA384withECDSA, SHA384withRSA, SHA256withECDSA, SHA256withRSA, SHA256withDSA, SHA224withECDSA, SHA224withRSA, SHA224withDSA, SHA1withECDSA, SHA1withRSA, SHA1withDSA
Extension extended_master_secret
Extension server_name, server_name: [type=host_name (0), value=api.compass-ft.com]
***
[write] MD5 and SHA1 hashes:  len = 212
0000: 01 00 00 D0 03 03 61 F3   58 DB 70 EF EC EF 7A D4  ......a.X.p...z.
0010: F4 0A 90 7F AF E6 51 9C   39 80 53 6F 4C 63 D9 6F  ......Q.9.SoLc.o
0020: B3 54 F1 51 67 5E 00 00   56 C0 24 C0 28 00 3D C0  .T.Qg^..V.$.(.=.
0030: 26 C0 2A 00 6B 00 6A C0   0A C0 14 00 35 C0 05 C0  &amp;.*.k.j.....5...
0040: 0F 00 39 00 38 C0 23 C0   27 00 3C C0 25 C0 29 00  ..9.8.#.'.&lt;.%.).
0050: 67 00 40 C0 09 C0 13 00   2F C0 04 C0 0E 00 33 00  g.@...../.....3.
0060: 32 C0 2C C0 2B C0 30 00   9D C0 2E C0 32 00 9F 00  2.,.+.0.....2...
0070: A3 C0 2F 00 9C C0 2D C0   31 00 9E 00 A2 00 FF 01  ../...-.1.......
0080: 00 00 51 00 0A 00 08 00   06 00 17 00 18 00 19 00  ..Q.............
0090: 0B 00 02 01 00 00 0D 00   1C 00 1A 06 03 06 01 05  ................
00A0: 03 05 01 04 03 04 01 04   02 03 03 03 01 03 02 02  ................
00B0: 03 02 01 02 02 00 17 00   00 00 00 00 17 00 15 00  ................
00C0: 00 12 61 70 69 2E 63 6F   6D 70 61 73 73 2D 66 74  ..api.compass-ft
00D0: 2E 63 6F 6D                                        .com
scheduling-1, WRITE: TLSv1.2 Handshake, length = 212
[Raw write]: length = 217
0000: 16 03 03 00 D4 01 00 00   D0 03 03 61 F3 58 DB 70  ...........a.X.p
0010: EF EC EF 7A D4 F4 0A 90   7F AF E6 51 9C 39 80 53  ...z.......Q.9.S
0020: 6F 4C 63 D9 6F B3 54 F1   51 67 5E 00 00 56 C0 24  oLc.o.T.Qg^..V.$
0030: C0 28 00 3D C0 26 C0 2A   00 6B 00 6A C0 0A C0 14  .(.=.&amp;.*.k.j....
0040: 00 35 C0 05 C0 0F 00 39   00 38 C0 23 C0 27 00 3C  .5.....9.8.#.'.&lt;
0050: C0 25 C0 29 00 67 00 40   C0 09 C0 13 00 2F C0 04  .%.).g.@...../..
0060: C0 0E 00 33 00 32 C0 2C   C0 2B C0 30 00 9D C0 2E  ...3.2.,.+.0....
0070: C0 32 00 9F 00 A3 C0 2F   00 9C C0 2D C0 31 00 9E  .2...../...-.1..
0080: 00 A2 00 FF 01 00 00 51   00 0A 00 08 00 06 00 17  .......Q........
0090: 00 18 00 19 00 0B 00 02   01 00 00 0D 00 1C 00 1A  ................
00A0: 06 03 06 01 05 03 05 01   04 03 04 01 04 02 03 03  ................
00B0: 03 01 03 02 02 03 02 01   02 02 00 17 00 00 00 00  ................
00C0: 00 17 00 15 00 00 12 61   70 69 2E 63 6F 6D 70 61  .......api.compa
00D0: 73 73 2D 66 74 2E 63 6F   6D                       ss-ft.com
[Raw read]: length = 5
0000: 16 03 03 00 37                                     ....7
[Raw read]: length = 55
0000: 02 00 00 33 03 03 94 62   C2 45 AD 7F 63 B8 F6 7C  ...3...b.E..c...
0010: D4 D5 7A A7 89 AE AB FD   F0 82 F9 22 21 15 44 4F  ..z........&quot;!.DO
0020: 57 4E 47 52 44 01 00 C0   2F 00 00 0B FF 01 00 01  WNGRD.../.......
0030: 00 00 0B 00 02 01 00                               .......
scheduling-1, READ: TLSv1.2 Handshake, length = 55
check handshake state: server_hello[2]
*** ServerHello, TLSv1.2
RandomCookie:  GMT: -1805532603 bytes = { 173, 127, 99, 184, 246, 124, 212, 213, 122, 167, 137, 174, 171, 253, 240, 130, 249, 34, 33, 21, 68, 79, 87, 78, 71, 82, 68, 1 }
Session ID:  {}
</code></pre></div><h4 id="注意到"><a href="#注意到" class="header-anchor">#</a> 注意到</h4> <p>生产上（失败）：</p> <p>trustStore is: /apps/3rd-party/java-se-8u40-ri/jre/lib/security/cacerts</p> <div class="language- extra-class"><pre class="language-text"><code>Cipher Suites: [TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_ECDSA_WITH_RC4_128_SHA, TLS_ECDHE_RSA_WITH_RC4_128_SHA, SSL_RSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_RC4_128_SHA, TLS_ECDH_RSA_WITH_RC4_128_SHA, SSL_RSA_WITH_RC4_128_MD5, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]
</code></pre></div><p>dev上（成功）：</p> <p>trustStore is: /etc/pki/java/cacerts</p> <p>ignore的都是 ***128-SHA</p> <div class="language- extra-class"><pre class="language-text"><code>Cipher Suites: [TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384, TLS_RSA_WITH_AES_256_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384, TLS_DHE_RSA_WITH_AES_256_CBC_SHA256, TLS_DHE_DSS_WITH_AES_256_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384, TLS_RSA_WITH_AES_256_GCM_SHA384, TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384, TLS_DHE_RSA_WITH_AES_256_GCM_SHA384, TLS_DHE_DSS_WITH_AES_256_GCM_SHA384, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]
Compression Methods:  { 0 }
</code></pre></div><h4 id="查看一下服务器支持的tls版本类型"><a href="#查看一下服务器支持的tls版本类型" class="header-anchor">#</a> 查看一下服务器支持的TLS版本类型：</h4> <p>https://stackoverflow.com/questions/28908835/ssl-peer-shut-down-incorrectly-in-java</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; nmap -p 443 --script ssl-enum-ciphers api.compass-ft.com

Starting Nmap 7.91 ( https://nmap.org ) at 2022-01-28 09:05 Malay Peninsula Standard Time

Nmap scan report for api.compass-ft.com (108.128.72.146)
Host is up (0.23s latency).
Other addresses for api.compass-ft.com (not scanned): 54.73.26.109 54.216.252.255
rDNS record for 108.128.72.146: ec2-108-128-72-146.eu-west-1.compute.amazonaws.com

PORT    STATE SERVICE
443/tcp open  https
| ssl-enum-ciphers: 
|   TLSv1.2: 
|     ciphers: 
|       TLS_RSA_WITH_AES_128_GCM_SHA256 (rsa 2048) - A
|       TLS_RSA_WITH_AES_256_GCM_SHA384 (rsa 2048) - A
|     compressors: 
|       NULL
|     cipher preference: server
|     warnings: 
|       Forward Secrecy not supported by any cipher
|_  least strength: A

Nmap done: 1 IP address (1 host up) scanned in 10.33 seconds


</code></pre></div><p>貌似支持128和256</p> <h4 id="dev上用的java跟生产上的不同"><a href="#dev上用的java跟生产上的不同" class="header-anchor">#</a> dev上用的java跟生产上的不同</h4> <div class="language- extra-class"><pre class="language-text"><code>生产：
# java -version
openjdk version &quot;1.8.0_40&quot;
OpenJDK Runtime Environment (build 1.8.0_40-b25)
OpenJDK 64-Bit Server VM (build 25.40-b25, mixed mode)

dev:
# java -version
openjdk version &quot;1.8.0_191&quot;
OpenJDK Runtime Environment (build 1.8.0_191-b12)
OpenJDK 64-Bit Server VM (build 25.191-b12, mixed mode)
</code></pre></div><p>也没有很大差别，不过安装方式不同，可以看到前面输出两者使用的truststore不同，</p> <p>dev用的是os的 trustStore is: /etc/pki/java/cacerts</p> <p>生产用的是jre自己的 trustStore is: /apps/3rd-party/java-se-8u40-ri/jre/lib/security/cacerts</p> <p>试着用openjdk的cacerts请求一下，居然可以</p> <div class="language-java extra-class"><pre class="language-java"><code>   

<span class="token punctuation">[</span>root<span class="token annotation punctuation">@sgtcs</span><span class="token operator">-</span>mdw<span class="token operator">-</span>v02 funding<span class="token operator">-</span>rate<span class="token operator">-</span>datasource<span class="token punctuation">]</span># curl <span class="token operator">-</span>v <span class="token operator">--</span>capath <span class="token operator">/</span>opt<span class="token operator">/</span><span class="token number">3</span>rd<span class="token operator">-</span>party<span class="token operator">/</span>java<span class="token operator">-</span>se<span class="token operator">-</span><span class="token number">8</span>u40<span class="token operator">-</span>ri<span class="token operator">/</span>jre<span class="token operator">/</span>lib<span class="token operator">/</span>security<span class="token operator">/</span>cacerts https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>api<span class="token punctuation">.</span>compass<span class="token operator">-</span>ft<span class="token punctuation">.</span>com<span class="token operator">/</span>v1<span class="token operator">/</span>indexes<span class="token operator">/</span>CCRTBTC<span class="token operator">/</span>history<span class="token operator">?</span>access_token<span class="token operator">=</span>
<span class="token operator">*</span> <span class="token class-name">About</span> <span class="token keyword">to</span> <span class="token namespace">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">to</span> <span class="token namespace">api<span class="token punctuation">.</span>compass</span><span class="token operator">-</span>ft<span class="token punctuation">.</span>com port <span class="token number">443</span> <span class="token punctuation">(</span>#<span class="token number">0</span><span class="token punctuation">)</span>
<span class="token operator">*</span>   <span class="token class-name">Trying</span> <span class="token number">54.73</span><span class="token number">.26</span><span class="token number">.109</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">*</span> <span class="token class-name">Connected</span> <span class="token keyword">to</span> <span class="token namespace">api<span class="token punctuation">.</span>compass</span><span class="token operator">-</span>ft<span class="token punctuation">.</span>com <span class="token punctuation">(</span><span class="token number">54.73</span><span class="token number">.26</span><span class="token number">.109</span><span class="token punctuation">)</span> port <span class="token number">443</span> <span class="token punctuation">(</span>#<span class="token number">0</span><span class="token punctuation">)</span>
<span class="token operator">*</span> <span class="token class-name">Initializing</span> NSS <span class="token keyword">with</span> <span class="token namespace">certpath</span><span class="token operator">:</span> sql<span class="token operator">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>pki<span class="token operator">/</span>nssdb
<span class="token operator">*</span> warning<span class="token operator">:</span> CURLOPT_CAPATH not a directory <span class="token punctuation">(</span><span class="token operator">/</span>opt<span class="token operator">/</span><span class="token number">3</span>rd<span class="token operator">-</span>party<span class="token operator">/</span>java<span class="token operator">-</span>se<span class="token operator">-</span><span class="token number">8</span>u40<span class="token operator">-</span>ri<span class="token operator">/</span>jre<span class="token operator">/</span>lib<span class="token operator">/</span>security<span class="token operator">/</span>cacerts<span class="token punctuation">)</span>
<span class="token operator">*</span>   <span class="token class-name">CAfile</span><span class="token operator">:</span> <span class="token operator">/</span>etc<span class="token operator">/</span>pki<span class="token operator">/</span>tls<span class="token operator">/</span>certs<span class="token operator">/</span>ca<span class="token operator">-</span>bundle<span class="token punctuation">.</span>crt
  <span class="token class-name">CApath</span><span class="token operator">:</span> <span class="token operator">/</span>opt<span class="token operator">/</span><span class="token number">3</span>rd<span class="token operator">-</span>party<span class="token operator">/</span>java<span class="token operator">-</span>se<span class="token operator">-</span><span class="token number">8</span>u40<span class="token operator">-</span>ri<span class="token operator">/</span>jre<span class="token operator">/</span>lib<span class="token operator">/</span>security<span class="token operator">/</span>cacerts
<span class="token operator">*</span> SSL connection using TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
<span class="token operator">*</span> <span class="token class-name">Server</span> certificate<span class="token operator">:</span>
<span class="token operator">*</span>       subject<span class="token operator">:</span> CN<span class="token operator">=</span>api<span class="token punctuation">.</span>compass<span class="token operator">-</span>ft<span class="token punctuation">.</span>com
<span class="token operator">*</span>       start date<span class="token operator">:</span> <span class="token class-name">Dec</span> <span class="token number">09</span> <span class="token number">23</span><span class="token operator">:</span><span class="token number">25</span><span class="token operator">:</span><span class="token number">14</span> <span class="token number">2021</span> GMT
<span class="token operator">*</span>       expire date<span class="token operator">:</span> <span class="token class-name">Mar</span> <span class="token number">09</span> <span class="token number">23</span><span class="token operator">:</span><span class="token number">25</span><span class="token operator">:</span><span class="token number">13</span> <span class="token number">2022</span> GMT
<span class="token operator">*</span>       common name<span class="token operator">:</span> api<span class="token punctuation">.</span>compass<span class="token operator">-</span>ft<span class="token punctuation">.</span>com
<span class="token operator">*</span>       issuer<span class="token operator">:</span> CN<span class="token operator">=</span>R3<span class="token punctuation">,</span><span class="token class-name">O</span><span class="token operator">=</span><span class="token class-name">Let</span>'s <span class="token class-name">Encrypt</span><span class="token punctuation">,</span><span class="token class-name">C</span><span class="token operator">=</span>US
<span class="token operator">&gt;</span> GET <span class="token operator">/</span>v1<span class="token operator">/</span>indexes<span class="token operator">/</span>CCRTBTC<span class="token operator">/</span>history<span class="token operator">?</span>access_token<span class="token operator">=</span> HTTP<span class="token operator">/</span><span class="token number">1.1</span>
<span class="token operator">&gt;</span> <span class="token class-name">User</span><span class="token operator">-</span><span class="token class-name">Agent</span><span class="token operator">:</span> curl<span class="token operator">/</span><span class="token number">7.29</span><span class="token number">.0</span>
<span class="token operator">&gt;</span> <span class="token class-name">Host</span><span class="token operator">:</span> api<span class="token punctuation">.</span>compass<span class="token operator">-</span>ft<span class="token punctuation">.</span>com
<span class="token operator">&gt;</span> <span class="token class-name">Accept</span><span class="token operator">:</span> <span class="token operator">*</span><span class="token comment">/*


</span></code></pre></div><p>反过来用系统的ca给java程序试一下
#java -jar -Djavax.net.debug=all -Djavax.net.ssl.trustStore=/etc/pki/java/cacerts funding-rate-datasource.jar
仍然是不行</p> <p><strong>然后想到在dev上用生产的jdk版本试试，确实能够重现出错误！</strong></p> <p>openjdk-8u40-b25-linux-x64-10_feb_2015.tar.gz
openjdk-8u41-b04-linux-x64-14_jan_2020.tar.gz
这两个版本都有问题，可能是这个版本的jdk底层实现的tls handshake采用的cipher suite已经过时了;</p> <p>结合之前VAPT漏洞扫描遇到过的一个tls hardening的问题，我觉着也有可能：
因为这个版本的jdk刚好优先使用了os所支持的某些比较不安全的cipher suite，然后compassft服务端对这些不安全的算法进行了屏蔽，所以另一种可能的解决办法是对os进行tls hardening可能可以解决这个问题</p> <h4 id="java-security"><a href="#java-security" class="header-anchor">#</a> java.security</h4> <p>想到是否可以通过更改java security配置来修复这个问题：</p> <p>Additional information on Oracle's JDK and JRE Cryptographic Algorithms
https://java.com/en/configure_crypto.html</p> <div class="language- extra-class"><pre class="language-text"><code>[root@sgtcs-mdw-v02 java-se-8u40-ri]# grep -r -l &quot;cipher&quot; ./*
./jre/lib/security/java.security
./jre/lib/rt.jar
./jre/lib/jsse.jar
./jre/lib/management/management.properties
./jre/lib/amd64/server/libjvm.so
./lib/ct.sym
./man/ja_JP.UTF-8/man1/keytool.1
./man/man1/keytool.1
./sample/jmx/jmx-scandir/src/etc/management.properties

</code></pre></div><p>参照dev上面的java.security配置，更改了生产，</p> <p>也试了jvm参数 java -jar -Djavax.net.debug=all -Djdk.tls.client.cipherSuites=TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384 funding-rate-datasource.jar</p> <p>不过没有解决，两种可能：</p> <p>一种可能是有些配置只是对当前的程序是server端有效，而我现在是client端；</p> <p>另一种可能是jdk处理握手的代码有hardcode https://github.com/AdoptOpenJDK/openjdk-jdk8u/blob/master/jdk/src/share/classes/sun/security/ssl/CipherSuite.java</p> <h4 id="jdk9也不行"><a href="#jdk9也不行" class="header-anchor">#</a> jdk9也不行</h4> <p>JDK 9好像握手能够进行多几步了，但是居然爆了另外一个错误：</p> <div class="language- extra-class"><pre class="language-text"><code>System property jdk.tls.client.cipherSuites is set to 'null'
System property jdk.tls.server.cipherSuites is set to 'null'

scheduling-1, handling exception: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
%% Invalidated:  [Session-5, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256]
scheduling-1, SEND TLSv1.2 ALERT:  fatal, description = internal_error
scheduling-1, WRITE: TLSv1.2 Alert, length = 2
[Raw write]: length = 7
0000: 15 03 03 00 02 02 50                               ......P
scheduling-1, called closeSocket()
scheduling-1, called close()
scheduling-1, called closeInternal(true)
scheduling-1, called closeSocket()
scheduling-1, called close()
scheduling-1, called closeInternal(true)
scheduling-1, called close()
scheduling-1, called closeInternal(true)
2022-01-31 12:05:52.181 ERROR 21924GG [scheduling-1] c.a.m.f.u.HttpClientUtil : Get Exception java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty

javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
        at java.base/sun.security.ssl.Alerts.getSSLException(Alerts.java:214)
        at java.base/sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1969)
        at java.base/sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1921)
        at java.base/sun.security.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1904)
        at java.base/sun.security.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1830)
        at java.base/sun.security.ssl.AppOutputStream.write(AppOutputStream.java:71)
        at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81)
        at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142)
        at org.apache.commons.httpclient.HttpConnection.flushRequestOutputStream(HttpConnection.java:828)
        at org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2116)
        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096)
        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)
        at com.lyhistory.middleware.fundingrate.util.HttpClientUtil.sendGet(HttpClientUtil.java:64)
        at com.lyhistory.middleware.fundingrate.service.impl.CompassftServiceImpl.sendRequest(CompassftServiceImpl.java:25)
        at com.lyhistory.middleware.fundingrate.job.CompassftJob.crawlData(CompassftJob.java:33)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:564)
        at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
        at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:514)
        at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
        at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:300)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)
        at java.base/java.lang.Thread.run(Thread.java:844)
Caused by: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
        at java.base/sun.security.validator.PKIXValidator.&lt;init&gt;(PKIXValidator.java:89)
        at java.base/sun.security.validator.Validator.getInstance(Validator.java:181)
        at java.base/sun.security.ssl.X509TrustManagerImpl.getValidator(X509TrustManagerImpl.java:330)
        at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrustedInit(X509TrustManagerImpl.java:180)
        at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:192)
        at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:133)
        at java.base/sun.security.ssl.ClientHandshaker.checkServerCerts(ClientHandshaker.java:1825)
        at java.base/sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1655)
        at java.base/sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:260)
        at java.base/sun.security.ssl.Handshaker.processLoop(Handshaker.java:1086)
        at java.base/sun.security.ssl.Handshaker.processRecord(Handshaker.java:1020)
        at java.base/sun.security.ssl.SSLSocketImpl.processInputRecord(SSLSocketImpl.java:1137)
        at java.base/sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1074)
        at java.base/sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:973)
        at java.base/sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1402)
        at java.base/sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:733)
        at java.base/sun.security.ssl.AppOutputStream.write(AppOutputStream.java:67)
        ... 24 more
Caused by: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
        at java.base/java.security.cert.PKIXParameters.setTrustAnchors(PKIXParameters.java:200)
        at java.base/java.security.cert.PKIXParameters.&lt;init&gt;(PKIXParameters.java:120)
        at java.base/java.security.cert.PKIXBuilderParameters.&lt;init&gt;(PKIXBuilderParameters.java:104)
        at java.base/sun.security.validator.PKIXValidator.&lt;init&gt;(PKIXValidator.java:86)
        ... 40 more

</code></pre></div><p>中间还找到类似的bug https://bugs.openjdk.java.net/browse/JDK-8266562</p> <p>可以看到有的bug同时出现在多个版本，所以高版本的某个小版本可能并没有低版本的fix，</p> <h4 id="openjdk8-update"><a href="#openjdk8-update" class="header-anchor">#</a> openjdk8 update</h4> <p>所以继续找openjdk8u191，没找到，只找到Oracle和redhat编译的，试了下Oracle的果然没问题</p> <p>https://www.oracle.com/java/technologies/javase/javase8-archive-downloads.html</p> <p>https://www.oracle.com/java/technologies/javase/8u191-relnotes.html</p> <p>https://developers.redhat.com/products/openjdk/download</p> <p>最后找到openjdk的8u系列的版本：</p> <p>openjdk build 1.8.0_191-b12
openjdk site=&gt; left panel click &quot;java 8 update&quot;=&gt; click &quot;wiki&quot;
https://openjdk.java.net/projects/jdk8u/
=》
https://wiki.openjdk.java.net/display/jdk8u
Note:</p> <p>http://hg.openjdk.java.net/jdk8u/jdk8u/ 滚动到下面看到 Added tag jdk8u191-b12 for changeset 6432b2dd408cjdk8u191-b26</p> <p>虽然没有8u191的release，测试了8u的最高版本8u312b07，果然成功了！</p> <p>没有尝试的可能方案：</p> <p>HttpClient如何指定CipherSuites https://ask.csdn.net/questions/189433
en.setEnabledCipherSuites(new String[]{&quot;TLS_RSA_WITH_AES_128_CBC_SHA&quot;});</p> <h4 id="解决之后研究原因"><a href="#解决之后研究原因" class="header-anchor">#</a> 解决之后研究原因</h4> <p>https://bugs.openjdk.java.net/browse/JDK-8144544?jql=text%20~%20%22%5C%22Remote%20host%20closed%20connection%20during%20handshake%5C%22%22</p> <p>https://bugs.openjdk.java.net/browse/JDK-8144544</p> <p>看来这个比较像，有可能是interoperability issue</p> <blockquote><p>Check for alternate AES providers. If there's a bad provider, the peer could easily result in a bad padding.</p> <p>The submitter's environment may have been using IBM JDK and trying to use Oracle's keymanager SunX509 implementation. No further updates. Closing out as not an issue.</p></blockquote> <p>openjdk ibm padding EOFException handshake</p> <p>https://www.ibm.com/support/pages/apar/IV37231</p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>The problem happens because the size of the &quot;PreMaster Secret&quot;
generated from ECDH KeyAgreement in IBMJCE provider
did not match openssl's counterpart for some of the EC curves.
</code></pre></div></blockquote> <p>https://wiki.openjdk.java.net/display/jdk8u</p> <p>下载代码，确实有很多相关的修复</p> <div class="language- extra-class"><pre class="language-text"><code>git clone https://github.com/openjdk/jdk8u
cd jdk8u/
git status
git tag
git checkout jdk8u40-b25
git checkout jdk8u191-b12
git log -S&quot;receiveChangeCipherSpec&quot;
git log -S&quot;receiveChangeCipherSpec&quot;
git show b9d40c7d6cfa8f221bf1973821b97210e6f3a5be
git log -S&quot;provider&quot;
GIT SHOW b380264de3d82ceb291401dae06e9c605e36ebd0
git show b380264de3d82ceb291401dae06e9c605e36ebd0
git log -S&quot;padding&quot;
git log -S&quot;ECDH&quot;
git log -S&quot;EC curve&quot;
</code></pre></div><h3 id="certificateexception-no-subject-alternative-names-present"><a href="#certificateexception-no-subject-alternative-names-present" class="header-anchor">#</a> CertificateException: No subject alternative names present</h3> <p>When the server certificate is having Subject Alternative Names (SAN), the requesting home name must match with one of the SANs. If the server’s SSL certificate does not have SANs, then the requesting home name must match with the Common Name (CN) of the certificate.
https://stackoverflow.com/questions/29157861/java-certificateexception-no-subject-alternative-names-matching-ip-address</p> <h3 id="一些有意思的问题"><a href="#一些有意思的问题" class="header-anchor">#</a> 一些有意思的问题</h3> <p>用jmeter通过ssl验证访问https https://cloud.tencent.com/developer/article/1199237?from=15425
解决 HTTPS 证书失效菜刀连不上 https://cloud.tencent.com/developer/article/1399952?from=15425
How can I disable a TLS cipher for only some protocols using JVM Config? https://stackoverflow.com/questions/52779312/java-how-can-i-disable-a-tls-cipher-for-only-some-protocols-using-jvm-config?rq=1</p> <p>Comparative study of TLS Cipher Suite supported by Java 8
https://linuxtut.com/en/877120a7dfa9e4a0e1e3/</p> <div id="disqus_thread"></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.1f079c1e.js" defer></script><script src="/docs/assets/js/2.19baf9f4.js" defer></script><script src="/docs/assets/js/201.f47516e0.js" defer></script><script src="/docs/assets/js/11.0d0890d4.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>计算机基础教程</title>
    <meta name="description" content="软件开发教程，渗透测试入门教程，区块链入门教程，物联网，大数据">
    
    
    <link rel="preload" href="/docs/assets/css/0.styles.89d6372f.css" as="style"><link rel="preload" href="/docs/assets/js/app.142d5a3a.js" as="script"><link rel="preload" href="/docs/assets/js/2.5d2fca3b.js" as="script"><link rel="preload" href="/docs/assets/js/19.ad88f0d8.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.721f26cd.js"><link rel="prefetch" href="/docs/assets/js/11.d423cff2.js"><link rel="prefetch" href="/docs/assets/js/12.c896a5d2.js"><link rel="prefetch" href="/docs/assets/js/13.b5d43067.js"><link rel="prefetch" href="/docs/assets/js/14.437ab4ac.js"><link rel="prefetch" href="/docs/assets/js/15.ba78e759.js"><link rel="prefetch" href="/docs/assets/js/16.02796dd1.js"><link rel="prefetch" href="/docs/assets/js/17.b3642104.js"><link rel="prefetch" href="/docs/assets/js/18.974d9195.js"><link rel="prefetch" href="/docs/assets/js/20.23f09e2f.js"><link rel="prefetch" href="/docs/assets/js/21.8ba5718e.js"><link rel="prefetch" href="/docs/assets/js/22.fc1efab3.js"><link rel="prefetch" href="/docs/assets/js/23.b96532cf.js"><link rel="prefetch" href="/docs/assets/js/24.93ef2325.js"><link rel="prefetch" href="/docs/assets/js/3.a282e63f.js"><link rel="prefetch" href="/docs/assets/js/4.6b1b1ab7.js"><link rel="prefetch" href="/docs/assets/js/5.15cc1684.js"><link rel="prefetch" href="/docs/assets/js/6.dc2d61b1.js"><link rel="prefetch" href="/docs/assets/js/7.2674f001.js"><link rel="prefetch" href="/docs/assets/js/8.162adf02.js"><link rel="prefetch" href="/docs/assets/js/9.2f2e60aa.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.89d6372f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">计算机基础教程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">机器指令</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link router-link-active">软件基础</a></div><div class="nav-item"><a href="/docs/coder2hacker/" class="nav-link">渗透测试</a></div><div class="nav-item"><a href="/docs/blockchain/" class="nav-link">区块链</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">机器指令</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link router-link-active">软件基础</a></div><div class="nav-item"><a href="/docs/coder2hacker/" class="nav-link">渗透测试</a></div><div class="nav-item"><a href="/docs/blockchain/" class="nav-link">区块链</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/software/java.html#_1-install" class="sidebar-link">1.Install</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/software/java.html#_2-tools-ide" class="sidebar-link">2.Tools&amp;IDE</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/software/java.html#_2-1-decompiler" class="sidebar-link">2.1 Decompiler</a></li><li class="sidebar-sub-header"><a href="/docs/software/java.html#_2-2-cmdline" class="sidebar-link">2.2 Cmdline</a></li><li class="sidebar-sub-header"><a href="/docs/software/java.html#_2-3-ide" class="sidebar-link">2.3 IDE</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><a href="/docs/software">回目录</a>  《java实用基础》</p> <h2 id="_1-install"><a href="#_1-install" class="header-anchor">#</a> 1.Install</h2> <p>Jdk vs Openjdk</p> <p>https://www.oracle.com/technetwork/java/javase/downloads/index.html
archive
https://www.oracle.com/technetwork/java/javase/downloads/java-archive-javase8-2177648.html</p> <p>Runtime source: rt.jar	/java/jre18XXX/lib</p> <p>UBUNTU</p> <div class="language- extra-class"><pre class="language-text"><code>sudo add-apt-repository ppa:openjdk-r/ppa
sudo apt-get update
sudo apt-get install openjdk-8-jdk
apt-cache search jdk
export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64/
export PATH=$PATH:$JAVA_HOME/bin
java -version
</code></pre></div><h2 id="_2-tools-ide"><a href="#_2-tools-ide" class="header-anchor">#</a> 2.Tools&amp;IDE</h2> <h3 id="_2-1-decompiler"><a href="#_2-1-decompiler" class="header-anchor">#</a> 2.1 Decompiler</h3> <p>Reverse class to view code http://java-decompiler.github.io/
分析JVM	
JVisualVM https://www.cnblogs.com/xifengxiaoma/p/9402497.html
Java ServiceabilityAgent(HSDB)使用和分析
https://liuzhengyang.github.io/2017/05/27/serviceabilityagent/</p> <h3 id="_2-2-cmdline"><a href="#_2-2-cmdline" class="header-anchor">#</a> 2.2 Cmdline</h3> <p>https://stackoverflow.com/questions/19843096/how-to-debug-a-java-application-without-access-to-the-source-code/58555431#58555431
https://stackoverflow.com/questions/3668379/use-a-jar-with-source-as-source-for-jdb/58603802#58603802
java -cp vs java -jar
https://stackoverflow.com/questions/11922681/differences-between-java-cp-and-java-jar
基本区别就是，如果jar包，比如springboot的包将依赖都已经打入了META-INF，则用-jar，否则如果需要依赖外部的lib，则需要用cp指定classpath
java -server -jar *.jar
java程序启动参数-D含义详解 https://www.cnblogs.com/grefr/p/6087955.html
Jdb
https://stackoverflow.com/questions/20018866/specifying-sourcepath-in-jdb-what-am-i-doing-wrong</p> <p>Debug jar file</p> <p>~~
jdb -sourcepath -classpath com.quantdo.framework.websocket.WebSocketApplication
java -jar -agentlib:jdwp=transport=dt_shmem,address=jdbconn,server=y,suspend=n C:\Workspace\EclipseWorkspace\quantdo-websocket\quantdo-websocket.jar
jdb -attach jdbconn
jdb -sourcepath BOOT-INF/classes/ -classpath . org.springframework.boot.loader.JarLauncher
~~</p> <div class="language- extra-class"><pre class="language-text"><code>
jdb -sourcepath BOOT-INF/classes/ -classpath .;BOOT-INF/classes/
stop at com.quantdo.framework.websocket.endpoint.GeneralWebSocketEndpoint:54
stop at com.quantdo.framework.websocket.handler.DefaultWebSocketMessageHandler:32
stop in DefaultWebSocketMessageHandler.receiveMessage
stop in com.quantdo.framework.websocket.endpoint.GeneralWebSocketEndpoint.onMessage
stop in com.alibaba.fastjson.parser.JSONLexerBase.scanString
	  public final void scanString() {
	  public String scanString(char expectNextChar) {
stop at com.alibaba.fastjson.parser.JSONLexerBase:880
run org.springframework.boot.loader.JarLauncher

jdb -sourcepath BOOT-INF/classes/ -classpath .;BOOT-INF/classes/;BOOT-INF/lib/
	stop at com.quantdo.framework.cache.autoconfigure.support.WebsocketMessageListener:35
	stop at org.springframework.data.redis.listener.RedisMessageListenerContainer:968
	stop at com.quantdo.framework.websocket.endpoint.GeneralWebSocketEndpoint:54
stop at com.quantdo.framework.websocket.handler.DefaultWebSocketMessageHandler:32
stop at com.alibaba.fastjson.parser.JSONLexerBase:880
run org.springframework.boot.loader.JarLauncher

next
cont
step up
step out
locals
print 
where
where all
list
threads
thread &lt;THREADID&gt;

</code></pre></div><p><img src="/docs/docs_image/software/java/java01.png" alt="测试例子"></p> <p>Refer:
https://docs.oracle.com/javase/8/docs/technotes/tools/unix/jdb.html
http://hengyunabc.github.io/spring-boot-application-start-analysis/
https://www.oschina.net/question/1263216_2267259
https://blog.csdn.net/arkblue/article/details/39718947
https://www.bilibili.com/read/cv1844967/</p> <h3 id="_2-3-ide"><a href="#_2-3-ide" class="header-anchor">#</a> 2.3 IDE</h3> <p>Eclipse/STS
Project Explorer-&gt; Projects Presentation (select hierarchy)</p> <h4 id="_2-3-1-folder-structure"><a href="#_2-3-1-folder-structure" class="header-anchor">#</a> 2.3.1 Folder structure</h4> <p>**About resources folder
Missing resources: manually create resources folder in src/main, and then Manve-&gt;update project
src/main/resources https://stackoverflow.com/questions/18875635/cant-access-files-from-src-main-resources-via-a-test-case</p> <p>New Maven project -&gt; Tick &quot;Create a simple project(skip archetype selection) [auto create resource folder]
https://stackoverflow.com/questions/49351806/eclipse-adds-an-exclusion-pattern-of-to-src-main-resources-how-to-read-a-res</p> <p>**Missing src/test/java
manual add in file system, then in java build path, remove first, then Add Folder</p> <h4 id="_2-3-2-compiler"><a href="#_2-3-2-compiler" class="header-anchor">#</a> 2.3.2 compiler</h4> <p>**default compiler &amp; project build path &amp; runtime/debug JRE&amp; compiler compliance
Set project compiler compliance settings to 1.7 Set project JRE build path entry to 'JavaSE-1.7' https://docs.infor.com/help_m3_coreit_13.4/index.jsp?topic=%2Fcom.lawson.help.administration%2Fcom.lawson.help.makag-w_10.1.2%2FL157071229479555.html</p> <p>java-&gt;Compiler/Installed JREs</p> <p>run config-&gt; maven build-&gt;maven debug-&gt; jre</p> <p>show jdk version that maven dependent on: mvn -version</p> <h4 id="_2-3-3-debug"><a href="#_2-3-3-debug" class="header-anchor">#</a> 2.3.3 Debug</h4> <p>**Remote Debug(attach jar)
https://stackoverflow.com/questions/6855520/attach-debugger-to-application-using-eclipse/23297651
Confg:
Remote Java Application-&gt;Connect
&amp;
Remote Java Application-&gt;Source
then Start jar and expose port:
java -Xdebug -Xrunjdwp:transport=dt_socket,address=127.0.0.1:8008,server=y,suspend=y -jar target\test.jar</p> <p>For remote debug war hosting in remote tomcat:
vim /etc/tomcat/tomcat.conf
JAVA_OPTS or CATALINA_OPTS=&quot;-Xdebug -Xrunjdwp:transport=dt_socket,address=10001,server=y,suspend=n&quot;
Failed using port 8000</p> <p>For mvn project another way can be found in Maven-&gt;debug below</p> <p>**Debug into jar without sourcecode using decompiler
My original post
https://stackoverflow.com/questions/58534925/eclipse-not-decompile-rt-jar-when-debugging-but-idea-does/58535553#58535553
For eclipse install:
Enhanced Class Decompiler https://ecd-plugin.github.io/ecd/ or jd plugin http://java-decompiler.github.io/
Haven’t try another one Bytecode Visualizer https://www.crowdstrike.com/blog/native-java-bytecode-debugging-without-source-code/
For intellj idea, it’s auto:</p> <p>**Run external jar</p> <p>Program-&gt; create -&gt; Locatoin:jdk/java.exe Argument:-jar XXX.jar</p> <p>But how to debug ? can try woring with jdb.exe
https://docs.oracle.com/javase/7/docs/technotes/tools/windows/jdb.html
https://stackoverflow.com/questions/19843096/how-to-debug-a-java-application-without-access-to-the-source-code/58555431#58555431</p> <p>java -jar -agentlib:jdwp=transport=dt_shmem,address=jdbconn,server=y,suspend=n C:\Workspace\EclipseWorkspace\test.jar</p> <p>Debug dependencies, keep in mind that don’t set debugger in project view, change to debugger view and set it</p> <hr> <p>todo</p> <p>-agentlib VS -X</p> <hr> <p>ref:</p> <p><a href="https://github.com/PlamenStilyianov/Java/blob/master/Charlie%20Hunt%2C%20Binu%20John%20-%20Java%20Performance%20-%202011.pdf" target="_blank" rel="noopener noreferrer">圣经《JAVA Performance》<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.142d5a3a.js" defer></script><script src="/docs/assets/js/2.5d2fca3b.js" defer></script><script src="/docs/assets/js/19.ad88f0d8.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>20200325 github https证书问题 | 计算机基础教程</title>
    <meta name="description" content="软件开发教程，渗透测试入门教程，区块链入门教程，物联网，大数据">
    
    
    <link rel="preload" href="/docs/assets/css/0.styles.89d6372f.css" as="style"><link rel="preload" href="/docs/assets/js/app.c3c7b76a.js" as="script"><link rel="preload" href="/docs/assets/js/2.dc5756d7.js" as="script"><link rel="preload" href="/docs/assets/js/53.fc3bfede.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.881d86ca.js"><link rel="prefetch" href="/docs/assets/js/11.f8c5a5eb.js"><link rel="prefetch" href="/docs/assets/js/12.f6f29cb2.js"><link rel="prefetch" href="/docs/assets/js/13.9ab3db22.js"><link rel="prefetch" href="/docs/assets/js/14.fd0e1ad7.js"><link rel="prefetch" href="/docs/assets/js/15.9f2db17d.js"><link rel="prefetch" href="/docs/assets/js/16.c96663aa.js"><link rel="prefetch" href="/docs/assets/js/17.4fc5ee65.js"><link rel="prefetch" href="/docs/assets/js/18.9da19df7.js"><link rel="prefetch" href="/docs/assets/js/19.21d9bff8.js"><link rel="prefetch" href="/docs/assets/js/20.649ea747.js"><link rel="prefetch" href="/docs/assets/js/21.59e9eb89.js"><link rel="prefetch" href="/docs/assets/js/22.7d6d65c6.js"><link rel="prefetch" href="/docs/assets/js/23.65483f56.js"><link rel="prefetch" href="/docs/assets/js/24.4cd5b1ae.js"><link rel="prefetch" href="/docs/assets/js/25.9b51a67c.js"><link rel="prefetch" href="/docs/assets/js/26.ff1cbffd.js"><link rel="prefetch" href="/docs/assets/js/27.89ddb78a.js"><link rel="prefetch" href="/docs/assets/js/28.6d30852c.js"><link rel="prefetch" href="/docs/assets/js/29.e7668d09.js"><link rel="prefetch" href="/docs/assets/js/3.f9fe9d0d.js"><link rel="prefetch" href="/docs/assets/js/30.6d2f1461.js"><link rel="prefetch" href="/docs/assets/js/31.35985219.js"><link rel="prefetch" href="/docs/assets/js/32.d2945511.js"><link rel="prefetch" href="/docs/assets/js/33.a4d20140.js"><link rel="prefetch" href="/docs/assets/js/34.16702b0e.js"><link rel="prefetch" href="/docs/assets/js/35.596647eb.js"><link rel="prefetch" href="/docs/assets/js/36.4a8c976b.js"><link rel="prefetch" href="/docs/assets/js/37.5ee1096f.js"><link rel="prefetch" href="/docs/assets/js/38.c8d133e6.js"><link rel="prefetch" href="/docs/assets/js/39.b8492dbc.js"><link rel="prefetch" href="/docs/assets/js/4.7d1e56e0.js"><link rel="prefetch" href="/docs/assets/js/40.bee2f75f.js"><link rel="prefetch" href="/docs/assets/js/41.d1795c1d.js"><link rel="prefetch" href="/docs/assets/js/42.ace167df.js"><link rel="prefetch" href="/docs/assets/js/43.2d496be3.js"><link rel="prefetch" href="/docs/assets/js/44.16dabbad.js"><link rel="prefetch" href="/docs/assets/js/45.3595f2f4.js"><link rel="prefetch" href="/docs/assets/js/46.5a128140.js"><link rel="prefetch" href="/docs/assets/js/47.256acd9d.js"><link rel="prefetch" href="/docs/assets/js/48.f4f48e40.js"><link rel="prefetch" href="/docs/assets/js/49.247825fe.js"><link rel="prefetch" href="/docs/assets/js/5.540a7edc.js"><link rel="prefetch" href="/docs/assets/js/50.9bf8233d.js"><link rel="prefetch" href="/docs/assets/js/51.3c60346b.js"><link rel="prefetch" href="/docs/assets/js/52.cc9b3603.js"><link rel="prefetch" href="/docs/assets/js/54.2fbe37ff.js"><link rel="prefetch" href="/docs/assets/js/55.d492a8d8.js"><link rel="prefetch" href="/docs/assets/js/56.ec9b196d.js"><link rel="prefetch" href="/docs/assets/js/57.30e1cc9b.js"><link rel="prefetch" href="/docs/assets/js/58.b1b009de.js"><link rel="prefetch" href="/docs/assets/js/59.9f04b3a8.js"><link rel="prefetch" href="/docs/assets/js/6.72bc17c1.js"><link rel="prefetch" href="/docs/assets/js/60.ef65b23c.js"><link rel="prefetch" href="/docs/assets/js/61.8a30ec21.js"><link rel="prefetch" href="/docs/assets/js/62.efc56468.js"><link rel="prefetch" href="/docs/assets/js/63.756e9ba5.js"><link rel="prefetch" href="/docs/assets/js/64.7a288ba1.js"><link rel="prefetch" href="/docs/assets/js/65.7f0d6d6f.js"><link rel="prefetch" href="/docs/assets/js/66.473be9c1.js"><link rel="prefetch" href="/docs/assets/js/67.14b2198d.js"><link rel="prefetch" href="/docs/assets/js/68.c81653ae.js"><link rel="prefetch" href="/docs/assets/js/69.920ef04d.js"><link rel="prefetch" href="/docs/assets/js/7.e41d4d76.js"><link rel="prefetch" href="/docs/assets/js/70.8b767a17.js"><link rel="prefetch" href="/docs/assets/js/71.b1cb9001.js"><link rel="prefetch" href="/docs/assets/js/72.49865c58.js"><link rel="prefetch" href="/docs/assets/js/73.cdca70a4.js"><link rel="prefetch" href="/docs/assets/js/74.f653e4be.js"><link rel="prefetch" href="/docs/assets/js/75.f4dceeaa.js"><link rel="prefetch" href="/docs/assets/js/76.4bdddc85.js"><link rel="prefetch" href="/docs/assets/js/77.f9570393.js"><link rel="prefetch" href="/docs/assets/js/8.13215fb3.js"><link rel="prefetch" href="/docs/assets/js/9.86a31c24.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.89d6372f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">计算机基础教程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">机器指令</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link router-link-active">软件基础</a></div><div class="nav-item"><a href="/docs/coder2hacker/" class="nav-link">渗透测试</a></div><div class="nav-item"><a href="/docs/blockchain/" class="nav-link">区块链</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">机器指令</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link router-link-active">软件基础</a></div><div class="nav-item"><a href="/docs/coder2hacker/" class="nav-link">渗透测试</a></div><div class="nav-item"><a href="/docs/blockchain/" class="nav-link">区块链</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>20200325 github https证书问题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/software/network/network2github.html#_20200325-github-https证书问题" class="sidebar-link">20200325 github https证书问题</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/software/network/network2github.html#more" class="sidebar-link">more</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_20200325-github-https证书问题"><a href="#_20200325-github-https证书问题" class="header-anchor">#</a> 20200325 github https证书问题</h2> <p>关键词：https劫持、ssl劫持、dns劫持</p> <p><a href="https://www.v2ex.com/t/656367?p=1" target="_blank" rel="noopener noreferrer">Github pages 的 HTTPS 是不是出问题了？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://www.v2ex.com/t/656505" target="_blank" rel="noopener noreferrer">Cloudflare 的一个节点疑似也被中间人<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://www.v2ex.com/t/656444" target="_blank" rel="noopener noreferrer">京东 HTTPS 也被劫持了？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><img src="/docs/docs_image/software/network/network2github01.png" alt=""></p> <p>因为人在海外，不方便测试，就总结了网友的测试分析结果如下</p> <p>国内访问提示证书错误，SSL劫持？</p> <p><a href="https://gist.github.com/chenshaoju/52bb7a12572a752433bd51a4dce79d94" target="_blank" rel="noopener noreferrer">这是网友导出的证书<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><img src="/docs/docs_image/software/network/network2github02.png" alt=""></p> <p>目前许多翻墙软件是基于（或伪装成）TLS(HTTPS)的。</p> <blockquote><p>以v2ray(N)为例，若部署服务端的时候没有使用有效的证书，客户端启用了allowInsecure的情况下（默认），若被中间人攻击了客户端可能也无法进行警告。</p></blockquote> <p>我的评论：未必吧，不可以配置客户端信任自己的证书吗，这样不就可以挡住其他的非法证书了么（当然了这个需要再研究下）</p> <blockquote><p>不过正确配置了加密方式的情况下，数据还是安全的，只是攻击者可能会知道你在用v2ray。</p></blockquote> <p>我的评论：刚开始看到这句话觉着有问题，如果选择相信中间人的证书，中间人就完全可以解密流量，不过细想下，v2ray是伪装成https流量，其本身也是有加密的，
所以应该指的是解密开的流量本身仍然是v2ray加密内容，直到走到我们配置的vpn服务器端，然后vpn服务器端才能解密开流量，除非中间人在vpn服务器和我们的目标之间劫持；</p> <p><img src="/docs/docs_image/software/network/network2github03.png" alt=""></p> <p>这是网友从国内测试正常恢复之后的tcproute：</p> <p><img src="/docs/docs_image/software/network/network2github04.png" alt=""></p> <p>我对图上的cert有点好奇，为啥到6月就过期，所以看看我自己的</p> <p><img src="/docs/docs_image/software/network/network2github05.png" alt=""></p> <p>可以看到因为我最近前两天刚换成了cloudflare的dns解析，所以显示的cert是cloudflare颁发的，不过我有点好奇的是，我以为只是dns解析交给cloudflare，
但是https cert是github page自己的呢，这个不是很熟悉，以后再研究下</p> <p>然后我对网友的tcproute结果不太明白，所以自己验证了下</p> <p>tcproute -p 443 github.io</p> <p><img src="/docs/docs_image/software/network/network2github06.png" alt=""></p> <p>果然github.io是同一个ip网段，不过我有点不明白的是，中间人如果劫持了，一样可以放行流量到达github page，tcp route里面从哪看出来这里没有中间人呢？
还是说如果有中间人tcproute的内容会不同，我看了下网友提供的他认为是劫持的tcproute截图，不同点是remote ip也就是终点是不同的ip段，我才想起来，
我们这里是指定了443端口的请求，中间人劫持的正是443，可能tcproute用的这个协议本身（是IMCP?)并不存在流量放行的问题，谁劫持的就到他那里，
如果是用浏览器打开目标网站，劫持者的cert是非法的，浏览器会提示危险，但是如果我们手动或者电脑设置自动放行，会拿到劫持者的cert，
但是http流量到中间人那里肯定是会放行通过的，毕竟中间人的目的不是阻塞流量，而是在中间监听流量，所以我猜应该是因为如此，所以从tcproute 443的终点就能看出来是否被劫持，
终点也自然是劫持者的位置；</p> <h2 id="more"><a href="#more" class="header-anchor">#</a> more</h2> <p>参考：</p> <p>https://twitter.com/FledgeXu/status/1243073941138096129</p> <p>https://twitter.com/chenshaoju/status/1243078679380426753</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.c3c7b76a.js" defer></script><script src="/docs/assets/js/2.dc5756d7.js" defer></script><script src="/docs/assets/js/53.fc3bfede.js" defer></script>
  </body>
</html>

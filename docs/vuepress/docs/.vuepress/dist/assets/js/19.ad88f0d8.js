(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{221:function(e,t,a){"use strict";a.r(t);var s=a(0),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[a("a",{attrs:{href:"/docs/software"}},[e._v("回目录")]),e._v("  《java实用基础》")]),e._v(" "),a("h2",{attrs:{id:"_1-install"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-install"}},[e._v("#")]),e._v(" 1.Install")]),e._v(" "),a("p",[e._v("Jdk vs Openjdk")]),e._v(" "),a("p",[e._v("https://www.oracle.com/technetwork/java/javase/downloads/index.html\narchive\nhttps://www.oracle.com/technetwork/java/javase/downloads/java-archive-javase8-2177648.html")]),e._v(" "),a("p",[e._v("Runtime source: rt.jar\t/java/jre18XXX/lib")]),e._v(" "),a("p",[e._v("UBUNTU")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo add-apt-repository ppa:openjdk-r/ppa\nsudo apt-get update\nsudo apt-get install openjdk-8-jdk\napt-cache search jdk\nexport JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64/\nexport PATH=$PATH:$JAVA_HOME/bin\njava -version\n")])])]),a("h2",{attrs:{id:"_2-tools-ide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-tools-ide"}},[e._v("#")]),e._v(" 2.Tools&IDE")]),e._v(" "),a("h3",{attrs:{id:"_2-1-decompiler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-decompiler"}},[e._v("#")]),e._v(" 2.1 Decompiler")]),e._v(" "),a("p",[e._v("Reverse class to view code http://java-decompiler.github.io/\n分析JVM\t\nJVisualVM https://www.cnblogs.com/xifengxiaoma/p/9402497.html\nJava ServiceabilityAgent(HSDB)使用和分析\nhttps://liuzhengyang.github.io/2017/05/27/serviceabilityagent/")]),e._v(" "),a("h3",{attrs:{id:"_2-2-cmdline"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-cmdline"}},[e._v("#")]),e._v(" 2.2 Cmdline")]),e._v(" "),a("p",[e._v("https://stackoverflow.com/questions/19843096/how-to-debug-a-java-application-without-access-to-the-source-code/58555431#58555431\nhttps://stackoverflow.com/questions/3668379/use-a-jar-with-source-as-source-for-jdb/58603802#58603802\njava -cp vs java -jar\nhttps://stackoverflow.com/questions/11922681/differences-between-java-cp-and-java-jar\n基本区别就是，如果jar包，比如springboot的包将依赖都已经打入了META-INF，则用-jar，否则如果需要依赖外部的lib，则需要用cp指定classpath\njava -server -jar *.jar\njava程序启动参数-D含义详解 https://www.cnblogs.com/grefr/p/6087955.html\nJdb\nhttps://stackoverflow.com/questions/20018866/specifying-sourcepath-in-jdb-what-am-i-doing-wrong")]),e._v(" "),a("p",[e._v("Debug jar file")]),e._v(" "),a("p",[e._v("~~\njdb -sourcepath -classpath com.quantdo.framework.websocket.WebSocketApplication\njava -jar -agentlib:jdwp=transport=dt_shmem,address=jdbconn,server=y,suspend=n C:\\Workspace\\EclipseWorkspace\\quantdo-websocket\\quantdo-websocket.jar\njdb -attach jdbconn\njdb -sourcepath BOOT-INF/classes/ -classpath . org.springframework.boot.loader.JarLauncher\n~~")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("\njdb -sourcepath BOOT-INF/classes/ -classpath .;BOOT-INF/classes/\nstop at com.quantdo.framework.websocket.endpoint.GeneralWebSocketEndpoint:54\nstop at com.quantdo.framework.websocket.handler.DefaultWebSocketMessageHandler:32\nstop in DefaultWebSocketMessageHandler.receiveMessage\nstop in com.quantdo.framework.websocket.endpoint.GeneralWebSocketEndpoint.onMessage\nstop in com.alibaba.fastjson.parser.JSONLexerBase.scanString\n\t  public final void scanString() {\n\t  public String scanString(char expectNextChar) {\nstop at com.alibaba.fastjson.parser.JSONLexerBase:880\nrun org.springframework.boot.loader.JarLauncher\n\njdb -sourcepath BOOT-INF/classes/ -classpath .;BOOT-INF/classes/;BOOT-INF/lib/\n\tstop at com.quantdo.framework.cache.autoconfigure.support.WebsocketMessageListener:35\n\tstop at org.springframework.data.redis.listener.RedisMessageListenerContainer:968\n\tstop at com.quantdo.framework.websocket.endpoint.GeneralWebSocketEndpoint:54\nstop at com.quantdo.framework.websocket.handler.DefaultWebSocketMessageHandler:32\nstop at com.alibaba.fastjson.parser.JSONLexerBase:880\nrun org.springframework.boot.loader.JarLauncher\n\nnext\ncont\nstep up\nstep out\nlocals\nprint \nwhere\nwhere all\nlist\nthreads\nthread <THREADID>\n\n")])])]),a("p",[a("img",{attrs:{src:"/docs/docs_image/software/java/java01.png",alt:"测试例子"}})]),e._v(" "),a("p",[e._v("Refer:\nhttps://docs.oracle.com/javase/8/docs/technotes/tools/unix/jdb.html\nhttp://hengyunabc.github.io/spring-boot-application-start-analysis/\nhttps://www.oschina.net/question/1263216_2267259\nhttps://blog.csdn.net/arkblue/article/details/39718947\nhttps://www.bilibili.com/read/cv1844967/")]),e._v(" "),a("h3",{attrs:{id:"_2-3-ide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-ide"}},[e._v("#")]),e._v(" 2.3 IDE")]),e._v(" "),a("p",[e._v("Eclipse/STS\nProject Explorer-> Projects Presentation (select hierarchy)")]),e._v(" "),a("h4",{attrs:{id:"_2-3-1-folder-structure"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1-folder-structure"}},[e._v("#")]),e._v(" 2.3.1 Folder structure")]),e._v(" "),a("p",[e._v("**About resources folder\nMissing resources: manually create resources folder in src/main, and then Manve->update project\nsrc/main/resources https://stackoverflow.com/questions/18875635/cant-access-files-from-src-main-resources-via-a-test-case")]),e._v(" "),a("p",[e._v('New Maven project -> Tick "Create a simple project(skip archetype selection) [auto create resource folder]\nhttps://stackoverflow.com/questions/49351806/eclipse-adds-an-exclusion-pattern-of-to-src-main-resources-how-to-read-a-res')]),e._v(" "),a("p",[e._v("**Missing src/test/java\nmanual add in file system, then in java build path, remove first, then Add Folder")]),e._v(" "),a("h4",{attrs:{id:"_2-3-2-compiler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2-compiler"}},[e._v("#")]),e._v(" 2.3.2 compiler")]),e._v(" "),a("p",[e._v("**default compiler & project build path & runtime/debug JRE& compiler compliance\nSet project compiler compliance settings to 1.7 Set project JRE build path entry to 'JavaSE-1.7' https://docs.infor.com/help_m3_coreit_13.4/index.jsp?topic=%2Fcom.lawson.help.administration%2Fcom.lawson.help.makag-w_10.1.2%2FL157071229479555.html")]),e._v(" "),a("p",[e._v("java->Compiler/Installed JREs")]),e._v(" "),a("p",[e._v("run config-> maven build->maven debug-> jre")]),e._v(" "),a("p",[e._v("show jdk version that maven dependent on: mvn -version")]),e._v(" "),a("h4",{attrs:{id:"_2-3-3-debug"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-3-debug"}},[e._v("#")]),e._v(" 2.3.3 Debug")]),e._v(" "),a("p",[e._v("**Remote Debug(attach jar)\nhttps://stackoverflow.com/questions/6855520/attach-debugger-to-application-using-eclipse/23297651\nConfg:\nRemote Java Application->Connect\n&\nRemote Java Application->Source\nthen Start jar and expose port:\njava -Xdebug -Xrunjdwp:transport=dt_socket,address=127.0.0.1:8008,server=y,suspend=y -jar target\\test.jar")]),e._v(" "),a("p",[e._v('For remote debug war hosting in remote tomcat:\nvim /etc/tomcat/tomcat.conf\nJAVA_OPTS or CATALINA_OPTS="-Xdebug -Xrunjdwp:transport=dt_socket,address=10001,server=y,suspend=n"\nFailed using port 8000')]),e._v(" "),a("p",[e._v("For mvn project another way can be found in Maven->debug below")]),e._v(" "),a("p",[e._v("**Debug into jar without sourcecode using decompiler\nMy original post\nhttps://stackoverflow.com/questions/58534925/eclipse-not-decompile-rt-jar-when-debugging-but-idea-does/58535553#58535553\nFor eclipse install:\nEnhanced Class Decompiler https://ecd-plugin.github.io/ecd/ or jd plugin http://java-decompiler.github.io/\nHaven’t try another one Bytecode Visualizer https://www.crowdstrike.com/blog/native-java-bytecode-debugging-without-source-code/\nFor intellj idea, it’s auto:")]),e._v(" "),a("p",[e._v("**Run external jar")]),e._v(" "),a("p",[e._v("Program-> create -> Locatoin:jdk/java.exe Argument:-jar XXX.jar")]),e._v(" "),a("p",[e._v("But how to debug ? can try woring with jdb.exe\nhttps://docs.oracle.com/javase/7/docs/technotes/tools/windows/jdb.html\nhttps://stackoverflow.com/questions/19843096/how-to-debug-a-java-application-without-access-to-the-source-code/58555431#58555431")]),e._v(" "),a("p",[e._v("java -jar -agentlib:jdwp=transport=dt_shmem,address=jdbconn,server=y,suspend=n C:\\Workspace\\EclipseWorkspace\\test.jar")]),e._v(" "),a("p",[e._v("Debug dependencies, keep in mind that don’t set debugger in project view, change to debugger view and set it")]),e._v(" "),a("hr"),e._v(" "),a("p",[e._v("todo")]),e._v(" "),a("p",[e._v("-agentlib VS -X")]),e._v(" "),a("hr"),e._v(" "),a("p",[e._v("ref:")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/PlamenStilyianov/Java/blob/master/Charlie%20Hunt%2C%20Binu%20John%20-%20Java%20Performance%20-%202011.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("圣经《JAVA Performance》"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=o.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{246:function(e,t,n){"use strict";n.r(t);var a=n(0),o=Object(a.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("p",[e._v("LINK:\thttps://github.com/apache/predictionio\nhttps://predictionio.apache.org\nPredicitonIO: Build and Deploy ML Applications in a Fraction of the Time https://www.youtube.com/watch?v=yO0GcgpCyqk&t=2s")]),e._v(" "),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/bigdata/machinelearning_pio01.png",alt:""}})]),e._v(" "),n("p",[e._v("Multiple Events and Multiple Algorithms https://predictionio.apache.org/templates/similarproduct/multi-events-multi-algos/\nPredictionIO CLI Cheatsheet actionml.com/docs/pio_cli_cheatsheet\nhttp://blog.monokkel.io/introduction-to-predictionio-by-example/")]),e._v(" "),n("p",[e._v("https://blog.openshift.com/day-4-predictionio-how-to-build-a-blog-recommender/")]),e._v(" "),n("h2",{attrs:{id:"_1-set-up-on-ubuntu"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-set-up-on-ubuntu"}},[e._v("#")]),e._v(" 1.Set up(on ubuntu)")]),e._v(" "),n("h3",{attrs:{id:"_1-1-host-selection"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-host-selection"}},[e._v("#")]),e._v(" 1.1 Host Selection")]),e._v(" "),n("p",[n("strong",[e._v("Run on virtualbox")])]),e._v(" "),n("p",[e._v("Method 1:\nDownload https://www.virtualbox.org/wiki/Linux_Downloads\nDpkg install\nhttps://www.virtualbox.org/manual/ch02.html#install-linux-host\nMethod 2:\nhttps://tecadmin.net/install-oracle-virtualbox-on-ubuntu/")]),e._v(" "),n("p",[e._v("Ref:\n[SOLVED] Setting up VirtualBox-5.1 and vboxconfig failing on Fedora24 https://forums.virtualbox.org/viewtopic.php?f=7&t=78826\nhttps://askubuntu.com/questions/900118/vboxdrv-sh-failed-modprobe-vboxdrv-failed-please-use-dmesg-to-find-out-why\nhttps://stegard.net/2016/10/virtualbox-secure-boot-ubuntu-fail/\nhttp://blog.csdn.net/ziven2012/article/details/24244457")]),e._v(" "),n("p",[e._v("https://forums.virtualbox.org/viewtopic.php?f=7&t=77363&p=360166&hilit=ubuntu+modprob#p360166\nsudo mokutil --disable-validation\nhttps://wiki.ubuntu.com/SecurityTeam/SecureBoot")]),e._v(" "),n("p",[e._v("Tips:\nSudo apt-get remove virtualbox-{version}\nDisable secure boot\nwww.rodsbooks.com/efi-bootloaders/secureboot.html#disablea\nhttps://askubuntu.com/questions/815252/disabling-uefi-on-a-running-ubuntu-system")]),e._v(" "),n("p",[n("strong",[e._v("Try run HDP sandbox")]),e._v("\nhttps://hortonworks.com/downloads/#data-platform")]),e._v(" "),n("p",[n("strong",[e._v("Run on Docker")])]),e._v(" "),n("p",[e._v("https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/#trusty-1404")]),e._v(" "),n("p",[e._v("https://askubuntu.com/questions/938869/docker-run-ubuntu-bin-bash-vs-docker-run-ubuntu")]),e._v(" "),n("p",[e._v("https://stackoverflow.com/questions/39169403/systemd-and-systemctl-within-ubuntu-docker-images")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("Docker images\nDocker ps -a\nDocker rm ‘’\nDocker run -it ‘’ bash\nDocker exec -it ‘’ bash\nDocker login\nDocker pull\n")])])]),n("h3",{attrs:{id:"_1-2-install-predictionio"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-install-predictionio"}},[e._v("#")]),e._v(" 1.2 Install PredictionIO")]),e._v(" "),n("p",[e._v("Tips:\nRefer to other Dockerfile https://github.com/steveny2k/docker-predictionio/blob/master/Dockerfile\nRefer to other pio-env.sh https://github.com/steveny2k/docker-predictionio/blob/master/files/pio-env.sh")]),e._v(" "),n("h4",{attrs:{id:"_1-2-1-try-docker-images"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-try-docker-images"}},[e._v("#")]),e._v(" 1.2.1 try docker images")]),e._v(" "),n("p",[e._v("Failed because of low version, doesn’t match with the template\nhttps://github.com/steveny2k/docker-predictionio (the version not latest)")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("docker run -it -p 8000:8000 steveny/predictionio /bin/bash\npio-start-all\njps -l\nPio status\nApt-get install git\npip install -U setuptools\n")])])]),n("p",[e._v("https://github.com/pypa/pip/issues/1064")]),e._v(" "),n("h4",{attrs:{id:"_1-2-2-try-local-deployment-through-heroku"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-try-local-deployment-through-heroku"}},[e._v("#")]),e._v(" 1.2.2 try local deployment through heroku")]),e._v(" "),n("p",[e._v("Failed because it charges during the process\nhttps://github.com/heroku/predictionio-buildpack/blob/master/DEV.md\nhttps://github.com/heroku/predictionio-engine-ur\nRequirements\n●\tHeroku account\n●\tHeroku CLI, command-line tools\n●\tgit")]),e._v(" "),n("p",[e._v("https://dashboard.heroku.com/apps")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("root@be0576bd8d4e:/home/workspace/engine-dir# wget -qO- https://cli-assets.heroku.com/install-ubuntu.sh | sh\nroot@be0576bd8d4e:/home/workspace/engine-dir/pio-engine-ur# heroku create $ENGINE_NAME\nCreating app... !\n ▸\tInvalid credentials provided.\nEnter your Heroku credentials:\nEmail: lyhistory@gmail.com\nPassword: ********\nCreating app... done, ⬢ obscure-wave-35511\nhttps://obscure-wave-35511.herokuapp.com/ | https://git.heroku.com/obscure-wave-35511.git\n")])])]),n("h4",{attrs:{id:"_1-2-3-build-from-src"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-3-build-from-src"}},[e._v("#")]),e._v(" 1.2.3 Build from src")]),e._v(" "),n("p",[e._v("http://predictionio.incubator.apache.org/install/install-sourcecode/")]),e._v(" "),n("p",[n("strong",[e._v("1.2.3.1 Install java")])]),e._v(" "),n("p",[e._v("http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\nexport JAVA_HOME=/usr/local/java/jdk1.8.0_151\nexport PATH=$JAVA_HOME/bin:$PATH")]),e._v(" "),n("p",[n("strong",[e._v("1.2.3.2 Install postgresql")])]),e._v(" "),n("p",[e._v("https://www.postgresql.org/download/linux/ubuntu/\nHow To Install and Use PostgreSQL on Ubuntu 16.04 https://www.digitalocean.com/community/tutorials/how-to-install-and-use-postgresql-on-ubuntu-16-04\nhttps://dba.stackexchange.com/questions/50906/why-wont-postgresql-9-3-start-on-ubuntu\n#/etc/init.d/postgresql start\nSwitch account: su postgres\nPostgres\nPsql")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("root@be0576bd8d4e:/home/workspace/postgresql# /etc/init.d/postgresql start\n * Starting PostgreSQL 9.6 database server                                                                                                                                                       \t[ OK ]\nroot@be0576bd8d4e:/home/workspace/postgresql# ps -ef | grep post\npostgres  6367 \t0  0 08:35 ?    \t00:00:00 /usr/lib/postgresql/9.6/bin/postgres -D /var/lib/postgresql/9.6/main -c config_file=/etc/postgresql/9.6/main/postgresql.conf\npostgres  6369  6367  0 08:35 ?    \t00:00:00 postgres: 9.6/main: checkpointer process   \npostgres  6370  6367  0 08:35 ?    \t00:00:00 postgres: 9.6/main: writer process   \npostgres  6371  6367  0 08:35 ?    \t00:00:00 postgres: 9.6/main: wal writer process   \npostgres  6372  6367  0 08:35 ?    \t00:00:00 postgres: 9.6/main: autovacuum launcher process   \npostgres  6373  6367  0 08:35 ?    \t00:00:00 postgres: 9.6/main: stats collector process   \nroot  \t6387  6332  0 08:36 pts/1\t00:00:00 grep --color=auto post\nroot@be0576bd8d4e:/home/workspace/postgresql# postgres\nbash: postgres: command not found\nroot@be0576bd8d4e:/home/workspace/postgresql# su postgres\npostgres@be0576bd8d4e:/home/workspace/postgresql$ psql\n\n")])])]),n("p",[n("strong",[e._v("1.2.3.3 install PredictionIO")])]),e._v(" "),n("ul",[n("li",[e._v("Step 1 make distribution:")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("docker cp /home/lyhistory/Downloads/apache-predictionio-0.12.0-incubating.tar.gz.asc frosty_wescoff:/home/workspace\n\ngpg --import KEYS\ngpg --verify apache-predictionio-0.12.0-incubating.tar.gz.asc apache-predictionio-0.12.0-incubating.tar.gz\n\ntar zxvf apache-predictionio-0.12.0-incubating.tar.gz -C ./apache-predictionio-0.12.0-incubating/\n\nexport JAVA_HOME=/usr/local/java/jdk1.8.0_151\nexport PATH=$JAVA_HOME/bin:$PATH\n./make-distribution.sh\n")])])]),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/bigdata/machinelearning_pio02.png",alt:""}})]),e._v(" "),n("ul",[n("li",[e._v("Step 2 Spark config:")])]),e._v(" "),n("p",[e._v("http://spark.apache.org/\nSpark-2.1.1-bin-hadoop2.6.tgz\nPredictionIO-0.12.0-incubating/conf/pio-env.sh and change the SPARK_HOME")]),e._v(" "),n("ul",[n("li",[e._v("Step 3 Storage:")])]),e._v(" "),n("ol",[n("li",[n("p",[e._v("Postgresql 9.6 refer to 4.3.2")])]),e._v(" "),n("li",[n("p",[e._v("Mysql")])])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("Docker pull mysql:5.7\t\thttps://hub.docker.com/_/mysql/\ndocker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci\ndocker run --name mysql -e MYSQL_ROOT_PASSWORD=password -d mysql:5.7 --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci\n\n$PIO_HOME/lib/mysql-connector jar\nCreate pio db\n")])])]),n("ol",{attrs:{start:"3"}},[n("li",[e._v("HBase and Elasticsearch\nElasticsearch-5.5.2.tar.gz:\nPredictionIO-0.12.0-incubating/conf/pio-env.sh and change the PIO_STORAGE_SOURCES_ELASTICSEARCH_HOME\nHbase-1.2.6-bin.tar.gz:\nhttp://www.apache.org/dyn/closer.cgi/hbase/1.2.6/hbase-1.2.6-bin.tar.gz\nPredictionIO-0.12.0-incubating/conf/pio-env.sh and change the PIO_STORAGE_SOURCES_HBASE_HOME")])]),e._v(" "),n("p",[e._v("Edit PredictionIO-0.12.0-incubating/vendors/hbase-1.2.6/conf/hbase-site.xml.")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("<configuration>\n  <property>\n    <name>hbase.rootdir</name>\n    <value>file:///home/abc/PredictionIO-0.12.0-incubating/vendors/hbase-1.2.6/data</value>\n  </property>\n  <property>\n    <name>hbase.zookeeper.property.dataDir</name>\n    <value>/home/abc/PredictionIO-0.12.0-incubating/vendors/hbase-1.2.6/zookeeper</value>\n  </property>\n</configuration>\n\n")])])]),n("p",[e._v("Edit PredictionIO-0.12.0-incubating/vendors/hbase-1.2.6/conf/hbase-env.sh to set JAVA_HOME for the cluster. For example:")]),e._v(" "),n("p",[e._v("export JAVA_HOME=/usr/local/java/jdk1.8.0_151")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("root@be0576bd8d4e:/home/workspace/apache-predictionio-0.12.0-incubating# PredictionIO-0.12.0-incubating/bin/pio status\n[INFO] [Management$] Inspecting PredictionIO...\n[INFO] [Management$] PredictionIO 0.12.0-incubating is installed at /home/workspace/apache-predictionio-0.12.0-incubating/PredictionIO-0.12.0-incubating\n[INFO] [Management$] Inspecting Apache Spark...\n[INFO] [Management$] Apache Spark is installed at /home/workspace/apache-predictionio-0.12.0-incubating/PredictionIO-0.12.0-incubating/vendors/spark-2.1.1-bin-hadoop2.6\n[INFO] [Management$] Apache Spark 2.1.1 detected (meets minimum requirement of 1.3.0)\n[INFO] [Management$] Inspecting storage backend connections...\n[INFO] [Storage$] Verifying Meta Data Backend (Source: ELASTICSEARCH)...\n[INFO] [Storage$] Verifying Model Data Backend (Source: LOCALFS)...\n[INFO] [Storage$] Verifying Event Data Backend (Source: HBASE)...\n[INFO] [Storage$] Test writing to Event Store (App Id 0)...\n[INFO] [HBLEvents] The namespace pio_event doesn't exist yet. Creating now...\n[INFO] [HBLEvents] The table pio_event:events_0 doesn't exist yet. Creating now...\n[INFO] [HBLEvents] Removing table pio_event:events_0...\n[INFO] [Management$] Your system is all ready to go.\n\n")])])]),n("h4",{attrs:{id:"_1-2-4-use-existing-pio-image"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-4-use-existing-pio-image"}},[e._v("#")]),e._v(" 1.2.4 Use existing pio image")]),e._v(" "),n("p",[n("strong",[e._v("Step 1: Set static ip")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("apt-get install openssh-server\n\nConfigure Node Networking https://www.swiftstack.com/docs/install/configure_networking.html\ncat /etc/network/interfaces\n# interfaces(5) file used by ifup(8) and ifdown(8)\nauto lo\niface lo inet loopback\n\n# The primary network interface\nauto eth0\niface eth0 inet static\n\taddress 1.2.3.4\n\tnetmask 255.255.255.0\n\t#network 10.0.0.0\n\t#broadcast 10.20.130.255\n\tgateway 1.2.3.254\n\tdns-nameservers 8.8.8.8\n\t#dns-domain acme.com\n\t#dns-search acme.com\n\n")])])]),n("p",[n("strong",[e._v("Step 2: Setup docker mysql:5.7")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("Docker pull mysql:5.7\n\nsudo docker run -d --name mysql_dev \\\n-p 3306:3306 \\\n-e MYSQL_ROOT_PASSWORD=password \\\n-d mysql:5.7\n\nsudo docker exec -ti mysql_dev mysql -uroot -ppassword\n\ncreate database pio DEFAULT CHARSET utf8 COLLATE utf8_general_ci;\nCREATE USER 'pio'@'localhost' IDENTIFIED BY 'pio';\nCREATE USER 'pio'@'%' IDENTIFIED BY 'pio';\nGRANT ALL ON *.* TO 'pio'@'localhost';\nGRANT ALL ON *.* TO 'pio'@'%';\nflush privileges;\n\nExit\n\nReset mysql container:\ndocker rm -f mysql_dev\n\n")])])]),n("p",[n("strong",[e._v("Step 3: Setup docker predictionio:0.12.0")])]),e._v(" "),n("ol",[n("li",[e._v("Load predictionio image:")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("scp root@10.20.130.83:/root/*.xz ./\n\npxz -cd ./pio-0.12.0.tar.xz | sudo docker load\n")])])]),n("ol",{attrs:{start:"2"}},[n("li",[n("p",[e._v("Download sample template - MyRecommendation:\ngit clone https://github.com/apache/incubator-predictionio-template-recommender.git MyRecommendation")])]),e._v(" "),n("li",[n("p",[e._v("Config vendor:")])])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("scp root@10.20.130.83:/root/*.gz ./\nHbase-1.1.2\nSpark-2.1.0-bin-hadoop2.7\nzookeeper\n")])])]),n("p",[n("strong",[e._v("Step 4: Run and config PIO")])]),e._v(" "),n("ol",[n("li",[e._v("conf/pio-env.sh:")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("sudo docker run -ti -p 7080:7070 -p 8110:8000 \\\n-v $(readlink -e ~/PIO/vendors):/PredictionIO-0.12.0-incubating/vendors \\\n-v $(readlink -e ~/MyRecommendation):/MyRecommendation \\\n--link mysql_dev \\\n--name pio_$(whoami) \\\npio:0.12.0 bash\n")])])]),n("p",[e._v("Then check linked folders: MyRecommendation and vendors\nTry ping mysql_dev container servicep")]),e._v(" "),n("p",[e._v("Config pio:")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("MYSQL_JDBC_DRIVER=$PIO_HOME/lib/mysql-connector-java-5.1.41.jar\nPIO_STORAGE_REPOSITORIES_METADATA_NAME=pio_meta\nPIO_STORAGE_REPOSITORIES_METADATA_SOURCE=MYSQL\n\nPIO_STORAGE_REPOSITORIES_EVENTDATA_NAME=pio_event\nPIO_STORAGE_REPOSITORIES_EVENTDATA_SOURCE=HBASE\n\nPIO_STORAGE_REPOSITORIES_MODELDATA_NAME=pio_model\nPIO_STORAGE_REPOSITORIES_MODELDATA_SOURCE=MYSQL\nPIO_STORAGE_SOURCES_MYSQL_TYPE=jdbc\nPIO_STORAGE_SOURCES_MYSQL_URL=jdbc:mysql://mysql_dev:3306/pio?autoReconnect=true (here we use the cointainer name instead of ip, if you want to use ip, you can find it by docker inspect mysql_dev)\nPIO_STORAGE_SOURCES_MYSQL_USERNAME=pio\nPIO_STORAGE_SOURCES_MYSQL_PASSWORD=pio\nPIO_STORAGE_SOURCES_HBASE_TYPE=hbase\nPIO_STORAGE_SOURCES_HBASE_HOME=$PIO_HOME/vendors/hbase-${HBASE_VERSION}\n")])])]),n("ol",{attrs:{start:"2"}},[n("li",[n("p",[e._v("start pio and check status")])]),e._v(" "),n("li",[n("p",[e._v("new app and import data")])])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('pio app new MyApp1\n\ncurl -i -X POST http://localhost:7070/events.json?accessKey=$ACCESS_KEY \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "event" : "rate",\n  "entityType" : "user",\n  "entityId" : "u0",\n  "targetEntityType" : "item",\n  "targetEntityId" : "i0",\n  "properties" : {\n    "rating" : 5\n  }\n  "eventTime" : "2014-11-02T09:39:45.618-08:00"\n}\'\n\ncurl -i -X POST http://localhost:7070/events.json?accessKey=$ACCESS_KEY \\\n-H "Content-Type: application/json" \\\n-d \'{\n  "event" : "buy",\n  "entityType" : "user",\n  "entityId" : "u1",\n  "targetEntityType" : "item",\n  "targetEntityId" : "i2",\n  "eventTime" : "2014-11-10T12:34:56.123-08:00"\n}\'\n\ncurl -i -X GET "http://localhost:7070/events.json?accessKey=$ACCESS_KEY"\n\ncurl https://raw.githubusercontent.com/apache/spark/master/data/mllib/sample_movielens_data.txt --create-dirs -o data/sample_movielens_data.txt\npython data/import_eventserver.py --access_key $ACCESS_KEY\n\nhttp://10.20.130.54:7080/events.json?accessKey=VDKnyk6NsoztkfoJCRD0Ym--gn6mgP78jtaOvGQjJHWVCPk_3MNUYOTas-pVyAm3\n')])])]),n("p",[n("strong",[e._v("Step 5: build and deploy")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("Pio build --verbose\nPio train\nPio deploy\n")])])]),n("h2",{attrs:{id:"_2-quick-start-predictionio"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-quick-start-predictionio"}},[e._v("#")]),e._v(" 2. Quick start predictionio")]),e._v(" "),n("p",[e._v("http://predictionio.incubator.apache.org/templates/recommendation/quickstart/")]),e._v(" "),n("p",[e._v("PATH=$PATH:/home/workspace/apache-predictionio-0.12.0-incubating/PredictionIO-0.12.0-incubating/bin; export PATH")]),e._v(" "),n("p",[e._v("HBASE SHELL\nhttp://hbase.apache.org/book.html#quickstart\nhttp://www.tutorialspoint.com/hbase/hbase_shell.htm")]),e._v(" "),n("p",[e._v("Elasticsearch\nhttps://www.elastic.co/guide/en/elasticsearch/hadoop/master/configuration.html#cfg-network")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('root@be0576bd8d4e:/home/workspace/engine-dir/MyRecommendation# pio app new MyApp1\n[INFO] [HBLEvents] The table pio_event:events_1 doesn\'t exist yet. Creating now...\n[INFO] [App$] Initialized Event Store for this app ID: 1.\n[INFO] [Pio$] Created a new app:\n[INFO] [Pio$]   \tName: MyApp1\n[INFO] [Pio$]     \tID: 1\n[INFO] [Pio$] Access Key: UyQifiuvbOYcOJJArkNZZ6HJYQoD-FhiO22Bvk19zsy7RLo4EuLUkEe_PWPNNz5N\nroot@be0576bd8d4e:/home/workspace/engine-dir/MyRecommendation#\n\nACCESS_KEY=UyQifiuvbOYcOJJArkNZZ6HJYQoD-FhiO22Bvk19zsy7RLo4EuLUkEe_PWPNNz5N\n\nroot@be0576bd8d4e:/home/workspace/engine-dir/MyRecommendation# curl -i -X POST http://localhost:7070/events.json?accessKey=$ACCESS_KEY \\\n> -H "Content-Type: application/json" \\\n> -d \'{\n>   "event" : "rate",\n>   "entityType" : "user",\n>   "entityId" : "u0",\n>   "targetEntityType" : "item",\n>   "targetEntityId" : "i0",\n>   "properties" : {\n> \t"rating" : 5\n>   }\n>   "eventTime" : "2014-11-02T09:39:45.618-08:00"\n> }\'\nHTTP/1.1 201 Created\nServer: spray-can/1.3.3\nDate: Sun, 12 Nov 2017 13:34:55 GMT\nContent-Type: application/json; charset=UTF-8\nContent-Length: 57\n\n{"eventId":"illrLcpg1dDE2bvZZ1NpggAAAUlxl11SrFjDLEi9C6A"}root@be0576bd8d4e:/home/workspace/engine-dir/MyRecommendation# curl -i -X GET "http://localhost:7070/events.json?accessKey=$ACCESS_KEY"\nHTTP/1.1 200 OK\nServer: spray-can/1.3.3\nDate: Sun, 12 Nov 2017 13:35:35 GMT\nContent-Type: application/json; charset=UTF-8\nContent-Length: 270\n\n[{"eventId":"illrLcpg1dDE2bvZZ1NpggAAAUlxl11SrFjDLEi9C6A","event":"rate","entityType":"user","entityId":"u0","targetEntityType":"item","targetEntityId":"i0","properties":{"rating":5},"eventTime":"2014-11-02T09:39:45.618-08:00","creationTime":"2017-11-12T13:34:54.933Z"}]root@be0576bd8d4e:/home/workspace/engine-dir/MyRecommendation#\nroot@be0576bd8d4e:/home/workspace/engine-dir/MyRecommendation# curl -i -X POST http://localhost:7070/events.json?accessKey=$ACCESS_KEY \\\n> -H "Content-Type: application/json" \\\n> -d \'{\n>   "event" : "buy",\n>   "entityType" : "user",\n>   "entityId" : "u1",\n>   "targetEntityType" : "item",\n>   "targetEntityId" : "i2",\n>   "eventTime" : "2014-11-10T12:34:56.123-08:00"\n> }\'\nHTTP/1.1 201 Created\nServer: spray-can/1.3.3\nDate: Sun, 12 Nov 2017 13:36:09 GMT\nContent-Type: application/json; charset=UTF-8\nContent-Length: 57\n\n{"eventId":"Z0813DMQIKz7N4VGxZhmngAAAUmbap37v3QoMu7STuI"}root@be0576bd8d4e:/home/workspace/engine-dir/MyRecommendation# curl -i -X POST http://localhost:7070/events.json?accessKey=$ACCESS_KEY -H "Content-root@be0576bd8d4e:/home/workspace/engine-dir/MyRecommendation# curl -i -X GET "http://localhost:7070/events.json?accessKey=$ACCESS_KEY"\nHTTP/1.1 200 OK\nServer: spray-can/1.3.3\nDate: Sun, 12 Nov 2017 13:36:15 GMT\nContent-Type: application/json; charset=UTF-8\nContent-Length: 528\n\n[{"eventId":"Z0813DMQIKz7N4VGxZhmngAAAUmbap37v3QoMu7STuI","event":"buy","entityType":"user","entityId":"u1","targetEntityType":"item","targetEntityId":"i2","properties":{},"eventTime":"2014-11-10T12:34:56.123-08:00","creationTime":"2017-11-12T13:36:08.992Z"},{"eventId":"illrLcpg1dDE2bvZZ1NpggAAAUlxl11SrFjDLEi9C6A","event":"rate","entityType":"user","entityId":"u0","targetEntityType":"item","targetEntityId":"i0","properties":{"rating":5},"eventTime":"2014-11-02T09:39:45.618-08:00","creationTime":"2017-11-12T13:34:54.933Z"}]root@be0576bd8d4e:/home/workspace/engine-dir/MyRecommendation#\nroot@be0576bd8d4e:/home/workspace/engine-dir/MyRecommendation#\n\n')])])]),n("p",[e._v("http://172.17.0.2:7070/events.json?accessKey=UyQifiuvbOYcOJJArkNZZ6HJYQoD-FhiO22Bvk19zsy7RLo4EuLUkEe_PWPNNz5N")]),e._v(" "),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/bigdata/machinelearning_pio03.png",alt:""}})]),e._v(" "),n("p",[n("strong",[e._v("interact with python sdk")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("Install python\napt-get install -y python-pip\npip install --upgrade pip\npip install -U setuptools\nInstall python sdk\npip install predictionio\n\nImport data:\nroot@be0576bd8d4e:/home/workspace/engine-dir/MyRecommendation# curl https://raw.githubusercontent.com/apache/spark/master/data/mllib/sample_movielens_data.txt --create-dirs -o data/sample_movielens_data.txt\n  % Total\t% Received % Xferd  Average Speed   Time\tTime \tTime  Current\n                             \tDload  Upload   Total   Spent\tLeft  Speed\n100 14351  100 14351\t0 \t0  17275  \t0 --:--:-- --:--:-- --:--:-- 17290\nroot@be0576bd8d4e:/home/workspace/engine-dir/MyRecommendation# ls\nLICENSE.txt  README.md  build.sbt  data  engine.json  project  src  template.json\nroot@be0576bd8d4e:/home/workspace/engine-dir/MyRecommendation# ls\nLICENSE.txt  README.md  build.sbt  data  engine.json  project  src  template.json\nroot@be0576bd8d4e:/home/workspace/engine-dir/MyRecommendation# ls -l\ntotal 40\n-rw-r--r-- 1 root root 11358 Nov 12 13:17 LICENSE.txt\n-rw-r--r-- 1 root root  1233 Nov 12 13:17 README.md\n-rw-r--r-- 1 root root   280 Nov 12 13:17 build.sbt\ndrwxr-xr-x 2 root root  4096 Nov 12 14:09 data\n-rw-r--r-- 1 root root   384 Nov 12 13:17 engine.json\ndrwxr-xr-x 2 root root  4096 Nov 12 13:17 project\ndrwxr-xr-x 3 root root  4096 Nov 12 13:17 src\n-rw-r--r-- 1 root root\t53 Nov 12 13:17 template.json\nroot@be0576bd8d4e:/home/workspace/engine-dir/MyRecommendation# python data/import_eventserver.py --access_key $ACCESS_KEY\nNamespace(access_key='UyQifiuvbOYcOJJArkNZZ6HJYQoD-FhiO22Bvk19zsy7RLo4EuLUkEe_PWPNNz5N', file='./data/sample_movielens_data.txt', url='http://localhost:7070')\nImporting data...\n1501 events are imported.\nroot@be0576bd8d4e:/home/workspace/engine-dir/MyRecommendation#\n\npio build --verbose\npio train\n")])])]),n("p",[e._v("To get the docker container ip address\ndocker inspect ForPredictionIO")]),e._v(" "),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/bigdata/machinelearning_pio04.png",alt:""}}),e._v(" "),n("img",{attrs:{src:"/docs/docs_image/software/bigdata/machinelearning_pio05.png",alt:""}})]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("docker container commit ForPredictionIO lyhistory/predictionio-0.12.0:deployed\ndocker push lyhistory/predictionio-0.12.0:deployed\ndocker save lyhistory/predictionio-0.12.0:deployed > /home/lyhistory/workspace/lyhistory_predictionio-0.12.0_tag_deployed.tar\nPxz ***.tar  -- to make the size smaller\n")])])]),n("h2",{attrs:{id:"_3-developement"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-developement"}},[e._v("#")]),e._v(" 3. Developement")]),e._v(" "),n("p",[e._v("IDE\nhttps://www.jetbrains.com/help/idea/installing-and-launching.html")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("vi PredictionIO-0.12.0-incubating/conf/pio-env.sh\n\nPredictionIO-0.12.0-incubating/bin/pio-start-all\nPredictionIO-0.12.0-incubating/bin/pio-stop-all\nPredictionIO-0.12.0-incubating/bin/pio status\n\n/opt/idea-IC-172.4343.14/bin/idea.sh\n")])])]),n("p",[n("img",{attrs:{src:"/docs/docs_image/software/bigdata/machinelearning_pio06.png",alt:""}})]),e._v(" "),n("h2",{attrs:{id:"_4-troubleshooting"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-troubleshooting"}},[e._v("#")]),e._v(" 4. TroubleShooting")]),e._v(" "),n("p",[e._v("Basic idea:\nRefer to other people’s setting, for example docker images settings\nCheck the log for detailed info\nMake sure the service has been started")]),e._v(" "),n("h3",{attrs:{id:"_4-1-jps-not-a-command"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-jps-not-a-command"}},[e._v("#")]),e._v(" 4.1 jps not a command")]),e._v(" "),n("p",[e._v("export JAVA_HOME=/usr/local/java/jdk1.8.0_151\nexport PATH=$JAVA_HOME/bin:$PATH\nOr because hbase not running properly, restart it.")]),e._v(" "),n("h3",{attrs:{id:"_4-2-connection-refused"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-connection-refused"}},[e._v("#")]),e._v(" 4.2 connection refused")]),e._v(" "),n("p",[e._v("Check service status, find elasticsearch not running, then go to check the log:\nCat ~/pio.log")]),e._v(" "),n("p",[e._v("Go to check :\ncat PredictionIO-0.12.0-incubating/vendors/elasticsearch-5.5.2/logs/predictionio.log")]),e._v(" "),n("p",[e._v("And then try manually start elasticsearch\nPredictionIO-0.12.0-incubating/vendors/elasticsearch-5.5.2/bin/elasticsearch\nGet the same error -- details")]),e._v(" "),n("p",[e._v('When using the root user, Elasticsearch cannot be started due to "don\'t run elasticsearch as root"')]),e._v(" "),n("p",[e._v("Then try this solution:\nRun ElasticSearch 5 as Root\nhttp://www.peecy.org/run-elasticsearch-5-as-root/")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("git clone -b v5.5.2 https://github.com/elastic/elasticsearch.git\nvi core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java\nwget https://services.gradle.org/distributions/gradle-3.4-all.zip\nunzip gradle-3.4-all.zip\nexport GRADLE_HOME=~/tmp/gradle-3.4\nexport PATH=${GRADLE_HOME}/bin:${PATH}\ngradle assemble\n")])])]),n("p",[e._v("Build failed, upgrade gradle\nhttps://services.gradle.org/distributions/")]),e._v(" "),n("p",[e._v("gradle assemble build error\nUpgrade gradle version")]),e._v(" "),n("p",[e._v("How to clear gradle cache?\nRm -r .gradle/\nhttps://stackoverflow.com/questions/23025433/how-to-clear-gradle-cache")]),e._v(" "),n("p",[e._v("cp /home/workspace/elasticsearch/distribution/tar/build/distributions/elasticsearch-5.5.2-SNAPSHOT.tar.gz .")]),e._v(" "),n("p",[e._v("tar zxvfC elasticsearch-5.5.2-SNAPSHOT.tar.gz PredictionIO-0.12.0-incubating/vendors/\nTry to run it\nPredictionIO-0.12.0-incubating/vendors/elasticsearch-5.5.2-SNAPSHOT/bin/elasticsearch")]),e._v(" "),n("p",[e._v("Failed to connect to localhost port 9200\nSometimes it may happen that:\nThis error is normal in the beginning since it takes a bit for elasticsearch to start up.\nBut eventually it will go away.\nIf the problem persists, please attach the entire output so that I can see what is wrong.")]),e._v(" "),n("h3",{attrs:{id:"_4-3-host-machine-run-out-space"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-host-machine-run-out-space"}},[e._v("#")]),e._v(" 4.3 host machine run out space")]),e._v(" "),n("p",[e._v("The host is ubuntu, and docker defalut location/storage is in ‘/’ folder, but initially I only allocated 20 G to ‘/’,\nSo I have to use Gparted(Live CD) to do resize, it’s very dangerous to move unallocated space around /boot, so you need to prepared to fix the booting issue, check https://gparted.org/faq.php\nSo finally I resize ‘/’ to 70G\nAnother lesson here is try to set the docker default location to /home, as normally we will allocate very large space to /home\nhttps://stackoverflow.com/questions/19234831/where-are-docker-images-stored-on-the-host-machine")]),e._v(" "),n("h3",{attrs:{id:"_4-4-others"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-others"}},[e._v("#")]),e._v(" 4.4 others:")]),e._v(" "),n("p",[e._v("Key not found PIO_STORAGE_SOURCES__TYPE\nWrong spelling, case sensitive")]),e._v(" "),n("p",[e._v("run firefox")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("root@be0576bd8d4e:/usr/bin# firefox\nError: GDK_BACKEND does not match available displays\nhttps://linuxmeerkat.wordpress.com/2014/10/17/running-a-gui-application-in-a-docker-container/\n\napt-get install xvfb\n\nroot@be0576bd8d4e:/usr/bin# Xvfb :1 -screen 0 1024x768x16 &> xvfb.log  &\n[1] 4113\nroot@be0576bd8d4e:/usr/bin# ps aux | grep X\nroot   \t705  0.9 14.6 5774512 2386180 pts/1 Sl   13:02   0:31 /usr/local/java/jdk1.8.0_151/bin/java -Xms2g -Xmx2g -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -XX:+AlwaysPreTouch -server -Xss1m -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -Djdk.io.permissionsUseCanonicalPath=true -Dio.netty.noUnsafe=true -Dio.netty.noKeySetOptimization=true -Dio.netty.recycler.maxCapacityPerThread=0 -Dlog4j.shutdownHookEnabled=false -Dlog4j2.disable.jmx=true -Dlog4j.skipJansi=true -XX:+HeapDumpOnOutOfMemoryError -Des.path.home=/home/workspace/apache-predictionio-0.12.0-incubating/PredictionIO-0.12.0-incubating/vendors/elasticsearch-5.5.2-SNAPSHOT -cp /home/workspace/apache-predictionio-0.12.0-incubating/PredictionIO-0.12.0-incubating/vendors/elasticsearch-5.5.2-SNAPSHOT/lib/* org.elasticsearch.bootstrap.Elasticsearch -d -p /home/workspace/apache-predictionio-0.12.0-incubating/PredictionIO-0.12.0-incubating/es.pid\nroot   \t806  1.0  1.9 6106224 321684 pts/1  Sl   13:02   0:33 /usr/local/java/jdk1.8.0_151/bin/java -Dproc_master -XX:OnOutOfMemoryError=kill -9 %p -XX:+UseConcMarkSweepGC -XX:PermSize=128m -XX:MaxPermSize=128m -Dhbase.log.dir=/home/workspace/apache-predictionio-0.12.0-incubating/PredictionIO-0.12.0-incubating/vendors/hbase-1.2.6/bin/../logs -Dhbase.log.file=hbase--master-be0576bd8d4e.log -Dhbase.home.dir=/home/workspace/apache-predictionio-0.12.0-incubating/PredictionIO-0.12.0-incubating/vendors/hbase-1.2.6/bin/.. -Dhbase.id.str= -Dhbase.root.logger=INFO,RFA -Dhbase.security.logger=INFO,RFAS org.apache.hadoop.hbase.master.HMaster start\nroot  \t4113  0.3  0.2 215656 32832 pts/2\tSl   13:57   0:00 Xvfb :1 -screen 0 1024x768x16\nroot  \t4121  0.0  0.0  11284   968 pts/2\tS+   13:57   0:00 grep --color=auto X\nroot@be0576bd8d4e:/usr/bin#\n")])])]),n("p",[e._v("Build error:\nScala version\nhttps://stackoverflow.com/questions/42622587/no-engine-found-your-build-might-have-failed-aborting-predictionio\nPredictionio version and template version")]),e._v(" "),n("p",[e._v("Hadoop: Cannot use Jps command https://stackoverflow.com/questions/11738070/hadoop-cannot-use-jps-command\nhttps://medium.com/@nidhisatrawala1992/thank-you-vaghawan-ojha-7afaea05a27d")])])}),[],!1,null,null,null);t.default=o.exports}}]);
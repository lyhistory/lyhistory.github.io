<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>计算机基础教程</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script async="true" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9742852210287449" crossorigin="anonymous"></script>
    <script>
			(function() { // DON'T EDIT BELOW THIS LINE
			
			})();
		 </script>
    <meta name="description" content="软件开发教程，白帽黑客入门教程，区块链入门教程，物联网，大数据">
    
    <link rel="preload" href="/docs/assets/css/0.styles.4f35daf1.css" as="style"><link rel="preload" href="/docs/assets/js/app.eb95b5f4.js" as="script"><link rel="preload" href="/docs/assets/js/2.74f698db.js" as="script"><link rel="preload" href="/docs/assets/js/101.1fe13bd7.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.5dc12144.js"><link rel="prefetch" href="/docs/assets/js/100.7f4b86a1.js"><link rel="prefetch" href="/docs/assets/js/102.be0576d4.js"><link rel="prefetch" href="/docs/assets/js/103.c1d23275.js"><link rel="prefetch" href="/docs/assets/js/104.bc284dda.js"><link rel="prefetch" href="/docs/assets/js/105.49c95bed.js"><link rel="prefetch" href="/docs/assets/js/106.173898bb.js"><link rel="prefetch" href="/docs/assets/js/107.9914d8b7.js"><link rel="prefetch" href="/docs/assets/js/108.fb8df160.js"><link rel="prefetch" href="/docs/assets/js/109.6596d7d5.js"><link rel="prefetch" href="/docs/assets/js/11.4fc81637.js"><link rel="prefetch" href="/docs/assets/js/110.01aaba11.js"><link rel="prefetch" href="/docs/assets/js/111.64b70f00.js"><link rel="prefetch" href="/docs/assets/js/112.39415806.js"><link rel="prefetch" href="/docs/assets/js/113.49c4d59b.js"><link rel="prefetch" href="/docs/assets/js/114.20d8fdd3.js"><link rel="prefetch" href="/docs/assets/js/115.cc34f7e6.js"><link rel="prefetch" href="/docs/assets/js/116.0f123d7d.js"><link rel="prefetch" href="/docs/assets/js/117.5e7af620.js"><link rel="prefetch" href="/docs/assets/js/118.d96c6c51.js"><link rel="prefetch" href="/docs/assets/js/119.e9e6cfcb.js"><link rel="prefetch" href="/docs/assets/js/12.9a5db83c.js"><link rel="prefetch" href="/docs/assets/js/120.71f66d2c.js"><link rel="prefetch" href="/docs/assets/js/121.da3ff76d.js"><link rel="prefetch" href="/docs/assets/js/122.309d5bf9.js"><link rel="prefetch" href="/docs/assets/js/123.d8f69475.js"><link rel="prefetch" href="/docs/assets/js/124.d44d5f25.js"><link rel="prefetch" href="/docs/assets/js/125.17ff41ca.js"><link rel="prefetch" href="/docs/assets/js/126.b14ea9dd.js"><link rel="prefetch" href="/docs/assets/js/127.6f763223.js"><link rel="prefetch" href="/docs/assets/js/128.827e9a44.js"><link rel="prefetch" href="/docs/assets/js/129.b8ade6e2.js"><link rel="prefetch" href="/docs/assets/js/13.abf8056a.js"><link rel="prefetch" href="/docs/assets/js/130.2ba6bcbe.js"><link rel="prefetch" href="/docs/assets/js/131.22ade7c8.js"><link rel="prefetch" href="/docs/assets/js/132.e2122cc7.js"><link rel="prefetch" href="/docs/assets/js/133.5a57e1f0.js"><link rel="prefetch" href="/docs/assets/js/134.a204c2cd.js"><link rel="prefetch" href="/docs/assets/js/135.29f5fb9c.js"><link rel="prefetch" href="/docs/assets/js/136.913e2b23.js"><link rel="prefetch" href="/docs/assets/js/137.f174529d.js"><link rel="prefetch" href="/docs/assets/js/138.6b4d05ed.js"><link rel="prefetch" href="/docs/assets/js/139.4ac409fb.js"><link rel="prefetch" href="/docs/assets/js/14.df69d06f.js"><link rel="prefetch" href="/docs/assets/js/140.c32bda4c.js"><link rel="prefetch" href="/docs/assets/js/141.7084b1cf.js"><link rel="prefetch" href="/docs/assets/js/142.32109d01.js"><link rel="prefetch" href="/docs/assets/js/143.97866cc9.js"><link rel="prefetch" href="/docs/assets/js/144.812ee011.js"><link rel="prefetch" href="/docs/assets/js/145.8d118422.js"><link rel="prefetch" href="/docs/assets/js/146.40664698.js"><link rel="prefetch" href="/docs/assets/js/147.67544ca0.js"><link rel="prefetch" href="/docs/assets/js/148.0ba50a79.js"><link rel="prefetch" href="/docs/assets/js/149.14f83262.js"><link rel="prefetch" href="/docs/assets/js/15.5d235ff2.js"><link rel="prefetch" href="/docs/assets/js/150.3d20ac4f.js"><link rel="prefetch" href="/docs/assets/js/151.27b05986.js"><link rel="prefetch" href="/docs/assets/js/152.a2b17410.js"><link rel="prefetch" href="/docs/assets/js/153.06846b80.js"><link rel="prefetch" href="/docs/assets/js/154.7a42ff49.js"><link rel="prefetch" href="/docs/assets/js/155.92acac9b.js"><link rel="prefetch" href="/docs/assets/js/156.6bc08c73.js"><link rel="prefetch" href="/docs/assets/js/157.90698a4b.js"><link rel="prefetch" href="/docs/assets/js/158.bc9912fd.js"><link rel="prefetch" href="/docs/assets/js/159.523fa0c6.js"><link rel="prefetch" href="/docs/assets/js/16.988c3585.js"><link rel="prefetch" href="/docs/assets/js/160.53f6574c.js"><link rel="prefetch" href="/docs/assets/js/161.ae1c91df.js"><link rel="prefetch" href="/docs/assets/js/162.5da20713.js"><link rel="prefetch" href="/docs/assets/js/163.35776ae3.js"><link rel="prefetch" href="/docs/assets/js/164.dfb360ce.js"><link rel="prefetch" href="/docs/assets/js/165.c6bc6fa0.js"><link rel="prefetch" href="/docs/assets/js/166.31039769.js"><link rel="prefetch" href="/docs/assets/js/167.5a519731.js"><link rel="prefetch" href="/docs/assets/js/168.ce098549.js"><link rel="prefetch" href="/docs/assets/js/169.0724263c.js"><link rel="prefetch" href="/docs/assets/js/17.ddaa3ca2.js"><link rel="prefetch" href="/docs/assets/js/170.76a60b0b.js"><link rel="prefetch" href="/docs/assets/js/171.00fca51d.js"><link rel="prefetch" href="/docs/assets/js/172.0e8a7e9a.js"><link rel="prefetch" href="/docs/assets/js/173.ab2c03af.js"><link rel="prefetch" href="/docs/assets/js/174.ec88a457.js"><link rel="prefetch" href="/docs/assets/js/175.0ff7e34d.js"><link rel="prefetch" href="/docs/assets/js/176.4a2ccbc1.js"><link rel="prefetch" href="/docs/assets/js/177.c2755fbf.js"><link rel="prefetch" href="/docs/assets/js/178.196af4fb.js"><link rel="prefetch" href="/docs/assets/js/179.a2278434.js"><link rel="prefetch" href="/docs/assets/js/18.91bd4c01.js"><link rel="prefetch" href="/docs/assets/js/180.d6ea0b24.js"><link rel="prefetch" href="/docs/assets/js/181.a0ce1c1f.js"><link rel="prefetch" href="/docs/assets/js/182.dec33df4.js"><link rel="prefetch" href="/docs/assets/js/183.e70066cc.js"><link rel="prefetch" href="/docs/assets/js/184.4e8521b7.js"><link rel="prefetch" href="/docs/assets/js/185.2b02fefa.js"><link rel="prefetch" href="/docs/assets/js/186.d76a46eb.js"><link rel="prefetch" href="/docs/assets/js/187.ed82871a.js"><link rel="prefetch" href="/docs/assets/js/188.ee8fa42c.js"><link rel="prefetch" href="/docs/assets/js/189.c6dc701a.js"><link rel="prefetch" href="/docs/assets/js/19.5157bc55.js"><link rel="prefetch" href="/docs/assets/js/190.e58e2e58.js"><link rel="prefetch" href="/docs/assets/js/191.334f5732.js"><link rel="prefetch" href="/docs/assets/js/192.233fcaf7.js"><link rel="prefetch" href="/docs/assets/js/193.0fcef2e8.js"><link rel="prefetch" href="/docs/assets/js/194.04766046.js"><link rel="prefetch" href="/docs/assets/js/195.5f7fc5a4.js"><link rel="prefetch" href="/docs/assets/js/196.c38f581d.js"><link rel="prefetch" href="/docs/assets/js/197.b1d2d8ec.js"><link rel="prefetch" href="/docs/assets/js/198.47a58363.js"><link rel="prefetch" href="/docs/assets/js/199.1cfc3625.js"><link rel="prefetch" href="/docs/assets/js/20.0dd84d6d.js"><link rel="prefetch" href="/docs/assets/js/200.2052143b.js"><link rel="prefetch" href="/docs/assets/js/201.2ba93892.js"><link rel="prefetch" href="/docs/assets/js/202.df056a38.js"><link rel="prefetch" href="/docs/assets/js/203.1d3cc94d.js"><link rel="prefetch" href="/docs/assets/js/204.312f292d.js"><link rel="prefetch" href="/docs/assets/js/205.4cf294ae.js"><link rel="prefetch" href="/docs/assets/js/206.7c3f7563.js"><link rel="prefetch" href="/docs/assets/js/207.ae5c2717.js"><link rel="prefetch" href="/docs/assets/js/208.16073286.js"><link rel="prefetch" href="/docs/assets/js/209.0c12499d.js"><link rel="prefetch" href="/docs/assets/js/21.519f3748.js"><link rel="prefetch" href="/docs/assets/js/210.007947e3.js"><link rel="prefetch" href="/docs/assets/js/211.4e37ff96.js"><link rel="prefetch" href="/docs/assets/js/212.75faac87.js"><link rel="prefetch" href="/docs/assets/js/213.936945a6.js"><link rel="prefetch" href="/docs/assets/js/214.dbb472e2.js"><link rel="prefetch" href="/docs/assets/js/215.9a98dc4e.js"><link rel="prefetch" href="/docs/assets/js/216.72832a36.js"><link rel="prefetch" href="/docs/assets/js/217.00c3eb53.js"><link rel="prefetch" href="/docs/assets/js/218.152be3a1.js"><link rel="prefetch" href="/docs/assets/js/219.43901809.js"><link rel="prefetch" href="/docs/assets/js/22.7ac554a6.js"><link rel="prefetch" href="/docs/assets/js/220.23a5c43b.js"><link rel="prefetch" href="/docs/assets/js/221.f37db1e2.js"><link rel="prefetch" href="/docs/assets/js/222.05bc3fb4.js"><link rel="prefetch" href="/docs/assets/js/223.620d4263.js"><link rel="prefetch" href="/docs/assets/js/224.a9553f89.js"><link rel="prefetch" href="/docs/assets/js/225.e6e8bae5.js"><link rel="prefetch" href="/docs/assets/js/226.208e1e3c.js"><link rel="prefetch" href="/docs/assets/js/227.41106f25.js"><link rel="prefetch" href="/docs/assets/js/228.68c0dfb2.js"><link rel="prefetch" href="/docs/assets/js/229.482e446f.js"><link rel="prefetch" href="/docs/assets/js/23.9b6e5076.js"><link rel="prefetch" href="/docs/assets/js/230.e4c35614.js"><link rel="prefetch" href="/docs/assets/js/231.4c7715f1.js"><link rel="prefetch" href="/docs/assets/js/232.18c3a23b.js"><link rel="prefetch" href="/docs/assets/js/233.9677d74e.js"><link rel="prefetch" href="/docs/assets/js/234.ab865597.js"><link rel="prefetch" href="/docs/assets/js/235.ee15ec86.js"><link rel="prefetch" href="/docs/assets/js/236.0efbdb31.js"><link rel="prefetch" href="/docs/assets/js/237.5861d1f5.js"><link rel="prefetch" href="/docs/assets/js/238.b9645674.js"><link rel="prefetch" href="/docs/assets/js/239.76c632f6.js"><link rel="prefetch" href="/docs/assets/js/24.dcffcd2e.js"><link rel="prefetch" href="/docs/assets/js/240.a53e2240.js"><link rel="prefetch" href="/docs/assets/js/241.5fa0ad02.js"><link rel="prefetch" href="/docs/assets/js/242.f2aeae24.js"><link rel="prefetch" href="/docs/assets/js/243.64dd2149.js"><link rel="prefetch" href="/docs/assets/js/244.3690622e.js"><link rel="prefetch" href="/docs/assets/js/245.f4e1148a.js"><link rel="prefetch" href="/docs/assets/js/246.291b3cbf.js"><link rel="prefetch" href="/docs/assets/js/247.bccea2ab.js"><link rel="prefetch" href="/docs/assets/js/248.ae7d0258.js"><link rel="prefetch" href="/docs/assets/js/249.992f4b77.js"><link rel="prefetch" href="/docs/assets/js/25.1bac8f8f.js"><link rel="prefetch" href="/docs/assets/js/250.9ec2ca0d.js"><link rel="prefetch" href="/docs/assets/js/251.6118ca0b.js"><link rel="prefetch" href="/docs/assets/js/252.3d6de76e.js"><link rel="prefetch" href="/docs/assets/js/253.91660db6.js"><link rel="prefetch" href="/docs/assets/js/254.7cb4ade9.js"><link rel="prefetch" href="/docs/assets/js/255.c4fef20c.js"><link rel="prefetch" href="/docs/assets/js/256.3d3c021d.js"><link rel="prefetch" href="/docs/assets/js/257.4301da57.js"><link rel="prefetch" href="/docs/assets/js/258.7f8d0360.js"><link rel="prefetch" href="/docs/assets/js/259.2059e937.js"><link rel="prefetch" href="/docs/assets/js/26.f55c5bc1.js"><link rel="prefetch" href="/docs/assets/js/260.94ff183b.js"><link rel="prefetch" href="/docs/assets/js/261.9cb9710d.js"><link rel="prefetch" href="/docs/assets/js/262.213a87d6.js"><link rel="prefetch" href="/docs/assets/js/263.c2fc87c9.js"><link rel="prefetch" href="/docs/assets/js/264.88458fb0.js"><link rel="prefetch" href="/docs/assets/js/265.4fa3859a.js"><link rel="prefetch" href="/docs/assets/js/266.819d62c7.js"><link rel="prefetch" href="/docs/assets/js/267.b59dd27b.js"><link rel="prefetch" href="/docs/assets/js/268.456f501d.js"><link rel="prefetch" href="/docs/assets/js/269.16b07e85.js"><link rel="prefetch" href="/docs/assets/js/27.bcfe7852.js"><link rel="prefetch" href="/docs/assets/js/270.dfc6ad01.js"><link rel="prefetch" href="/docs/assets/js/271.8a234bd0.js"><link rel="prefetch" href="/docs/assets/js/272.fdf4de6b.js"><link rel="prefetch" href="/docs/assets/js/273.ba001f5a.js"><link rel="prefetch" href="/docs/assets/js/274.b09bf4a6.js"><link rel="prefetch" href="/docs/assets/js/275.730b6c1a.js"><link rel="prefetch" href="/docs/assets/js/276.d1024508.js"><link rel="prefetch" href="/docs/assets/js/277.5d7f9bc3.js"><link rel="prefetch" href="/docs/assets/js/278.1b42f240.js"><link rel="prefetch" href="/docs/assets/js/279.ad5e8906.js"><link rel="prefetch" href="/docs/assets/js/28.08c5f647.js"><link rel="prefetch" href="/docs/assets/js/280.e6d136ff.js"><link rel="prefetch" href="/docs/assets/js/281.c71866a9.js"><link rel="prefetch" href="/docs/assets/js/282.cb16bfa9.js"><link rel="prefetch" href="/docs/assets/js/283.c3fd1003.js"><link rel="prefetch" href="/docs/assets/js/284.f9f2a53e.js"><link rel="prefetch" href="/docs/assets/js/285.f0ab7bd8.js"><link rel="prefetch" href="/docs/assets/js/286.7367af39.js"><link rel="prefetch" href="/docs/assets/js/287.d0652e44.js"><link rel="prefetch" href="/docs/assets/js/288.786aed19.js"><link rel="prefetch" href="/docs/assets/js/289.1f756285.js"><link rel="prefetch" href="/docs/assets/js/29.22cbe029.js"><link rel="prefetch" href="/docs/assets/js/290.40c2f564.js"><link rel="prefetch" href="/docs/assets/js/291.78de684a.js"><link rel="prefetch" href="/docs/assets/js/292.72b10a44.js"><link rel="prefetch" href="/docs/assets/js/293.bcefa1c6.js"><link rel="prefetch" href="/docs/assets/js/294.47434e78.js"><link rel="prefetch" href="/docs/assets/js/295.09a3cc58.js"><link rel="prefetch" href="/docs/assets/js/296.41198a6e.js"><link rel="prefetch" href="/docs/assets/js/297.7505f2bb.js"><link rel="prefetch" href="/docs/assets/js/298.51138de2.js"><link rel="prefetch" href="/docs/assets/js/299.8ba47f47.js"><link rel="prefetch" href="/docs/assets/js/3.f882b9d9.js"><link rel="prefetch" href="/docs/assets/js/30.95aeb808.js"><link rel="prefetch" href="/docs/assets/js/31.66419359.js"><link rel="prefetch" href="/docs/assets/js/32.87ca1949.js"><link rel="prefetch" href="/docs/assets/js/33.408f96d3.js"><link rel="prefetch" href="/docs/assets/js/34.abbcc7a5.js"><link rel="prefetch" href="/docs/assets/js/35.76ac72f7.js"><link rel="prefetch" href="/docs/assets/js/36.a687b6a1.js"><link rel="prefetch" href="/docs/assets/js/37.23b6a370.js"><link rel="prefetch" href="/docs/assets/js/38.ae36ff8d.js"><link rel="prefetch" href="/docs/assets/js/39.22758228.js"><link rel="prefetch" href="/docs/assets/js/4.e4f04a1c.js"><link rel="prefetch" href="/docs/assets/js/40.48e10944.js"><link rel="prefetch" href="/docs/assets/js/41.e0731247.js"><link rel="prefetch" href="/docs/assets/js/42.f0032aa7.js"><link rel="prefetch" href="/docs/assets/js/43.6ecc79d0.js"><link rel="prefetch" href="/docs/assets/js/44.50418c67.js"><link rel="prefetch" href="/docs/assets/js/45.5d3f2687.js"><link rel="prefetch" href="/docs/assets/js/46.d858bbb7.js"><link rel="prefetch" href="/docs/assets/js/47.0a15af62.js"><link rel="prefetch" href="/docs/assets/js/48.a2d17bf5.js"><link rel="prefetch" href="/docs/assets/js/49.e2b7651e.js"><link rel="prefetch" href="/docs/assets/js/5.5ab5be67.js"><link rel="prefetch" href="/docs/assets/js/50.b03bf0c5.js"><link rel="prefetch" href="/docs/assets/js/51.71aaccf9.js"><link rel="prefetch" href="/docs/assets/js/52.6eb50241.js"><link rel="prefetch" href="/docs/assets/js/53.1ac8e9f3.js"><link rel="prefetch" href="/docs/assets/js/54.1a0bdb10.js"><link rel="prefetch" href="/docs/assets/js/55.cd5aa8b7.js"><link rel="prefetch" href="/docs/assets/js/56.a2f2fef0.js"><link rel="prefetch" href="/docs/assets/js/57.9f58d462.js"><link rel="prefetch" href="/docs/assets/js/58.6c6286de.js"><link rel="prefetch" href="/docs/assets/js/59.a7f3a8bc.js"><link rel="prefetch" href="/docs/assets/js/6.a0bc55fb.js"><link rel="prefetch" href="/docs/assets/js/60.a93faca9.js"><link rel="prefetch" href="/docs/assets/js/61.807615f0.js"><link rel="prefetch" href="/docs/assets/js/62.d7973aae.js"><link rel="prefetch" href="/docs/assets/js/63.f6ffa039.js"><link rel="prefetch" href="/docs/assets/js/64.855d2d40.js"><link rel="prefetch" href="/docs/assets/js/65.6edb4e60.js"><link rel="prefetch" href="/docs/assets/js/66.ef63f4ba.js"><link rel="prefetch" href="/docs/assets/js/67.ddd4a237.js"><link rel="prefetch" href="/docs/assets/js/68.f1749c4a.js"><link rel="prefetch" href="/docs/assets/js/69.1b0e8222.js"><link rel="prefetch" href="/docs/assets/js/7.dd83cfca.js"><link rel="prefetch" href="/docs/assets/js/70.f8fe9644.js"><link rel="prefetch" href="/docs/assets/js/71.b87e97b2.js"><link rel="prefetch" href="/docs/assets/js/72.dff110ad.js"><link rel="prefetch" href="/docs/assets/js/73.b0d90c4e.js"><link rel="prefetch" href="/docs/assets/js/74.017c5336.js"><link rel="prefetch" href="/docs/assets/js/75.e68be529.js"><link rel="prefetch" href="/docs/assets/js/76.cc7fc834.js"><link rel="prefetch" href="/docs/assets/js/77.0517dffe.js"><link rel="prefetch" href="/docs/assets/js/78.f3e1b200.js"><link rel="prefetch" href="/docs/assets/js/79.233a0fae.js"><link rel="prefetch" href="/docs/assets/js/8.3d706eaa.js"><link rel="prefetch" href="/docs/assets/js/80.03b4a91c.js"><link rel="prefetch" href="/docs/assets/js/81.e18c5643.js"><link rel="prefetch" href="/docs/assets/js/82.c6a0821c.js"><link rel="prefetch" href="/docs/assets/js/83.0071a187.js"><link rel="prefetch" href="/docs/assets/js/84.9b79b891.js"><link rel="prefetch" href="/docs/assets/js/85.f47fbe25.js"><link rel="prefetch" href="/docs/assets/js/86.06d27691.js"><link rel="prefetch" href="/docs/assets/js/87.3aa8eead.js"><link rel="prefetch" href="/docs/assets/js/88.2a788162.js"><link rel="prefetch" href="/docs/assets/js/89.435d1037.js"><link rel="prefetch" href="/docs/assets/js/9.88c43a60.js"><link rel="prefetch" href="/docs/assets/js/90.db15581c.js"><link rel="prefetch" href="/docs/assets/js/91.da37ddb9.js"><link rel="prefetch" href="/docs/assets/js/92.952f8daf.js"><link rel="prefetch" href="/docs/assets/js/93.edfa4445.js"><link rel="prefetch" href="/docs/assets/js/94.feb36924.js"><link rel="prefetch" href="/docs/assets/js/95.00e51cff.js"><link rel="prefetch" href="/docs/assets/js/96.105fe838.js"><link rel="prefetch" href="/docs/assets/js/97.4b65183c.js"><link rel="prefetch" href="/docs/assets/js/98.6b4adeb5.js"><link rel="prefetch" href="/docs/assets/js/99.0a8431f5.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.4f35daf1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">计算机基础教程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  机器指令
</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link">
  软件基础
</a></div><div class="nav-item"><a href="/docs/coder2hacker/" class="nav-link router-link-active">
  白帽黑客
</a></div><div class="nav-item"><a href="/docs/blockchain/" class="nav-link">
  区块链
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  机器指令
</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link">
  软件基础
</a></div><div class="nav-item"><a href="/docs/coder2hacker/" class="nav-link router-link-active">
  白帽黑客
</a></div><div class="nav-item"><a href="/docs/blockchain/" class="nav-link">
  区块链
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/coder2hacker/attack_vectors/domain_takeover.html#什么是子域名接管-劫持" class="sidebar-link">什么是子域名接管/劫持</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/coder2hacker/attack_vectors/domain_takeover.html#原理" class="sidebar-link">原理</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/coder2hacker/attack_vectors/domain_takeover.html#利用" class="sidebar-link">利用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/coder2hacker/attack_vectors/domain_takeover.html#浏览器的透明性-transparency-to-a-browser" class="sidebar-link">浏览器的透明性 Transparency To a Browser</a></li><li class="sidebar-sub-header"><a href="/docs/coder2hacker/attack_vectors/domain_takeover.html#ssl-certificates" class="sidebar-link">SSL Certificates</a></li><li class="sidebar-sub-header"><a href="/docs/coder2hacker/attack_vectors/domain_takeover.html#cookie-偷窃-升级版xss和csrf" class="sidebar-link">Cookie 偷窃(升级版XSS和CSRF)</a></li><li class="sidebar-sub-header"><a href="/docs/coder2hacker/attack_vectors/domain_takeover.html#e-mails" class="sidebar-link">E-mails</a></li><li class="sidebar-sub-header"><a href="/docs/coder2hacker/attack_vectors/domain_takeover.html#higher-order-risks" class="sidebar-link">Higher Order Risks</a></li></ul></li><li><a href="/docs/coder2hacker/attack_vectors/domain_takeover.html#案例" class="sidebar-link">案例</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/coder2hacker/attack_vectors/domain_takeover.html#防御" class="sidebar-link">防御</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/coder2hacker/attack_vectors/domain_takeover.html#poc" class="sidebar-link">POC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/coder2hacker/attack_vectors/domain_takeover.html#amazon-s3" class="sidebar-link">Amazon S3</a></li><li class="sidebar-sub-header"><a href="/docs/coder2hacker/attack_vectors/domain_takeover.html#github-pages" class="sidebar-link">GitHub Pages</a></li><li class="sidebar-sub-header"><a href="/docs/coder2hacker/attack_vectors/domain_takeover.html#heroku" class="sidebar-link">Heroku</a></li><li class="sidebar-sub-header"><a href="/docs/coder2hacker/attack_vectors/domain_takeover.html#readme-io" class="sidebar-link">Readme.io</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><a href="/docs/coder2hacker">回目录</a>  《子域名接管/劫持 Subdomain Takeover》</p> <h2 id="什么是子域名接管-劫持"><a href="#什么是子域名接管-劫持" class="header-anchor">#</a> 什么是子域名接管/劫持</h2> <p>这是我给的一个比较宽泛的定义：攻击者通过若干手段将目标子域名劫持指向到自己控制的服务或机器上。</p> <p>概括来说就是：利用第三方云服务提供商未对子域名拥有者进行严格验证的漏洞，以及公司内部对DNS记录管理的疏忽，攻击者可以通过在第三方云服务提供商处进行注册和配置目标子域名，从而将其指向攻击者提供的地址，当受害者访问该公司的此子域名时，实际访问的是攻击者的服务，由于受害者无从发现，所以当公司的信誉越高的时候，该漏洞的危害会极大。</p> <h2 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h2> <p>你的一些DNS记录（主要是CNAME）被你开启了zone delegation：</p> <p>https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc771640(v=ws.11)?redirectedfrom=MSDN</p> <p><strong>出现的场景</strong></p> <p>假设你为一个全球企业工作，example.com 是其主域名。因为是21世纪，所以一个重要的任务就是创建和维护在线电商平台。</p> <p>有很多流行的e-commence云供应商 (e.g. Shopify, BigCommerce, Magento, Yokart, Big Kartel)，所以你也是采用了某家的服务，在上面设立了网店. 当年创建和配置好后,e-commerce供应商会分配给你类似这个域名给你的网店:</p> <p>exampleshop.someecommerceplatform.com</p> <p>在分享和推广该域名的时候,这个看起来并不太好,所以你想要它展示你自己的品牌,比如</p> <p>shop.example.com</p> <p>想要达到这个目的,你有两种配置方式:</p> <ol><li>301/302 http 跳转可以帮客户从shop.example.com跳转到exampleshop.someecommerceplatform.com .这个方法不太有吸引力,因为会彻底替换掉用户浏览器导航的url地址</li> <li>配置一个CNAME DNS记录，将DNS解析直接委托给e-commerce供应商，这种方式下，地址栏的url不会改变（当然不是所有供应商都提供这个cname方法）</li></ol> <p>既然CNAME方式比较好一些，所以你可能就选择了这种方式</p> <p>快进到一年以后，贵公司的e-commerce成果惨不忍睹，业绩未达标。运营主管指示你将e-commerce站点下线进行整顿。</p> <p>为了节省资金，你取消了公司订阅的第三方e-commerce平台提供商。所以现在就产生了潜在的子域名接管风险：你很容易忘记去更新或删除掉DNS zone文件中的CNAME记录。</p> <p>底线是，如果你不删除掉CNAME记录，任何人都去你之前那家e-ecommerce供应商上注册一个店铺，然后接管你的 shop.example.com。</p> <p>这种场景可能对你来说是未曾听说过的,实际上,子域名接管确实是刚刚出现不久的威胁, 川普的某网站被黑就是一个例子:</p> <p>http://www.networkworld.com/article/3171732/security/iraqi-hacker-took-credit-for-hijacking-subdomain-and-defacing-trump-site.html</p> <p>当然这个威胁并不限于e-commerce供应商,还包括很多大型云商产业.</p> <p>很多CNAME记录都是指向Amazon AWS或Microsoft Azure。当达到某些特定条件，子域名接管是很容易的。</p> <p>举例Amazon Cloudfront：</p> <p>https://aws.amazon.com/cloudfront/</p> <p>这个是CDN服务，主要是为了分发托管在Amazon Cloudfront Edge服务器上的静态文件：</p> <p>https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/distribution-working-with.html</p> <p>创建一个新的distribution后，AWS会生成一个随机的域名，如：</p> <p>d2erlblaho6777.cloudfront.net</p> <p>你可以通过该域名访问你分发的文件，随机生成的子域名可能看起来是很好的针对子域名接管的防御，但实际上，对于CloudFront确并非如此。</p> <p>问题在于，这并非是1对1的匹配，对于每一个distribution并非都有独立的IPV4地址。CloudFront使用m:n匹配，这意味着这些域名实际上是匹配到更小的CloudFront Edge servers集合上(想一下A记录)，所以这实际上就是一种virtual hosting，CloudFront内部使用一种mapping table来将上面的distribution 域名匹配实际的distribution 内容。如果你很熟悉virtual hosting，你可以说CNAME记录不是那么直接的，web服务器使用HTTP Host header字段来决定它需要服务那个域名。如果你想要使用</p> <p>static.example.com</p> <p>作为子域名替换上面的自动分配的子域名，需要配置一个CNAME记录指向自动分配的域名：</p> <div class="language- extra-class"><pre class="language-text"><code>static.example.com.    600  IN  CNAME  d2erlblaho6777.cloudfront.net.
</code></pre></div><p>但是，如果你直接使用</p> <p>static.example.com</p> <p>CloudFront服务器会在HTTP Host header看到它，所以CloudFront不能将其跟服务器上任何distribution匹配起来，因为这个域名并不在CloudFront内部的mapping table中！这就是为啥CloudFront需要你提供CNAME记录：</p> <p>如果关联这个CNAME的distribution删除了，攻击者可以很简单的通过生成一个新的distribution，设置CNAME，CloudFront的匹配规则会帮攻击者做剩下的事情。</p> <h2 id="利用"><a href="#利用" class="header-anchor">#</a> 利用</h2> <p>子域名接管被认为是高级别的安全威胁，归结为被怀有恶意的他人注册域名并企图控制一个或多个子域名。这呈现出一个有意思的攻击向量，甚至会导致一些其他高级别的安全风险，比如在Arne Swinnen的bug bounty report中解释的认证绕过：</p> <p>https://hackerone.com/reports/172137</p> <p>大多数受影响的云商都采取了各种激进的策略开始缓解这个问题：</p> <p>不允许其他账号注册某个custom domain，比如，如果 takeover.example.com 曾经被账号account1注册过，云商不会允许account2进行注册。</p> <p>增加域名验证，你必须提供证明你是域名的拥有者，这经常是让你增加TXT记录，而攻击者并没有其访问权限。</p> <p>增加熵值，一些服务会生成随机字符串作为CNAME记录的一部分，通常都是有很强的防御作用，因为API的rate限制不允许你进行爆破，或者熵值太长让你无法爆破，AWS ELB就是例子。</p> <p>如何判断云商是否存在子域名接管可能，可以参考：</p> <p>https://github.com/EdOverflow/can-i-take-over-xyz</p> <p>为了计划好可能的升级路径，你需要知道云商允许你怎么玩这个接管的域名，除非你可以将其指向到自己的vps实例，你将会在功能上受到很多限制，比如：</p> <p>Amazon S3 — 允许托管静态内容，但是你不能在后台运行类似python脚本的动态内容。</p> <p>Microsoft Azure CloudApp — 允许指定动态容器，但是，你不能拥有完全控制权。</p> <p>Microsoft TrafficManager — 一旦受害者进行了DNS解析，就允许你指定你自己的A记录，一旦你指定到你自己的VPS实例，你就基本什么都可以干了。</p> <h3 id="浏览器的透明性-transparency-to-a-browser"><a href="#浏览器的透明性-transparency-to-a-browser" class="header-anchor">#</a> 浏览器的透明性 Transparency To a Browser</h3> <p>我们先来看看关于CNAME的DNS解析：</p> <p><img src="/docs/docs_image/coder2hacker/attack_vectors/domain_takeover.png" alt=""></p> <p>注意第七步请求的是sub.example.com 而不是 anotherdomain.com，浏览器甚至都不会意识到anotherdomain.com的存在！</p> <p>虽然是使用了CNAME记录，浏览器的URL地址栏仍然是 sub.example.com 这就是我说的浏览器的透明性。</p> <p>如果你仔细想想，浏览器是完全相信DNS resolver提供的域名准确信息，简单来说，子域名接管实际就是一种针对特定域名的DNS spoofing，为什么？因为任何浏览器对受影响的域名进行DNS解析的时候会接收到攻击者设置的记录，然后浏览器很高兴的将服务器端传回的结果显示出来并认为其是合法的。</p> <p>就钓鱼攻击场景来说，这种域名接管是最完美的，因为攻击者通常是使用 typosquatting 或 所谓的 Doppelganger domain 来模仿合法的域名/网站用来钓鱼，而现在攻击者直接接管了一个合法的域名，这样对于普通户来说基本无法判断其内容是否来自于攻击者。</p> <p>让我们用一个随机银行举例，如果银行的某个子域名存在子域名接管漏洞，攻击者可以创建HTML表单模拟银行系统的登录表单，然后，攻击者可以实施鱼叉攻击spear phishing 或 大规模钓鱼攻击 mass phishing campaign，让用户登录并更改密码，然后攻击者就获取了用户的密码，钓鱼邮件中的url是合法的银行网站子域名，所以用户并不会察觉到有什么异常，而且由于这个域名来自于高可信的银行，邮件系统的spam filter和其他的安全措施基本不会触发spam或malicious。</p> <p>域名本身在成功的攻击中的确有着显著的作用，比如一个5th level子域名比一个2nd level的有着比较好听的名字的子域名会显得有那么一点略少的合法性。我曾经看到过很多完美的子域名钓鱼案例，包括：</p> <div class="language- extra-class"><pre class="language-text"><code>
purchases.SOMETHING.com
www.SOMETHING.com
online.SOMETHING.com
shop.SOMETHING.com
</code></pre></div><p>所有这些都是知名企业。</p> <p>当然，最近的域名接管的钓鱼事件基本都是有着比较长的域名，域名中包含企业名字，比如apple的例子：</p> <p>https://www.phishtank.com/target_search.php?target_id=183&amp;valid=y&amp;active=All&amp;Search=Search</p> <p>有合法的SSL证书（后面会有更多说明），域名以及模仿目标网站的网页中包含企业的关键词，这些都会让用户容易掉到陷阱中。</p> <h3 id="ssl-certificates"><a href="#ssl-certificates" class="header-anchor">#</a> SSL Certificates</h3> <p>上面的攻击可以通过生成合法的SSL证书来加强，证书授权权威比如Let's Encrypt 允许通过内容验证来自动验证域名的拥有者：</p> <p>意思是，如果URL路径中存在特定的一些内容，Let's Encrypt 会通过该域名的证书！因为攻击者已经全权接管了该域名，这个验证分分钟可以搞定，所以攻击者可以给这个域名生成SSL证书，进一步提升钓鱼的成功概率。</p> <p>获取合法的SSL证书是很重要的，当域名指向你的VPS实例，你可以直接使用cerbot获取Let's Encrypt证书，整个过程是自动化的。如果是Amazon Elasticbeanstalk, 你不可以按照cerbot，你仍然可以手动创建一个valid HTTP endpoint，通过Let's Encrypt验证，证书certificates对后面的篇章很重要。</p> <h3 id="cookie-偷窃-升级版xss和csrf"><a href="#cookie-偷窃-升级版xss和csrf" class="header-anchor">#</a> Cookie 偷窃(升级版XSS和CSRF)</h3> <p>这个跟前面的“浏览器的透明性”是一起的，但是有着完全不同的后果。</p> <p>浏览器实现了很多security policies来防御恶意网站的攻击，这包括Same-origin policy，浏览器的一个首要安全任务就是安全储存cookies，为什么？HTTP协议是无状态的，cookies用来追踪sessions，用户常常会选择将会话保存更长的时间以避免短期内反复登录，所以这些cookie就等同于login token，用来提供给web服务器进行身份验证。基于此，一些攻击方法比如session hijacking自然产生。</p> <p>每次请求，浏览器都自动携带保存的cookie，这些cookie通常是issue颁发给请求的这个域名的，但是也有其他情况就是，cookie可以设置为跟子域名共享shared，参考：</p> <p>https://tools.ietf.org/html/rfc6265#section-8.6</p> <p>这种情况常常是网站使用基于cookie的单点登录，使用单点登录，用户可以通过某个子域名站点登录，然后共享该session token，访问其他子域名网站就不需要登录了，设置普通类型cookie的语法如下：</p> <div class="language- extra-class"><pre class="language-text"><code>
HTTP/1.1 200 OK
Set-Cookie: name=value
</code></pre></div><p>如果issued这个cookie的web服务器是 example.com，只有这个服务器可以访问这个cookie，但是这个cookie也可以设置成这样：</p> <div class="language- extra-class"><pre class="language-text"><code>HTTP/1.1 200 OK
Set-Cookie: name=value; domain=example.com
</code></pre></div><p>这个cookie会被携带在发往 example.com 的HTTP请求中，但是同时也可以携带在发往其他子域名比如subdomain.example.com的HTTP请求中，这个行为结合子域名接管会产生高危漏洞，假设某个域名使用了这种类型的cookie，如果发生了子域名接管，攻击者可以搜集用户的session token，唯一需要做的就是诱导用户去访问该子域名，session cookie会自动携带在HTTP请求中。</p> <p>浏览器还实现了关于cookie的其他的一些安全机制，比如</p> <div class="language- extra-class"><pre class="language-text"><code>
HttpOnly cookie — Cookies can by default be accessed by Javascript code running in the context of the website which created the cookies. Javascript can read, update, and delete the cookies. HttpOnly cookie flag (set by the web server) indicates that the particular cookie cannot be accessed by Javascript code. The only way to get it is through HTTP request and response headers.
Secure cookie — When the cookie has the Secure flag set by the web server, it can be communicated back to the web server only if HTTPS is used.
</code></pre></div><p>如果发生了上述攻击，这两个安全机制 HttpOnly和secure flags完全没有任何补救作用，首先HttpOnly只是防范javascript获取cookie，而这里是服务器端直接拿到cookie，至于secure flags，通过前面的讲述，攻击者可以比较轻松生成SSL证书。</p> <p>参考Arne Swinnen在bug bounty提交的子域名接管的Cookie偷窃报告：</p> <p>https://hackerone.com/reports/172137</p> <p>该报告解释了Ubiquiti Networks 存在的子域名(ping.ubnt.com)问题，这个子域名是执行unclaimed AWS CloudFront distribution。因为Ubiquiti Networks 是使用通配符的session cookie实现的单点登录，所以访问ping.ubnt.com的用户的session cookie都会丢失。即使这个域名是指向AWS CloudFront，CloudFront distribution设置允许日志记录下每个请求的cookie，所以这个偷窃cookie的场景就成立了，2017年，Arne还演示了针对Uber单点登录的类似攻击向量：</p> <p>https://www.arneswinnen.net/2017/06/authentication-bypass-on-ubers-sso-via-subdomain-takeover/</p> <p>上面解释的行为不仅仅限于cookie，因为javascript对运行之上的网站有完全控制，如果有能力去替换合法网站的js脚本可能导致很严重的后果，假设使用external provider提供的js代码（使用script tag和src来引用），当external provider过期后，the browser fails silently, i.e.,  对普通用户不会触发任何可见的alerts，如果external code不是干重要的事情（e.g.,只是用来tracking）这种external provider可能默默的在网页上躺尸，如果攻击者接管了过期域名，将攻击内容替换并匹配上网站中的js url路径，就可以获取该网站每个访问者。</p> <p>有一种方法可以保护js的integrity，HTML5引入了Subresource Integrity 即script tag增加一种密码hash属性，如果这个hash跟下载的文件不一致，浏览器会拒绝执行。</p> <p>第一个use-case是展示存储型XSS，很简单，创建html页面：</p> <div class="language- extra-class"><pre class="language-text"><code>alert(document.cookie)
</code></pre></div><p>对于实现了SSO的网站，很容易盗窃用户的session token，从而可以就可以升级到 Account Takeover ，那篇文章中也解释了即使是http only和secure flag也没用，因为可以从我们自己完全控制的vps后台接收浏览器请求中携带的cookie：</p> <div class="language- extra-class"><pre class="language-text"><code>#python3

import Flask

app = flask.Flask(__name__)

@app.route('/')
def gimme_my_cookies():
    return flask.jsonify(flask.request.cookies)

if __name__ == '__main__':
    app.run(port=80)
</code></pre></div><p>另一个use-case就是可以进行钓鱼</p> <p>跟上面的例子类似，CSRF也是需要类似SSO一样的实现（通配符子域名共享cookie），对于使用postMesssage API的inter-app communication也是成立的，js代码负责检测sender并基于sender允许其他action，都是设置为类似 *.example.com 通配符子域名。</p> <p>Arne Swinnen发布过一个report，是关于Authentication Bypass的，我就不解释了，报告在这里：</p> <p>https://hackerone.com/reports/219205</p> <h3 id="e-mails"><a href="#e-mails" class="header-anchor">#</a> E-mails</h3> <p>当CNAME子域名接管成立的时候，攻击者同样可以设置MX记录指向任意web服务器，这允许其接收合法子域名的邮件，特别是对需要攻击者和受害者之间互动的（鱼叉）钓鱼攻击有效。攻击者通常会spoof Return-Path header 来接收邮件的回复，而正确配置MX记录，这个问题就绕过了。</p> <p>另一方面，发送邮件也是可能的，虽然spoof From header来包含到任意邮件地址中很繁琐，SPF filters通常会检查Return-Path header并允许这个域名的mail-sending hosts。SPFT将配置存储在DNS TXT记录中，子域名接管后，TXT记录也在攻击者的控制中，所以SPF 检查可以很容易通过。</p> <p>我前面也提到了这些策略在多数云商上面是行不通的，因为你没有直接的DNS zone的控制权。</p> <h3 id="higher-order-risks"><a href="#higher-order-risks" class="header-anchor">#</a> Higher Order Risks</h3> <p>子域名接管的概念可以很自然延伸到NS记录，如果base domain有至少注册了一个可用的NS记录，source domain名字就有可能存在子域名接管。</p> <p>通过NS记录的子域名接管的一个问题是，source domain名字通常有多个NS记录，多个NS记录通常是为了冗余和负载均衡。DNS resolution之前会随机选择nameserver。假设 sub.example.com 有两个NS记录：ns.vulnerable.com 和 ns.nonvulnerable.com，如果攻击者接管了 ns.vulnerable.com ，从普通用户的角度，如果访问解析 sub.example.com 会发生如下情况：</p> <div class="language- extra-class"><pre class="language-text"><code>1. 因为有两个nameserver，而且是随机选择，意味着查询nameserver结果获得被攻击者控制的可能性是会i50%
2. 如果用户的DNS 让esolver选择了 ns.nonvulnerable.com (合法的nameserver), 返回正确结果，并且会被缓存在某些地方大概6到24个小时。
3. 如果用户的DNS 让esolver选择了 ns.vulnerable.com (攻击者的nameserver), 攻击者返回错误结果并且被缓存，由于攻击者控制着这个nameserver，所以他可以设置更长时间的TTL，比如一周。
</code></pre></div><p>上面的过程每次缓存失效后都会重复，当攻击者设置很高的TTL时，错误的结果会停留在DNS缓存中很长时间，在这段时间内，所有请求到sub.example.com的返回结果都会是攻击者的错误返回；</p> <p>这个结果在某些情况下会更加强，比如如果是使用了公共的DNS resolvers比如google dns，这种情况下，public resolvers很可能也会缓存下错误结果，意味着所有使用相同DNS resolver的用户都会获得错误结果，直到缓存被revoke。</p> <p>除了控制source domain名字，控制所有更高的域名同样有收获，这是因为拥有一个canonical domain名字的NS记录意味着拥source domain名字的完整dns zone。</p> <p>2016年，Matthew Bryant演示了maris.int上通过NS记录的子域名接管：</p> <p>https://thehackerblog.com/the-international-incident-gaining-control-of-a-int-domain-name-with-dns-trickery/index.html</p> <p>这个 .INT 顶级域名是个特殊的TLD， 只有少数域名在用这个顶级域名，Bryant演示即使注册这个域名是需要IANA的独家批准，nameservers 可以设置为任意域名，因为 maris.int 的其中一个nameserver(cobalt.aliis.be)可以被注册，子域名接管在这个严格限制的TLD上同样可行。</p> <p>Matthew 还演示了更高级别的安全攻击：</p> <p>https://thehackerblog.com/the-io-error-taking-control-of-all-io-domains-with-a-targeted-registration/index.html</p> <p>，他可以获得 .IO 顶级域名的nameserver的控制权，获得.IO的控制权意味着控制所有.IO域名的返回结果，在这种情况下，.IO的一个nameserver：ns-a1.io 可以被注册，通过注册 ns-a1.io Bryant可以接收到DNS queries 并且控制其给所有.IO域名的返回！</p> <h2 id="案例"><a href="#案例" class="header-anchor">#</a> 案例</h2> <p>+ Subdomain takeover report for vince.co</p> <p>http://hackerone.com/reports/32825</p> <p>+ Subdomain takeover report for greenhouse.io</p> <p>https://hackerone.com/reports/38007</p> <p>+ Subdomain takeover report for uber.com</p> <p>https://hackerone.com/reports/175070</p> <p>子域名接管-案例 USA.gov https://blog.sweepatic.com/usa-secured-by-sweepatic/</p> <p>子域名接管-案例 通过recon接管Facebook的子域名 https://sudhanshur705.medium.com/how-recon-helped-me-to-to-find-a-facebook-domain-takeover-58163de0e7d5</p> <h2 id="防御"><a href="#防御" class="header-anchor">#</a> 防御</h2> <p>一些风险已经被某些cloud provider默默缓解排除了,但是并非所有cloud provider都会验证域名的ownership，这背后的首要原因就是便捷性，云商不去验证本身并没有过错，应该是由用户本身去监控DNS记录，另一个原因就是当cloud resource删除后，用户通常也不再采用该服务，那么云商有什么理由去管你？</p> <p>当然有一些服务商比如gitlab就意识到子域名接管是个问题，所以实现了域名验证的机制。</p> <p>企业通常在日常工作中不会审计他们的DNS配置，实际上，企业也缺乏标准的流程去添加、更改或移除他们DNS zone file的设置。甚至记录DNS记录变化都不常实施,为了预防子域名接管，企业应该改变基础架构中关于创建和销毁资源的流程，以资源创建为例，DNS记录的创建必须是流程的最后一步，这可以在整个过程中避免DNS记录指向不存在的域名；对于资源销毁，DNS记录应该在流程的第一步就执行删除:</p> <p>1.删除受影响的DNS记录：当这个受影响的记录不再被使用时采取最简单的办法就是从DNS zone删除掉受影响的记录，</p> <p>2.认领域名：重新注册设置回某个云商，如果是普通的internet domain，重新购买回该过期域名。</p> <p>3.预防子域名接管的第一步就是妥善的监控和分析DNS记录，其中很重要的就是开展 subdomain enumeration,建立并维护你的动态digital footprint包括所有dns配置改动是预防此类问题的核心。一些工具如aquatone包含了子域名接管的检查，这种检查应该由企业的安全团队周期性开展来验证没有受影响的域名。</p> <h2 id="poc"><a href="#poc" class="header-anchor">#</a> POC</h2> <p>github上面有不少工具提供子域名接管验证：</p> <p>+ aquatone：https://github.com/michenriksen/aquatone</p> <p>+ SubOver：https://github.com/Ice3man543/SubOver</p> <p>+ subjack：https://github.com/haccer/subjack</p> <p>虽然这些工具提供了关于子域名接管很好的启发，由于很多不同云商的限制，经常还是会出现false positive的结果，下面会给每个domain都提供一个手工的验证脚本，不同类型域名的命名规范如下：</p> <div class="language- extra-class"><pre class="language-text"><code>sub.example.com.    600  IN  CNAME  anotherdomain.com.
</code></pre></div><p>sub.example.com.叫做source domain name，anotherdomain.com.叫做canonical domain name</p> <h3 id="amazon-s3"><a href="#amazon-s3" class="header-anchor">#</a> Amazon S3</h3> <p>Amazon S3 是一个基于桶子概念的存储服务，桶子是存储的逻辑单元，当你创建了桶子之后，一个独立的子域名就会为其产生，是不是听起来很熟悉？</p> <p>Amazon S3 遵循基本上跟CloudFront的virtual hosting一样的概念，你可以读一下S3的 virtual hosting：</p> <p>https://docs.aws.amazon.com/AmazonS3/latest/dev/VirtualHosting.html</p> <p>这里我只想指出一点，S3桶子也许可以配置为网站托管服务来托管静态内容，如果canonical domain名字里含有网站，S3桶子就是作为网站托管服务。我怀疑非网站和网站配置的桶子是被不同的load balancer来handle处理的，所以他们不可以互相替换，唯一的不同是在桶子创建的时候，如有必要需要设置正确的网站标志。</p> <p>验证方法：</p> <p>CNAME记录需要类似：<code>sub.example.com 60 IN CNAME sub.example.s3.amazonaws.net</code></p> <p>我使用如下正则表达式来测试正确的canonical name：</p> <div class="language- extra-class"><pre class="language-text"><code>
# {bucketname}.s3.amazonaws.com
^[a-z0-9\.\-]{0,63}\.?s3.amazonaws\.com$

# {bucketname}.s3-website(.|-){region}.amazonaws.com (+ possible China region)
^[a-z0-9\.\-]{3,63}\.s3-website[\.-](eu|ap|us|ca|sa|cn)-\w{2,14}-\d{1,2}\.amazonaws.com(\.cn)?$

# {bucketname}.s3(.|-){region}.amazonaws.com
^[a-z0-9\.\-]{3,63}\.s3[\.-](eu|ap|us|ca|sa)-\w{2,14}-\d{1,2}\.amazonaws.com$

# {bucketname}.s3.dualstack.{region}.amazonaws.com
^[a-z0-9\.\-]{3,63}\.s3.dualstack\.(eu|ap|us|ca|sa)-\w{2,14}-\d{1,2}\.amazonaws.com$
</code></pre></div><p>验证子域名接管是否存在，使用httpie执行：</p> <div class="language- extra-class"><pre class="language-text"><code>http -b GET http://{SOURCE DOMAIN NAME} | grep -E -q '&lt;Code&gt;NoSuchBucket&lt;/Code&gt;|&lt;li&gt;Code: NoSuchBucket&lt;/li&gt;' &amp;&amp; echo &quot;Subdomain takeover may be possible&quot; || echo &quot;Subdomain takeover is not possible&quot;
</code></pre></div><p>开始接管：</p> <p>（首先你要注册一个AWS账号）</p> <div class="language- extra-class"><pre class="language-text"><code>
1. 进入S3面板 https://s3.console.aws.amazon.com/s3/
2. 点击创建桶子
3. 设置桶子名字为你准备接管的目标域名
4. 多次的点击 Next 直到结束
5. 打开创建好的桶子
6. 点击是上传
7. 选择POC文件（html或txt都行），建议不要用index.html命名，可以使用不带后缀的poc
8. 在Permissions页签下选择 Grant public read access to this object(s)
9. 上传之后，选择该文件并且点击More，选择 Change metadata
10. 点击 Add metadata，选择反应该文件类型的 Content-type和value，比如如果是HTML，选择 text/html，等等。
11. (Optional) 如果桶子配置为站点
1）切换到 Properties tab
2）点击 Static website hosting
3）选择 Use this bucket to host a website
4）作为索引，选择你所上传的文件
5）点击保存
</code></pre></div><p>如果没有任何错误，恭喜，接管成功！如果你上传的是poc，那么访问链接为</p> <p>http://sub.example.com/poc</p> <h3 id="github-pages"><a href="#github-pages" class="header-anchor">#</a> GitHub Pages</h3> <p>GitHub通过GitHub Pages提供免费的托管服务，这种网站一般是作为项目文档，技术博客或开源项目的一些支持网页。除了默认的×.github.io子域名，GitHub页面支持自定义域名。</p> <p>验证方法：</p> <p>CNAME记录需要类似：<code>sub.example.com 60 IN CNAME subexamplecom.github.io</code></p> <p>我使用如下正则表达式来测试正确的canonical name：</p> <p><code>^[a-z0-9\.\-]{0,70}\.?github\.io$</code></p> <p>验证子域名接管是否存在，使用httpie执行：</p> <div class="language- extra-class"><pre class="language-text"><code>
http -b GET http://{SOURCE DOMAIN NAME} | grep -F -q &quot;&lt;strong&gt;There isn't a GitHub Pages site here.&lt;/strong&gt;&quot; &amp;&amp; echo &quot;Subdomain takeover may be possible&quot; || echo &quot;Subdomain takeover is not possible&quot;
</code></pre></div><p>开始接管：</p> <p>（首先你要注册一个GitHub账号）</p> <div class="language- extra-class"><pre class="language-text"><code>
1. 进入创建repository页面
2. 设置Repository名字为canonical域名（如 {something}.github.io）
3. 点击创建repository
4. 将内容通过git推送到这个repo
5. 切换到 Settings页签
6. 在GitHub Pages 部分选择master分支作为source
7. 保存
8. 设置自定义域名Custom domain为要接管的域名
9. 保存
</code></pre></div><h3 id="heroku"><a href="#heroku" class="header-anchor">#</a> Heroku</h3> <p>Heroku 是流行的PasS平台及服务供应商，其有类似其他云商的virtual hosting 概念：不同的 *.herokudns.com 子域名对应着相同的 A 记录集合。跟其他供应商一样，HTTP Host对正确的域名解析domain resolution很重要，还有一种方法是上传自定义域名的certificate（Github Pages不支持，所以你不能使用自定义域名的HTTPS）</p> <p>验证方法：</p> <p>CNAME记录需要类似：<code>sub.example.com 60 IN CNAME subexamplecom.herokudns.com</code></p> <p>我使用如下正则表达式来测试正确的canonical name：</p> <p><code>^[a-z0-9\.\-]{2,70}\.herokudns\.com$</code></p> <p>验证子域名接管是否存在，使用httpie执行：</p> <p><code>http -b GET http://{SOURCE DOMAIN NAME} | grep -F -q &quot;//www.herokucdn.com/error-pages/no-such-app.html&quot; &amp;&amp; echo &quot;Subdomain takeover may be possible&quot; || echo &quot;Subdomain takeover is not possible&quot;</code></p> <p>开始接管：</p> <p>（首先你要注册一个Heroku 账号）</p> <div class="language- extra-class"><pre class="language-text"><code>
1. 打开新建 Heroku app.
2. 选择name 和 region (对接管无影响).
3. 通过git推送POC应用到 Heroku，Deploy 页签有介绍步骤

4. 切换到Settings页面
5. 滚动到 Domains and certificates
6. 点击 Add domain
7. 提供你要接管的域名，点击保存，生效需要一些时间
</code></pre></div><h3 id="readme-io"><a href="#readme-io" class="header-anchor">#</a> Readme.io</h3> <p>Readme.io 是个托管文档的服务，当然跟前面一样，他们也允许custom domain。</p> <p>验证方法：</p> <p>CNAME记录需要类似：<code>sub.example.com 60 IN CNAME subexamplecom.readme.io</code></p> <p>我使用如下正则表达式来测试正确的canonical name：<code>^[a-z0-9\.\-]{2,70}\.readme\.io$</code></p> <p>验证子域名接管是否存在，使用httpie执行：</p> <div class="language- extra-class"><pre class="language-text"><code>http -b GET http://{SOURCE DOMAIN NAME} | grep -F -q &quot;Project doesnt exist... yet!&quot; &amp;&amp; echo &quot;Subdomain takeover may be possible&quot; || echo &quot;Subdomain takeover is not possible&quot;
</code></pre></div><p>开始接管：</p> <p>（首先你要注册一个Readme.io账号）</p> <div class="language- extra-class"><pre class="language-text"><code>
1. 进入dashboard.
2. 设置项目名字和子域名，这里的子域名不需要跟你要接管的域名一致
3. 在左侧边栏，选择General Settings -&gt; Custom Domain，这里设置为你要接管的子域名

4. 保存
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.eb95b5f4.js" defer></script><script src="/docs/assets/js/2.74f698db.js" defer></script><script src="/docs/assets/js/101.1fe13bd7.js" defer></script>
  </body>
</html>
